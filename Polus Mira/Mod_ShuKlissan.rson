{
    "FileID": 573785173,
    "FileVersion": 8,
    "ViewPos.x": -1057,
    "ViewPos.y": -315,
    "ScriptName": "Mod_ShuKlissan",
    "ScriptFileOut": "C:\\Users\\DmitB\\Фиксы\\Universe Redux Fixes\\Mods\\ShusRangers\\ShuKlissan\\DATA\\Script\\Mod_ShuKlissan.scr",
    "ScriptTextOut": "C:\\Users\\DmitB\\Фиксы\\Universe Redux Fixes\\Mods\\ShusRangers\\ShuKlissan\\DATA\\Script\\Mod_ShuKlissan.txt",
    "LangDatIn": "C:\\Users\\DmitB\\Фиксы\\Universe Redux Fixes\\Mods\\ShusRangers\\ShuKlissan\\CFG\\Rus\\Lang.txt",
    "LangDatOut": "C:\\Users\\DmitB\\Фиксы\\Universe Redux Fixes\\Mods\\ShusRangers\\ShuKlissan\\CFG\\Rus\\Lang.dat",
    "MainDatIn": "",
    "MainDatOut": "",
    "CacheDatIn": "",
    "CacheDatOut": "",
    "ExportLang": false,
    "Visual.Objects": 
    [
        {
            "DialogAnswers": 
            [
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 66,
                    "#": 132,
                    "Msg": "<tstr1>",
                    "AMsg.Num": "0"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 67,
                    "#": 133,
                    "Msg": "<tstr1>",
                    "AMsg.Num": "1"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 68,
                    "#": 134,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "2"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 220,
                    "#": 135,
                    "Msg": "Конец связи",
                    "AMsg.Num": "3"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 136,
                    "Msg": "Постой, далани? Значит, до этого ты был на службе у Коалиции?",
                    "AMsg.Num": "4"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 30,
                    "Parent": -1,
                    "#": 137,
                    "Msg": "Дружище, возможно, ты ещё не в курсе, но <clr>Чушкача<clrEnd> больше нет. Власть опять поменялась, и теперь законы устанавливаю <clr>я<clrEnd>",
                    "AMsg.Num": "5"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 138,
                    "Msg": "Сложно сказать, под конец войны враги всё же начали догадываться, откуда могли взяться клисане и как их правильно готовить. Но, постой, далани? Значит, до этого ты был на службе у Коалиции?",
                    "AMsg.Num": "6"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": 30,
                    "Parent": -1,
                    "#": 139,
                    "Msg": "Дружище, возможно, ты ещё не в курсе, но <clr>Чушкача<clrEnd> больше нет. Власть опять поменялась, и теперь законы устанавливаю <clr>я<clrEnd>",
                    "AMsg.Num": "7"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 670,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 140,
                    "Msg": "А тебе-то что с этого всего, <clr>Алакай<clrEnd>? Ты бы не стал обеспечивать такую услугу Клану без личного интереса, даже с учётом того, что те спасли тебя от виселицы. Зная фэянских учёных, они не станут посвящать всю свою жизнь глупой мести. Учитывая то, что ты явно не брезгуешь некоторым числом... Кхм-м, случайных жертв, имеющих место быть при каждой опустошительной клисанской атаке.",
                    "AMsg.Num": "8"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 141,
                    "Msg": "А тебе-то что с этого всего, <clr>Алакай<clrEnd>? Ты бы не стал обеспечивать такую услугу Клану без личного интереса, даже с учётом того, что те спасли тебя от виселицы. Зная фэянских учёных, они не станут посвящать всю свою жизнь глупой мести. Учитывая то, что ты явно не брезгуешь некоторым числом... Кхм-м, случайных жертв, имеющих место быть при каждой опустошительной клисанской атаке.",
                    "AMsg.Num": "9"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 142,
                    "Msg": "Хорошо, <clr>Алакай<clrEnd>, мне нравится твой подход. Как новый Верховный Барон, я позволяю тебе продолжить твои эксперименты. Но тебе придётся попридержать клисан - врагов у нас больше не осталось, поэтому оставайся здесь, и стреляй по тарелочкам. Если тебя устраивают данные условия, то мы определённо подружимся. Но, на всякий случай, имей ввиду, что если я прикажу что-то атаковать - ты должен будешь тут же взять под козырёк и обеспечить мне достойное подкрепление. Без обсуждений.",
                    "AMsg.Num": "10"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 730,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 143,
                    "Msg": "Хорошо, <clr>Алакай<clrEnd>, мне нравится твой подход. Как новый Верховный Барон, я позволяю тебе продолжить твои эксперименты. Но с этого момента ты будешь атаковать только те системы, которые прикажу я лично. Сам понимаешь, субординация в этом сборище маньяков и иного рода негодяев и недоумков превыше всего.",
                    "AMsg.Num": "11"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "takeoff",
                    "Pos.x": 700,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 144,
                    "Msg": "Ты, кажется, всё ещё не понял. Здесь, в Клане, теперь воцарится новый порядок. Я, <Player>, не желаю видеть следов глупых и поспешных решений прошлого барона, которые привели его к скоропостижной гибели. Извини, но я видел, на что способны эти твои питомцы. Твой проект слишком опасен, <clr>Алакай<clrEnd>. Ты не думал, что произойдёт, если клисане выработают иммунитет к нанитам? Да с теми апгрейдами, что вы им тут понасовали, они весь Клан положат. Прости, но тебе придётся свернуть своё занятие. Наши элитные команды немедленно займутся демонтажем станции и зачисткой клисанских остатков.",
                    "AMsg.Num": "12"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "takeoff",
                    "Pos.x": 760,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 145,
                    "Msg": "Бывай, <clr>Алакай<clrEnd>, и помни - если тебе в голову придёт даже мыслишка о том, чтобы повернуть этих твоих питомцев против Клана, ответная реакция не заставит себя долго ждать. Может, нам придётся выдержать жесточайший штурм клисан, но управляющий центр <clr>\"Хандлер\"<clrEnd> успеет отправиться к праотцам.",
                    "AMsg.Num": "13"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 146,
                    "Msg": "Далани? Значит, до этого ты был на службе у Коалиции?",
                    "AMsg.Num": "14"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 30,
                    "Parent": -1,
                    "#": 147,
                    "Msg": "Действительно, <clr>Чушкач<clrEnd> провалился даже с таким козырем в рукаве. На свободу он теперь нескоро выползет, если выползет вообще.",
                    "AMsg.Num": "15"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": 30,
                    "Parent": -1,
                    "#": 148,
                    "Msg": "Действительно, <clr>Чушкач<clrEnd> провалился даже с таким козырем в рукаве. На свободу он теперь нескоро выползет, если выползет вообще.",
                    "AMsg.Num": "16"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 149,
                    "Msg": "Далани? Значит, до этого ты был на службе у Коалиции?",
                    "AMsg.Num": "17"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 150,
                    "Msg": "А тебе-то что с этого всего, <clr>Алакай<clrEnd>? Ты бы не стал обеспечивать такую услугу Клану без личного интереса, даже с учётом того, что те спасли тебя от виселицы. Зная фэянских учёных, они не станут посвящать всю свою жизнь глупой мести. Учитывая то, что ты явно не брезгуешь некоторым числом... Кхм-м, случайных жертв, имеющих место быть при каждой опустошительной клисанской атаке.",
                    "AMsg.Num": "18"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 151,
                    "Msg": "А тебе-то что с этого всего, <clr>Алакай<clrEnd>? Ты бы не стал обеспечивать такую услугу Клану без личного интереса, даже с учётом того, что те спасли тебя от виселицы. Зная фэянских учёных, они не станут посвящать всю свою жизнь глупой мести. Учитывая то, что ты явно не брезгуешь некоторым числом... Кхм-м, случайных жертв, имеющих место быть при каждой опустошительной клисанской атаке.",
                    "AMsg.Num": "19"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 640,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 152,
                    "Msg": "Доминаторская угроза действительно всё ещё никуда окончательно не исчезла, и мало кто хотел бы, чтобы на эту войну ушло ещё больше бессмысленных смертей. Я позволю тебе сохранить свою лабораторию до момента полной ликвидации доминаторов, <clr>Алакай<clrEnd>, но имей ввиду, что как только с машинами будет покончено - тебе придётся свернуть проект.",
                    "AMsg.Num": "20"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "takeoff",
                    "Pos.x": 750,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 153,
                    "Msg": "Ты слишком наивен, <clr>Алакай<clrEnd>. Ты действительно думал, что после всего содеянного, я позволю тебе остаться на насиженном месте? Знаешь, сколько невинных душ положили твои эксперименты, негодяй? Ты не считался ни с кем - ни с военными, ни с гражданскими, уничтожал даже своих, если тот попадался под руку. Так, спрашивается, какого пакряка я должен позволить тебе выйти сухим из воды? Даже согласившись на твои условия, нет никакой гарантии, что ты не захочешь уйти красиво, стерев жизнь с нескольких столичных планет Рукава посредством их обстрела клисанской армадой - над которой остаётся твоя неограниченная власть. Нет, \"дружище\", ты заплатишь за всё - здесь. И сейчас.",
                    "AMsg.Num": "21"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "takeoff",
                    "Pos.x": 730,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 154,
                    "Msg": "Может и так, может и нет. Но, знаешь, <clr>Алакай<clrEnd>, если я тебя прикончу, то окажусь ничем не лучше тебя самого. Забирай своих питомцев и проваливай с нашего рукава к чёртовой матери. Мне плевать, что с тобой произойдёт, но с этого момента ты - изгой, которому нет места в восстановленном единстве пяти рас. У тебя есть две недели, чтобы убраться отсюда, иначе с тобой уже заговорят иначе.",
                    "AMsg.Num": "22"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "takeoff",
                    "Pos.x": 670,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 155,
                    "Msg": "Ты слишком наивен, <clr>Алакай<clrEnd>. Ты действительно думал, что после всего содеянного, я позволю тебе остаться на насиженном месте? Знаешь, сколько невинных душ положили твои эксперименты, негодяй? Ты не считался ни с кем - ни с военными, ни с гражданскими, уничтожал даже своих, если тот попадался под руку. Так, спрашивается, какого пакряка я должен позволить тебе выйти сухим из воды? Даже согласившись на твои условия, нет никакой гарантии, что ты не захочешь уйти красиво, стерев жизнь с нескольких столичных планет Рукава посредством их обстрела клисанской армадой - над которой остаётся твоя неограниченная власть. Нет, \"дружище\", ты заплатишь за всё - здесь. И сейчас.",
                    "AMsg.Num": "23"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "takeoff",
                    "Pos.x": 610,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 156,
                    "Msg": "Бывай, <clr>Алакай<clrEnd>, и помни - я слежу за тобой. Вздумаешь пойти на какой-нибудь искромётный фокус, и твою базу разнесут куда быстрее, чем ты успеешь открыть очередной портал.",
                    "AMsg.Num": "24"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 284,
                    "#": 157,
                    "Msg": "Начать атаку",
                    "AMsg.Num": "25"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 114,
                    "#": 158,
                    "Msg": "Закончить",
                    "AMsg.Num": "26"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 93,
                    "#": 159,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "27"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 94,
                    "#": 160,
                    "Msg": "",
                    "AMsg.Num": "28"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "planet",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 95,
                    "#": 161,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "29"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "planet",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 96,
                    "#": 162,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "30"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 97,
                    "#": 163,
                    "Msg": "Собственно, я всего лишь делал свою работу, как и десятки рейнджеров до меня",
                    "AMsg.Num": "31"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 352,
                    "#": 164,
                    "Msg": "Вы, должно быть, шутите. Пройти через всё это только ради того, чтобы бежать с поля боя? Ну уж нет, я не смогу спать спокойно, зная, что домики продолжают вырезать наших пачками. Об отставке не может быть и речи. Рейнджер <Player> немедленно возвращается на фронт!",
                    "AMsg.Num": "32"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 353,
                    "#": 165,
                    "Msg": "Благодарю, не имею права отказаться. Показывайте, что вы там для меня припасли.",
                    "AMsg.Num": "33"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 100,
                    "#": 166,
                    "Msg": "Жаль было её убивать, на самом деле. Махпелла была подчинена чужой воле... Кто знает, о чём она думала на самом деле? Кто знает, как на это могут отреагировать её сородичи? Была бы возможность изучить эти проклятые наниты...",
                    "AMsg.Num": "34"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 102,
                    "#": 167,
                    "Msg": "Надеюсь, вы правы... что ж, не будем терять времени зря.",
                    "AMsg.Num": "35"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 30,
                    "Pos.y": 20,
                    "Parent": 101,
                    "#": 168,
                    "Msg": "Уйти в отставку! Ха! Да я с рейдов одиноких пиратов на линкоры, усеянных зенитками по самые дюзы смеялся больше, чем с этого вашего странноватого юмора. Не для того я прожёг все эти годы, чтобы просто взять и сбежать с поля боя. И не в моих правилах оставлять дело завершённым наполовину. Счастливо оставаться!",
                    "AMsg.Num": "36"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 101,
                    "#": 169,
                    "Msg": "Вы правы, я уже достаточно навоевался. Все эти бесконечные сражения не проходят бесследно. Мне не дано знать, что ожидает всех нас на горизонте, но я уже успел сыграть свою роль во всём этом спектакле. Несите свои бланки.",
                    "AMsg.Num": "37"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "takeoff",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 113,
                    "#": 170,
                    "Msg": "Ладно, меньше слов - больше дела! Но чтобы по прилёту меня ждал ящик \"Махпеллы Дарк\" и свеженький номерок \"Плэй-пеленг\"!",
                    "AMsg.Num": "38"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 104,
                    "#": 171,
                    "Msg": "Это было слишком просто. Без толкового командования большинство пиратов превратились в простых маньяков за панелями с большими красными кнопками. Сильные, вооружённые до зубов, но тупые, прямолинейные и чертовски наивные. Теперь наша цель - сохранить этот добытый слезами, кровью и потом мир для будущих поколений, не так ли?",
                    "AMsg.Num": "39"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 105,
                    "#": 172,
                    "Msg": "А то! Недоноски получили по заслугам. Все, до единого. Немного жаль расставаться с войной, но, думаю, мы ещё найдём себе конкурентов. А сейчас веди, дружище, проведём время на должном качественном уровне! Никто не устоит перед мощью Пиратского Братства!",
                    "AMsg.Num": "40"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 0,
                    "Parent": 106,
                    "#": 173,
                    "Msg": "Собственно, я всего лишь делал свою работу, как и десятки рейнджеров до меня",
                    "AMsg.Num": "41"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 20,
                    "Pos.y": 20,
                    "Parent": 107,
                    "#": 174,
                    "Msg": "Благодарю, не имею права отказаться. Показывайте, что вы там для меня припасли.",
                    "AMsg.Num": "42"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 20,
                    "Pos.y": 20,
                    "Parent": 108,
                    "#": 175,
                    "Msg": "Я не могу безмятежно отдыхать на курортах, пока братья-рейнджеры погибают. Я возвращаюсь на фронт.",
                    "AMsg.Num": "43"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 351,
                    "#": 176,
                    "Msg": "Знаете, вы правы. Я устал ото всех этих космических сражений. Я оставляю это дело своим космическим коллегам. Следуя примеру наших войск, они обязательно расправятся с доминаторами.",
                    "AMsg.Num": "44"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 108,
                    "#": 177,
                    "Msg": "Знаете, вы правы. Я устал ото всех этих космических сражений. Я оставляю это дело своим космическим коллегам. Следуя примеру наших войск, они обязательно расправятся с доминаторами.",
                    "AMsg.Num": "45"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 109,
                    "#": 178,
                    "Msg": "Согласен. Мне уж надоело бороздить космические просторы, хочу уйти на покой!",
                    "AMsg.Num": "46"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 30,
                    "Pos.y": 20,
                    "Parent": 110,
                    "#": 179,
                    "Msg": "Согласен. Надоело уж мне бороздить космические просторы, хочу уйти на покой!",
                    "AMsg.Num": "47"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 110,
                    "#": 180,
                    "Msg": "Ни за что. Нашему единству всё ещё угрожает слишком много внешних врагов, друг мой. Кто я, по-твоему, Верховный Барон, или какая-то тыловая крыса? То-то же. Бывайте, я возвращаюсь на фронт. Не успеете и очередной склад втыкиллы опустошить, как я им всем дюзы-то начищу - уж помяни моё слово.",
                    "AMsg.Num": "48"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 111,
                    "#": 181,
                    "Msg": "Ну, что у вас там для меня?",
                    "AMsg.Num": "49"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 0,
                    "Parent": 103,
                    "#": 182,
                    "Msg": "Вам действительно это удалось? Алакай схвачен?",
                    "AMsg.Num": "50"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 0,
                    "Parent": 112,
                    "#": 183,
                    "Msg": "Итак, моя боевая задача теперь - любой ценой уничтожить... Махпеллу?",
                    "AMsg.Num": "51"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 115,
                    "#": 184,
                    "Msg": "Куда уж точнее",
                    "AMsg.Num": "52"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 319,
                    "#": 185,
                    "Msg": "Отдать нуль-приказ",
                    "AMsg.Num": "53"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 30,
                    "Pos.y": 0,
                    "Parent": 118,
                    "#": 186,
                    "Msg": "",
                    "AMsg.Num": "54"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 258,
                    "#": 187,
                    "Msg": "Был рад помочь",
                    "AMsg.Num": "55"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 259,
                    "#": 188,
                    "Msg": "Был рад помочь",
                    "AMsg.Num": "56"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 121,
                    "#": 189,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "57"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 122,
                    "#": 190,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "58"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 20,
                    "Parent": 123,
                    "#": 191,
                    "Msg": "То есть, мне больше не нужно захватывать системы Коалиции?",
                    "AMsg.Num": "59"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 219,
                    "#": 192,
                    "Msg": "Да, я согласен. Всегда предпочитал убийству доминаторов рыбалку.",
                    "AMsg.Num": "60"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 123,
                    "#": 193,
                    "Msg": "Нет, я не смогу жить спокойно, пока доминаторы уничтожают мирных жителей. Я возвращаюсь на фронт.",
                    "AMsg.Num": "61"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 126,
                    "#": 194,
                    "Msg": "Верно.",
                    "AMsg.Num": "62"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 127,
                    "#": 195,
                    "Msg": "Нет, я не смогу жить спокойно, пока доминаторы уничтожают мирных жителей. Я возвращаюсь на фронт.",
                    "AMsg.Num": "63"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 128,
                    "#": 196,
                    "Msg": "Конечно же, я согласен стать новым лидером!",
                    "AMsg.Num": "64"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 30,
                    "Parent": 128,
                    "#": 197,
                    "Msg": "Я предпочту сосредоточить свои усилия на уничтожении доминаторов.",
                    "AMsg.Num": "65"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "hangar",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 129,
                    "#": 198,
                    "Msg": "Пока.",
                    "AMsg.Num": "66"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 130,
                    "#": 199,
                    "Msg": "Конечно, я согласен! Наливай!",
                    "AMsg.Num": "67"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 30,
                    "Parent": 130,
                    "#": 200,
                    "Msg": "Доминаторы - слишком серьезная угроза, чтобы просто отмахнуться от нее и забыть. Я должен выполнить свой долг.",
                    "AMsg.Num": "68"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 279,
                    "#": 201,
                    "Msg": "Вас понял",
                    "AMsg.Num": "69"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 131,
                    "#": 202,
                    "Msg": "Понял-принял",
                    "AMsg.Num": "70"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 322,
                    "#": 285,
                    "Msg": "Назад",
                    "AMsg.Num": "71"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 117,
                    "#": 320,
                    "Msg": "Закончить",
                    "AMsg.Num": "72"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 92,
                    "#": 321,
                    "Msg": "Закончить",
                    "AMsg.Num": "73"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 420,
                    "Pos.y": -230,
                    "Parent": -1,
                    "#": 336,
                    "Msg": "Начать атаку",
                    "AMsg.Num": "74"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 283,
                    "#": 344,
                    "Msg": "Призвать Махпеллу",
                    "AMsg.Num": "75"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 323,
                    "#": 345,
                    "Msg": "<tstr1>",
                    "AMsg.Num": "76"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": -260,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 363,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "77"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": -260,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 365,
                    "Msg": "",
                    "AMsg.Num": "78"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": -120,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 368,
                    "Msg": "<tstr3>",
                    "AMsg.Num": "79"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 370,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "80"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": -150,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 372,
                    "Msg": "",
                    "AMsg.Num": "81"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": -120,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 376,
                    "Msg": "",
                    "AMsg.Num": "82"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": -20,
                    "Parent": -1,
                    "#": 384,
                    "Msg": "Звучит отнюдь не оптимистично",
                    "AMsg.Num": "83"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": -1,
                    "#": 386,
                    "Msg": "Сделаю всё, что смогу!",
                    "AMsg.Num": "84"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 120,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 392,
                    "Msg": "Покинуть Отдел",
                    "AMsg.Num": "85"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 160,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 399,
                    "Msg": "Я хочу получить информацию Отдела",
                    "AMsg.Num": "86"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 440,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 401,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "87"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 920,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 430,
                    "Msg": "Ладно, ладно, скоро полечу...",
                    "AMsg.Num": "88"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 960,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 432,
                    "Msg": "Нет, потому что, прежде чем разбираться с Махпеллой, нужно испросить совета у тех, кто разбирается получше моего. Что это за Махпелла?",
                    "AMsg.Num": "89"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 960,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 438,
                    "Msg": "И я тоже. Ладно, пора брать ситуацию в свои руки.",
                    "AMsg.Num": "90"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 440,
                    "Msg": "Ну... Привет, Махпелла! Ты понимаешь меня?",
                    "AMsg.Num": "91"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 660,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 442,
                    "Msg": "Отрадно видеть клисан, которые ещё отвечают на вопросы. Собственно, несмотря на любопытство, задам сам важный вопрос - чем обязаны твоему визиту?",
                    "AMsg.Num": "92"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 444,
                    "Msg": "Постой, но ведь это ты, здесь, в нашем Рукаве, несмотря на договорённость наших видов три сотни лет назад...",
                    "AMsg.Num": "93"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 660,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 446,
                    "Msg": "Хочешь сказать, что та Махпелла, с деятельностью чьих органов борются наши регулярные части, из твоего...",
                    "AMsg.Num": "94"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 450,
                    "Msg": "Увы, мы сами этого не знаем. Наше сообщество разделено гражданской войной, и мы не можем быть до конца уверены, что виной всему этому не являются раскольники.",
                    "AMsg.Num": "95"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 451,
                    "Msg": "Увы, мы сами этого не знаем. Наше сообщество разделено гражданской войной, и мы не можем быть до конца уверены, что виной всему этому не являются раскольники. Кроме того, наши силы заняты борьбой с доминаторами, что не позволяет нам сконцентрироваться на подавлении пиратских восстаний.",
                    "AMsg.Num": "96"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 453,
                    "Msg": "Когда противоречия между группами индивидов становятся настолько остры, что для навязывания реализации своих взглядов они берутся за оружие.",
                    "AMsg.Num": "97"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 455,
                    "Msg": "Мне кажется, что у нас есть возможность помочь друг другу. Тем более, что мы уже договорились - мы будем общаться <clr>на равных<clrEnd>",
                    "AMsg.Num": "98"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 456,
                    "Msg": "Не знаю, что тебе нужно объяснять, летучий булыжник. Лучше пусть за меня поговорят мои пушки!",
                    "AMsg.Num": "99"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 570,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 458,
                    "Msg": "Огонь!",
                    "AMsg.Num": "100"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 461,
                    "Msg": "Перед Коалицией Разумных Рас стоят проблемы. Если бы мы сейчас бросили все силы на помощь вам, то, во-первых, не факт, что вторженцы не помешали бы нам добраться до вашего сородича, и, во-вторых, вполне вероятно, что это бы позволило нашим врагам нанести нам смертельный удар.",
                    "AMsg.Num": "101"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 660,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 463,
                    "Msg": "Именно. В ответ Коалиция гарантирует, что поможет с розыском другой Махпеллы, и, если потребуется, освобождением. К тому же, это хороший повод, чтобы... Обменяться сведениями друг о друге. Может, и вы заходите подать заявку на членство в Коалиции.",
                    "AMsg.Num": "102"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 630,
                    "Pos.y": 530,
                    "Parent": -1,
                    "#": 465,
                    "Msg": "Превосходно! Я сообщу всем остальным. Бортовой компьютер, передать сообщение!",
                    "AMsg.Num": "103"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 700,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 469,
                    "Msg": "Это наш космос! Смерть захватчикам!",
                    "AMsg.Num": "104"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 810,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 472,
                    "Msg": "А почему ты говоришь о себе в женском роде?",
                    "AMsg.Num": "105"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 810,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 474,
                    "Msg": "О нет, спасибо. И спасибо за ответ.",
                    "AMsg.Num": "106"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 780,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 476,
                    "Msg": "Прощай, Махпелла",
                    "AMsg.Num": "107"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 840,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 477,
                    "Msg": "А почему ты имеешь такой оттенок? Все ранее встреченные нами представители твоего вида имели тёмно-зелёные оттенки... внешних покровов.",
                    "AMsg.Num": "108"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 840,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 479,
                    "Msg": "Ничего себе...",
                    "AMsg.Num": "109"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 870,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 480,
                    "Msg": "Ты что-то говорила про... \"группу\"",
                    "AMsg.Num": "110"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 870,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 482,
                    "Msg": "Очень любопытно! Спасибо за рассказ.",
                    "AMsg.Num": "111"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 900,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 483,
                    "Msg": "А как появляются новые Махпеллы?",
                    "AMsg.Num": "112"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 900,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 485,
                    "Msg": "Ну ладно",
                    "AMsg.Num": "113"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 930,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 486,
                    "Msg": "А как проходит твой диалог с учёными Коалиции?",
                    "AMsg.Num": "114"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 930,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 488,
                    "Msg": "Рад слышать",
                    "AMsg.Num": "115"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 960,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 489,
                    "Msg": "Наверное, это очень странно - ощущать себя одновременно десятками, а то и сотнями кусочков, разбросанных по всей галактике.",
                    "AMsg.Num": "116"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 960,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 491,
                    "Msg": "И в этом есть доля правды...",
                    "AMsg.Num": "117"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 990,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 492,
                    "Msg": "Очень любопытно, а как ты управляешься с такой армадой? Не с точки зрения логистики, управления, а с точки зрения... Ну, так сказать, экономической? Ведь твои органы повреждаются и гибнут!",
                    "AMsg.Num": "118"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 990,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 494,
                    "Msg": "Тогда ясно, как Махпелле триста лет назад удалось почти разгромить Коалицию. Спасибо.",
                    "AMsg.Num": "119"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1020,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 495,
                    "Msg": "Кстати, а ты не боишься \"подцепить\" от нас бактерии и вирусы? Ведь ты так близко контактируешь с нами!",
                    "AMsg.Num": "120"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1020,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 497,
                    "Msg": "Ого. Это очень хорошо!",
                    "AMsg.Num": "121"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 1060,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 503,
                    "Msg": "Ну, ладно",
                    "AMsg.Num": "122"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 670,
                    "Pos.y": -110,
                    "Parent": -1,
                    "#": 507,
                    "Msg": "Мне глубоко плевать, какие у вас успехи. Моего приказа ждёт группа спецназа, а сапёры уже режут провода к пультам управлениям реактором и заложенным в базу бомбам - мы не дураки, далани, и прекрасно знаем, что такие дела обязательно \"закрываются на ключ\".",
                    "AMsg.Num": "123"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 640,
                    "Pos.y": -140,
                    "Parent": -1,
                    "#": 509,
                    "Msg": "Пожалуй, с удовольствием бы поднял здесь всё на воздух. Но, к сожалению, нам нужна Махпелла. Живая, дееспособная и, главное - самостоятельная. Без твоих гадских наноботов!",
                    "AMsg.Num": "124"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1140,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 515,
                    "Msg": "Знаешь, я тут с братвой мозгами пораскинул, мыслишками помысливал, и знаешь, что намыслил? Что пора бы тебе катиться отсюда! Это наша Махпелла, и она станет орудием нашего нового порядка!",
                    "AMsg.Num": "125"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "fastexit",
                    "Pos.x": 1140,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 517,
                    "Msg": "А моим парням - ни капельки! Огонь!",
                    "AMsg.Num": "126"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": -140,
                    "Parent": -1,
                    "#": 525,
                    "Msg": "Да хоть остров в океане, будешь персоной нон-гранта... Ой, в общем, будет тебе домик и библиотека, только отдай нам Махпеллу!",
                    "AMsg.Num": "127"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "takeoff",
                    "Pos.x": 730,
                    "Pos.y": -110,
                    "Parent": -1,
                    "#": 527,
                    "Msg": "Делаей то, что надо. Я своё слово сказал, и, будь уверен, моё слово - слово Совета Коалиции, или не быть мне рейнджером! А сейчас меня ждут дела на орбите. Пока.",
                    "AMsg.Num": "128"
                }
            ],
            "DialogMessages": 
            [
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 0,
                    "Parent": 317,
                    "#": 66,
                    "Msg": "<tstr3>",
                    "DMsg.Num": "0"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 0,
                    "Parent": 132,
                    "#": 67,
                    "Msg": "<tstr4>",
                    "DMsg.Num": "1"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 0,
                    "Parent": 133,
                    "#": 68,
                    "Msg": "<tstr5>",
                    "DMsg.Num": "2"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 267,
                    "#": 69,
                    "Msg": "Господин верховный барон, убедительно прошу вас в самые кратчайшие сроки прибыть на объект <clr>Хандлер<clrEnd>. Есть вопрос, требующий вашего вмешательства. Все подробности на месте.",
                    "DMsg.Num": "3"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 10,
                    "Parent": -1,
                    "#": 70,
                    "Msg": "Ну что вы, пиратские законы славятся тем, что их можно изменить как угодно и когда угодно. Они не стали вынуждать меня отказаться от старого звания и наоборот, поощряли его куда достойнее, чем Галактический Совет. Когда я разработал механизм заманивания одной из <clr>Махпелл<clrEnd> в ловушку, мне грозило немедленное пожизненное заключение, а малокское правительство так и вовсе выступало за расстрел без суда и следствия. Куда, думаете, было податься учёному в такой безвыходной ситуации? Естественно, я связался с пиратским кланом, и, ознакомившись с технической документацией моего скромного проекта, коллектив ханов тотчас же загорелся энтузиазмом. Что может быть лучше потенциально неограниченного в размерах клисанского флота, подчинённого специально разработанными нанитами и готового обеспечить своему хозяину неоспоримое доминирование в космосе? Эта информация быстро дошла до барона <clr>Чушкача<clrEnd>, и тот просто не мог упустить такую возможность.",
                    "DMsg.Num": "4"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": -30,
                    "Parent": -1,
                    "#": 71,
                    "Msg": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, <Player>. Первым делом вы наверняка захотите выхватить бластер, но, поверьте, вы ничего не потеряете, если позволите мне объясниться. Как вы уже, наверное, догадались, к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов - запустив легенду о некоем устройстве, основанном на принципе работы Z-трансмиттера, мы успешно пустили пыль в глаза целому Рукаву, вынудив Коалицию долгое время гнаться за ложной тенью. Не без помощи клисанского вмешательства моему новому начальству удалось продержаться столь долгое время. Но, к сожалению, от собственной некомпетентности их это так и не спасло.",
                    "DMsg.Num": "5"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": -30,
                    "Parent": -1,
                    "#": 72,
                    "Msg": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, <Player>. Первым делом вы наверняка захотите выхватить бластер, но, поверьте, вы ничего не потеряете, если позволите мне объясниться. Как вы уже, наверное, догадались, к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов - запустив легенду о некоем устройстве, основанном на принципе работы Z-трансмиттера, мы успешно пустили пыль в глаза целому Рукаву, вынудив Коалицию долгое время гнаться за ложной тенью. Не без помощи клисанского вмешательства моему новому начальству удалось продержаться столь долгое время. Но, к сожалению, от собственной некомпетентности их это так и не спасло.",
                    "DMsg.Num": "6"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": -30,
                    "Parent": -1,
                    "#": 73,
                    "Msg": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, барон. Как вы уже, наверное, догадались - к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов - запустив легенду о некоем устройстве, основанном на принципе работы Z-трансмиттера, мы успешно пустили пыль в глаза целому Рукаву, вынудив коалиционных ищеек гнаться за ложной тенью. Сложно отрицать эффективность проекта в нашем деле - сейчас в Галактике преимущество остаётся только за одной стороной. Ни один из врагов Клана так и не сумел противостоять нам: ни безжалостные машины, ни прогнившая Коалиция, примерившая на себя личину благодетеля - никто. Всё это было бы невозможно в столь кратчайшие сроки без… стороннего вмешательства. И сегодня Клан, бесспорно, царит в этом Рукаве.",
                    "DMsg.Num": "7"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": -30,
                    "Parent": -1,
                    "#": 74,
                    "Msg": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, барон. Как вы уже, наверное, догадались - к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов - запустив легенду о некоем устройстве, основанном на принципе работы Z-трансмиттера, мы успешно пустили пыль в глаза целому Рукаву, вынудив коалиционных ищеек гнаться за ложной тенью. Благодаря клисанскому вмешательству Клан всё ещё сохраняет неоспоримое преимущество в этой войне - даже если нас прижмут к стенке, легавым никогда не вычислить координаты <clr>Тортугаца<clrEnd>, и мы всегда сумеем подготовить сокрушительный ответный удар.",
                    "DMsg.Num": "8"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 10,
                    "Parent": -1,
                    "#": 75,
                    "Msg": "Ну что вы, пиратские законы не ограничивают наши давние заслуги - даже наоборот - поощряют куда достойнее, чем эти ваши скупердяи из Галактического Совета. Когда я разработал механизм заманивания одной из <clr>Махпелл<clrEnd> в ловушку, мне грозило немедленное пожизненное заключение, а малокское правительство так и вовсе выступало за расстрел без суда и следствия. Куда, думаете, было податься учёному в такой безвыходной ситуации? Естественно, я связался с пиратским кланом, и, ознакомившись с технической документацией моего скромного проекта, коллектив ханов тотчас же загорелся энтузиазмом. Что может быть лучше потенциально неограниченного в размерах клисанского флота, подчинённого специально разработанными нанитами и готового обеспечить своему хозяину неоспоримое доминирование в космосе? Эта информация быстро дошла до барона <clr>Чушкача<clrEnd>, и тот просто не мог упустить такую возможность.",
                    "DMsg.Num": "9"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": 10,
                    "Parent": -1,
                    "#": 76,
                    "Msg": "Ну что вы, пиратские законы не ограничивают наши давние заслуги: даже наоборот - поощряют куда достойнее, чем эти ваши скупердяи из Галактического Совета. Когда я разработал механизм заманивания одной из <clr>Махпелл<clrEnd> в ловушку, мне грозило немедленное пожизненное заключение, а малокское правительство так и вовсе выступало за расстрел без суда и следствия. Куда, думаете, было податься учёному в такой безвыходной ситуации? Естественно, я связался с пиратским кланом, и, ознакомившись с технической документацией моего скромного проекта, коллектив ханов тотчас же загорелся энтузиазмом. Что может быть лучше потенциально неограниченного в размерах клисанского флота, подчинённого специально разработанными нанитами и готового обеспечить своему хозяину неоспоримое доминирование в космосе? Эта информация быстро дошла до барона <clr>Чушкача<clrEnd>, и тот просто не мог упустить такую возможность.",
                    "DMsg.Num": "10"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 670,
                    "Pos.y": 30,
                    "Parent": -1,
                    "#": 77,
                    "Msg": "Да, конечно, барон. Я лишь надеюсь, что мы сможем достичь взаимопонимания. В Галактике всё ещё сохраняется зловонное присутствие врагов нашей Свободы, и поддержка клисан - козырь, который гарантированно положит конец угрозе благополучию и процветанию Клана сегодня. Враги, так до конца и не определившие, откуда клисане вообще взялись - даже не поймут, что это было.",
                    "DMsg.Num": "11"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 78,
                    "Msg": "Да, конечно, барон. Я лишь надеюсь, что мы сможем достичь взаимопонимания. Нельзя не признать заслуг проекта, ведь мы всё-таки теперь герои и освободители угнетённого народа, разве не так? И, поверьте - это только начало. Если я сумею реализовать вторую стадию проекта, Клан сможет реализовать давнюю мечту ни на что не способной Коалиции и расширить свои владения за пределы родного Рукава",
                    "DMsg.Num": "12"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 79,
                    "Msg": "Вы слишком плохого обо мне мнения, барон. Как истинный представитель научного контингента Пиратского Клана, я не гонюсь ни за чем, кроме науки. Случайные жертвы? Побочный урон? Признайте, вас они тоже редко когда интересовали на пути к власти. Так что, смею предположить, что мы с вами в этом вопросе имеем определённую солидарность.",
                    "DMsg.Num": "13"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 670,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 80,
                    "Msg": "Вы слишком плохого обо мне мнения, барон. Как истинный представитель научного контингента Пиратского Клана, я не гонюсь ни за чем, кроме науки. Случайные жертвы? Побочный урон? Признайте, вас они тоже редко когда интересовали на пути к власти. Так что, смею предположить, что мы с вами в этом вопросе имеем определённую солидарность.",
                    "DMsg.Num": "14"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 730,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 81,
                    "Msg": "Благодарю вас за неоценимую моральную поддержку, барон. Я предвидел ваше решение и заранее приготовил передатчик, которым вы сможете маркировать систему для следующей атаки - вам достаточно отправить сигнал, и в целевой системе вскоре откроется червоточина. Использовать устройство вы сможете с мостика корабля. К сожалению, некоторые технические ограничения не позволят запускать больше одного нейролинка за раз, но, поверьте, с мощью и эволюционным потенциалом клисанской армады, вам этого хватит с головой.",
                    "DMsg.Num": "15"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 760,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 82,
                    "Msg": "Благодарю вас за неоценимую моральную поддержку, барон. Я предвидел ваше решение и заранее приготовил передатчик, которым вы сможете маркировать систему для следующей атаки - вам достаточно отправить сигнал, и в целевой системе вскоре откроется червоточина. Использовать устройство вы сможете с мостика корабля. К сожалению, некоторые технические ограничения не позволят запускать больше одного нейролинка за раз, но, поверьте, - с мощью и эволюционным потенциалом клисанской армады вам этого хватит с головой.",
                    "DMsg.Num": "16"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": 10,
                    "Parent": -1,
                    "#": 83,
                    "Msg": "Ну что вы, пиратские законы славятся тем, что их можно изменить как угодно и когда угодно. Они не стали вынуждать меня отказаться от старого звания и наоборот, поощряли его куда достойнее, чем Галактический Совет. Когда я разработал механизм заманивания одной из <clr>Махпелл<clrEnd> в ловушку, мне грозило немедленное пожизненное заключение, а малокское правительство так и вовсе выступало за расстрел без суда и следствия. Куда, думаете, было податься учёному в такой безвыходной ситуации? Естественно, я связался с пиратским кланом, и, ознакомившись с технической документацией моего скромного проекта, коллектив ханов тотчас же загорелся энтузиазмом. Что может быть лучше потенциально неограниченного в размерах клисанского флота, подчинённого специально разработанными нанитами и готового обеспечить своему хозяину неоспоримое доминирование в космосе? Эта информация быстро дошла до барона <clr>Чушкача<clrEnd>, и тот просто не мог упустить такую возможность.",
                    "DMsg.Num": "17"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 84,
                    "Msg": "Я признаю, что в этот раз поставил на тёмную лошадку, <Player>, и я готов искупить свои грехи перед Коалицией. Мой проект далеко ушёл с момента своего старта, и, вопреки опасениям ополчившегося на меня Совета, - оказался более, чем успешен. Даже, каким-то образом, выйдя из-под контроля, <clr>Махпелла<clrEnd> долго не проживёт, так как система самоуничтожения, встроенная в наниты, в течении трёх месяцев не получая контрольного сигнала с моей стороны, сработает автоматически. Бог из машины погибнет, не попав никому в руки.",
                    "DMsg.Num": "18"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 85,
                    "Msg": "Я признаю, что в этот раз поставил на тёмную лошадку, <Player>, и я готов искупить свои грехи перед Коалицией. Мой проект далеко ушёл с момента своего старта, и, вопреки опасениям ополчившегося на меня Совета, - оказался более, чем успешен. Даже, каким-то образом выйдя из-под контроля, <clr>Махпелла<clrEnd> долго не проживёт, так как система самоуничтожения, встроенная в наниты, в течении трёх месяцев не получая контрольного сигнала с моей стороны, сработает автоматически. Бог из машины погибнет, не попав никому в руки.",
                    "DMsg.Num": "19"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 730,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 86,
                    "Msg": "Что бы вы обо мне ни думали, я не гонюсь ни за славой, ни за властью, ни даже за материальным вознаграждением. Меня интересует только наука и только результат. Думаю, прорываясь к верхушке Клана, вы давно осознали, что порой приходится жертвовать малым во имя великого. В Галактике больше не осталось врагов Коалиции, но даже в лабораторных условиях я ещё могу многого достичь. Уверяю вас, <Player>, горизонты, открывающиеся перед нами сегодня, ещё не раз помогут в технологическом развитии Коалиции - я молчу о понимании природы клисан в частности.",
                    "DMsg.Num": "20"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 670,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 87,
                    "Msg": "Что бы вы обо мне ни думали, я не гонюсь ни за славой, ни за властью, ни даже за материальным вознаграждением. Меня интересует только наука и только результат. Думаю, прорываясь к верхушке Клана, вы давно осознали, что порой приходится жертвовать малым во имя великого. В Галактике до сих пор сохраняется присутствие доминаторов, и, если вы позволите мне продолжить мои исследования, я готов немедленно перенаправить все имеющиеся мощности проекта на помощь Коалиции в борьбе с бесконечно реплицирующимися машинами. Прошу, позвольте мне использовать свой последний шанс.",
                    "DMsg.Num": "21"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 88,
                    "Msg": "Даже не знаю, как вас отблагодарить, рейнджер. Вот увидите, я ещё докажу, что моя работа заслуживает жизни. Специально для такого случая, я приготовил передатчик, которым вы сможете маркировать систему для следующей атаки - вам достаточно отправить сигнал, и в целевой системе вскоре откроется червоточина. Использовать устройство вы сможете с мостика корабля. К сожалению, некоторые технические ограничения не позволят запускать больше одного нейролинка за раз, но поверьте - с мощью и эволюционным потенциалом клисанской армады, вам этого хватит с головой.",
                    "DMsg.Num": "22"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 480,
                    "Pos.y": -80,
                    "Parent": -1,
                    "#": 89,
                    "Msg": "Рейнджер <Player>, убедительно прошу вас в самые кратчайшие сроки прибыть на объект <clr>Хандлер<clrEnd>. К вам, как к новому Верховному Барону, у меня есть один разговор.",
                    "DMsg.Num": "23"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 281,
                    "#": 90,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "24"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 227,
                    "#": 91,
                    "Msg": "Укажите систему для атаки.",
                    "DMsg.Num": "25"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 205,
                    "#": 92,
                    "Msg": "Запрос ретранслирован на <clr>Хандлер<clrEnd>. Ответ положительный. Флот клисан отправлен в указанную систему.",
                    "DMsg.Num": "26"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 228,
                    "#": 93,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "27"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 206,
                    "#": 94,
                    "Msg": "Отличная работа, <Player>, мы забираем протоплазму и увеличиваем ваш личный нод-счет. Величина счета <RangerBaseNodes(Player())> нодов.<br>Кроме того, вы выросли в нашем рейтинге. Продолжайте и впредь пополнять наши запасы нодов и протоплазмы.",
                    "DMsg.Num": "28"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 207,
                    "#": 95,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "29"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 208,
                    "#": 96,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "30"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -1200,
                    "Pos.y": -340,
                    "Parent": -1,
                    "#": 97,
                    "Msg": "Это было не самым лёгким испытаний, но вы успешно справились с задачей, рейнджер! Клисанское логово полностью уничтожено, а Пиратский Клан, замешанный в жуткой истории с попыткой приручения Махпеллы, обезврежен и обезглавлен. Мы уже выяснили, кто был основной причиной всего этого беспредела - <clr>Далани Алакай<clrEnd>, который рассматривался в рамках задачи \"найти и уничтожить\" спецподразделениями Коалиции. Явно потерявший рассудок учёный ещё очень давно пытался продвинуть свою идею контроля над клисанами, за что и был арестован, и из-под ареста же при поддержке неизвестных - едва уловимой нитью там просматривался след очередной группы коррумпированных чиновников и лидеров Клана - бежал. Спецслужбы искали его долгие годы, и вот выяснилось, что именно отступники под предводительством своего нового Барона укрыли безумца. Вы прекрасно понимаете, почему мы не могли допустить существования данной технологии. Это необходимо было сделать, <Player>, и мы благодарны вам за ликвидацию последствий, допущенных, пожалуй, наиболее страшным из наших провалов. Ваше имя, как и всех, кто участвовал в штурме секретной пиратской базы, навсегда войдёт в историю Коалиции.",
                    "DMsg.Num": "31"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 230,
                    "#": 98,
                    "Msg": "<Player>, в ходе этой операции мы расправились сразу с тремя проблемами, уничтожив пиратский Клан, покончив с клисанской угрозой и одновременно выведя лидера коррупционного движения - адмирала <clr>Дурдыма<clrEnd> на чистую воду, поймав его во время попытки предупредить предупредить высшее руководства Клана о готовящемся штурме, курировавшемся непосредственно Галактическим Советом.\r\n\r\nУвы, Коалиции ещё нельзя ослаблять напора - <clr>доминаторская угроза<clrEnd> всё ещё не побеждена. Впрочем, теперь дело пойдёт куда проще, ведь врагов стало куда меньше.\r\nВы, как заслуженный воин, сможете выйти на пенсию. Отставка подарит вам долгую мирную жизнь, и Галактический Совет лично предлагает вам, как и всем участникам штурма, по собственному особняку в наиболее элитных курортных регионах. Вам более не придётся ни о чём заботиться, и ваше право принять этот подарок прямо сейчас.",
                    "DMsg.Num": "32"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 229,
                    "#": 99,
                    "Msg": "<Player>, в ходе этой операции мы расправились сразу с тремя проблемами, уничтожив пиратский Клан, покончив с клисанской угрозой и одновременно выведя лидера коррупционного движения - адмирала <clr>Дурдыма<clrEnd> на чистую воду, поймав его во время попытки предупредить предупредить высшее руководства Клана о готовящемся штурме, курировавшемся непосредственно Галактическим Советом.\r\n\r\nИ, после столь подведения итогов, мы наконец можем выдохнуть спокойно, с уверенностью заявив, что <clr>угроза миру в Галактике ликвидирована<clrEnd>. Все предводители уничтожены, а с остатками врагов миру в Галактике наши штатные подразделения расправятся за считанные месяцы. Настал наш час, час Единства Пяти Рас!\r\nВы, как заслуженный воин, сможете выйти на пенсию. Отставка подарит вам долгую мирную жизнь, и Галактический Совет лично предлагает вам, как и всем участникам штурма, по собственному особняку в наиболее элитных курортных регионах. Ваше право решать, что делать с вашей жизнью, но вы просто обязаны принять этот подарок без лишних отлагательств, сразу после приготовленного по случаю Победы концерта.",
                    "DMsg.Num": "33"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 40,
                    "#": 100,
                    "Msg": "Отлично сработано, <Player>: от Махпеллы не осталось и следа! Вся клисанская армада сдетонировала аккурат сутки спустя ликвидации материнского корабля, и с этого момента угроза, созданная учёным-ренегатом - лишь очередная страница в книгах истории. И большая часть заслуги в этом, без сомнения, ваша, рейнджер.",
                    "DMsg.Num": "34"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 234,
                    "#": 101,
                    "Msg": "Что сделано, то сделано, <Player>, и былого не воротить. Эта история не будет забыта: мы наложим табу на проведение любых исследований подобного рода, чтобы трагические события второй и третьей клисанских войн впредь никогда не повторились. Пусть мы использовали инструменты врагов против них же самих - боеспособные остатки Клана, словно сорняки, остаются в открытом космосе. Лишённые руководства, но не боевой мощи, они разбились на мелкие банды и продолжают разорять захваченные миры. Уж теперь-то мы не потеряем контроль так легко, как это допустили наши предшественники, поверьте. Но мы не стремимся навязать вам никаких новых трудностей, рейнджер - ваша отставка целиком и полностью заслужена. Галактический Совет даже готов выделить вам собственный элитный особняк на одном из лучших курортов контролируемой части обитаемого космоса. Впрочем, вы получите его при любом своём решении. Дело осталось за малым - поставить несколько десятков подписей, и вы вправе забыть обо всех этих трудовых буднях.",
                    "DMsg.Num": "35"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 233,
                    "#": 102,
                    "Msg": "Что сделано, то сделано, <Player>, былого не воротить. Эта история не будет забыта, и мы наложим серьёзное табу на проведение любых исследований подобного рода, чтобы трагические события второй клисанской войны впредь никогда не повторились. И теперь, когда сорняки Пиратского Клана были вырваны с корнем, а доминаторы истреблены - наступит мирное время, которое, надеюсь, продлится настолько долго, насколько это позволит сама Вселенная. Уж теперь-то мы не потеряем контроль так легко, как это допустили наши предшественники, поверьте. А пока давайте отложим все эти пагубно влияющие на здоровье мысли о трудовых буднях, и перейдём к специально подготовленному на случай победы банкету. <Player>, вас уже заждались.",
                    "DMsg.Num": "36"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 209,
                    "#": 103,
                    "Msg": "Приветствуем вас, <Player>, на борту центра рейнджеров <ShortName(GetShipRuins(Player()))>. И у нас для вас есть отличные новости - план удался! Именно сегодняшняя дата будет значится официальным днем победы над возвращением клисанской угрозы, а ваше имя, рейнджер, останется в истории навеки. После того, как вы, убедив Алакая, что ему ничего не угрожает, грамотно применили плоды его неэтичных экспериментов в борьбе с последними врагами Коалиции, а наши военные разработали и реализовали план с захватом ученого, который был только что блистательно исполнен.",
                    "DMsg.Num": "37"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 41,
                    "#": 104,
                    "Msg": "Ну вот и всё, рейнджер: наши парни так разошлись, что теперь и от остатков пиратских головорезов, собственно, ничего и не осталось. Были рапорты об одиноких кораблях, скрывающихся от властей, но, думается мне, что продлится это ровно до тех пор, пока у них не останется денег на топливо. Операция выполнена успешно. Успешнее некуда. А вот скупердяи из верховного командования опять себе все заслуги присвоили... Ну, ваше имя хотя бы продолжает появляться на титульных страницах всех их пропагандистских бахвальств. Что ж, главное, что это лишь поддержит укрепление воцарившегося мира. Да и награду вы свою точно получите - искоренить все последние сорняки, угрожавшие единству Пяти Рас, это вам не загадки на незаселённых планетах разгадывать.",
                    "DMsg.Num": "38"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 43,
                    "#": 105,
                    "Msg": "<Player>, шикарная работа.\r\nДолгие поздравления, думаю, здесь излишни - все мы знаем, что твои заслуги перед Кланом попросту не оценить. Вся галактика, брати... Ой, то есть барон, вся галактика - теперь наша! Наконец-то ни прогнившей Коалиции, ни бездумных машин - ничего. Уцелела лишь справедливость нашего славного братства. И всё благодаря инструменту, сохранность которого ты обеспечил. Клисане - страшная штука, но, оставаясь на поводке, они обеспечат стойкость нашей власти в этом рукаве.\r\n\r\nТеперь, когда врагов не осталось, а политики верно служат Клану, дрожа перед потенциальной возможностью опустошения их миров клисанской армадой - ты, <Player>, достин пожинать все заслуженные лавры. Оставаясь королём королей, тебе не придётся вообще ничего делать, кроме как наслаждаться своей новой жизнью. Галактика обеспечит тебя всем, чего ты только пожелаешь. На весь сектор в твою честь уже готовится вечеринка, так что самое время хорошенько оторваться после всех бесконечностей честных трудовых будней на пользу общему делу, хе-хе.\r\n\r\nИ да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!\r\nНоси его как подобает величайшему из пиратов братства.",
                    "DMsg.Num": "39"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 44,
                    "#": 106,
                    "Msg": "Это было не самым лёгким из испытаний, но вы успешно справились с задачей, рейнджер! Клисанское логово полностью уничтожено, а Пиратский Клан, замешанный в жуткой истории с попыткой приручения Махпеллы, обезврежен и обезглавлен. Благодаря вам мы выяснили, кто был основной причиной всего этого беспредела - <clr>Далани Алакай<clrEnd>, который рассматривался в рамках задачи \"найти и уничтожить\" спецподразделениями Коалиции. Явно потерявший рассудок учёный ещё очень давно пытался продвинуть свою идею контроля над клисанами, за что и был арестован, и из-под ареста же при поддержке неизвестных - едва уловимой нитью там просматривался след очередной группы коррумпированных чиновников и лидеров Клана - бежал. Спецслужбы искали его долгие годы, и вот выяснилось, что именно отступники под предводительством своего нового Барона укрыли безумца. Вы прекрасно понимаете, почему мы не могли допустить существования данной технологии. Это необходимо было сделать, <Player>, и мы благодарны вам за ликвидацию последствий, допущенных, пожалуй, наиболее страшным из наших провалов. Ваше имя, как и всех наших бойцов, кто в ключевой момент не последовал воле продажного <clr>Дурдыма<clrEnd>, встав на вашу сторону, навсегда войдёт в историю Коалиции.",
                    "DMsg.Num": "40"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 241,
                    "#": 107,
                    "Msg": "<Player>, в ходе этой операции мы расправились сразу с тремя проблемами, уничтожив пиратский Клан, покончив с клисанской угрозой и одновременно выведя лидера коррупционного движения - адмирала <clr>Дурдыма<clrEnd> на чистую воду, поймав его во время попытки предупредить предупредить высшее руководства Клана о готовящемся штурме, курировавшемся непосредственно Галактическим Советом.\r\n\r\nИ, после столь подведения итогов, мы наконец можем выдохнуть спокойно, с уверенностью заявив, что <clr>угроза миру в Галактике ликвидирована<clrEnd>. Все предводители уничтожены, а с остатками врагов миру в Галактике наши штатные подразделения расправятся за считанные месяцы. Настал наш час, час Единства Пяти Рас!\r\nВы, как заслуженный воин, сможете выйти на пенсию. Отставка подарит вам долгую мирную жизнь, и Галактический Совет лично предлагает вам, как и всем участникам штурма, по собственному особняку в наиболее элитных курортных регионах. Ваше право решать, что делать с вашей жизнью, но вы просто обязаны принять этот подарок без лишних отлагательств, сразу после приготовленного по случаю Победы концерта.",
                    "DMsg.Num": "41"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 242,
                    "#": 108,
                    "Msg": "<Player>, в ходе этой операции мы расправились сразу с тремя проблемами, уничтожив пиратский Клан, покончив с клисанской угрозой и одновременно выведя лидера коррупционного движения - адмирала <clr>Дурдыма<clrEnd> на чистую воду, поймав его во время попытки предупредить предупредить высшее руководства Клана о готовящемся штурме, курировавшемся непосредственно Галактическим Советом.\r\n\r\nУвы, Коалиции ещё нельзя ослаблять напора - <clr>доминаторская угроза<clrEnd> всё ещё не побеждена. Впрочем, теперь дело пойдёт куда проще, ведь врагов стало куда меньше.\r\nВы, как заслуженный воин, сможете выйти на пенсию. Отставка подарит вам долгую мирную жизнь, и Галактический Совет лично предлагает вам, как и всем участникам штурма, по собственному особняку в наиболее элитных курортных регионах. Вам более не придётся ни о чём заботиться, и ваше право принять этот подарок прямо сейчас.",
                    "DMsg.Num": "42"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 275,
                    "#": 109,
                    "Msg": "Поздравляем тебя, <Player>, от лица всего пиратского клана, с достойным исполнением всех обязанностей, возложенных на плечи Верховного Барона! Теперь, когда угроза со стороны роботов сведена к минимуму, мы можем заняться реформами, нацеленными на усиление пиратской власти и сплочению всех находящихся под нашим контролем планет. В связи с этим мы предлагаем тебе, <Player>, как одному из наиболее ярких героев прошедшей войны, сменить кабину пилота на трибуну политика!\r\n\r\nОбдумай серьёзно это предложение, ведь оно открывает перед тобой новые горизонты!\r\n\r\nИ да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!\r\nНоси его как подобает величайшему из пиратов братства.",
                    "DMsg.Num": "43"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 276,
                    "#": 110,
                    "Msg": "Поздравляем тебя, <Player>, от лица всего пиратского клана, с достойным началом исполнения обязанностей, возложенных на плечи Верховного Барона! Твоя безапелляционная чистка в неоднозначной кадровой среде, созданной почившим Чушкачом, просто впечатляет. Теперь, когда ты заслуженно вступил на свою новую должность, мы можем заняться реформами, нацеленными на усиление пиратской власти и сплочению всех находящихся под нашим контролем планет. В связи с этим мы предлагаем тебе, <Player>, как одному из наиболее ярких героев прошедшей войны, сменить кабину пилота на трибуну политика!\r\n\r\nОбдумай серьёзно это предложение, ведь оно открывает перед тобой новые горизонты!\r\n\r\nИ да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!\r\nНоси его как подобает величайшему из пиратов братства.",
                    "DMsg.Num": "44"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 46,
                    "#": 111,
                    "Msg": "Отличная работа, рейнджер <Player>.\r\n\r\nКлан обезглавлен, а Алакай больше не представляет угрозы. Мы охотились за ним долгие годы, но по иронии судьбы с персоной non grata было суждено разобраться именно пирату. Ну же, не надо на меня так смотреть: вы хорошо вжились в роль - особенно когда штурмовали логово продажного Дурдыма - прямо настоящий головорез... Ладно, ладно, вернёмся к нашим пакрякам. Далани Алакай, безумный гений, получивший в две своих хилых ручонки невероятную власть как плод применения на практике результатов десятилетий размышлений - и стоило ли ему давать возможность просто уйти? Я понимаю ваши чувства, <Player>, но у аналитиков нашего спецотдела по борьбе с пиратством очень большие опасения, что это решение вернётся Галактике горькими слезами.\r\n\r\nКонечно,начальство прямо противоположного мнения, и вас уже ждут на банкете, где вы получите свою награду лично от Галактического Совета - внушительных объёмов сумму и особняк на одной из лучших планет-курортов Галактики. Да-да, вы не ослышались, Совет наконец по-достоинству оценил рейнджерское рвение! Хотя, согласно новостям, захват секретного сектора пиратов был заслугой Вооружённых Сил Коалиции, но, что ж - очень часто настоящим труженникам приходится оставаться в тени. Иногда и ради общего блага.\r\n\r\nВпрочем... прошу за мной, <Player>.",
                    "DMsg.Num": "45"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 182,
                    "#": 112,
                    "Msg": "Именно так, <Player>, именно так. Только прежде чем сдаться, этот предатель каким-то образом заблокировал управление нанитам и активировал систему самоуничтожения станции. Теперь Махпелла вышла из-под контроля и заняла статичную позицию, уничтожая всё, что попадается в зону действия её орудий.\r\n\r\nКомандование дало \"зелёный свет\", и мы достали все, даже самые ужасающие орудия для того, чтобы вытащить из безумца сведения о том, как остановить клисан, но у них создаётся впечатление, что от этого он лишь сильнее впадает в безумие и слабее реагирует на наши нападки. Последняя надежда - на разрешение Конвента применить силы Мастеров Разума... Или на рейнджеров.",
                    "DMsg.Num": "46"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 183,
                    "#": 113,
                    "Msg": "Именно так, рейнджер. Клисанские орды атакуют галактику, и это нужно остановить как можно скорее.\r\n\r\nВоенные передали в наше управление небольшой генератор, при помощи которого мы перебросим вас к текущему местоположению Махпеллы.",
                    "DMsg.Num": "47"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 280,
                    "#": 114,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "48"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 178,
                    "#": 115,
                    "Msg": "Эх-хэ, <Player>, не так давно мы еще сражались плечом к плечу против Коалиции и доминаторов, а сейчас все это уже часть истории. Тысяча мутят! Даже обидно, что ни одного врага уже не осталось - дула корабельных пушек паутиной зарастают. Молодежь треплет мирные корабли, а нам как-то уже стыдно такой ерундой заниматься. Особенно тебе: ты же Верхновный барон, как-никак... Так что я полностью понимаю и поддерживаю твое решение.",
                    "DMsg.Num": "49"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 185,
                    "#": 116,
                    "Msg": "Укажите систему, которую необходимо очистить от клисан.",
                    "DMsg.Num": "50"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 210,
                    "#": 117,
                    "Msg": "Запрос ретранслирован на <clr>Хандлер<clrEnd>. Ответ положительный. Все клисаны в системе будут уничтожены.",
                    "DMsg.Num": "51"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 238,
                    "#": 118,
                    "Msg": "",
                    "DMsg.Num": "52"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 48,
                    "#": 119,
                    "Msg": "В этот день, <Player>, нам окончательно удалось возродить утраченную технологию <clr>Ментального Коммуникатора!<clrEnd> С гордостью сообщаем, что устройство, изначально планировавшееся только как средство связи, позволяет еще и <clr>сканировать клисан!<clrEnd> <br><br>Первый образец Коммуникатора уже подключен к вашему бортовому компьютеру. Помните, рейнджер, что с его помощью Галактика уже была спасена однажды, и используйте же эту вещь с умом.",
                    "DMsg.Num": "53"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 49,
                    "#": 120,
                    "Msg": "Сегодня, <Player>, мы смогли восстановить и доработать <clr>Z-трансмиттер!<clrEnd> Спустя множество неудачных попыток, наши эксперты наконец откалибровали агрегат таким образом, чтобы на его сигнал, как и триста лет назад, слетался клисанский рой.<br><br>Устройство уже загружено в ваш трюм. Мы надеемся, что вы сможете правильно оценить его силу и направите разрушительную силу клисан против наших общих врагов - доминаторов и пиратов.",
                    "DMsg.Num": "54"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 324,
                    "#": 121,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "55"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 346,
                    "#": 122,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "56"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 277,
                    "#": 123,
                    "Msg": "Рейнджер <ShipName(Player())> - да-да, именно так вас надо называть, а не какой-то там барон, хотя, как нам только что стало известно, пираты недавно присвоили вам этот титул официально. Но это уже не имеет никакого - ни малейшего - значения.\r\nПоздравляю вас с победой! Одним ударом вы расправились с лидером пиратов, бароном Чушкачем, продажным адмиралом Дурдымом и безумным ученым Алакаем. Это просто невероятно! Если бы я не знал, что вы рейнджер, то подумал, что это какая-то нелепая случайность. Но нет, вы просто подтвердили свой высочайший класс.\r\nВтереться в доверие ко всему пиратскому сообществу, убедить всю Коалицию в том, что вы окончательно свернули на путь разбоя, а потом явить свое истинное лицо именно в тот момент, когда ваши действия могут спасти всю галактику. Деяние, достойное самого Аарона Кинга, Рихардо Зорро и Кима Филсби вместе взятых!\r\n\r\nЧто-то я увлекся с вашим восхвалением, простите - вижу, вам не по себе, но произошедшее настолько невероятно, насколько действительно. <ShipName(Player())>, сегодня я, а, следовательно, и вся Коалиция, не предлагает никаких подарков за ваши действия, потому что если я даже подарю вам, например, миллиард кредитов - этого все равно будет мало, чтобы адекватно оценить ваши действия, ведь окончание гражданской войны в галактике бесценно. Поэтому я делаю вам уникальное предложение.\r\n\r\nВы можете оставить свою рейнджерскую службу и уйти на покой. Мы обеспечим вас новыми документами, достойной пенсией и домиком где-нибудь в тихом живописном месте, а с наведением порядка в Галактике справимся сами. Теперь, когда пираты психологически надломлены и находятся в растерянности, они уже не смеют захватывать системы Коалиции. Мы определенно взяли над ними верх, и теперь осталось только выловить и добить тех злостных бандитских индивидуумов, которые еще живы и пытаются самостоятельно восстановить жизнеспособность пиратских орд. Притворяться пиратом нужды больше нет. Забудьте про нападения на мирные корабли и захват звездных систем в пользу разбойников. Вы свое дело сделали и сделали его великолепно.",
                    "DMsg.Num": "57"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 191,
                    "#": 124,
                    "Msg": "Да, в этом больше нет необходимости и даже более того - это совершенно исключено. Мы прекрасно понимаем, каким психологическим испытанием были для вас сражения со своими собратьями - рейнджерами и мирными кораблями, которых вам приходилось уничтожать, чтобы не разрушить свое прикрытие. Если вы хотите, то мы даже можем заказать вам курс у малокских специалистов. Говорят, что они творят чудеса. После их мануальной терапии вы даже и не вспомните о пережитых ранее потрясениях.\r\n\r\nВдохновленные вашими подвигами, добровольцы так и ломятся на призывные участки, так что пилотов, чтобы справиться с доминаторами у нас точно хватит. Или же вы можете вернуться на фронт и там доказать, что вы и в деле уничтожения машин-убийц лучше всех. Решайте, <ShipName(Player())>.",
                    "DMsg.Num": "58"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 193,
                    "#": 125,
                    "Msg": "Прекрасно, <ShipName(Player())>! Вы сделали выбор, достойный настоящего рейнджера! Действительно, как можно остаться в стороне, если есть возможность хоть на день приблизить победу над бездушными машинами? А потом уже и про пенсию с домиком можно будет подумать.",
                    "DMsg.Num": "59"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 195,
                    "#": 126,
                    "Msg": "Прекрасно, <ShipName(Player())>! Вы сделали выбор, достойный настоящего рейнджера! Действительно, как можно остаться в стороне, если есть возможность хоть на день приблизить победу над бездушными машинами? А генералы подождут.",
                    "DMsg.Num": "60"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 278,
                    "#": 127,
                    "Msg": "Рейнджер <ShipName(Player())>, это вы, наконец-то! Мы уже заждались вас! Позвольте мне от лица всей сети Центров Рейнджеров поздравить вас с полной победой над пиратским кланом! Вы прекрасно справились с возложенной на вас задачей!\r\nК сожалению, пока вы отважно сражались с бесчисленными ватагами пиратов, адмирал Дурдым успел уничтожить барона Чушкаша, и тем самым положил конец этому гнусному пиратскому клану, а на проведенной вскоре после этого пресс-конференции, выступая журналистами, которые \"случайно\" оказались поблизости, адмирал заявил, что это всё благодаря его \"гениальному\" руководству и \"несравненной\" храбрости, а ваше имя и заслуги в бою даже не упомянул. Какая низость! Возможно, если бы вы не были так заняты боем с превосходящими силами пиратов и поспешили бы на станцию, все было бы иначе и именно ваше имя было бы внесено в учебники истории... Как имена двух полководцев с планеты Земля, которые так увлеклись спором о том, кто из них с триумфом войдёт со знамёнами поверженного противника, что совсем упустили из вида, что враг их уже почти окружил и вскоре разбил, да так, что о победе больше и речи не шло.\r\n\r\nНу, что было - того не вернешь, как гласит людская поговорка. Но, не переживайте: мы-то знаем, кто настоящий герой этой операции! Ваше искусство боя, <ShipName(Player())>, поразило многих уважаемых генералов, и они жаждут как можно скорее прочесть ваш рапорт о стратегии ведения боя с противником, чье численное преимущество сложно даже вообразить. Потери пиратов исчислялись сотнями! Если вы пожелаете отойти от рейнджерской деятельности и осесть где-нибудь вдали от всей этой суеты, Командование Вооружённых Сил Межзвёздной Коалиции готово помочь вам материально и обеспечить безбедное будущее в обмен на ваши советы и знания по тактике ведения боя. Впрочем, если вы пожелаете продолжить свою деятельность, то мы не в праве вас останавливать, однако у вас не будет времени раздавать советы. Так что скажете?",
                    "DMsg.Num": "61"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 212,
                    "#": 128,
                    "Msg": "Прими мои поздравления, <ShipName(Player())>! Отныне ты - настоящий пиратский барон. Носи этот почетный титул с честью пирата новой формации! <br>Сегодня великий день. Как жаль, что он омрачен скорбным событием, весть о котором добралась сюда лишь час назад. В бою погиб Верховный барон Чушкач, наш лидер и идейный вдохновитель. Если бы не он, то мы бы до сих пор шатались по космосу разрозненными кучками и радовались тем крохам, которые позволяла нам урвать Коалиция. Именно он сплотил нас всех, помирил между собой враждующие кланы и указал нам цель, которой мы почти достигли. Более того, он навел мосты сотрудничества между пиратами и официальными властями многих звездных систем галактики. Если раньше мы крали и убегали, спасаясь от заслуженного возмездия властей, то теперь планетарные правители сами делятся с нами долей от своих прибылей, за услуги, которые мы им предоставляем. Это новая ступень эволюции пиратского сообщества, не меньше - попомни мои слова.\r\n\r\nВерховный барон Чушкач погиб, но ты, <ShipName(Player())>, жив. И ты доказал, что можешь стать его достойным преемником и продолжить его великое дело. Твои действия в сегодняшнем бою подтвердили это, и жалкие выкрики завистников, которые пытаются очернить твое великое имя, не могут повлиять на наше решение. Пускай они разносят по темным углам сплетни, будто это ты убил Чушкача - мы знаем, что это черная ложь, а потому предлагаем тебе, барон, стать нашим новым лидером. Имей в виду, что такое предложение делается лишь раз в жизни.\r\n\r\nИли же ты можешь совершить самую большую ошибку в своей жизни и вернуться к своим жалким обязанностям по уничтожению доминаторов.\r\n\r\nВыбирай.\r\n\r\nИ да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!\r\nНоси его как подобает величайшему из пиратов братства.",
                    "DMsg.Num": "62"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 216,
                    "#": 129,
                    "Msg": "М-да... Вот такого мы от тебя, <ShipName(Player())>, не ожидали. Парни уже праздновать приготовились, а ты взял и отказался. Ну и лети тогда к своим ржавым жестянкам, раз они тебе больше по нраву. Глаза бы мои тебя не видели...",
                    "DMsg.Num": "63"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 213,
                    "#": 130,
                    "Msg": "<ShipName(Player())>, позволь пожать тебе руку. Отныне ты - настоящий пиратский барон. Носи этот почетный титул с честью! Ты не только помог нам отбить атаку военных сил Коалиции, но и расправился с Верховным бароном Чушкачом. Безусловно, он был нашим лидером, но тот путь, по которому он вел нас, с каждой минутой приближал нас к пропасти. Ложные успехи на ниве сотрудничества с правителями планет Коалиции вскружили ему голову, и он стал превращать нас всех из пиратов в бизнесменов. Он думал, что это новая ступень развития пиратского сообщества, но на самом деле мы, пираты, вольные птицы, должны делать то, что нам нравится, а не то, что навязывают нам контракты с продажными правителями! Мы должны грабить, убивать, веселиться до упаду и не соблюдать никаких законов! Вот наш истинный путь и сегодня ты напомнил нам о том, какие мы на самом деле!\r\n\r\nИменно поэтому, барон <ShipName(Player())>, мы хотим предложить тебе стать нашим новым лидером! Соглашайся! Йо-хо-хо и бутылка втыкиллы, и все такое! Голос крови! Я имею в виду, после того, что мы тебе предложили, ты действительно готов вернуться к своим опасным и скучным сражениям с доминаторами?\r\n\r\nИ да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!\r\nНоси его как подобает величайшему из пиратов братства.",
                    "DMsg.Num": "64"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 215,
                    "#": 131,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "65"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 214,
                    "#": 279,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "66"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -290,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 360,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "67"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -260,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 364,
                    "Msg": "<tstr3>",
                    "DMsg.Num": "68"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 367,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "69"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 371,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "70"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -120,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 375,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "71"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 383,
                    "Msg": "За прошедшие две сотни лет с момента последней войны развитие клисан не стояло на месте - может, внешне их корабли и фактически идентичны тем данным, что хранятся в наших архивах, однако нам уже довелось убедиться на собственной шкуре, что эта волна клисан значительно отличается от ветви, встреченной Коалицией три века тому назад. Их устройство более совершенно, а технологии во многом превосходят все то, с чем нам вообще доводилось сталкиваться раньше. Что важнее всего - структура этой расы имеет кристаллическую, а не белковую основу, что рушит практически все наши представления о них как об органических существах. Даже самые простейшие процессы, протекающие в их телах, для нас абсолютно чужды и непонятны, и мы можем лишь попытаться описать их, подбирая аналогичные или схожие термины из нашего языка. Принцип работы клисанского оборудования и вовсе остается для нас тайной из тайн.",
                    "DMsg.Num": "72"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 10,
                    "Parent": -1,
                    "#": 385,
                    "Msg": "Именно так, рейнджер.\r\nТем не менее, во времена прошлой войны нам удавалось подключать биологическое оборудование клисан к ситемам наших кораблей. Несмотря на общее чужеродное строение тела клисан, отдельные их органы устроены достаточно просто и могут быть исследованы и адаптированы для применения на наших кораблях. Впрочем, мы не можем быть уверены, функционируют ли эти органы на наших звездолетах в полную силу, или же у клисан они работают еще и как-то иначе, но по крайней мере мы можем добиться рабочего симбиоза.<br>Собственно, ваша задача остается прежней - стараться сбить как можно больше врагов и привезти нам как можно больше ошмётков для изучения. Нам пригодится абсолютно всё, что вы сможете добыть: какие-то части клисан нам уже знакомы и вы можете попробовать поставить их на свой звездолет, но неизученные фрагменты представляют для нас особую ценность.",
                    "DMsg.Num": "73"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 90,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 388,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "74"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 440,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 397,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "75"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 398,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "76"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 920,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 429,
                    "Msg": "Исследование клисан? Рейнджер, вы в своём уме?\r\n\r\nПрямо сейчас - вот именно в этот момент - клисане находятся прямо перед нашим исследовательским комплексом в системе <Name(ShipStar(GroupToShip(MahpellaAlly)))>!\r\n\r\nЕсли так хотите поизучать клисан - немедленно бросайте всё и летите в эту систему!",
                    "DMsg.Num": "77"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 960,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 431,
                    "Msg": "Рейнджер, вы ещё здесь? Прямо около нашей базы находится <clr>Махпелла<clrEnd>, а вы всё ещё пытаетесь что-то нам рассказать об исследованиях клисан?! Вы сейчас шутите, я надеюсь?",
                    "DMsg.Num": "78"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 960,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 433,
                    "Msg": "Судя по данным наших радиосенсоров, мы столкнулись с <clr>ещё одним<clrEnd> представителем клисанской формы жизни.\r\n\r\nВнушает оптимизм то, что, несмотря на нахождение в этой системе, эта махпелла не пытается атаковать наши корабли.\r\n\r\nМы улавливаем сигналы, исходящие от махпеллы, но, увы, специалисты из <clr>коммуникационного<clrEnd> отдела нашей базы недавно отбыли на научный симпозиум, ввиду чего мы не можем как-либо связаться с ней.\r\n\r\nТем временем, у вас, рейнджер, это устройство имеется, и мы надеемся, что вы используете его для благой цели налаживания контакта.",
                    "DMsg.Num": "79"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 439,
                    "Msg": "[На экран бортового компьютера вывело очень много разнообразных уведомлений. Нельзя было сказать, что вам было много что из них понятно, кроме того, что, кажется, почти все алгоритмы расшифровки <clr>Ментального Коммуникатора<clrEnd> дали сбой, однако, устаревшие программы с изначальными настройками каким-то чудом уцелели, и точь-в-точь подошли для перевода]\r\n\r\nКонтактирование...",
                    "DMsg.Num": "80"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 441,
                    "Msg": "Надежду выражаю, что это является правдой. Трудность исследования материала из чужого повествование неоспоримость.",
                    "DMsg.Num": "81"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 443,
                    "Msg": "Имею такой же вопрос в направление вас.",
                    "DMsg.Num": "82"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 445,
                    "Msg": "Группы моей сородич уже находится в этот рукав. Поэтому не видеть ничего странного в моём присутствие.",
                    "DMsg.Num": "83"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 447,
                    "Msg": "Именно так. Я прибыла с миссия установить, по каковой причина мой сородич удерживается вами.\r\n\r\nВ случае сопротивления или неполучение ответ я планирую разобраться с этим ситуация самостоятельно, без разговоров.",
                    "DMsg.Num": "84"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 660,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 452,
                    "Msg": "Термин \"гражданская война\" мне непонятен. Прошу помощь в идентификации.",
                    "DMsg.Num": "85"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 454,
                    "Msg": "Какое варварство. Впрочем, исходя из рассказы о вас, и том, как вас много и на каком пространство вы ютитесь, это неудивительный.\r\n\r\nТак или иначе, я и мои сородичи хотят одного: возвращения одной из нас. Мы уловили её сигналы о помощи, и обнаружили след гиперпространственный прокол, ведущий в ваш рукав.\r\n\r\nМы собрались и долго спорили, но решили, что лучше будет прийти сюда и дать вам возможность объяснить происходящий.",
                    "DMsg.Num": "86"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 530,
                    "Parent": -1,
                    "#": 457,
                    "Msg": "Очень неразумно. Что же, если вы хотите войны, то я вынуждена защищаться",
                    "DMsg.Num": "87"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 660,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 460,
                    "Msg": "Хорошо. Что ты предлагаешь?",
                    "DMsg.Num": "88"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 462,
                    "Msg": "Ничего из этого не поможет поискам. Поэтому ты предлагаешь помочь вам справиться с вашими врагами?",
                    "DMsg.Num": "89"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 530,
                    "Parent": -1,
                    "#": 464,
                    "Msg": "Интересные мысли. Впрочем, кажется, у меня нет выбора. В противном случае мне придётся действовать в одиночку, возможно, участвуя в сражениях с вашими же врагами.\r\n\r\nТогда, будем считать, что мы союзники.",
                    "DMsg.Num": "90"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 468,
                    "Msg": "Твой вид подлежит уничтожению за неразумную агрессивность, <Player>. Ты сам избрал такой путь.",
                    "DMsg.Num": "91"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 780,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 471,
                    "Msg": "Улавливаю попытку контакта от <Player>...\r\n\r\nЧто тебе интересно, органическая особь?",
                    "DMsg.Num": "92"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 810,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 473,
                    "Msg": "То, что ты подразумеваешь под \"женским родом\", кажется мне более сответствующим моей личности, поэтому я избрала такую форму общения. Кто-то из моих сородичей ввиду своего характера предпочёл бы другие формы. Включая, например, те, которые ты бы охарактеризовали как \"мужской\".\r\n\r\nНаше мировосприятие отличается от вашего, ведь оно куда меньше связано с созданием себе подобных.\r\n\r\nЕсли тебе мешает, я могу сменить форму общения.",
                    "DMsg.Num": "93"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 780,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 475,
                    "Msg": "Хочешь узнать что-то ещё от меня, межзвёздный странник?",
                    "DMsg.Num": "94"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 840,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 478,
                    "Msg": "Для моего вида естественнен так называемый \"тёмно-зелёный\", а, точнее, отражение поверхностью наших тел специфического спектра лучей.\r\n\r\nОднако, на одном планетоиде мне и двум другим... Махпеллам удалось получить особый вид микроорганизмов. Мы научили их существовать с нами в симбиозе, и они <clr>помогают мне восстанавливаться после повреждений<clrEnd>. Взамен я подкармливаю их энергией и остатками своих повреждённых частиц.",
                    "DMsg.Num": "95"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 870,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 481,
                    "Msg": "В вашем языке я не нашла термина, который бы достаточно описал это понятие.\r\n\r\nОднажды в наш рукав вторглись очень мерзкие твари, такие же органические, как вы, но он создавали из своих тел корабли и летали от звезды к звезде, поглощая всё на своём пути. Никто бы их не заметил, если бы от них не погиб один из наших сородичей, и, пока последние его части пожирались этими созданиями, он не издал леденящий сознание крик помощи.\r\n\r\nВсе мы, участники налёта на этот корабль, впредь решили держаться ближе и постоянно встречаться. Кроме всего прочего, это очень полезно для обмена опытом, пусть и стесняет нас, ведь мы непривычны к тому, чтобы тратить много времени на друг друга...",
                    "DMsg.Num": "96"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 900,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 484,
                    "Msg": "Извини, рейнджер, но мне нет смысла объяснять это.\r\n\r\nЭто... И слишком лично, и нет. И слишком одухотворено, и слишком низменно. Нет, я не смогу рассказать тебе.",
                    "DMsg.Num": "97"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 930,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 487,
                    "Msg": "О, это весьма интересно!\r\n\r\nВаша цивилизация очень развита для своих лет. Хотя в вас нет единства, вы, всё же, смогли пойти на множество уступок для совместной деятельности. Это заслуживает похвалы.\r\n\r\nС другой стороны, мы имеем куда большую свободу и возможности для экспериментов и познания. Но и опыт исследований на планетах, а также знания о них бесценны для меня.",
                    "DMsg.Num": "98"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 960,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 490,
                    "Msg": "Не страннее, чем небольшим слизистым существом с несколькими отростками, вынужденным перемещаться меж звёзд посредством огромных по сравнению с ними машин. Так сильно зависеть от исправности техники - это просто ужасно!\r\n\r\nА наши органы позволяют нам получить невероятную свободу и невероятные возможности. Мне очень жаль, что вам если и суждено будет познать подобные чувства, то с очень большим трудом.",
                    "DMsg.Num": "99"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 990,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 493,
                    "Msg": "О, ничего сложного, <Player>. Звёздные системы полны разнообразных планетоидов, пыли и рассеянных газов. Гравитационные аномалии помогают мне собирать и перерабатывать этот материал. Это настолько естественно для меня, что происходит на автоматизме.",
                    "DMsg.Num": "100"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1020,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 496,
                    "Msg": "Всё в порядке, <Player>. Я уже озаботилась этим, и ваши вирусологи и бактериологи передали мне все свои разработки. Пришлось потрудиться над синтезом нужных соединений, но зато теперь я могу побороть любой известный вам вирус. Кроме того, если мне встретится какой-либо ещё, я смогу использовать ваши стратегии для создания нового противоядия.",
                    "DMsg.Num": "101"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1060,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 502,
                    "Msg": "Время для разговоров будет после, мой друг",
                    "DMsg.Num": "102"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 640,
                    "Pos.y": -110,
                    "Parent": -1,
                    "#": 506,
                    "Msg": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, <Player>. Первым делом вы наверняка захотите выхватить бластер, но, поверьте, вы ничего не потеряете, если позволите мне объясниться. Как вы уже, наверное, догадались, к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов...",
                    "DMsg.Num": "103"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": -110,
                    "Parent": -1,
                    "#": 508,
                    "Msg": "Так-так, спокойнее, <Player>... Да, кажется, в этот раз я прогадал, и поставил на тёмную лошадку. Некомпетентность лидеров Клана не знает границ.\r\n\r\nВыходит, теперь мы должны договориться, да?",
                    "DMsg.Num": "104"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1140,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 514,
                    "Msg": "Итак, рейнджер, мы нашли моего сородича. Отпусти его.",
                    "DMsg.Num": "105"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1140,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 516,
                    "Msg": "Значит, мне придётся применить силу... Очень, очень жаль.",
                    "DMsg.Num": "106"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -1170,
                    "Pos.y": -340,
                    "Parent": -1,
                    "#": 523,
                    "Msg": "Это было не самым лёгким испытаний, но вы успешно справились с задачей, рейнджер! Клисанское логово полностью уничтожено, а Пиратский Клан, замешанный в жуткой истории с попыткой приручения Махпеллы, обезврежен и обезглавлен. Мы уже выяснили, кто был основной причиной всего этого беспредела - <clr>Далани Алакай<clrEnd>, который рассматривался в рамках задачи \"найти и уничтожить\" спецподразделениями Коалиции. Явно потерявший рассудок учёный ещё очень давно пытался продвинуть свою идею контроля над клисанами, за что и был арестован, и из-под ареста же при поддержке неизвестных - едва уловимой нитью там просматривался след очередной группы коррумпированных чиновников и лидеров Клана - бежал. Спецслужбы искали его долгие годы, и вот выяснилось, что именно отступники под предводительством своего нового Барона укрыли безумца. Вы прекрасно понимаете, почему мы не могли допустить существования данной технологии. Это необходимо было сделать, <Player>, и мы благодарны вам за ликвидацию последствий, допущенных, пожалуй, наиболее страшным из наших провалов. Ваше имя, как и всех, кто участвовал в штурме секретной пиратской базы, навсегда войдёт в историю Коалиции.\r\n\r\nКроме того, именно вы, рейнджер, стали важнейшим элементом наших взаимоотношений с появившейся после Махпеллой из другого рукава. Вы смогли наладить контакт, и благодаря вам наши учёные сейчас занимаются выводом наноботов из тела Махпеллы. Полномасштабное сотрудничество, союзничество и обмен опытом - то, о чём триста лет назад никто и не подумал бы! Фантастика! Все разумные существа Галактики в неотплатном долгу перед вами, рейнджер.",
                    "DMsg.Num": "107"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 670,
                    "Pos.y": -140,
                    "Parent": -1,
                    "#": 524,
                    "Msg": "Ну, допустим, за виллу на отдалённой курортной планете, где я смогу заниматься любыми изысканиями...",
                    "DMsg.Num": "108"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 730,
                    "Pos.y": -140,
                    "Parent": -1,
                    "#": 526,
                    "Msg": "Ладно, ладно, сейчас начнём. Только учтите - процесс небыстрый, займёт несколько месяцев, ведь нужно вывести наноботов из всех её органов. Кроме того, Махпелле явно потребуется реабилитация...",
                    "DMsg.Num": "109"
                }
            ],
            "Dialogs": 
            [
                {
                    "Type": "TDialog",
                    "Name": "KlissanInfoRC",
                    "Pos.x": -30,
                    "Pos.y": -250,
                    "Parent": -1,
                    "#": 31
                },
                {
                    "Type": "TDialog",
                    "Name": "HandlerCall",
                    "Pos.x": 460,
                    "Pos.y": -140,
                    "Parent": -1,
                    "#": 32
                },
                {
                    "Type": "TDialog",
                    "Name": "HandlerDialog",
                    "Pos.x": 560,
                    "Pos.y": -190,
                    "Parent": -1,
                    "#": 33
                },
                {
                    "Type": "TDialog",
                    "Name": "KlissanControl",
                    "Pos.x": 420,
                    "Pos.y": -370,
                    "Parent": -1,
                    "#": 34
                },
                {
                    "Type": "TDialog",
                    "Name": "KlissanControl_OrderStarAttack",
                    "Pos.x": 110,
                    "Pos.y": 20,
                    "Parent": 34,
                    "#": 35
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_Coalition_TortugatzCaptured_TalkWB",
                    "Pos.x": -980,
                    "Pos.y": -400,
                    "Parent": -1,
                    "#": 36
                },
                {
                    "Type": "TDialog",
                    "Name": "Protoplasm",
                    "Pos.x": -420,
                    "Pos.y": -70,
                    "Parent": -1,
                    "#": 37
                },
                {
                    "Type": "TDialog",
                    "Name": "LiberationPirates",
                    "Pos.x": 220,
                    "Pos.y": -250,
                    "Parent": -1,
                    "#": 38
                },
                {
                    "Type": "TDialog",
                    "Name": "LiberationNormals",
                    "Pos.x": 90,
                    "Pos.y": -250,
                    "Parent": -1,
                    "#": 39
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_Specagent_GalaxyFreedStage2",
                    "Pos.x": 80,
                    "Pos.y": 20,
                    "Parent": 42,
                    "#": 40
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_Specagent_GalaxyFreedStage3",
                    "Pos.x": 80,
                    "Pos.y": 20,
                    "Parent": 40,
                    "#": 41
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_Specagent_GalaxyFreedStage1",
                    "Pos.x": -770,
                    "Pos.y": -250,
                    "Parent": -1,
                    "#": 42
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_PirateClan_GalaxyConquered",
                    "Pos.x": -980,
                    "Pos.y": -90,
                    "Parent": -1,
                    "#": 43
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_Specagent_AlakayKilled",
                    "Pos.x": -1090,
                    "Pos.y": -170,
                    "Parent": -1,
                    "#": 44
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_PirateClan_AlakayKilled",
                    "Pos.x": -1200,
                    "Pos.y": -100,
                    "Parent": -1,
                    "#": 45
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_Specagent_AlakayExiled",
                    "Pos.x": -980,
                    "Pos.y": -250,
                    "Parent": -1,
                    "#": 46
                },
                {
                    "Type": "TDialog",
                    "Name": "KlissanControl_OrderStarFree",
                    "Pos.x": 60,
                    "Pos.y": 20,
                    "Parent": 35,
                    "#": 47
                },
                {
                    "Type": "TDialog",
                    "Name": "MentalCommunicator_ResearchDone",
                    "Pos.x": 360,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 48
                },
                {
                    "Type": "TDialog",
                    "Name": "ZTransmitter_ResearchDone",
                    "Pos.x": -80,
                    "Pos.y": -40,
                    "Parent": 48,
                    "#": 49
                },
                {
                    "Type": "TDialog",
                    "Name": "KlissanTalk",
                    "Pos.x": -20,
                    "Pos.y": -370,
                    "Parent": -1,
                    "#": 50
                },
                {
                    "Type": "TDialog",
                    "Name": "MachpellaTalk",
                    "Pos.x": 90,
                    "Pos.y": -370,
                    "Parent": -1,
                    "#": 51
                },
                {
                    "Type": "TDialog",
                    "Name": "DialogRCWin5",
                    "Pos.x": -360,
                    "Pos.y": -400,
                    "Parent": -1,
                    "#": 52
                },
                {
                    "Type": "TDialog",
                    "Name": "DialogPBWin2",
                    "Pos.x": 110,
                    "Pos.y": 0,
                    "Parent": 52,
                    "#": 53
                },
                {
                    "Type": "TDialog",
                    "Name": "DialogPBWin4",
                    "Pos.x": 100,
                    "Pos.y": 0,
                    "Parent": 53,
                    "#": 54
                },
                {
                    "Type": "TDialog",
                    "Name": "WB_talk",
                    "Pos.x": 210,
                    "Pos.y": -370,
                    "Parent": -1,
                    "#": 55
                },
                {
                    "Type": "TDialog",
                    "Name": "CB_talk",
                    "Pos.x": 290,
                    "Pos.y": -370,
                    "Parent": -1,
                    "#": 56
                },
                {
                    "Type": "TDialog",
                    "Name": "SellSpore",
                    "Pos.x": -290,
                    "Pos.y": -70,
                    "Parent": -1,
                    "#": 356
                },
                {
                    "Type": "TDialog",
                    "Name": "BuySpore",
                    "Pos.x": -150,
                    "Pos.y": -70,
                    "Parent": -1,
                    "#": 358
                },
                {
                    "Type": "TDialog",
                    "Name": "RemainsBegin",
                    "Pos.x": 0,
                    "Pos.y": -80,
                    "Parent": -1,
                    "#": 382
                },
                {
                    "Type": "TDialog",
                    "Name": "Remains",
                    "Pos.x": 90,
                    "Pos.y": 10,
                    "Parent": -1,
                    "#": 389
                },
                {
                    "Type": "TDialog",
                    "Name": "SellRemains",
                    "Pos.x": 240,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 394
                },
                {
                    "Type": "TDialog",
                    "Name": "InvestigEnd",
                    "Pos.x": 440,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 395
                },
                {
                    "Type": "TDialog",
                    "Name": "Sold",
                    "Pos.x": 210,
                    "Pos.y": 40,
                    "Parent": -1,
                    "#": 403
                },
                {
                    "Type": "TDialog",
                    "Name": "SoldMore",
                    "Pos.x": 270,
                    "Pos.y": 160,
                    "Parent": -1,
                    "#": 407
                },
                {
                    "Type": "TDialog",
                    "Name": "MachpellaAllyDialog",
                    "Pos.x": 570,
                    "Pos.y": 280,
                    "Parent": -1,
                    "#": 422
                },
                {
                    "Type": "TDialog",
                    "Name": "SBAllyMahpaBefore",
                    "Pos.x": 920,
                    "Pos.y": -20,
                    "Parent": -1,
                    "#": 426
                },
                {
                    "Type": "TDialog",
                    "Name": "Ending_Coalition_TortugatzCaptured",
                    "Pos.x": -1200,
                    "Pos.y": -400,
                    "Parent": -1,
                    "#": 520
                }
            ],
            "Groups": 
            [
                {
                    "Type": "TGroup",
                    "Name": "PlayerGroup",
                    "Pos.x": 0,
                    "Pos.y": -40,
                    "Parent": 5,
                    "#": 10,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 1,
                    "CntShipMax": 1,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": true,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "Machpella",
                    "Pos.x": 240,
                    "Pos.y": 90,
                    "Parent": 5,
                    "#": 11,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "Handler",
                    "Pos.x": 0,
                    "Pos.y": 90,
                    "Parent": 5,
                    "#": 12,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "HandlerGuardShips",
                    "Pos.x": 90,
                    "Pos.y": 90,
                    "Parent": 5,
                    "#": 13,
                    "Owner": 0,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "UnknownShips",
                    "Pos.x": 240,
                    "Pos.y": 0,
                    "Parent": 5,
                    "#": 14,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "CoalitionAssaultWarriors",
                    "Pos.x": -170,
                    "Pos.y": 0,
                    "Parent": 5,
                    "#": 15,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "CoalitionAssaultWB",
                    "Pos.x": -360,
                    "Pos.y": 0,
                    "Parent": 5,
                    "#": 16,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "ToGetRewardShips",
                    "Pos.x": 400,
                    "Pos.y": 0,
                    "Parent": 5,
                    "#": 314,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "Neurolinks",
                    "Pos.x": -360,
                    "Pos.y": 90,
                    "Parent": 5,
                    "#": 325,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "KlissanShips",
                    "Pos.x": -170,
                    "Pos.y": 90,
                    "Parent": 5,
                    "#": 330,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "MahpellaAlly",
                    "Pos.x": 170,
                    "Pos.y": 370,
                    "Parent": -1,
                    "#": 412,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": 422,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "KlissanAlly",
                    "Pos.x": 170,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 413,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "GroupWaiting",
                    "Pos.x": 230,
                    "Pos.y": 280,
                    "Parent": -1,
                    "#": 434,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "KlissanAllyRaid",
                    "Pos.x": 310,
                    "Pos.y": 370,
                    "Parent": -1,
                    "#": 498,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                }
            ],
            "Items": 
            [
                {
                    "Type": "TItem",
                    "Name": "MacrophaseShiftGenerator",
                    "Pos.x": 180,
                    "Pos.y": -120,
                    "Parent": -1,
                    "#": 9,
                    "Class": 5,
                    "Item.Type": 0,
                    "Size": 10,
                    "Level": 1,
                    "Radius": 150,
                    "Owner": 6,
                    "Useless": ""
                }
            ],
            "Operations": 
            [
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -440,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 2,
                    "Code.Type": "Global",
                    "Code": 
                    [
                        "GRun();"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 0,
                    "Parent": 2,
                    "#": 17,
                    "Code.Type": "Init",
                    "Code": 
                    [
                        "//Объявляем массив со всей основной информацией о клисанах и их сюжетке",
                        "DeclareKlissanInvasionArray();",
                        "//Запоминаем уровень сложности клисан",
                        "KlissanInvasion['KlissanDiffLevel'] = 50 * GetParFromTxt('SpaceRangersHD\\ModsCFG.txt', 'KlissanDiffLevel');",
                        "if(KlissanInvasion['KlissanDiffLevel'] <= 0) KlissanInvasion['KlissanDiffLevel'] = 50; //Вариант по умолчанию",
                        "",
                        "//Запоминаем уровень интеллекта учёных (сложность)",
                        "ScientistsIntelligence = PortionInDiapason(GalaxyDiffLevels(2) / 50, 1, 10, 10, 1);",
                        "",
                        "//Записываем номера Тортугаца и Нифигаца (для удобной читаемости в коде)",
                        "TortugatzId = Id(PlanetToStar(PlanetPirateClan())) - 1;",
                        "NifigatzId = 71;",
                        "",
                        "ShipAddCustomShipInfo(Player(),'ShuKlissan_LeprosyStop','NoShow');",
                        "ShipCustomShipInfoData(Player(),'ShuKlissan_LeprosyStop',1,0);",
                        "",
                        "//Создаём кастомные орудия",
                        "InventShuKlissanCustomGuns();",
                        "gunUpdateCheck = CT('Items.Weapon.CustomWeapon.StatsVersion.ShuKlissan');",
                        "//Функция для объявления и обновления кастомных орудий",
                        "function InventShuKlissanCustomGuns()",
                        "{",
                        "    for(int i = 1; i <= CT('Items.Weapon.CustomWeapon.ShuKlissan.Count'); i = i + 1)",
                        "    {",
                        "        //По очереди выбираем системное название каждой новой пушки из Lang",
                        "        str gun_type = CT('Items.Weapon.CustomWeapon.ShuKlissan.' + i);",
                        "        str path = 'Items.Weapon.CustomWeapon.';",
                        "        //Прописываем пушку/сбрасываем уже прописанную пушку до уровня базовой из оригинальной игры",
                        "        dword gun_info = InventNewCustomWeapon(gun_type, t_Weapon1 - 1 + CT('Items.Weapon.OriginalWeaponType.' + CT(path + gun_type + '.BaseGun')));",
                        "        //Задаём характеристики оружия",
                        "        SetCustomWeaponShotData(gun_info, CT(path + gun_type + '.ShotType'), CT(path + gun_type + '.Speed'), CT(path + gun_type + '.AverageRadius'), CT(path + gun_type + '.SecondaryDamageRadius'), CT(path + gun_type + '.MiningFactor'), CT(path + gun_type + '.ShotsPerTurn'));",
                        "        SetCustomWeaponDamageData(gun_info, CT(path + gun_type + '.MinDamage'), CT(path + gun_type + '.MaxDamage'), CT(path + gun_type + '.DamageSet'), CT(path + gun_type + '.mWeaponDamage'));",
                        "        SetCustomMissileWeaponStats(gun_info, CT(path + gun_type + '.MissileRadius'), CT(path + gun_type + '.MissileMaxSpeed'), CT(path + gun_type + '.MissileMinSpeed'), CT(path + gun_type + '.MissileChanceToBeHit'));",
                        "        SetCustomWeaponPrimaryData(gun_info, CT(path + gun_type + '.TechLevel'), t_Weapon1 - 1 + CT('Items.Weapon.OriginalWeaponType.' + CT(path + gun_type + '.InventTechLevel')), t_Weapon1 - 1 + CT('Items.Weapon.OriginalWeaponType.' + CT(path + gun_type + '.ArcadeType')));",
                        "        SetCustomWeaponSizeAndCost(gun_info, CT(path + gun_type + '.kCost'), CT(path + gun_type + '.AverageSize'));",
                        "        SetCustomWeaponAvailability(gun_info, CT(path + gun_type + '.StoreAvailability'));",
                        "        SetCustomWeaponSE(gun_info, CT(path + gun_type + '.ShotEffectPath'), CT(path + gun_type + '.SplashEffectPath'), CT(path + gun_type + '.MissileExplosionEffectPath'), CT(path + gun_type + '.ShotEffectPalette'));",
                        "    }",
                        "}",
                        "",
                        "//Записываем текущий ГТУ в локальную переменную",
                        "GTL = GalaxyTechLevel();",
                        "//Выставляем маркер о том, что был подключён мод EvoArmada",
                        "if(!EvoArmadaInit)",
                        "{",
                        "    if(BlockExist('Script.Mod_EvoArmada')) EvoArmadaInit = 1;",
                        "    if(BlockExist('Script.Mod_EvoDreadnought')) EvoArmadaInit = 1;",
                        "}",
                        "",
                        "//KlissanInvasion['StartDay'] - хранит в себе номер хода, в который состоится/состоялось первое появление клисан",
                        "//Если к моменту запуска скрипта один из доминаторских боссов был уничтожен,",
                        "//либо игрок получил в клане звание не ниже \"Атамана\", время появления клисан \"инициализируется\" почти мгновенно (через 15-30 ходов)",
                        "if(DomiksDefeated(0) || DomiksDefeated(1) || DomiksDefeated(2) || GetShipPirateRank(Player()) >= 5)",
                        "{",
                        "    KlissanInvasion['StartDay'] = CurTurn() + Rnd(15, 30) + 182; //Скрипт стартует в 3299, ещё до появления игрока",
                        "}",
                        "//Иначе запускаем стандартный рандомизатор с модификатором от настройки сложности клисан",
                        "//Рандомим дату от 4 до 7 лет, после чего умножаем её на модификатор сложности (чем сложнее, тем раньше)",
                        "else",
                        "{",
                        "    KlissanInvasion['StartDay'] = CurTurn() + round(PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 500, 50, 0.4, 1.4) * (Rnd(1460, 2555)));",
                        "",
                        "    //Для совместимости с модом на отложенное появление клана",
                        "    if(CurrentMods('Tweaks\\RevolutionDelayed'))",
                        "    {",
                        "        KlissanInvasion['StartDay'] = KlissanInvasion['StartDay'] - 301 + GetValueFromScript('Mod_RevolutionDelayed', 'pirates_begin_turn');",
                        "    }",
                        "}",
                        "",
                        "//Время начала появления мутаций у клисан (чем больше времени прошло после этой даты, тем чаще будут возникать мутации (акрины))",
                        "KlissanInvasion['MutationsStartDay'] = KlissanInvasion['StartDay'] + round(PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 500, 50, 0.8, 1.4) * (Rnd(912, 1544)));",
                        "",
                        "//Для отладки",
                        "//KlissanInvasion['StartDay'] = CurTurn() + 3;",
                        "",
                        "//Задаём первую дату до возможности нападения на систему неизвестных кораблей из ЧД",
                        "UnknownShipsAttackTurn = CurTurn() + Rnd(1095, 1825); //От 3 до 5 лет со старты игры/скрипта",
                        "",
                        "//К сожалению, прямо отсюда их ещё нельзя добавить в скриптовые группы - это производим только в тёрнкоде",
                        "cur_ship = SpawnHandler(GalaxyStar(TortugatzId));",
                        "ShipSetCoords(SpawnMachpella(GalaxyStar(TortugatzId), PlanetPirateClan()), CoordX(cur_ship) + RndObject(-200, 200, cur_ship), CoordY(cur_ship) + RndObject(-200, 200, cur_ship));",
                        "",
                        "//Спавнится всего с 1 лезкой - исправить это!",
                        "//Исполню с радостью!",
                        "function SpawnHandler(dword star)",
                        "{",
                        "    dword handler = BuildCustomRuins(star, 'Handler', 8);",
                        "    RuinsChangeType(handler, t_CB);",
                        "    ShipOwner(handler, PirateClan);",
                        "    ShipPilotRace(handler, Fei);",
                        "    SetName(handler, CT('ShipType.TypeName.HandlerSmall'));",
                        "    Chameleon(handler, 'Ruins.Handler');",
                        "",
                        "    dword hull = ShipItems(handler, 0);",
                        "    ItemSize(hull, round(1.2 * ItemSize(hull)));",
                        "    ItemLevel(hull, 6);",
                        "    int hull_level = 6;",
                        "    //Если подключена EvoArmada, бафаем Хандлер",
                        "    if(EvoArmadaInit)",
                        "    {",
                        "        int GeneralDiffLevel = round(0.02 * GalaxyDiffLevels());",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_ExtraSpecialsLineBreak'));",
                        "        int tint = round((3 * GeneralDiffLevel) + (3 * PortionInDiapason(hull_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_bonWRadius'), tint);",
                        "        tint = round((0.5 * GeneralDiffLevel) + (0.5 * PortionInDiapason(hull_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_bonHull'), tint);",
                        "",
                        "        ShipSpecialBonuses(handler, bonAttacks, 2);",
                        "        //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "        ShipAddCustomShipInfo(handler, 'EvoArmada_CapitalShipInfos', 'NoShow', 2);",
                        "",
                        "        //Повышаем количество HP",
                        "        ItemSize(hull, round(1.0 * ItemSize(hull) * (1.4 + (0.3 * GeneralDiffLevel))));",
                        "        //И значительно снижаем получаемый от астероидов урон",
                        "        ShipSpecialBonuses(handler, bonResistAsteroid, 75);",
                        "    }",
                        "",
                        "    HullHP(hull, 'To100');",
                        "",
                        "    //Чистим и блокируем от обновления магазины на Хандлере",
                        "    for(int i = 0; i <= 7; i = i + 1)",
                        "    {",
                        "        //Запоминаем количество уже имеющегося в магазине товара",
                        "        int goods = GoodsAdd(handler, i, 0);",
                        "        //И обнуляем его",
                        "        GoodsAdd(handler, i, -goods);",
                        "    }",
                        "    for(i = ShopItems(handler) - 1; i >= 0; i = i - 1) FreeItem(GetItemFromShop(handler, i));",
                        "    NoShopUpdate(handler, 1);",
                        "",
                        "    dword item = ShipEqInSlot(handler, t_CargoHook);",
                        "    if(item) FreeItem(GetItemFromShip(handler, item));",
                        "",
                        "    item = ShipEqInSlot(handler, t_RepairRobot);",
                        "    if(item)",
                        "    {",
                        "        item = CreateEquipment(t_RepairRobot, RndObject(50, 80, handler), 6, Fei);",
                        "        AddItemToShip(handler, item);",
                        "        ItemIsInUse(item, handler, 1);",
                        "    }",
                        "    for(i=0;ShipSlots(handler,1)>i;i=i+1) {",
                        "        if(ShipEqInSlot(handler,t_Weapon1,i)) continue;",
                        "        if(GTL <= 4) ItemIsInUse(CreateEquipment(t_Weapon3,Rnd(60,100),GTL,Fei),handler,1,i);",
                        "        if(GTL == 5) ItemIsInUse(CreateEquipment(t_Weapon7,Rnd(90,140),GTL,Fei),handler,1,i);",
                        "        if(GTL == 6) ItemIsInUse(CreateEquipment(t_Weapon9,Rnd(80,110),GTL,Fei),handler,1,i);",
                        "        if(GTL == 7) ItemIsInUse(CreateEquipment(t_Weapon11,Rnd(90,120),GTL,Fei),handler,1,i);",
                        "        if(GTL == 8) ItemIsInUse(CreateEquipment(t_Weapon10,Rnd(80,150),GTL,Fei),handler,1,i); //У Визиона есть сплэш, в отличие от Дезинтегратора",
                        "    }",
                        "",
                        "    //Небольшие бафы",
                        "    ShipSpecialBonuses(handler, bonDroid, 35);",
                        "    ShipSkill(handler, 0, 6);",
                        "    ShipSkill(handler, 1, 6);",
                        "",
                        "    NoLanding(handler, 1);",
                        "    ShipAddCustomShipInfo(handler, 'ShipImmortalInfo', 'NoShow');",
                        "    KlissanInvasion['HandlerId'] = Id(handler);",
                        "    result = handler;",
                        "}",
                        "",
                        "function SpawnMachpella(dword star, dword planet)//, dword star_to_transfer)",
                        "{",
                        "    dword machpella = BuyRanger(planet);",
                        "    RangerExcludedFromRating(machpella, 1);",
                        "    ShipType(machpella, 'Machpella');",
                        "    ShipPilotRace(machpella, Gaal); //Чтобы точно не прилетела графика Таухито",
                        "    ShipOwner(machpella, PirateClan);",
                        "    SetName(machpella, CT('ShipType.Klissan.Machpella'));",
                        "    ShipFace(machpella, 0);",
                        "    ShipSubType(machpella, 0); //Статус торговец (просто для маркерности)",
                        "    ShipStatus(machpella, 0, 34);",
                        "    ShipStatus(machpella, 1, 33);",
                        "    ShipStatus(machpella, 2, 33);",
                        "    ShipMoney(machpella, 0);",
                        "    Chameleon(machpella, 'Ruins.Machpella');",
                        "",
                        "    ShipSkill(machpella, 'Accuracy', 6);",
                        "    ShipSkill(machpella, 'Mobility', 6);",
                        "    ShipSkill(machpella, 'Technical', 6);",
                        "    ShipSkill(machpella, 'Trader', 0);",
                        "    ShipSkill(machpella, 'Charm', 0);",
                        "    ShipSkill(machpella, 'Leadership', 0);",
                        "",
                        "    int klissan_diff = 0.02 * KlissanInvasion['KlissanDiffLevel'];",
                        "    int klissan_diff_div2 = 0.01 * KlissanInvasion['KlissanDiffLevel'];",
                        "",
                        "    //Меняем базовый размер корпуса махпеллы в зависимости от сложности настройки клисан",
                        "    int hull_level = 8;",
                        "    dword hull = CreateHull(6, PortionInDiapason(klissan_diff, 1, 10, 4250, 18600) + RndObject(-300, 600, machpella), hull_level, None, -1);",
                        "    SpecialToEquipment(FindBonusByNameInCfg('ShuKlissan_MachpellaHull'), hull);",
                        "    EqCustomFaction(hull, 'Klissan');",
                        "    //Удаляем старый корпус и устанавливаем новый",
                        "    FreeItem(GetItemFromShip(machpella, 0));",
                        "    AddItemToShip(machpella, hull);",
                        "",
                        "    //Сперва удаляем всё базовое оборудование махпеллы",
                        "    for(int i = ShipItems(machpella) - 1; i > 0; i = i - 1) FreeItem(GetItemFromShip(machpella, i));",
                        "    //Выдаём ей 4 клисанские пушки",
                        "    for(i = 1; i <= 3; i = i + 1) GiveEgemonEq(machpella, t_CustomWeapon, 100);",
                        "",
                        "    //Также выдаём ей особую клисанскую пушку, и заносим копию этой пушки в гарантированный дроп",
                        "    dword item = CreateCustomWeapon('klissan_hellwave', 150, 8, None);",
                        "    SetName(item, '<color=0,191,255>' + CT('Items.Weapon.Name.MachpellaHellWave') + '</color>');",
                        "    EqCustomFaction(item, 'Klissan');",
                        "    SpecialToEquipment(FindBonusByNameInCfg('ShuKlissan_MachpellaHellWave'), item);",
                        "    SetEquipmentStats(item, 140, 0);",
                        "    SetEquipmentStats(item, 140, 1);",
                        "    SetEquipmentStats(item, 400, 2);",
                        "    AddItemToShip(machpella, item);",
                        "    ItemIsInUse(item, machpella, 1);",
                        "    NoDropItem(item, 1);",
                        "",
                        "    //Добавляем пушку в дроп",
                        "    dword cloned_item = CreateCustomWeapon('klissan_hellwave', 150, 8, None);",
                        "    SetName(cloned_item, Name(item));",
                        "    EqCustomFaction(cloned_item, 'Klissan');",
                        "    SpecialToEquipment(EqSpecial(item), cloned_item);",
                        "    ItemSize(cloned_item, ItemSize(item));",
                        "    ItemCost(cloned_item, ItemCost(item));",
                        "    SetEquipmentStats(cloned_item, GetEquipmentStats(item, 0), 0);",
                        "    SetEquipmentStats(cloned_item, GetEquipmentStats(item, 1), 1);",
                        "    SetEquipmentStats(cloned_item, GetEquipmentStats(item, 2), 2);",
                        "    ShipAddDropItem(machpella, cloned_item);",
                        "    //А теперь добавляем ещё одну, но только если нет мода",
                        "    if(CT('KlissanGuns')) {",
                        "        item = CreateCustomWeapon('eye_machpell', 150, 8, None);",
                        "        EqCustomFaction(item, 'Klissan');",
                        "        AddItemToShip(machpella, item);",
                        "        ItemIsInUse(item, machpella, 1);",
                        "        NoDropItem(item, 1);",
                        "        SetEquipmentStats(item, 160, 0);",
                        "        SetEquipmentStats(item, 270, 1);",
                        "        SetEquipmentStats(item, 500, 2);",
                        "",
                        "        LinkItemToScript(item);",
                        "        ItemOnActCode(item,GenerateCodeStringFromBlock('ActCodeBlocksList.EyeOfMachpellaActCode'));",
                        "",
                        "        //Добавляем пушку в дроп",
                        "        cloned_item = CreateCustomWeapon('klissan_hellwave', 150, 8, None);",
                        "        SetName(cloned_item, Name(item));",
                        "        EqCustomFaction(cloned_item, 'Klissan');",
                        "        SpecialToEquipment(EqSpecial(item), cloned_item);",
                        "        ItemSize(cloned_item, ItemSize(item));",
                        "        ItemCost(cloned_item, ItemCost(item));",
                        "        SetEquipmentStats(cloned_item, GetEquipmentStats(item, 0), 0);",
                        "        SetEquipmentStats(cloned_item, GetEquipmentStats(item, 1), 1);",
                        "        SetEquipmentStats(cloned_item, GetEquipmentStats(item, 2), 2);",
                        "",
                        "        LinkItemToScript(cloned_item);",
                        "        ItemOnActCode(cloned_item,GenerateCodeStringFromBlock('ActCodeBlocksList.EyeOfMachpellaActCode'));",
                        "        ShipAddDropItem(machpella, cloned_item);",
                        "    }",
                        "    else {",
                        "        GiveEgemonEq(machpella, t_CustomWeapon, 100);",
                        "    }",
                        "",
                        "    //Выдаём махпелле лучшее клисанское снаряжение",
                        "    for(i = t_FuelTanks; i <= t_DefGenerator; i = i + 1) GiveEgemonEq(machpella, i, 100);",
                        "    ShipSpecialBonuses(machpella, bonHookRadius, -1000); //Чтобы не собирала минералы",
                        "",
                        "    //Если подключена EvoArmada, бафаем махпеллу",
                        "    if(EvoArmadaInit)",
                        "    {",
                        "        int GeneralDiffLevel = round(0.02 * GalaxyDiffLevels());",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_ExtraSpecialsLineBreak'));",
                        "        //Вешаем махпелле бонусы на силу энергетических и осколочных орудий, эффективность дроида, а также на эффективность ГЗП",
                        "        int tint = round((1.5 * GeneralDiffLevel) + (1.5 * PortionInDiapason(hull_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_bonWEnergy'), tint);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_bonWSplinter'), tint);",
                        "        tint = round((7.5 * GeneralDiffLevel) + (7.5 * PortionInDiapason(hull_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(item, FindBonusByNameInCfg('EvoArmada_bonDroid'), tint);",
                        "        tint = round((1.75 * GeneralDiffLevel) + (1.75 * PortionInDiapason(hull_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(item, FindBonusByNameInCfg('EvoArmada_bonDef'), tint);",
                        "",
                        "        //Увеличиваем размер корпуса махпеллы",
                        "        ItemSize(hull, round(ItemSize(hull) * (1.0 + (0.45 * GeneralDiffLevel))));",
                        "",
                        "        //Также увеличиваем число её залпов",
                        "        int bon_attacks = 2;",
                        "        ShipSpecialBonuses(machpella, bonAttacks, bon_attacks);",
                        "        //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "        ShipAddCustomShipInfo(machpella, 'EvoArmada_CapitalShipInfos', 'NoShow', bon_attacks);",
                        "    }",
                        "    HullHP(hull, 'To100');",
                        "",
                        "    //Добавляем протоплазму в гарантированный дроп",
                        "    tint = PortionInDiapason(klissan_diff, 1, 10, 35, 15);",
                        "    for(i = 1; i <= tint; i = i + 1)",
                        "    {",
                        "        item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(40 - klissan_diff_div2, 1), max(120 - (klissan_diff_div2 * 4), 24), machpella), 1);",
                        "        EqCustomFaction(item, 'Klissan');",
                        "        ItemCost(item, ItemSize(item) * 30);",
                        "        ShipAddDropItem(machpella, item);",
                        "    }",
                        "",
                        "    //ArrangeItems(machpella);",
                        "    FreeAllHoldEquipment(machpella);",
                        "    //FixOverweight(machpella); //Нет смысла проверять, т.к. тоже самое автоматически делает функция ShipImproveItems()",
                        "",
                        "    //Выдаём махпелле споры",
                        "    ShipImproveItems(machpella, PortionInDiapason(klissan_diff, 1, 10, 7, 18)); //Эта строка автоматически вешает подходящие ММ на оборудку махпеллы",
                        "",
                        "    //Три споры заносим в гарантированный дроп",
                        "    for(i = 1; i <= 3; i = i + 1)",
                        "    {",
                        "        item = CreateMM(FindBonusByNameInCfg(CT('Script.Mod_ShuKlissan.SporesGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesGiveList.Count'), machpella))));",
                        "        ShipAddDropItem(machpella, item);",
                        "    }",
                        "",
                        "    int free_exp = ShipFreeExp(machpella);",
                        "    ShipFreeExp(machpella, 0);",
                        "    SetShipExpByType(machpella, GetShipExpByType(machpella) - free_exp, 0);",
                        "",
                        "    if(!KlissanInvasion['MentalCommunicator.WasReceived']) NoScanToShip(machpella, 1);",
                        "    NoTalkToShip(machpella, 1);",
                        "    NoTargetToShip(machpella, 2); //Чтобы отключить случайную агрессию со стороны пиратов",
                        "    ArrangeItems(machpella);",
                        "    //Повышаем махпелле пиратское звание до хана, чтоб, сука, уважали её тупые пираты! (применимо только для кораблей, не для станций)",
                        "    RaisePirateRank(machpella, 6);",
                        "    RelationToRanger(machpella, Player(), 50); //Нейтральное отношение к игроку",
                        "",
                        "    ShipAddCustomShipInfo(machpella, 'ShipImmortalInfo', 'NoShow');",
                        "    KlissanInvasion['MachpellaId'] = Id(machpella);",
                        "    TransferShip(machpella, star);",
                        "",
                        "    result = machpella;",
                        "}",
                        "",
                        "function MachpellaActCode() //t_OnStep_0/11, t_OnShowingShipInfo, t_OnEnteringForm",
                        "{",
                        "    if(ScriptItemActionType(t_OnStep))",
                        "    {",
                        "        //Возвращаем назад запрет вызова (снимается при отрисовке инфошки корабля махпеллы)",
                        "        NoTalkToShip(ScriptItemActShip(), 1);",
                        "        RemoveIllsAndStims(ScriptItemActShip());",
                        "    }",
                        "    else if(ScriptItemActionType(t_OnShowingShipInfo))",
                        "    {",
                        "        //Снимаем запрет на вызовы, если игрок решил связаться с нейролинком",
                        "        NoTalkToShip(ScriptItemActShip(), 0);",
                        "    }",
                        "    /*else if(ScriptItemActionType(t_OnTakingDamage) || ScriptItemActionType(t_OnTakingDamageSp) || ScriptItemActionType(t_OnTakingDamageMi) || ScriptItemActionType(t_OnTakingDamageEn))",
                        "    {",
                        "        if(ShipInNormalSpace(ScriptItemActShip())) {",
                        "            if(ScriptItemActParam() > 30) {",
                        "                if(ScriptItemActParam() < 60) {",
                        "                    if(Rnd(1,100) > 60) DropItem(ScriptItemActShip(),CreateCustomCountableItem('KlissanProtoplasm',Rnd(1,5),1));",
                        "                }",
                        "                else {",
                        "                    DropItem(ScriptItemActShip(),CreateCustomCountableItem('KlissanProtoplasm',min(Rnd(1,9)+ScriptItemActParam()/15,25),1));",
                        "                }",
                        "            }",
                        "        }",
                        "    }*/",
                        "    else //if(ScriptItemActionType(t_OnEnteringForm))",
                        "    {",
                        "        if(CurrentForm() == 'Scaner')",
                        "        {",
                        "            DeleteRewardByNom(FormCurShip(), -1, 100000);",
                        "            RemoveIllsAndStims(FormCurShip());",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "//Создаёт нейролинк",
                        "function SpawnNeurolink(dword star, dword planet)",
                        "{",
                        "    //dword neurolink = BuildCustomRuins(star, 'Neurolink', 9);",
                        "    //Chameleon(neurolink, 'Ruins.Neurolink');",
                        "    //Предполагается, что нейролинк сперва появляется в Тортугаце на махпелле, а потому поначалу делаем его не враждебным к пиратам",
                        "    //RuinsChangeType(neurolink, t_CB);",
                        "    dword neurolink = BuyRanger(planet);",
                        "    RangerExcludedFromRating(neurolink, 1);",
                        "    ShipType(neurolink, 'Neurolink');",
                        "    ShipPilotRace(neurolink, Gaal); //Чтобы точно не прилетела графика Таухито",
                        "    ShipOwner(neurolink, PirateClan);",
                        "    ShipFace(neurolink, 0);",
                        "    ShipSubType(neurolink, 0); //Статус торговец (просто для маркерности)",
                        "    ShipStatus(neurolink, 0, 34);",
                        "    ShipStatus(neurolink, 1, 33);",
                        "    ShipStatus(neurolink, 2, 33);",
                        "    ShipMoney(neurolink, 0);",
                        "    Chameleon(neurolink, 'Ruins.Neurolink');",
                        "",
                        "    //Выбираем неповторяющееся имя (вплоть до N уникальных имён подряд, после чего могут начать повторяться)",
                        "    int names_count = CT('ShipName.Klissan.Neurolinks.Count');",
                        "    str neurolink_name = CT('ShipName.Klissan.Neurolinks.' + RndObject(1, names_count, neurolink));",
                        "    while(~findsubstr(KlissanInvasion['LastSpawnedNurolinkNames'], '*' + neurolink_name + '*')) neurolink_name = CT('ShipName.Klissan.Neurolinks.' + RndObject(1, names_count, neurolink));",
                        "    KlissanInvasion['LastSpawnedNurolinkNames'] = KlissanInvasion['LastSpawnedNurolinkNames'] + neurolink_name + '*';",
                        "    //Если имён в строке скопилось слишком много, подчищаем её с конца",
                        "    if(ParsCountFromString(KlissanInvasion['LastSpawnedNurolinkNames'], '*') > (names_count - 8 + 2)) //В строке запоминается на 8 имён меньше от их максимального числа в списке",
                        "    {",
                        "        KlissanInvasion['LastSpawnedNurolinkNames'] = SetParFromString(KlissanInvasion['LastSpawnedNurolinkNames'], '*', 1, '');",
                        "        KlissanInvasion['LastSpawnedNurolinkNames'] = substr(KlissanInvasion['LastSpawnedNurolinkNames'], 1);",
                        "    }",
                        "    neurolink_name = neurolink_name + ' -' + RndObject(1, 99, neurolink) + '-';",
                        "    SetName(neurolink, neurolink_name);",
                        "    //Старые именования цифрами",
                        "    //SetName(neurolink, '#' + RndObject(100, 500, neurolink));",
                        "",
                        "    ShipSkill(neurolink, 'Accuracy', RndObject(2, 4, neurolink));",
                        "    ShipSkill(neurolink, 'Mobility', RndObject(1, 3, neurolink));",
                        "    ShipSkill(neurolink, 'Technical', RndObject(3, 5, neurolink));",
                        "    ShipSkill(neurolink, 'Trader', 0);",
                        "    ShipSkill(neurolink, 'Charm', 0);",
                        "    ShipSkill(neurolink, 'Leadership', 0);",
                        "",
                        "    int klissan_diff = 0.02 * KlissanInvasion['KlissanDiffLevel'];",
                        "    int klissan_diff_div2 = 0.01 * KlissanInvasion['KlissanDiffLevel'];",
                        "",
                        "    //Меняем базовый размер корпуса махпеллы в зависимости от сложности настройки клисан",
                        "    int hull_tech_level = min(GTL + 1, 8);",
                        "    dword hull = CreateHull(6, PortionInDiapason(GTL + (klissan_diff / 2), 1, 13, 800, 3800) + RndObject(-200, 300, neurolink), hull_tech_level, None, -1);",
                        "    if(!EvoArmadaInit) SpecialToEquipment(FindBonusByNameInCfg('ShuKlissan_NeurolinkHull'), hull);",
                        "    else SpecialToEquipment(FindBonusByNameInCfg('EvoArmada_NeurolinkHull'), hull);",
                        "    EqCustomFaction(hull, 'Klissan');",
                        "    //Удаляем старый корпус и устанавливаем новый",
                        "    FreeItem(GetItemFromShip(neurolink, 0));",
                        "    AddItemToShip(neurolink, hull);",
                        "",
                        "    //Если подключена EvoArmada, бафаем нейролинк",
                        "    if(EvoArmadaInit)",
                        "    {",
                        "        int GeneralDiffLevel = round(0.02 * GalaxyDiffLevels());",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_ExtraSpecialsLineBreak'));",
                        "        int tint = round((3 * GeneralDiffLevel) + (3 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_bonWRadius'), tint);",
                        "        tint = round((0.5 * GeneralDiffLevel) + (0.5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_bonHull'), tint);",
                        "",
                        "        ShipSpecialBonuses(neurolink, bonAttacks, 1);",
                        "        //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "        ShipAddCustomShipInfo(neurolink, 'EvoArmada_CapitalShipInfos', 'NoShow', 1);",
                        "",
                        "        //Повышаем количество HP",
                        "        ItemSize(hull, round(1.0 * ItemSize(hull) * (1.5 + (0.3 * GeneralDiffLevel))));",
                        "    }",
                        "    HullHP(hull, 'To100');",
                        "    SetName(hull, Format(Name(hull), '<KlissanType'+'>', CT('Items.Hull.KlissanType.' + hull_tech_level), ''));",
                        "",
                        "    for(int i = ShipItems(neurolink) - 1; i > 0; i = i - 1) FreeItem(GetItemFromShip(neurolink, i)); //Удаляем все оборудование, кроме корпуса",
                        "    //Выдача клисанского оружия и оборудования",
                        "    for(i = 0; i < CountKlissanEqByType(neurolink, 2, 0); i = i + 1) GiveNondusEq(neurolink, t_CustomWeapon);",
                        "    GiveNondusEq(neurolink, t_Engine);",
                        "    GiveNondusEq(neurolink, t_FuelTanks);",
                        "    GiveEgemonEq(neurolink, t_Radar);",
                        "    GiveEgemonEq(neurolink, t_Scaner);",
                        "    GiveNondusEq(neurolink, t_CargoHook);",
                        "    GiveEgemonEq(neurolink, t_RepairRobot);",
                        "    GiveNondusEq(neurolink, t_DefGenerator);",
                        "    ShipSpecialBonuses(neurolink, bonHookRadius, -1000); //Чтобы не собирал минералы",
                        "    ShipSpecialBonuses(neurolink, bonResistAsteroid, 100);",
                        "",
                        "    //Зачищаем магазины и блокируем их автозаполнение",
                        "    //for(i = t_Food; i <= t_Narcotics; i = i + 1) GoodsAdd(neurolink, i, -GoodsAdd(neurolink, i, 0));",
                        "    //for(i = ShopItems(neurolink) - 1; i >= 0; i = i - 1) FreeItem(GetItemFromShop(neurolink, i));",
                        "    //NoShopUpdate(neurolink, 1);",
                        "    //ArrangeItems(neurolink);",
                        "    FreeAllHoldEquipment(neurolink);",
                        "",
                        "    //Добавляем протоплазму в гарантированный дроп",
                        "    tint = PortionInDiapason(klissan_diff, 1, 10, 35, 15);",
                        "    for(i = 1; i <= tint; i = i + 1)",
                        "    {",
                        "        dword item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(30 - klissan_diff_div2, 1), max(100 - (klissan_diff_div2 * 4), 24), neurolink), 1);",
                        "        EqCustomFaction(item, 'Klissan');",
                        "        ItemCost(item, ItemSize(item) * 30);",
                        "        ShipAddDropItem(neurolink, item);",
                        "    }",
                        "",
                        "    //Гарантированно вносим 2 споры в дроп, и с неплохим шансом ещё 2",
                        "    item = CreateMM(FindBonusByNameInCfg(CT('Script.Mod_ShuKlissan.SporesGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesGiveList.Count'), neurolink))));",
                        "    ShipAddDropItem(neurolink, item);",
                        "    item = CreateMM(FindBonusByNameInCfg(CT('Script.Mod_ShuKlissan.SporesGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesGiveList.Count'), neurolink))));",
                        "    ShipAddDropItem(neurolink, item);",
                        "    if(RndObject(1, 100, neurolink) <= 45)",
                        "    {",
                        "        item = CreateMM(FindBonusByNameInCfg(CT('Script.Mod_ShuKlissan.SporesGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesGiveList.Count'), neurolink))));",
                        "        ShipAddDropItem(neurolink, item);",
                        "    }",
                        "    if(RndObject(1, 100, neurolink) <= 25)",
                        "    {",
                        "        item = CreateMM(FindBonusByNameInCfg(CT('Script.Mod_ShuKlissan.SporesGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesGiveList.Count'), neurolink))));",
                        "        ShipAddDropItem(neurolink, item);",
                        "    }",
                        "",
                        "    int remains_count = RndObject(9, 15, neurolink);",
                        "    //Заполняем дроп нейролинка ошмётками",
                        "    int remains_max = CT('Script.Mod_ShuKlissan.KlissanRemainsCount');",
                        "    int set_remains_added = 0;",
                        "    for(i = 0; i < remains_count; i = i + 1)",
                        "    {",
                        "        //Подбираем ошмёток, который ещё не выпадал в дроп данному клисану",
                        "        int rand = RndObject(1, remains_max, neurolink);",
                        "        int cnt = 0;",
                        "        while((set_remains_added & (1 << rand))) {",
                        "            rand = RndObject(1, remains_max, neurolink);",
                        "            cnt = cnt + 1;",
                        "            if(cnt > 300) break;",
                        "        }",
                        "        set_remains_added = set_remains_added + (1 << rand);",
                        "        //Добавляемый выбранный ошмёток в дроп",
                        "        item = CreateQuestItem('KlissanRemains' + rand, None);",
                        "        EqCustomFaction(item, 'Klissan');",
                        "        ShipAddDropItem(neurolink, item);",
                        "    }",
                        "",
                        "    //Вешаем фракцию сразу, т.к. в противном случае нейролинку не будут автоматически выдаваться фракционные ММ",
                        "    ShipJoinToScript(neurolink, 'Mod_ShuKlissan.Neurolinks');",
                        "    ShipCustomFaction(neurolink, 'Klissan');",
                        "",
                        "    ShipAddCustomShipInfo(neurolink,'Neurolink_StarDef','NoShow');",
                        "",
                        "    //Выдаём нейролинку споры",
                        "    ShipImproveItems(neurolink, PortionInDiapason(klissan_diff, 1, 10, 4, 12)); //Эта строка автоматически вешает подходящие ММ на оборудку нейролинка",
                        "",
                        "    if(!KlissanInvasion['MentalCommunicator.WasReceived']) NoScanToShip(neurolink, 1);",
                        "    NoTalkToShip(neurolink, 1);",
                        "    NoTargetToShip(neurolink, 2); //Чтобы отключить случайную агрессию со стороны пиратов",
                        "    //Повышаем нейролинку пиратское звание до хана, чтоб, сука, уважали его тупые пираты!",
                        "    RaisePirateRank(neurolink, 6);",
                        "    RelationToRanger(neurolink, Player(), 50); //Нейтральное отношение к игроку",
                        "",
                        "    result = neurolink;",
                        "}",
                        "",
                        "//Нужна, чтобы унифицировать запрос в разных участках скрипта",
                        "function GetNextNeurolinkReadyTime()",
                        "{",
                        "    result = PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 50, 500, 50, 10);",
                        "}",
                        "",
                        "function NeurolinkActCode() //t_OnStep_0/11, t_OnShowingShipInfo, t_OnEnteringForm",
                        "{",
                        "    if(ScriptItemActionType(t_OnStep))",
                        "    {",
                        "        //Возвращаем назад запрет вызова (снимается при отрисовке инфошки корабля нейролинка)",
                        "        NoTalkToShip(ScriptItemActShip(), 1);",
                        "        RemoveIllsAndStims(ScriptItemActShip());",
                        "    }",
                        "    else if(ScriptItemActionType(t_OnShowingShipInfo))",
                        "    {",
                        "        //Снимаем запрет на вызовы, если игрок решил связаться с нейролинком",
                        "        NoTalkToShip(ScriptItemActShip(), 0);",
                        "    }",
                        "    else //if(ScriptItemActionType(t_OnEnteringForm))",
                        "    {",
                        "        if(CurrentForm() == 'Scaner')",
                        "        {",
                        "            DeleteRewardByNom(FormCurShip(), -1, 100000);",
                        "            RemoveIllsAndStims(FormCurShip());",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "//Основная функция спавна случайного (либо конкретного, если sub_type != -1) корабля клисан:",
                        "// 5 - мутенок",
                        "// 4 - рогит",
                        "// 3 - катаури",
                        "// 2 - нондус",
                        "// 1 - эгемон",
                        "function SpawnKlissan(dword planet, int EgCount, int sub_type = -1)",
                        "{",
                        "    //Временная конверсия сложности для более удобных внутренних расчётов",
                        "    int klissan_diff = 0.02 * KlissanInvasion['KlissanDiffLevel'];",
                        "    int klissan_diff_div2 = 0.01 * KlissanInvasion['KlissanDiffLevel'];",
                        "    dword ship;",
                        "",
                        "    //Определяется тип будущего клисана",
                        "    if(sub_type == -1)",
                        "    {",
                        "        sub_type = RndObject(1, 100, planet);",
                        "        //Мутенок",
                        "        if(sub_type <= KlissanInvasion['MutonieSpawnChance'])",
                        "        {",
                        "            sub_type = 5;",
                        "            ship = BuyDomikExtremal(planet, 5);",
                        "        }",
                        "        //Рогит",
                        "        else if(sub_type <= KlissanInvasion['MonchikSpawnChance'])",
                        "        {",
                        "            sub_type = 4;",
                        "            ship = BuyDomikExtremal(planet, 4);",
                        "        }",
                        "        //Катаури",
                        "        else if(sub_type <= KlissanInvasion['CatauriSpawnChance'])",
                        "        {",
                        "            sub_type = 3;",
                        "            ship = BuyDomikExtremal(planet, 3);",
                        "        }",
                        "        //Нондус",
                        "        else if(sub_type <= KlissanInvasion['NondusSpawnChance'])",
                        "        {",
                        "            sub_type = 2;",
                        "            ship = BuyDomikExtremal(planet, 2);",
                        "        }",
                        "        //Эгемон",
                        "        else //if(sub_type <= KlissanInvasion['EgemonSpawnChance']) //Ожидаемо, всегда должно быть равно 100%",
                        "        {",
                        "            if(EgCount >= 3) {",
                        "                sub_type = 5;",
                        "                ship = BuyDomikExtremal(planet, 5);",
                        "            }",
                        "            else {",
                        "                sub_type = 1;",
                        "                ship = BuyDomikExtremal(planet, 1);",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(!sub_type) //Если заказали спавн гигаса",
                        "    {",
                        "        int is_gigas = 1;",
                        "        sub_type = 1;",
                        "        ship = BuyDomikExtremal(planet, 1);",
                        "    }",
                        "    else ship = BuyDomikExtremal(planet, sub_type);",
                        "",
                        "    //Выбираем неповторяющееся имя (вплоть до N уникальных имён подряд, потом могут начать повторяться)",
                        "    int names_count = CT('ShipName.Klissan.Count');",
                        "    str klissan_name = CT('ShipName.Klissan.' + RndObject(1, names_count, ship));",
                        "    while(~findsubstr(KlissanInvasion['LastSpawnedKlissanNames'], '*' + klissan_name + '*')) klissan_name = CT('ShipName.Klissan.' + RndObject(1, names_count, ship));",
                        "    KlissanInvasion['LastSpawnedKlissanNames'] = KlissanInvasion['LastSpawnedKlissanNames'] + klissan_name + '*';",
                        "    //Если имён в строке скопилось слишком много, подчищаем её с конца",
                        "    if(ParsCountFromString(KlissanInvasion['LastSpawnedKlissanNames'], '*') > (names_count - 30 + 2)) //В строке запоминается на 30 имён меньше от их максимального числа в списке",
                        "    {",
                        "        KlissanInvasion['LastSpawnedKlissanNames'] = SetParFromString(KlissanInvasion['LastSpawnedKlissanNames'], '*', 1, '');",
                        "        KlissanInvasion['LastSpawnedKlissanNames'] = substr(KlissanInvasion['LastSpawnedKlissanNames'], 1);",
                        "    }",
                        "    klissan_name = klissan_name + ' -' + RndObject(1, 99, ship) + '-';",
                        "    SetName(ship, klissan_name);",
                        "",
                        "    for(int i = ShipItems(ship) - 1; i > 0; i = i - 1) FreeItem(GetItemFromShip(ship, i)); //Удаляем все оборудование, кроме корпуса",
                        "",
                        "    //Приступаем к определению типа клисана и соответствующему его снаряжению",
                        "    dword item;",
                        "    dword hull = ShipItems(ship, 0);",
                        "    int hull_tech_level;",
                        "    int bonus;",
                        "    if(!EvoArmadaInit || BlockExist('Script.Mod_EvoDreadnought')) str hull_bon_mod = 'ShuKlissan';",
                        "    else if(!BlockExist('Script.Mod_EvoDreadnought')) hull_bon_mod = 'EvoArmada';",
                        "    else hull_bon_mod = 'ShuKlissan';",
                        "    int remains_count = max(RndObject(1, 100, ship) - (klissan_diff_div2 * 5), 1);",
                        "    dword mutations_fit_set = 1; //Используем для записи битсета, какая оборудка имеется у клисана, чтобы определить вариативность выдачи подходящих мутаций (акринов), по умолчанию в первом бите записана всегда доступная категория Common",
                        "",
                        "    ShipType(ship, 'Klissan' + sub_type);",
                        "    //Мутенок",
                        "    if(sub_type == 5)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из мутёнка",
                        "        for(i = 1; i <= RndObject(1, 3, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(1, max(15 - (klissan_diff_div2 * 3), 3), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из мутёнка (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 30, 90, 1, 3);",
                        "",
                        "        //Выдача оружия и оборудования для мутёнка (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        unknown damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveMutenokEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveMutenokEq(ship, t_Engine);",
                        "        GiveMutenokEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveMutenokEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveMutenokEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса мутёнка в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = round(Rnd(0,1) + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 100, 200, 0, 2) + PortionInDiapason(KlissanInvasion['KlissanStrength'], 15, 90, 3, 5));",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 55), 150) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_MutonieHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Мутёнку вешаем бонус на скорость и повышаем навык манёвренности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = (10 * klissan_diff) + (10 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonSpeed'), bonus);",
                        "        ShipSkill(ship, 'Mobility', ShipSkill(ship, 'Mobility') + 3);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Рогит",
                        "    else if(sub_type == 4)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из рогита",
                        "        for(i = 1; i <= RndObject(1, 3, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(3 - klissan_diff_div2, 1), max(25 - (klissan_diff_div2 * 4), 6), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из рогита (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 25, 80, 2, 5);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Rogit_damage', 'NoShow'); //Акткод на урон рогита, даёт процентный бонус к урону тем больший, чем больший процент HP отсутствует",
                        "",
                        "        //Задаём размер корпуса рогита в зависимости от сложности клисан и текущего ТУ",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 3, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 62.5), 185) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg('ShuKlissan_RogitHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Выдача оружия и оборудования для рогита (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveRogitEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveRogitEq(ship, t_Engine);",
                        "        GiveRogitEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveRogitEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveRogitEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса рогита в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 3, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 62.5), 185) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_MonchikHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Рогиту вешаем бонусы на силу энергетического и ракетного оружия, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = klissan_diff + PortionInDiapason(hull_tech_level, 1, 8, 1, 10);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 1);",
                        "        ShipSkill(ship, 'Mobility', ShipSkill(ship, 'Mobility') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Катаури",
                        "    else if(sub_type == 3)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из катаури",
                        "        for(i = 1; i <= RndObject(1, 4, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(5 - klissan_diff_div2, 1), max(45 - (klissan_diff_div2 * 4), 12), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из катаури (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 15, 85, 3, 6);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Katauri_attack', 'NoShow'); //Акткод на крит катаури. Позволяет нанести полуторный урон любым неракетным выстрелом с шансом 25%, а если цель имеет меньше половины ХП - двойной урон с шансом 33%.",
                        "",
                        "        //Выдача оружия и оборудования для катаури (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        int is_missiles = 0; //Маркер о наличии в оружейном наборе катаури ракетных орудий (необходим для гарантированной выдачи таким катаури радара)",
                        "",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveKatauriEq(ship, t_CustomWeapon, damage_type_arr, is_missiles);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveKatauriEq(ship, t_Engine);",
                        "        GiveKatauriEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveKatauriEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveKatauriEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2) || is_missiles)",
                        "        {",
                        "            GiveKatauriEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveKatauriEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveKatauriEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса катаури в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 2, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 75), 275) + RndObject(-25, 45, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_CatauriHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Катаури вешаем бонус на силу ракетных орудий и дальность стрельбы, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = klissan_diff + PortionInDiapason(hull_tech_level, 1, 8, 1, 10);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "        bonus = (5 * klissan_diff) + (5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWRadius'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Нондус",
                        "    else if(sub_type == 2)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из нондуса",
                        "        for(i = 1; i <= RndObject(2, 5, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(15 - klissan_diff_div2, max(60 - (klissan_diff_div2 * 4), 18), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из нондуса (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 10, 65, 4, 7);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Nondus_shield', 'NoShow'); //Акткод на щит нондуса. Щит блокирует весь наносимый кораблю урон и имеет прочность 30-40% от запаса ХП нондуса, когда спадает - наносит всем кораблям в радиусе 250 ед. урон, равный последнему нанесенному нондусу урону, увеличенному вдвое.",
                        "",
                        "        //Выдача оружия и оборудования для нондуса (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveNondusEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveNondusEq(ship, t_Engine);",
                        "        GiveNondusEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveNondusEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveNondusEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса нондуса в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 1, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 135), 400) + RndObject(-25, 45, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_NondusHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "        if(klissan_diff_div2 > 1) ItemImprovement(hull, 1);",
                        "",
                        "        //Нондусу вешаем бонус на силу осколочных орудий и ГЗП, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWSplinter'), bonus);",
                        "        bonus = round((1.5 * klissan_diff / 2) + (1.5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "",
                        "        //Если подключён мод EvoArmada, добавляем нондусу дополнительные залпы",
                        "        if(EvoArmadaInit) ShipSpecialBonuses(ship, bonAttacks, 1);",
                        "    }",
                        "    //Эгемон",
                        "    else //if(sub_type == 1)",
                        "    {",
                        "        //Шанс на появление гигаса",
                        "        if(!is_gigas)",
                        "        {",
                        "            if(RndObject(1, 100, ship) <= 10)",
                        "            {",
                        "                is_gigas = 1;",
                        "                ShipType(ship, 'Klissan0');",
                        "                //SetName(ship, CT('ShipType.Klissan.Gigas') + ' ' + ShipName(ship));",
                        "            }",
                        "        }",
                        "",
                        "        //Определяем, сколько протоплазмы выпадет из эгемона",
                        "        int protoplasm_pieces = RndObject(2, 6, ship);",
                        "        if(is_gigas) protoplasm_pieces = RndObject(8, 12, ship);",
                        "        for(i = 1; i <= protoplasm_pieces; i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(20 - klissan_diff_div2, 1), max(90 - (klissan_diff_div2 * 4), 24), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из эгемона (создание и заполнение ошмётков производится ниже)",
                        "        if(is_gigas) remains_count = PortionInDiapason(remains_count, 15, 90, 7, 11);",
                        "        else remains_count = PortionInDiapason(remains_count, 5, 90, 5, 8);",
                        "",
                        "        //ShipAddCustomShipInfo(ship, 'Egemon_armor', 'NoShow'); //Акткод на контратаку эгемона. Позволяет эгемону контратаковать противника подходящей по дальности и не сломанной пушкой с шансом [12 + количество_орудий * 6]% при каждом попадании врага по эгемону.",
                        "",
                        "        //Выдача оружия и оборудования для эгемона (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveEgemonEq(ship, t_CustomWeapon, -1, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveEgemonEq(ship, t_Engine);",
                        "        GiveEgemonEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveEgemonEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveEgemonEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //Эгемон",
                        "        if(!is_gigas)",
                        "        {",
                        "            //Задаём размер корпуса эгемона в зависимости от сложности клисан и текущего ТУ (нет)",
                        "            //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 225), 650) + RndObject(-45, 65, ship));",
                        "            SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_EgemonHull'), hull);",
                        "",
                        "            //Эгемону вешаем бонус на силу энергетических орудий, защиту и броню",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "            bonus = round((1.2 * klissan_diff / 2) + (1.2 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonHull'), bonus);",
                        "            bonus = round((1.5 * klissan_diff / 2) + (1.5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "",
                        "            //Если подключён мод EvoArmada, добавляем эгемону дополнительные залпы",
                        "            if(EvoArmadaInit)",
                        "            {",
                        "                ShipSpecialBonuses(ship, bonAttacks, 1);",
                        "                //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "                ShipAddCustomShipInfo(ship, 'EvoArmada_CapitalShipInfos', 'NoShow', 1);",
                        "                //Ограничиваем максимальный уровень навыка атаки (чтобы не так сильно нагибал)",
                        "                if(ShipSkill(ship, 'Accuracy') > 2) ShipSkill(ship, 'Accuracy', RndObject(2, 3, ship));",
                        "            }",
                        "        }",
                        "        //Гигас",
                        "        else",
                        "        {",
                        "            //Задаём размер корпуса гигаса в зависимости от сложности клисан и текущего ТУ (нет)",
                        "            //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 625), 1750) + RndObject(-60, 100, ship));",
                        "            ItemSize(hull, round(2.5 * ItemSize(hull)) + RndObject(-50, 50, ship));",
                        "            SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_GigasHull'), hull);",
                        "",
                        "            //Гигасу вешаем целую кучу бонусов",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWSplinter'), bonus);",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "            bonus = round((0.8 * klissan_diff / 2) + (0.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonHull'), bonus);",
                        "            bonus = round((10.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 25, 100) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonSpeed'), bonus);",
                        "            bonus = round((1.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 5, 25) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonScan'), bonus); //Используется для эффективного применения всяких оружейных бонусов, зависящих от сканера",
                        "            bonus = round((2.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 5, 20) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDroid'), bonus);",
                        "            bonus = round((1.0 * klissan_diff / 2) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "",
                        "            //Старые бонусы",
                        "            //Заменил деление умножением, т.к. для процессора это более простая операция",
                        "            // ShipSpecialBonuses(ship, bonSpeed, (0.111 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 9",
                        "            // ShipSpecialBonuses(ship, bonWEnergy, (0.0133 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 75",
                        "            // ShipSpecialBonuses(ship, bonWSplinter, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonWMissile, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonDef, (0.00666 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 150",
                        "            // ShipSpecialBonuses(ship, bonHull, (0.00333 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 300",
                        "            // ShipSpecialBonuses(ship, bonDroid, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonScan, 100); //Используется для эффективного применения всяких оружейных бонусов, зависящих от сканера",
                        "",
                        "            //Если подключён мод EvoArmada, добавляем дополнительные залпы кораблю в этом же цикле (чтоб два раза не перебирать доминаторов в разных модах)",
                        "            if(EvoArmadaInit)",
                        "            {",
                        "                ShipSpecialBonuses(ship, bonAttacks, 2);",
                        "                //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "                ShipAddCustomShipInfo(ship, 'EvoArmada_CapitalShipInfos', 'NoShow', 2);",
                        "                //Ограничиваем максимальный уровень навыка атаки (чтобы не так сильно нагибал)",
                        "                if(ShipSkill(ship, 'Accuracy') > 1) ShipSkill(ship, 'Accuracy', RndObject(1, 2, ship));",
                        "            }",
                        "        }",
                        "",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "        if(klissan_diff_div2 > 1) ItemImprovement(hull, RndObject(1, 2, ship)); //Улучшение корпуса обычными или лучшими специалистами",
                        "    }",
                        "",
                        "    //Выдача клисану подходящих мутаций (акринов)",
                        "    if(KlissanInvasion['MutationsStartDay'] <= CurTurn())",
                        "    {",
                        "        //Для каждого нового клисана делаем N попыток повесить мутацию на оборудование с некоторым шансом",
                        "        int mutation_chance = PortionInDiapason(sub_type, 1, 5, 35, 10) + (round(0.7 * klissan_diff) * 7); //Крупные корабли получают мутации с большим шансом",
                        "        int roll = RndObject(1, 100, ship);",
                        "",
                        "        if(roll <= mutation_chance)",
                        "        {",
                        "            int mutations_try_quantity = PortionInDiapason(mutation_chance - roll, 1, mutation_chance, 1, PortionInDiapason(CurTurn() - KlissanInvasion['MutationsStartDay'], 1, 5475, 5, 10)); //Определяем число попыток для наложения мутаций, чем больше прошло времени с момента начала их появления, тем больше попыток",
                        "",
                        "            int mutations_added = 0; //Превращаем шанс в счётчик успешно установленных мутаций для ограничения их максимального количества на корабль",
                        "            for(i = 1; i <= mutations_try_quantity; i = i + 1)",
                        "            {",
                        "                //Выбираем случайную подходящую категорию из доступных (включая общую Common в первом бите)",
                        "                int mutations_category = -1;",
                        "                while(!(mutations_fit_set & (1 << mutations_category))) mutations_category = RndObject(0, 8, ship);",
                        "                //Выбираем случайную доступную мутацию из этой категории",
                        "                bonus = KlissanInvasion['MutationsGiveList', mutations_category, RndObject(0, ArrayDim(KlissanInvasion['MutationsGiveList', mutations_category]) - 1, ship)];",
                        "",
                        "                //Ищем подходящую оборудку для установки мутации (перебор строки для определения подходящей был бы не быстрее)",
                        "                for(int j = 1; j < ShipItems(ship); j = j + 1)",
                        "                {",
                        "                    item = ShipItems(ship, j);",
                        "                    if(EqSpecial(item) == -1)",
                        "                    {",
                        "                        if(MayAddBonusToEq(bonus, item))",
                        "                        {",
                        "                            SpecialToEquipment(bonus, item);",
                        "                            mutations_added = mutations_added + 1;",
                        "                            break;",
                        "                        }",
                        "                    }",
                        "                }",
                        "",
                        "                if(mutations_added >= 5) break;",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    SetName(hull, Format(Name(hull), '<KlissanType'+'>', CT('Items.Hull.KlissanType.' + hull_tech_level), ''));",
                        "    EqCustomFaction(hull, 'Klissan'); //Вешаем на корпус клисанскую фракцию",
                        "    Chameleon(ship); //Обновляем скин корпуса после всех проведённых изменений",
                        "    Chameleon(ship); //Повторно на всякий пожарный",
                        "",
                        "    //Заполняем дроп клисана ошмётками",
                        "    int remains_max = CT('Script.Mod_ShuKlissan.KlissanRemainsCount');",
                        "    int set_remains_added = 0;",
                        "    for(i = 0; i < remains_count; i = i + 1)",
                        "    {",
                        "        //Подбираем ошмёток, который ещё не выпадал в дроп данному клисану",
                        "        int rand = RndObject(1, remains_max, ship);",
                        "        int cnt = 0;",
                        "        while((set_remains_added & (1 << rand))) {",
                        "            rand = RndObject(1, remains_max, ship);",
                        "            cnt = cnt + 1;",
                        "            if(cnt > 300) break;",
                        "        }",
                        "        set_remains_added = set_remains_added + (1 << rand);",
                        "        //Добавляемый выбранный ошмёток в дроп",
                        "        item = CreateQuestItem('KlissanRemains' + rand, None);",
                        "        //if(is_gigas) ItemCost(item, ItemCost(item) * 2 + GalaxyMoney(1));",
                        "        EqCustomFaction(item, 'Klissan');",
                        "        ShipAddDropItem(ship, item);",
                        "    }",
                        "",
                        "    //Запрещаем боту самостоятельно совершать прыжки",
                        "    ShipSpecialBonuses(ship, bonFuel, -10000);",
                        "",
                        "    //Вешаем фракцию сразу, т.к. в противном случае клисану не будут автоматически выдаваться фракционные ММ",
                        "    ShipJoinToScript(ship, 'Mod_ShuKlissan.KlissanShips');",
                        "    ShipCustomFaction(ship, 'Klissan');",
                        "",
                        "    //Выдаём клисану споры",
                        "    ShipImproveItems(ship, RndObject(klissan_diff_div2, 7 + klissan_diff_div2, ship)); //Эта строка автоматически вешает подходящие ММ на его оборудку",
                        "    if(RndObject(1, 100, ship) <= PortionInDiapason(sub_type, 5, 1, 1, 7)) //Шанс на добавление клисанской споры в дроп тем выше, чем выше класс клисана",
                        "    {",
                        "        item = CreateMM(FindBonusByNameInCfg(CT('Script.Mod_ShuKlissan.SporesGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesGiveList.Count'), ship))));",
                        "        ShipAddDropItem(ship, item);",
                        "    }",
                        "",
                        "    //Общие для всех кораблей клисан параметры",
                        "    ShipOwner(ship, None);",
                        "    int free_exp = ShipFreeExp(ship);",
                        "    ShipFreeExp(ship, 0);",
                        "    SetShipExpByType(ship, GetShipExpByType(ship) - free_exp, 0);",
                        "    ShipFace(ship, 0);",
                        "    HullHP(ship,ItemSize(ShipEqInSlot(ship,t_Hull)));",
                        "",
                        "    Chameleon(ship); //И ещё разок напоследок",
                        "",
                        "    if(!KlissanInvasion['MentalCommunicator.WasReceived']) NoScanToShip(ship,1);",
                        "",
                        "    //Удаляем всё лишнее (хз, есть ли там вообще такое) оборудование из трюма клисана",
                        "    //FreeAllHoldEquipment(ship);",
                        "    //FixOverweight(ship); //Нет смысла проверять, т.к. тоже самое автоматически делает функция ShipImproveItems()",
                        "",
                        "    result = ship;",
                        "}",
                        "",
                        "//Определяет, сколько единиц указанного типа оборудования должен получить корабль клисан",
                        "function CountKlissanEqByType(dword ship, int sub_type, int eq_type)",
                        "{",
                        "    int eq_count = 0;",
                        "    //Проверка на количество выдаваемых клисану пушек",
                        "    if(!eq_type)",
                        "    {",
                        "        //Мутёнок и рогит",
                        "        if(sub_type > 3)",
                        "        {",
                        "            if(KlissanInvasion['KlissanStrength'] <= 20) eq_count = RndObject(1, 3, ship);",
                        "            else if(KlissanInvasion['KlissanStrength'] <= 40) eq_count = RndObject(2, 3, ship);",
                        "            else if(KlissanInvasion['KlissanStrength'] <= 60) eq_count = RndObject(3, 4, ship);",
                        "            else if(KlissanInvasion['KlissanStrength'] <= 80) eq_count = RndObject(3, 5, ship);",
                        "            else eq_count = RndObject(4, 5, ship);",
                        "        }",
                        "        //Катаури, нондус, эгемон и гигас",
                        "        else",
                        "        {",
                        "            if(KlissanInvasion['KlissanStrength'] <= 25) eq_count = RndObject(2, 4, ship);",
                        "            else if(KlissanInvasion['KlissanStrength'] <= 50) eq_count = RndObject(3, 4, ship);",
                        "            else if(KlissanInvasion['KlissanStrength'] <= 75) eq_count = RndObject(4, 5, ship);",
                        "            else eq_count = 5;",
                        "        }",
                        "    }",
                        "    //Проверка на разрешение для выдачи клисану дроида или ГЗП (приоритетные типы)",
                        "    else if(eq_type == 1)",
                        "    {",
                        "        int rand = RndObject(1, 100, ship);",
                        "        if(sub_type == 5)",
                        "        {",
                        "            if(rand <= PortionInDiapason(KlissanInvasion['KlissanStrength'], 25, 75, 55, 85)) eq_count = 1;",
                        "        }",
                        "        else if(sub_type == 4)",
                        "        {",
                        "            if(rand <= PortionInDiapason(KlissanInvasion['KlissanStrength'], 25, 75, 60, 87)) eq_count = 1;",
                        "        }",
                        "        else if(sub_type == 3)",
                        "        {",
                        "            if(rand <= PortionInDiapason(KlissanInvasion['KlissanStrength'], 25, 75, 65, 90)) eq_count = 1;",
                        "        }",
                        "        else if(sub_type == 2)",
                        "        {",
                        "            if(rand <= PortionInDiapason(KlissanInvasion['KlissanStrength'], 25, 75, 67, 91)) eq_count = 1;",
                        "        }",
                        "        else //if(sub_type == 1)",
                        "        {",
                        "            if(rand <= PortionInDiapason(KlissanInvasion['KlissanStrength'], 25, 75, 70, 92)) eq_count = 1;",
                        "        }",
                        "    }",
                        "    //Проверка на разрешение для выдачи клисану радара, сканера или захвата (малоприоритетные типы)",
                        "    else if(RndObject(1, 100, ship) <= PortionInDiapason(sub_type, 5, 1, 40, 70)) eq_count = 1;",
                        "",
                        "    result = eq_count;",
                        "}",
                        "",
                        "//Создаёт и помещает на указанный корабль указанный тип оборудования или случайную кастомную пушку из перечня для мутёнка",
                        "function GiveMutenokEq(dword ship, int eq_type, ref damage_type_arr)",
                        "{",
                        "    int tech_level = round(Rnd(0,1) + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 100, 200, 0, 2) + PortionInDiapason(KlissanInvasion['KlissanStrength'], 15, 90, 3, 5));",
                        "    int size;",
                        "    dword item;",
                        "    if(eq_type != t_CustomWeapon)",
                        "    {",
                        "        if(GTL <= 5) size = RndObject(15, 20, ship);",
                        "        else if(GTL <= 7) size = RndObject(20, 25, ship);",
                        "        else size = RndObject(20, 30, ship);",
                        "        if(eq_type == t_Radar || eq_type == t_Scaner) size = round(0.75 * size);",
                        "",
                        "        item = CreateEquipment(eq_type, size, tech_level, None);",
                        "    }",
                        "    else",
                        "    {",
                        "        unknown fun_arr = newarray(2);",
                        "        str custom_weapon_type;",
                        "        if(KlissanInvasion['KlissanStrength'] <= 20)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 30, 'klissan_laser', 10, 20,",
                        "                                            40, 'klissan_splitter', 13, 25,",
                        "                                            85, 'klissan_capacer', 10, 22,",
                        "                                           100, 'klissan_stunner', 15, 30);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 40)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 33, 'klissan_laser', 10, 20,",
                        "                                            40, 'klissan_splitter', 13, 25,",
                        "                                            80, 'klissan_capacer', 10, 22,",
                        "                                           100, 'klissan_stunner', 15, 30);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 60)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 35, 'klissan_laser', 10, 20,",
                        "                                            42, 'klissan_splitter', 13, 25,",
                        "                                            70, 'klissan_capacer', 10, 22,",
                        "                                           100, 'klissan_stunner', 15, 30);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 80)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 42, 'klissan_laser', 10, 20,",
                        "                                            47, 'klissan_splitter', 13, 25,",
                        "                                            60, 'klissan_capacer', 10, 22,",
                        "                                           100, 'klissan_stunner', 15, 30);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 42, 'klissan_laser', 10, 20,",
                        "                                            48, 'klissan_splitter', 13, 25,",
                        "                                            54, 'klissan_capacer', 10, 22,",
                        "                                           100, 'klissan_stunner', 15, 30);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "",
                        "        item = CreateCustomWeapon(custom_weapon_type, size, tech_level, None);",
                        "",
                        "        if(GetVariableType(damage_type_arr) != 10)",
                        "        {",
                        "            if(!GetEquipmentStats(item, 3)) damage_type_arr[0] = damage_type_arr[0] + 1;",
                        "            else if(GetEquipmentStats(item, 3) == 1) damage_type_arr[1] = damage_type_arr[1] + 1;",
                        "            else damage_type_arr[2] = damage_type_arr[2] + 1;",
                        "        }",
                        "    }",
                        "",
                        "    //Накладывается случайное улучшение от стажёров",
                        "    if(!RndObject(0, 4, ship)) ItemImprovement(item, 0);",
                        "",
                        "    EqCustomFaction(item, 'Klissan');",
                        "    AddItemToShip(ship, item);",
                        "    ItemIsInUse(item, ship, 1);",
                        "",
                        "    if(Rnd(0,4)) NoDropItem(item,1);",
                        "",
                        "    result = item;",
                        "}",
                        "",
                        "//Создаёт и помещает на указанный корабль указанный тип оборудования или случайную кастомную пушку из перечня для рогита",
                        "function GiveRogitEq(dword ship, int eq_type, ref damage_type_arr)",
                        "{",
                        "    int tech_level = round(Rnd(0,1) + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 100, 200, 0, 2) + PortionInDiapason(KlissanInvasion['KlissanStrength'], 15, 90, 3, 5));",
                        "    int size;",
                        "    dword item;",
                        "    if(eq_type != t_CustomWeapon)",
                        "    {",
                        "        if(GTL <= 5) size = RndObject(15, 25, ship);",
                        "        else if(GTL <= 7) size = RndObject(20, 30, ship);",
                        "        else size = RndObject(25, 35, ship);",
                        "        if(eq_type == t_Radar || eq_type == t_Scaner) size = round(0.75 * size);",
                        "",
                        "        item = CreateEquipment(eq_type, size, tech_level, None);",
                        "    }",
                        "    else",
                        "    {",
                        "        unknown fun_arr = newarray(2);",
                        "        str custom_weapon_type;",
                        "        if(KlissanInvasion['KlissanStrength'] <= 20)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 15, 'klissan_laser', 12, 25,",
                        "                                            40, 'klissan_splitter', 18, 30,",
                        "                                            60, 'klissan_antimatter', 27, 40,",
                        "                                            80, 'klissan_moldikvink', 22, 32,",
                        "                                           100, 'klissan_burster', 25, 35);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 40)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 20, 'klissan_laser', 12, 25,",
                        "                                            37, 'klissan_splitter', 18, 30,",
                        "                                            55, 'klissan_antimatter', 27, 40,",
                        "                                            80, 'klissan_moldikvink', 22, 32,",
                        "                                           100, 'klissan_burster', 25, 35);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 60)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 25, 'klissan_laser', 12, 25,",
                        "                                            40, 'klissan_splitter', 18, 30,",
                        "                                            50, 'klissan_antimatter', 27, 40,",
                        "                                            75, 'klissan_moldikvink', 22, 32,",
                        "                                           100, 'klissan_burster', 25, 35);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 80)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 30, 'klissan_laser', 12, 25,",
                        "                                            45, 'klissan_splitter', 18, 30,",
                        "                                            50, 'klissan_antimatter', 27, 40,",
                        "                                            70, 'klissan_moldikvink', 22, 32,",
                        "                                           100, 'klissan_burster', 25, 35);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 35, 'klissan_laser', 12, 25,",
                        "                                            55, 'klissan_splitter', 18, 30,",
                        "                                            60, 'klissan_antimatter', 27, 40,",
                        "                                            75, 'klissan_moldikvink', 22, 32,",
                        "                                           100, 'klissan_burster', 25, 35);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "",
                        "        item = CreateCustomWeapon(custom_weapon_type, size, tech_level, None);",
                        "        if(custom_weapon_type == 'klissan_moldikvink')",
                        "        {",
                        "            LinkItemToScript(item);",
                        "            ScriptItemData(item, 1, GetEquipmentStats(item, 1));",
                        "            ScriptItemData(item, 2, GetEquipmentStats(item, 0));",
                        "            EqSpecial(item, FindBonusByNameInCfg('ShuKlissan_KvinkgunLock'));",
                        "            ItemOnActCode(item, GenerateCodeStringFromBlock('ActCodeBlocksList.ShuKlissan_KvinkgunShot'));",
                        "        }",
                        "",
                        "        if(GetVariableType(damage_type_arr) != 10)",
                        "        {",
                        "            if(!GetEquipmentStats(item, 3)) damage_type_arr[0] = damage_type_arr[0] + 1;",
                        "            else if(GetEquipmentStats(item, 3) == 1) damage_type_arr[1] = damage_type_arr[1] + 1;",
                        "            else damage_type_arr[2] = damage_type_arr[2] + 1;",
                        "        }",
                        "    }",
                        "",
                        "    //Накладывается случайное улучшение от стажёров",
                        "    if(RndObject(0, 2, ship)) ItemImprovement(item, 0);",
                        "",
                        "    EqCustomFaction(item, 'Klissan');",
                        "    AddItemToShip(ship, item);",
                        "    ItemIsInUse(item, ship, 1);",
                        "",
                        "    if(Rnd(0,3)) NoDropItem(item,1);",
                        "",
                        "    result = item;",
                        "}",
                        "",
                        "//Создаёт и помещает на указанный корабль указанный тип оборудования или случайную кастомную пушку из перечня для катаури",
                        "function GiveKatauriEq(dword ship, int eq_type, ref damage_type_arr, ref is_missiles)",
                        "{",
                        "    int tech_level = round(Rnd(0,1) + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 100, 200, 0, 2) + PortionInDiapason(KlissanInvasion['KlissanStrength'], 15, 90, 3, 5));",
                        "    int size;",
                        "    dword item;",
                        "    if(eq_type != t_CustomWeapon)",
                        "    {",
                        "        if(GTL <= 5) size = RndObject(20, 35, ship);",
                        "        else if(GTL <= 7) size = RndObject(25, 40, ship);",
                        "        else size = RndObject(30, 45, ship);",
                        "        if(eq_type == t_Radar || eq_type == t_Scaner) size = round(0.75 * size);",
                        "",
                        "        item = CreateEquipment(eq_type, size, tech_level, None);",
                        "    }",
                        "    else",
                        "    {",
                        "        unknown fun_arr = newarray(2);",
                        "        str custom_weapon_type;",
                        "        if(KlissanInvasion['KlissanStrength'] <= 20)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 30, 'klissan_nihiler', 25, 35,",
                        "                                            50, 'klissan_stunner', 20, 36,",
                        "                                            70, 'klissan_burster', 27, 42,",
                        "                                           100, 'klissan_protomissile', 18, 34);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 40)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 25, 'klissan_nihiler', 25, 35,",
                        "                                            50, 'klissan_stunner', 20, 36,",
                        "                                            65, 'klissan_burster', 27, 42,",
                        "                                           100, 'klissan_protomissile', 18, 34);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 60)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 20, 'klissan_nihiler', 25, 35,",
                        "                                            50, 'klissan_stunner', 20, 36,",
                        "                                            65, 'klissan_burster', 27, 42,",
                        "                                           100, 'klissan_protomissile', 18, 34);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 80)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 20, 'klissan_nihiler', 25, 35,",
                        "                                            55, 'klissan_stunner', 20, 36,",
                        "                                            65, 'klissan_burster', 27, 42,",
                        "                                           100, 'klissan_protomissile', 18, 34);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 15, 'klissan_nihiler', 25, 35,",
                        "                                            50, 'klissan_stunner', 20, 36,",
                        "                                            60, 'klissan_burster', 27, 42,",
                        "                                           100, 'klissan_protomissile', 18, 34);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "",
                        "        item = CreateCustomWeapon(custom_weapon_type, size, tech_level, None);",
                        "        if(custom_weapon_type == 'klissan_protomissile') is_missiles = 1;",
                        "",
                        "        if(GetVariableType(damage_type_arr) != 10)",
                        "        {",
                        "            if(!GetEquipmentStats(item, 3)) damage_type_arr[0] = damage_type_arr[0] + 1;",
                        "            else if(GetEquipmentStats(item, 3) == 1) damage_type_arr[1] = damage_type_arr[1] + 1;",
                        "            else damage_type_arr[2] = damage_type_arr[2] + 1;",
                        "        }",
                        "    }",
                        "",
                        "    if(RndObject(0, 3, ship))",
                        "    {",
                        "        //Накладывается случайное улучшение от обычных спецов, либо от стажёров",
                        "        if(RndObject(0, 1, ship)) ItemImprovement(item, 1);",
                        "        else ItemImprovement(item, 0);",
                        "    }",
                        "",
                        "    EqCustomFaction(item, 'Klissan');",
                        "    AddItemToShip(ship, item);",
                        "    ItemIsInUse(item, ship, 1);",
                        "",
                        "    if(Rnd(0,1)) NoDropItem(item,1);",
                        "",
                        "    result = item;",
                        "}",
                        "",
                        "//Создаёт и помещает на указанный корабль указанный тип оборудования или случайную кастомную пушку из перечня для нондуса",
                        "function GiveNondusEq(dword ship, int eq_type, ref damage_type_arr)",
                        "{",
                        "    int tech_level = round(Rnd(0,1) + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 100, 200, 0, 2) + PortionInDiapason(KlissanInvasion['KlissanStrength'], 15, 90, 3, 5));",
                        "    int size;",
                        "    dword item;",
                        "    if(eq_type != t_CustomWeapon)",
                        "    {",
                        "        if(GTL <= 5) size = RndObject(35, 55, ship);",
                        "        else if(GTL <= 7) size = RndObject(40, 60, ship);",
                        "        else size = RndObject(45, 67, ship);",
                        "        if(eq_type == t_Radar || eq_type == t_Scaner) size = round(0.75 * size);",
                        "",
                        "        item = CreateEquipment(eq_type, size, tech_level, None);",
                        "    }",
                        "    else",
                        "    {",
                        "        unknown fun_arr = newarray(2);",
                        "        str custom_weapon_type;",
                        "        if(KlissanInvasion['KlissanStrength'] <= 20)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 15, 'klissan_antimatter', 35, 57,",
                        "                                            35, 'klissan_burster', 30, 55,",
                        "                                            60, 'klissan_moldikvink', 30, 50,",
                        "                                            85, 'klissan_cluster', 38, 62,",
                        "                                           100, 'klissan_emitter', 40, 65);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 40)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 20, 'klissan_antimatter', 35, 57,",
                        "                                            35, 'klissan_burster', 30, 55,",
                        "                                            60, 'klissan_moldikvink', 30, 50,",
                        "                                            80, 'klissan_cluster', 38, 62,",
                        "                                           100, 'klissan_emitter', 40, 65);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 60)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 25, 'klissan_antimatter', 35, 57,",
                        "                                            37, 'klissan_burster', 30, 55,",
                        "                                            60, 'klissan_moldikvink', 30, 50,",
                        "                                            75, 'klissan_cluster', 38, 62,",
                        "                                           100, 'klissan_emitter', 40, 65);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else if(KlissanInvasion['KlissanStrength'] <= 80)",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 27, 'klissan_antimatter', 35, 57,",
                        "                                            37, 'klissan_burster', 30, 55,",
                        "                                            57, 'klissan_moldikvink', 30, 50,",
                        "                                            70, 'klissan_cluster', 38, 62,",
                        "                                           100, 'klissan_emitter', 40, 65);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "        else",
                        "        {",
                        "            ChooseCustomItem(ship, fun_arr, 33, 'klissan_antimatter', 35, 57,",
                        "                                            38, 'klissan_burster', 30, 55,",
                        "                                            55, 'klissan_moldikvink', 30, 50,",
                        "                                            67, 'klissan_cluster', 38, 62,",
                        "                                           100, 'klissan_emitter', 40, 65);",
                        "            custom_weapon_type = fun_arr[0];",
                        "            size = fun_arr[1];",
                        "        }",
                        "",
                        "        item = CreateCustomWeapon(custom_weapon_type, size, tech_level, None);",
                        "        if(custom_weapon_type == 'klissan_moldikvink')",
                        "        {",
                        "            LinkItemToScript(item);",
                        "            ItemOnActCode(item, 'KvinkgunShot();', 't_OnWeaponShot|');",
                        "",
                        "",
                        "        }",
                        "        else if(custom_weapon_type == 'klissan_emitter')",
                        "        {",
                        "            LinkItemToScript(item);",
                        "            ItemOnActCode(item, 'KlissanLeprosyInflict();', 't_OnWeaponShot2,t_OnDeath|');",
                        "        }",
                        "",
                        "        if(GetVariableType(damage_type_arr) != 10)",
                        "        {",
                        "            if(!GetEquipmentStats(item, 3)) damage_type_arr[0] = damage_type_arr[0] + 1;",
                        "            else if(GetEquipmentStats(item, 3) == 1) damage_type_arr[1] = damage_type_arr[1] + 1;",
                        "            else damage_type_arr[2] = damage_type_arr[2] + 1;",
                        "        }",
                        "    }",
                        "",
                        "    if(RndObject(0, 5, ship))",
                        "    {",
                        "        //Накладывается случайное улучшение от лучших, либо обычных спецов",
                        "        if(!RndObject(0, 3, ship)) ItemImprovement(item, 2);",
                        "        else ItemImprovement(item, 1);",
                        "    }",
                        "",
                        "    EqCustomFaction(item, 'Klissan');",
                        "    AddItemToShip(ship, item);",
                        "    ItemIsInUse(item, ship, 1);",
                        "",
                        "    if(Rnd(0,1)) NoDropItem(item,1);",
                        "",
                        "    result = item;",
                        "}",
                        "",
                        "//Создаёт и помещает на указанный корабль указанный тип оборудования или случайную кастомную пушку из перечня для эгемона",
                        "function GiveEgemonEq(dword ship, int eq_type, int klissan_strength = -1, ref damage_type_arr)",
                        "{",
                        "    if(klissan_strength == -1) klissan_strength = KlissanInvasion['KlissanStrength'];",
                        "",
                        "    int tech_level = PortionInDiapason(klissan_strength, 15, 90, 2, 8);",
                        "    int size;",
                        "    dword item;",
                        "    if(eq_type != t_CustomWeapon)",
                        "    {",
                        "        if(GTL <= 5) size = RndObject(60, 75, ship);",
                        "        else if(GTL <= 7) size = RndObject(70, 90, ship);",
                        "        else size = RndObject(80, 110, ship);",
                        "        if(eq_type == t_Radar || eq_type == t_Scaner) size = round(0.75 * size);",
                        "",
                        "        item = CreateEquipment(eq_type, size, tech_level, None);",
                        "    }",
                        "    else",
                        "    {",
                        "        unknown fun_arr = newarray(2);",
                        "        str custom_weapon_type;",
                        "        if(CT('KlissanGuns') == '') {",
                        "            if(klissan_strength <= 20)",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 35, 'klissan_nihiler', 40, 75,",
                        "                                                57, 'klissan_emitter', 60, 85,",
                        "                                                85, 'klissan_nargun', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "            else if(klissan_strength <= 40)",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 30, 'klissan_nihiler', 40, 75,",
                        "                                                55, 'klissan_emitter', 60, 85,",
                        "                                                80, 'klissan_nargun', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "            else if(klissan_strength <= 60)",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 25, 'klissan_nihiler', 40, 75,",
                        "                                                52, 'klissan_emitter', 60, 85,",
                        "                                                75, 'klissan_nargun', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "            else if(klissan_strength <= 80)",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 20, 'klissan_nihiler', 40, 75,",
                        "                                                50, 'klissan_emitter', 60, 85,",
                        "                                                73, 'klissan_nargun', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "            else",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 15, 'klissan_nihiler', 40, 75,",
                        "                                                35, 'klissan_emitter', 60, 85,",
                        "                                                70, 'klissan_nargun', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "        }",
                        "        else {",
                        "            //Шатал систему инициализации скриптов я",
                        "            if(!IsScriptActive('Mod_KlissanGuns_Original')) ScriptRun(ShipStar(Player()), StarPlanets(ShipStar(Player()), 0), 'KlissanGuns_Original');",
                        "",
                        "            if(klissan_strength <= 20)",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 35, 'klissan_nihiler', 40, 75,",
                        "                                                57, 'klissan_emitter', 60, 85,",
                        "                                                85, 'klissan_nargun', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "            else if(klissan_strength <= 40)",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 30, 'klissan_nihiler', 40, 75,",
                        "                                                55, 'klissan_emitter', 60, 85,",
                        "                                                80, 'klissan_nargun', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "            else if(klissan_strength <= 60)",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 25, 'absolute', 40, 75,",
                        "                                                52, 'klissan_emitter', 60, 85,",
                        "                                                75, 'klissan_nargun', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "            else if(klissan_strength <= 80)",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 20, 'absolute', 40, 75,",
                        "                                                50, 'klissan_emitter', 60, 85,",
                        "                                                73, 'hellwave', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "            else",
                        "            {",
                        "                ChooseCustomItem(ship, fun_arr, 15, 'absolute', 40, 75,",
                        "                                                35, 'klissan_emitter', 60, 85,",
                        "                                                70, 'hellwave', 110, 130,",
                        "                                               100, 'klissan_hellwave', 130, 160);",
                        "                custom_weapon_type = fun_arr[0];",
                        "                size = fun_arr[1];",
                        "            }",
                        "        }",
                        "",
                        "        item = CreateCustomWeapon(custom_weapon_type, size, tech_level, None);",
                        "",
                        "        if(GetVariableType(damage_type_arr) != 10)",
                        "        {",
                        "            if(!GetEquipmentStats(item, 3)) damage_type_arr[0] = damage_type_arr[0] + 1;",
                        "            else if(GetEquipmentStats(item, 3) == 1) damage_type_arr[1] = damage_type_arr[1] + 1;",
                        "            else damage_type_arr[2] = damage_type_arr[2] + 1;",
                        "        }",
                        "    }",
                        "",
                        "    //Накладывается случайное улучшение от лучших спецов",
                        "    if(RndObject(0, 7, ship)) ItemImprovement(item, 2);",
                        "",
                        "    EqCustomFaction(item, 'Klissan');",
                        "    AddItemToShip(ship, item);",
                        "    ItemIsInUse(item, ship, 1);",
                        "",
                        "    if(Rnd(0,1)) NoDropItem(item,1);",
                        "",
                        "    result = item;",
                        "}",
                        "",
                        "//Случайно выбирает тип и вес для кастомного предмета по указанным критериям (перед вызовом обязательно создать временный массив fun_arr)",
                        "function ChooseCustomItem(dword object, ref fun_arr, int chance_1, str str_type_1, int min_size_1, int max_size_1,",
                        "                                                     int chance_2, str str_type_2, int min_size_2, int max_size_2,",
                        "                                                     int chance_3, str str_type_3, int min_size_3, int max_size_3,",
                        "                                                     int chance_4, str str_type_4, int min_size_4, int max_size_4,",
                        "                                                     int chance_5, str str_type_5, int min_size_5, int max_size_5)",
                        "{",
                        "    str choosed_type;",
                        "    int size;",
                        "    int rand = RndObject(1, 100, object);",
                        "    if(rand <= chance_1)",
                        "    {",
                        "        choosed_type = str_type_1;",
                        "        size = RndObject(min_size_1, max_size_1, object);",
                        "    }",
                        "    else if(rand <= chance_2)",
                        "    {",
                        "        choosed_type = str_type_2;",
                        "        size = RndObject(min_size_2, max_size_2, object);",
                        "    }",
                        "    else if(rand <= chance_3)",
                        "    {",
                        "        choosed_type = str_type_3;",
                        "        size = RndObject(min_size_3, max_size_3, object);",
                        "    }",
                        "    else if(rand <= chance_4)",
                        "    {",
                        "        choosed_type = str_type_4;",
                        "        size = RndObject(min_size_4, max_size_4, object);",
                        "    }",
                        "    else //if(rand <= chance_5)",
                        "    {",
                        "        choosed_type = str_type_5;",
                        "        size = RndObject(min_size_5, max_size_5, object);",
                        "    }",
                        "",
                        "    fun_arr[0] = choosed_type;",
                        "    fun_arr[1] = size;",
                        "}",
                        "",
                        "function KvinkgunShot()",
                        "{",
                        "    //[t_OnWeaponShot|]",
                        "    dword target = ScriptItemActObject1();",
                        "    if(ObjectType(target) > 5) exit; //Только если стреляют по станции или кораблю",
                        "    ScriptItemActParam(RndObject(8, 10, ScriptItemActShip()));",
                        "}",
                        "",
                        "function NargunShot() //В данный момент нигде не используется",
                        "{",
                        "    //[t_OnWeaponShot2|]",
                        "    if(RndObject(1, 100, ScriptItemActShip()) <= 40) ScriptItemActParam(34945); //1+128+2048+32768 (стандартный дамагсет)",
                        "    else ScriptItemActParam(32769); //1+32768 (ослабленный дамагсет)",
                        "}",
                        "",
                        "function KlissanLeprosyInflict()",
                        "{",
                        "    //[t_OnWeaponShot2,t_OnDeath|]",
                        "    if(ScriptItemActionType(t_OnWeaponShot2))",
                        "    {",
                        "        dword target = ScriptItemActObject1();",
                        "        if(ObjectType(target) != 5) exit;",
                        "        int tint = ShipTypeN(target);",
                        "        if(tint == t_Kling || tint > t_Warrior) exit;",
                        "        //int tint = ShipOwner(target);",
                        "        //if(tint > Gaal && tint != PirateClan) exit;",
                        "        if(ShipInScript(target, 0))",
                        "        {",
                        "            if(ShipCustomFaction(target) == 'Klissan') exit;",
                        "        }",
                        "        if(~ShipFindCustomShipInfoByType(target, 'ShuKlissan_KlissanLeprosy')) exit;",
                        "",
                        "        if(IsPlayer(target))",
                        "        {",
                        "            if(!ShipPilotRace(target)) int chance = 18;",
                        "            else chance = 35;",
                        "            chance = round(PortionInDiapason(PlayerImmunity(), 0, 100, 2.5, 0.8) * chance);",
                        "            int player = 1;",
                        "        }",
                        "        else",
                        "        {",
                        "            if(!ShipPilotRace(target)) chance = 18;",
                        "            else chance = 35;",
                        "            player = 0;",
                        "        }",
                        "        if(RndObject(1, 1000, ScriptItemActShip()) > chance) exit;",
                        "",
                        "        if(player)",
                        "        {",
                        "            //Проверяем наличие прививки от \"Клисанской проказы\"",
                        "            int vaccination = ShipFindCustomShipInfoByType(Player(), 'EvoMC_Vaccination');",
                        "            if(~vaccination)",
                        "            {",
                        "                if(ShipCustomShipInfoTextData(Player(), vaccination, 1) == 'KlissanLeprosy') exit;",
                        "                else if(ShipCustomShipInfoTextData(Player(), vaccination, 2) == 'KlissanLeprosy') exit;",
                        "                else if(ShipCustomShipInfoTextData(Player(), vaccination, 3) == 'KlissanLeprosy') exit;",
                        "            }",
                        "            if(ShipCustomShipInfoData(Player(),'ShuKlissan_LeprosyStop',1) < 100) {",
                        "                ShipCustomShipInfoData(Player(),'ShuKlissan_LeprosyStop',1,ShipCustomShipInfoData(Player(),'ShuKlissan_LeprosyStop',1) + Rnd(2,4));",
                        "                exit;",
                        "            }",
                        "",
                        "            if(CurrentMods('Expansion\\ExpImplants')) GlobalImplantsEnduranceBonus = GlobalImplantsEnduranceBonus - 4; //Штраф/бонус к выносливости для биомодулей из ExpImplants",
                        "            NewsAdd(CT('Illness.Illness.KlissanLeprosy.Start'));",
                        "        }",
                        "",
                        "        ShipSpecialBonuses(target, bonSkill1, ShipSpecialBonuses(target, bonSkill1) - 2);",
                        "        ShipSpecialBonuses(target, bonSkill2, ShipSpecialBonuses(target, bonSkill2) - 2);",
                        "        ShipSpecialBonuses(target, bonSkill3, ShipSpecialBonuses(target, bonSkill3) - 2);",
                        "        ShipSpecialBonuses(target, bonSkill4, ShipSpecialBonuses(target, bonSkill4) - 4);",
                        "        ShipSpecialBonuses(target, bonSkill5, ShipSpecialBonuses(target, bonSkill5) - 6);",
                        "        ShipSpecialBonuses(target, bonSkill6, ShipSpecialBonuses(target, bonSkill6) - 3);",
                        "",
                        "        //Вешаем на корабль болезнь и ход её окончания",
                        "        ShipAddCustomShipInfo(target, 'ShuKlissan_KlissanLeprosy', CT('Illness.Illness.KlissanLeprosy.Text'), CurTurn() + round(PortionInDiapason(GalaxyDiffLevels(7), 50, 500, 0.9, 2.5) * chance));",
                        "    }",
                        "    else //if(ScriptItemActionType(t_OnDeath))",
                        "    {",
                        "        //Чтобы наложение болезни не могли юзать не клисане",
                        "        ReleaseItemFromScript(CurItem());",
                        "    }",
                        "}",
                        "",
                        "function IsStarGotNeurolinkRegroups(dword star)",
                        "{",
                        "    star = Id(star);",
                        "    for(int i = ArrayDim(KlissanInvasion['RegroupingNeurolinks']) - 1; i >= 1; i = i - 1)",
                        "    {",
                        "        //Если в этой системе таки условно есть нейролинк, просто временно находится на перегруппировке",
                        "        if(int(GetVariableName(KlissanInvasion['RegroupingNeurolinks', i])) == star)",
                        "        {",
                        "            result = 1;",
                        "            exit;",
                        "        }",
                        "    }",
                        "",
                        "    result = 0;",
                        "}",
                        "",
                        "function RemoveIllsAndStims(dword ship)",
                        "{",
                        "    for(int i = 1; i <= 24; i = i + 1) ShipHealthFactor(ship, i, 0);",
                        "}",
                        "",
                        "//Создаёт \"неизвестный корабль\", типа из ЧД",
                        "function SpawnUnknownShip(dword planet, int sub_type = -1)",
                        "{",
                        "    if(sub_type == -1) sub_type = RndObject(1, 5, planet);",
                        "    dword ship = BuyDomikExtremal(planet, sub_type);",
                        "    SetName(ship, CT('Script.Mod_ShuKlissan.UnknownShipsAttack.UnknownShip'));",
                        "",
                        "    ShipSpecialBonuses(ship, bonFuel, -10000); //Ставим запрет на покидание своей системы",
                        "    NoScanToShip(ship, 1);",
                        "    NoTalkToShip(ship, 1);",
                        "",
                        "    ItemSize(ShipItems(ship, 0), RndObject(185 + GTL * 30, 150 + GTL * 150, ship));",
                        "",
                        "    dword hull = ShipItems(ship, 0);",
                        "    ItemSize(hull, max(round((0.00085 * GalaxyDiffLevels(6) + 1) * ItemLevel(hull) * 195), 500) + RndObject(-35, 45, ship));",
                        "    HullHP(ship, 'To100');",
                        "    Chameleon(ship, 'Ship.X.' + RndObject(0, 2, ship));",
                        "",
                        "    ShipMoney(ship, min(GalaxyMoney(4, 4) * 100, 100000000));",
                        "    for(int i = 1; i <= 7; i = i + 1) ShipRefit(ship);",
                        "    ShipImproveItems(ship, 3 + round(0.02 * GalaxyDiffLevels(6)));",
                        "",
                        "    FreeAllHoldEquipment(ship);",
                        "    //FixOverweight(ship); //Нет смысла проверять, т.к. тоже самое автоматически делает функция ShipImproveItems()",
                        "",
                        "    //Запрещаем дроп любой неподходящей для наложения неизвестной расы оборудки",
                        "    for(i = 1; i < ShipItems(ship); i = i + 1)",
                        "    {",
                        "        dword item = ShipItems(ship, i);",
                        "        ItemDurability(item, 100);",
                        "",
                        "        if(ItemType(item) > t_Weapon12)",
                        "        {",
                        "            NoDropItem(item, 1);",
                        "            continue;",
                        "        }",
                        "        if(~EqModule(item))",
                        "        {",
                        "            NoDropItem(item, 1);",
                        "            continue;",
                        "        }",
                        "        if(~EqSpecial(item))",
                        "        {",
                        "            NoDropItem(item, 1);",
                        "            continue;",
                        "        }",
                        "",
                        "        ItemOwner(item, None);",
                        "    }",
                        "",
                        "    //С шансом в 10% выдаём кораблю в дроп случайный артефакт (оригинальный, либо кастомный, по списку из мода ExpArts)",
                        "    if(RndObject(1, 100, ship) <= 10)",
                        "    {",
                        "        if(IsScriptActive('Mod_ExpArts') && IsScriptActive('Mod_ExpExplorers'))",
                        "        {",
                        "            int art_num = RndObject(1, ArrayDim(GgiveArtsArray) - 1, ship);",
                        "            if(art_num <= 27) item = CreateArt(RndObject(t_ArtefactHull, t_ArtFastRacks, ship), None);",
                        "            else item = CreateCustomArt(GgiveArtsArray[art_num], CustomArtSizeCalc(int(CT('Artefacts.CustomArtefacts.' + GgiveArtsArray[art_num] + '.Size'))), CustomArtCostCalc(int(CT('Artefacts.CustomArtefacts.' + GgiveArtsArray[art_num] + '.Cost'))), None);",
                        "        }",
                        "        else item = CreateArt(RndObject(t_ArtefactHull, t_ArtFastRacks, ship), None);",
                        "        ShipAddDropItem(ship, item);",
                        "    }",
                        "",
                        "    //Добавляем микромодули из REfBHMM, если он подключён",
                        "    if(CT('RefBHMM')) {",
                        "        ShipAddDropItem(ship,CreateMM(FindBonusByNameInCfg('RefMM_Bh'+Rnd(1,30))));",
                        "        if(!Rnd(0,2)) ShipAddDropItem(ship,CreateMM(FindBonusByNameInCfg('RefMM_Bh'+Rnd(1,30))));",
                        "    }",
                        "",
                        "    ShipSkill(ship, 'Accuracy', RndObject(4, 6, ship));",
                        "    ShipSkill(ship, 'Mobility', RndObject(4, 6, ship));",
                        "    ShipSkill(ship, 'Technical', 6);",
                        "    ShipSkill(ship, 'Trader', 0);",
                        "    ShipSkill(ship, 'Charm', 0);",
                        "    ShipSkill(ship, 'Leadership', 0);",
                        "",
                        "    ShipOwner(ship, None);",
                        "    ShipType(ship, 'Unknown');",
                        "    ShipJoin(UnknownShips, ship);",
                        "    ShipCustomFaction(ship, 'Unknown');",
                        "",
                        "    result = ship;",
                        "}",
                        "",
                        "//Функция, удаляющая из трюма корабля всё оборудование и оружие, но не удаляющая скриптовые предметы",
                        "function FreeAllHoldEquipment(ship)",
                        "{",
                        "    for(int i = ShipItems(ship) - 1; i > 0; i = i - 1)",
                        "    {",
                        "        dword item = ShipItems(ship, i);",
                        "        if(ItemIsInUse(item)) continue;",
                        "        if(ItemType(item) < t_FuelTanks) continue;",
                        "        if(ItemType(item) > t_CustomWeapon) continue;",
                        "        if(ItemInScript(item) == 1) continue;",
                        "        FreeItem(GetItemFromShip(ship, i));",
                        "    }",
                        "}",
                        "",
                        "//Функция для исправления перевеса корабля (если он есть): расширяет вместимость корпуса, повышает HP до максимума",
                        "//ShipImprovements с некоторых пор имеет аналогичный эффект",
                        "function FixOverweight(ship)",
                        "{",
                        "    ShipCalcParam(ship);",
                        "    int space = ShipFreeSpace(ship);",
                        "    if(space < 0)",
                        "    {",
                        "        dword hull = ShipItems(ship, 0);",
                        "        ItemSize(hull, ItemSize(hull) + abs(space) + RndObject(1, 3, ship));",
                        "        HullHP(hull, 'To100');",
                        "        ShipCalcParam(ship);",
                        "    }",
                        "}",
                        "",
                        "//Подсчёт эгемонов в системе на случай их засилья",
                        "function EgemonCount(dword star)",
                        "{",
                        "    int p, con;",
                        "    for(p=0;StarShips(star)>p;p=p+1) {",
                        "        if(ShipCustomFaction(StarShips(star,p)) == 'SubFactionKlissan') {",
                        "            if(findsubstr(ShipName(StarShips(star,p)),0,'Эгемон')) con = con + 1;",
                        "        }",
                        "    }",
                        "",
                        "    result = con;",
                        "}",
                        "",
                        "function CreateKlissanHole(dword star_from, dword star_to, dword ship)",
                        "{",
                        "    dword hole = HoleCreate2(star_from, star_to, 'CustomHoles.KlissanHole');",
                        "    //Если был указан корабль/станция, то ЧД откроется рядом с ним",
                        "    if(ship)",
                        "    {",
                        "        HoleX1(hole, RndObject(CoordX(ship) - 50, CoordX(ship) + 50, ship));",
                        "        HoleY1(hole, RndObject(CoordY(ship) - 50, CoordY(ship) + 50, ship));",
                        "    }",
                        "",
                        "    //Надо проверить, а куда нас ухреначило?",
                        "    //Возникают всякие нехорошие пироги, ввиду которых стоит расстояние до звезды минимум в 300 постановить",
                        "    if(HoleX1(hole) < 300 && HoleX1(hole) > -300) {",
                        "        if(Rnd(1,2) == 1) HoleX1(hole,Rnd(300,400));",
                        "        else HoleX1(hole,Rnd(-400,-300));",
                        "    }",
                        "    if(HoleY1(hole) < 300 && HoleY1(hole) > -300) {",
                        "        if(Rnd(1,2) == 1) HoleY1(hole,Rnd(300,400));",
                        "        else HoleY1(hole,Rnd(-400,-300));",
                        "    }",
                        "",
                        "    HoleMap(hole, 'SkipAB_Klissan');",
                        "    //Открывается всего на 3 дня",
                        "    HoleTurnCreate(hole, CurTurn() - 197);//RndObject(190, 195, star_from));",
                        "",
                        "    result = hole;",
                        "}",
                        "",
                        "//Ищет наградную планету (после освобождения) в указанной системе (всегда первая обитаемая в списке)",
                        "//(больше не используется)",
                        "function GetRewardPlanet(dword star)",
                        "{",
                        "    for(int i = 0; i < StarPlanets(star); i = i + 1)",
                        "    {",
                        "        dword planet = StarPlanets(star, i);",
                        "        if(PlanetOwner(planet) != None) break;",
                        "    }",
                        "",
                        "    result = planet;",
                        "}",
                        "",
                        "function ChangeShipScriptGroupFromInfo(dword ship)",
                        "{",
                        "    int info_num = ShipFindCustomShipInfoByType(ship, 'ChangeShipScriptGroupInfo');",
                        "    if(info_num == -1)",
                        "    {",
                        "        result = 0;",
                        "        exit;",
                        "    }",
                        "",
                        "    str data_str = ShipCustomShipInfoTextData(ship, info_num, 1);",
                        "    ShipJoinToScript(ship, GetParFromString(data_str, ',', 0, 0));",
                        "    SetData(GetParFromString(data_str, ',', 1, 0), 0, ship);",
                        "    SetData(GetParFromString(data_str, ',', 2, 0), 1, ship);",
                        "    SetData(GetParFromString(data_str, ',', 3, 0), 2, ship);",
                        "    SetData(GetParFromString(data_str, ',', 4, 0), 3, ship);",
                        "",
                        "    //Удаляем инфошку, либо сдвигаем очередь переключений скриптовой группы",
                        "    data_str = ShipCustomShipInfoTextData(ship, info_num, 2);",
                        "    if(data_str == '') ShipDeleteCustomShipInfo(ship, info_num);",
                        "    else",
                        "    {",
                        "        ShipCustomShipInfoTextData(ship, info_num, 1, data_str);",
                        "        data_str = ShipCustomShipInfoTextData(ship, info_num, 3);",
                        "        if(data_str != '')",
                        "        {",
                        "            ShipCustomShipInfoTextData(ship, info_num, 2, data_str);",
                        "            ShipCustomShipInfoTextData(ship, info_num, 3, '');",
                        "        }",
                        "        else ShipCustomShipInfoTextData(ship, info_num, 2, '');",
                        "    }",
                        "",
                        "    result = 1;",
                        "}",
                        "",
                        "//Считает количество активных клисан в указанной системе (клисане в гипере не считаются)",
                        "function KlissansInStar(dword star)",
                        "{",
                        "    int klissans_count = 0;",
                        "    klissans_count = CountIn(Machpella, star, 1);",
                        "    klissans_count = klissans_count + CountIn(Neurolinks, star, 1);",
                        "    klissans_count = klissans_count + CountIn(KlissanShips, star, 1);",
                        "    result = klissans_count;",
                        "}",
                        "",
                        "//Объявляет массив шансов спавна и выставляет базовые начальные шансы",
                        "//на спавн тех или иных подтипов клисанских кораблей",
                        "function DeclareKlissanInvasionArray()",
                        "{",
                        "    ArrayDelete(KlissanInvasion, 0);",
                        "",
                        "    ArrayAdd(KlissanInvasion, 0, 'StartDay'); //Ход начала клисанского вторжения, задаётся на старте скрипта в ините",
                        "    ArrayAdd(KlissanInvasion, 0, 'IsStarted'); //Маркер означающий, что вторжение клисан началось",
                        "    ArrayAdd(KlissanInvasion, 50, 'KlissanDiffLevel'); //Сложность настройки клисан, выбранная игроком при старте партии",
                        "    ArrayAdd(KlissanInvasion, 0, 'DaysPassedAfterStart'); //Ожидаемо, сколько ходов прошло после начала клисанского вторжения, считается автоматически из терна",
                        "    ArrayAdd(KlissanInvasion, 0, 'HandlerAndMachpellaSpawned'); //Маркер, что Хандлер и махпелла были созданы и добавлены в свои группы (поскольку тупой дабокод не позволяет заносить корабли в группы из инита, приходится добавлять лишний маркер и делать это из терна)",
                        "    ArrayAdd(KlissanInvasion, 0, 'HandlerId'); //Id Хандлера, заполняется при создании станции в ините",
                        "    ArrayAdd(KlissanInvasion, 0, 'MachpellaId'); //Id махпеллы, заполняется при создании махпеллы в ините",
                        "    ArrayAdd(KlissanInvasion, 25, 'KlissanStrength'); //Общий процент силы (от 1% до 100%) клисанских кораблей, который используется для их непосредственного спавна, и меняется в зависимости от текущей обстановки в Галактике",
                        "    ArrayAdd(KlissanInvasion, 0, 'StarsCaptured'); //Сколько систем в данный момент захвачено клисанами",
                        "    ArrayAdd(KlissanInvasion, 0, 'StarsCapturedLimit'); //Лимит систем, которые могут захватить клисане",
                        "    ArrayAdd(KlissanInvasion, 15, 'KlissansInStarLimit'); //Лимит максимального количества клисан в одной системе (каждый ход задаётся из тёрна",
                        "",
                        "    //Подмассивы, в которые будут заноситься группы подходящих звёзд для проведения клисанской атаки (заполняться будут непосредственно перед атакой)",
                        "    //Группы звёзд имеют три уровня приоритета атаки - самые дальние, дальние и ближние к системе Тортугац",
                        "    //Если в процессе перебора не удалось найти подходящих звёзд дальнего порядка, то для атаки будут выбираться более ближние",
                        "    unknown t_arr = newarray(1);",
                        "    ArrayAdd(KlissanInvasion, t_arr, 'StarsToAttack.Priority1'); //Самые удалённые от Тортугаца звёзды",
                        "    t_arr = newarray(1);",
                        "    ArrayAdd(KlissanInvasion, t_arr, 'StarsToAttack.Priority2'); //Средние по удалённости от Тортугаца звёзды",
                        "    t_arr = newarray(1);",
                        "    ArrayAdd(KlissanInvasion, t_arr, 'StarsToAttack.Priority3'); //Самые ближайшие к Тортугацу звёзды",
                        "    t_arr = newarray(1);",
                        "    ArrayAdd(KlissanInvasion, t_arr, 'RegroupingNeurolinks'); //Нейролинки, выполняющие пополнение в ЧД, которые фактически находятся в Тортугаце, но формально приписаны к другой системе (необходимо для проверок наличия в системах нейролинков)",
                        "    t_arr = newarray(1);",
                        "",
                        "    ArrayAdd(KlissanInvasion, 0, 'MutationsStartDay'); //Ход начала появления мутаций (акринов) среди клисан, выставляется в ините",
                        "    ArrayAdd(KlissanInvasion, t_arr, 'MutationsGiveList'); //Массив со списком выдачи подходящих мутаций (акринов) клисанам, заполняемый на этапе загрузки игры, более подробное описание в Lang",
                        "    t_arr = newarray(1); //В конце обязательно \"открепляем\" временный массив от основного",
                        "",
                        "    //От активации Z-трансмиттера отличается тем, что в данном случае клисане проводят полноценную атаку с нейролинком, а не просто вылетают кучкой из ЧД",
                        "    ArrayAdd(KlissanInvasion, 0, 'NextStarAttackTurn'); //Дата в которую клисане (или игрок) смогут попытаться выбрать новую систему для атаки",
                        "    ArrayAdd(KlissanInvasion, 0, 'NextNeurolinkReadyTurn'); //Дата, в которую будет готов (созреет) следующий клисанский нейролинк для организации полноценной атаки или для отправки в клисанскую систему, в которой этого нейролинка, по тем или иным причинам, нет",
                        "    ArrayAdd(KlissanInvasion, -1, 'LastAttackedStar'); //Id системы (без вычитания -1), которую клисане атаковали последней (нужно запоминать, чтобы снизить вероятность повторных нападений подряд)",
                        "    ArrayAdd(KlissanInvasion, 0, 'LastAttackedStar.AttacksCount'); //Сколько раз подряд клисане уже атаковали одну и ту же систему (обнуляется при выборе другой системы для атаки)",
                        "    ArrayAdd(KlissanInvasion, 0, 'TotalAttacksCount'); //Сколько всего нападений на системы за игру произвели клисане (самые первые нападения клисан будут сильнее)",
                        "    ArrayAdd(KlissanInvasion, 0, 'WeakestKlissanStar'); //Временный Id системы (без вычитания -1), в которой нет нейролинка и осталось меньше всего клисан, чем в других клисанских системах без нейролинка",
                        "",
                        "    //Определяем шансы спавна различных типов клисан",
                        "    //Нумерация ячеек массива здесь должна соответствовать нумерации типов клисан",
                        "    ArrayAdd(KlissanInvasion, 3, 'EgemonSpawnChance'); //Шанс спавна эгемона",
                        "    ArrayAdd(KlissanInvasion, 5, 'NondusSpawnChance'); //Шанс спавна нондуса",
                        "    ArrayAdd(KlissanInvasion, 13, 'CatauriSpawnChance'); //Шанс спавна катаури",
                        "    ArrayAdd(KlissanInvasion, 26, 'MonchikSpawnChance'); //Шанс спавна рогита",
                        "    ArrayAdd(KlissanInvasion, 54, 'MutonieSpawnChance'); //Шанс спавна мутёнка",
                        "    ArrayAdd(KlissanInvasion, 0, 'GigasSpawnChance'); //Шанс спавна гигаса",
                        "    KlissanInvasion['MonchikSpawnChance'] = KlissanInvasion['MonchikSpawnChance'] + KlissanInvasion['MutonieSpawnChance'];",
                        "    KlissanInvasion['CatauriSpawnChance'] = KlissanInvasion['CatauriSpawnChance'] + KlissanInvasion['MonchikSpawnChance'];",
                        "    KlissanInvasion['NondusSpawnChance'] = KlissanInvasion['NondusSpawnChance'] + KlissanInvasion['CatauriSpawnChance'];",
                        "    KlissanInvasion['EgemonSpawnChance'] = KlissanInvasion['EgemonSpawnChance'] + KlissanInvasion['NondusSpawnChance']; //Ожидаемо, всегда должно быть равно 100%",
                        "    KlissanInvasion['GigasSpawnChance'] = KlissanInvasion['GigasSpawnChance'] + KlissanInvasion['EgemonSpawnChance']; //Пока нигде не используется",
                        "",
                        "    ArrayAdd(KlissanInvasion, PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 50, 500, 20, 42), 'KlissanShipsInStarLimit'); //Лимит доспавна клисан в одной системе",
                        "    ArrayAdd(KlissanInvasion, '*', 'LastSpawnedKlissanNames'); //Запоминаем последние N имён появившихся клисан, чтобы \"уникализировать\" их выборку",
                        "    ArrayAdd(KlissanInvasion, '*', 'LastSpawnedNurolinkNames'); //Запоминаем последние N имён появившихся нейролинков, чтобы \"уникализировать\" их выборку",
                        "",
                        "    ArrayAdd(KlissanInvasion, 0, 'KlissanBlackHoleBattle'); //Маркер сражения в клисанской ЧД, выставляется в 1 при влёте игрока в такую ЧД и в 0 при вылете из неё",
                        "",
                        "    //Объявление разделов для записи наградных звезды и планеты (сюда заносятся айдишники после освобождения системы игроком)",
                        "    ArrayAdd(KlissanInvasion, -1, 'StarLiberationReward.Star'); //-1 здесь, потому что нулевой номер имеет Тарон",
                        "    ArrayAdd(KlissanInvasion, 0, 'StarLiberationReward.Planet');",
                        "",
                        "    ArrayAdd(KlissanInvasion, 0, 'MainResearch.WasStarted'); //Маркер о начале исследования клисан, нужен для подстановки вступительного диалога перед открытием доступа к исследованию на НБ",
                        "    tflt1 = round(GalaxyDiffLevels(2)/40) * 1.0;",
                        "    ArrayAdd(KlissanInvasion, tflt1, 'MainResearch.ResearchLeft'); //Сколько осталось на исследование",
                        "    ArrayAdd(KlissanInvasion, 0, 'MainResearch.Materials'); //Количество материалов в запасе исследователей",
                        "    ArrayAdd(KlissanInvasion, 0, 'MainResearch.StagesCompleted'); //Сколько этапов общего исследования клисан было завершено (последний этап - 4, после чего переменная временно принимает значение 5, а после того, как игрок прочитает последний диалог - 6)",
                        "    ArrayAdd(KlissanInvasion, 0, 'MacrophaseShiftGenerator.ActivationCooldown'); //Ход, в который станет доступно следующее использование макрофазового генератора (активируется автоматически, если лежит в трюме у игрока) (я вырубил эту хрень, чтобы оно не ломало игроку системы)",
                        "",
                        "    tflt1 = round(GalaxyDiffLevels(2)/15) * 1.0;",
                        "    ArrayAdd(KlissanInvasion, tflt1, 'MentalCommunicator.ResearchLeft'); //Прогресс исследования Ментального коммуникатора",
                        "    ArrayAdd(KlissanInvasion, 0, 'MentalCommunicator.Materials'); //Количество материалов в запасе исследователей",
                        "    ArrayAdd(KlissanInvasion, 0, 'MentalCommunicator.WasReceived'); //Маркер, был ли получен ментальный коммуникатор (если равно 1), а также таймер до его изготовления после сдачи всех ошмётков (если любое значение, кроме 0 или 1)",
                        "    tflt1 = round(GalaxyDiffLevels(2)/20) * 1.0;",
                        "    ArrayAdd(KlissanInvasion, tflt1, 'ZTransmitter.ResearchLeft'); //Прогресс исследования Z-трансмиттера",
                        "    ArrayAdd(KlissanInvasion, 0, 'ZTransmitter.Materials'); //Количество материалов в запасе исследователей",
                        "    ArrayAdd(KlissanInvasion, 0, 'ZTransmitter.WasReceived'); //Маркер, был ли получен Z-трансмиттер (если равно 1), а также таймер до его изготовления после сдачи всех ошмётков (если любое значение, кроме 0 или 1)",
                        "    ArrayAdd(KlissanInvasion, 0, 'ZTransmitter.WasActivatedInStar'); //Id системы (без вычитания -1), в которой игрок активировал Z-трансмиттер, запускает атаку клисан на указанную систему, после чего зануляется",
                        "    ArrayAdd(KlissanInvasion, 0, 'KlissanControl.WasReceived'); //Маркер, имеется ли у игрока полный контроль над клисанами",
                        "    ArrayAdd(KlissanInvasion, 0, 'KlissanControl.StarToAttack'); //Id системы (без вычитания -1), которую должны атаковать клисане по приказу атаки от игрока - если равно 0, значит, приказ атаки не выставлен",
                        "    //ArrayAdd(KlissanInvasion, 0, 'KlissanControl.AttackOrderBuff'); //Маркер о предоставлении клисанам, отправленным в атаку на систему по приказу игрока, некоторого бонуса в общей силе",
                        "    ArrayAdd(KlissanInvasion, 2, 'KlissanControl.NextAttackOrderTurn'); //Дата организации следующей возможной атаки клисан по приказу игрока (стартовые значения нужны для первого корректного определения заряда)",
                        "    ArrayAdd(KlissanInvasion, 1, 'KlissanControl.LastAttackOrderTurn'); //Дата последнего хода, в который игрок отдал клисанам приказ об атаке указанной системы - нельзя отдавать такие приказы слишком часто",
                        "    ArrayAdd(KlissanInvasion, 0, 'KlissanControl.NextMachpellaOrderTurn'); //Дата следующей возможной отправки махпеллы систему по приказу игрока",
                        "    ArrayAdd(KlissanInvasion, 0, 'KlissanControl.LastMachpellaOrderTurn'); //Дата последнего хода, в который игрок отдал махпелле приказ на передислокацию - нельзя отдавать такие приказы слишком часто",
                        "",
                        "    ArrayAdd(KlissanInvasion, 0, 'MachpellaJumpToPlayerStarEvent'); //Маркер одноразового эвента, когда махпелла неожиданно прыгает в систему игрока, если тот находится в клисанской системе",
                        "",
                        "    ArrayAdd(KlissanInvasion, 0, 'SpecagentNearPlotEndMessage'); //Маркер о том, что уже было выведено сообщение при приближении к званию \"Барона\" в пиратской сюжетке за спецагента (когда получил звание \"Хан\")",
                        "",
                        "    ArrayAdd(KlissanInvasion, 0, 'ArrivalOnHandler'); //Маркер о том, что игрока пригласили на Хандлер, происходит после того как он стал бароном и оказался в Тортугаце и только если ещё не стартовала силовая концовка захвата Тортугаца за Коалицию",
                        "    ArrayAdd(KlissanInvasion, 0, 'HandlerSpecialGuardsWasSpawned'); //Маркер, что была создана (создаётся один раз за игру) особая защитная группа для Хандлера, которая появляется только если игрок наносит по станции урон, либо если её здоровье опускается ниже 50%",
                        "",
                        "    ArrayAdd(KlissanInvasion, 0, 'EndingSequenceIsStarted'); //Маркер, что игроком была запущена какая-то из концовок, хотя до непосредственной концовки может быть ещё далеко (может принимать значения только 0 и 1)",
                        "    ArrayAdd(KlissanInvasion, 0, 'SpecagentFreedTheGalaxyEndingStage'); //Маркеры этапов концовки 'Specagent.GalaxyFreed' за спецагента, если игрок решил сразу же не разбираться с Алакаем, а принять его предложение об использовании клисан для освобождения Галактики:",
                        "       // 0 - концовка не запущена",
                        "       // 1 - игрок принял управление клисанами у Алакая",
                        "       // 2 - игрок захватил все доминаторские системы, после чего началось наступление клисан, игрока вызвали в ЦР",
                        "       // 3 - в ЦР игрок получил задание на ликвидацию махпеллы",
                        "       // 4 - махпелла успешно ликвидирована игроком, игрока снова вызывают в ЦР",
                        "       // 5 - на данном этапе игрок может закончить игру в ЦР, либо продолжить добивать пиратов, если они ещё остались",
                        "       // 6 - игрок разобрался со всеми пиратами и его снова вызывают в ЦР, на этот раз уже для окончательного завершения игры",
                        "    ArrayAdd(KlissanInvasion, 0, 'TortugatzAssaultEndingStage'); //Маркер, что игрок пролетел в Тортугац через клисанскую чёрную дыру, запускает последовательность концовки 'Coalition.TortugatzCaptured':",
                        "       // 0 - концовка не запущена",
                        "       // 1 - игрок влетел в клисанскую ЧД с \"ключём\"",
                        "       // 2 - игрок вылетел из ЧД в Тортугац, создаём военную базу и отправляем её в атаку на Тортугац",
                        "       // 3 - (выставляется из стейта ВБ) военная база прибыла в Тортугац, начинается основная заруба (игрока она по коммуникатору ещё не вызывала)",
                        "    ArrayAdd(KlissanInvasion, 0, 'KlissansMustBeDestroyed'); //Маркер в виде сета о необходимости уничтожить:",
                        "       // 1 - Хандлер и махпелла должны быть уничтожены для концовки пиратского клана 'PirateClan.AlakayKilled'",
                        "       // 2 - Хандлер и махпелла должны быть уничтожены для концовки пиратского клана 'Specagent.AlakayKilled'",
                        "    ArrayAdd(KlissanInvasion, 0, 'GalaxyPirateConquestBegan'); //Маркер выбора игроком пути завоевания Галактики за пиратов (игрок также должен быть бароном), необходимо выполнить для получения концовки 'PirateClan.GalaxyConquered'",
                        "    ArrayAdd(KlissanInvasion, 'NotFinished', 'PlotEnding'); //Сюда будет записана одна из нескольких типов концовок, выставляется в момент непосредственного получения задания лететь на какую-либо станцию за поздравлениями",
                        "        // 'Coalition.TortugatzCaptured' - стандартная силовая концовка за Коалицию, игрок пошёл в рейд на Тортугац и всех там победил, перед этим необходимо завершить все исследования (игрок на стороне Коалиции)",
                        "        // 'Coalition.MahpellaFreed' - Махпелла отбита и освобождена",
                        "        // 'Coalition.SixthRace' - клисане интегрируются в структуры Коалиции",
                        "        // 'Coalition.MahpellaKilled' - Махпелла погибла",
                        "        // 'Specagent.AlakayKilled' - Алакай наказан и отшлёпан до смерти, Хандлер и Махпелла после этого должны быть уничтожены (игрок барон на стороне клана, но как спецагент)",
                        "        // 'Specagent.AlakayExiled' - прогнали всех атятяев вместе с их клисанами (игрок барон на стороне клана, но как спецагент)",
                        "        // 'Specagent.GalaxyFreed' - концовка с освобождением Галактики от остатков доминаторов и пиратов (а также клисан) за спецагента, необходимо принять предложение Алакая и использовать клисан, чтобы разобраться с остатками доминаторов",
                        "        // 'Specagent.KlissanCivilWar' - клисан позвали воевать доминаторов, но их перетянули на разные стороны и началась гражданская война на несколько рукавов",
                        "        // 'Specagent.MahpellaFreed' - Махпелла освобождена и отпущена",
                        "        // 'Specagent.SixthRace' - Махпелла освобождена, клисане интегрируются в структуры Коалиции",
                        "        // 'PirateClan.IntergalacticWar' - вторгшаяся Махпелла бежала и начала Джиххад против пиратов",
                        "        // 'PirateClan.AlakayKilled' - Алакай наказан и отшлёпан до смерти, Хандлер и Махпелла после этого должны быть уничтожены (игрок барон на стороне клана)",
                        "        // 'PirateClan.GalaxyConquered' - клисане \"поработили\" всю Галактику под руководством игрока (игрок барон на стороне клана)",
                        "    ArrayAdd(KlissanInvasion, 0, 'PlotDone'); //Маркер, который выставляется в самом конце сюжетки клисан, при завершении последнего диалога, т.к. для некоторых веток предусмотрено продолжение игры даже после завершения клисанского сюжета",
                        "       //Также является и номером кастомной концовки, которую необходимо показать игроку, если завершение сюжетки клисан также завершает и всю игру:",
                        "       // 0 - сюжетка клисан ещё не завершена",
                        "       //-1 - была завершена сюжетка клисан, но не всей игры",
                        "       //>0 - была завершена сюжетка клисан, всей игры и уже проигрывается финальный ролик, текст кастомной концовки будет выбран в зависимости от номера в данной переменной",
                        "    ArrayAdd(KlissanInvasion, PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 50, 500, 350, 1800), 'AlliedMahpellaTurns'); //Количество ходов до выхода союзной Махпеллы после исследования Ментального Коммуникатора",
                        "    ArrayAdd(KlissanInvasion, 0, 'AllyMachpellaStage'); //Стадии союзной Мехлёпы",
                        "        // 0 - Мехлёпа ещё не спавнилась",
                        "        // 1 - ЧД с Мехлёпой только заспавнилась",
                        "        // 2 - появилась новость о Мехлёпе, Мехлёпа выползла, но ничего не делает",
                        "        // 3 - игрок поговорил с Мехлёпой и согласился участвовать в её приколах",
                        "        // 4 - (символично) игрок послал Мехлёпу, игрок долго тянул с Мехлёпой или атаковал Мехлёпу",
                        "        // 5 - началась какая-то концовка, Махпелла тоже полетела",
                        "        // 6 - игрок - гейрат, сугубо маркерно-диалоговая стадия, после становится 4",
                        "        // 7 - игрок помог Махпелле",
                        "    ArrayAdd(KlissanInvasion, 0, 'MachpellaWaiting'); //Таймер того, как долго Махпелла ждёт ответа. Спойлер: 5 лет",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 0,
                    "Parent": 265,
                    "#": 18,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Атака неизвестных кораблей на систему с игроком (только если все предыдущие уже были перебиты)",
                        "if(CurTurn() >= abs(UnknownShipsAttackTurn))",
                        "{",
                        "    if(!GroupCount(UnknownShips))",
                        "    {",
                        "        if(UnknownShipsAttackTurn < 0) UnknownShipsAttackTurn = CurTurn() + Rnd(730, 1460); //Если всех налётчиков перебили до того, как истёк таймер их пребывания в системе / до вывода новости о налёте",
                        "        else while(1)",
                        "        {",
                        "            //Выбираем случайную ближайшую систему недалеко от игрока (либо непосредственно его систему)",
                        "            cur_star = ShipStar(Player());",
                        "            cur_star = StarNearbyStars(cur_star, RndObject(0, 3, cur_star));",
                        "            if(StarOwner(cur_star) == 1) //Если текущая система находится под контролем доминаторов",
                        "            {",
                        "                UnknownShipsAttackTurn = CurTurn() + 15;",
                        "                break;",
                        "            }",
                        "            if(StarToCon(cur_star) == StarToCon(GalaxyStar(TortugatzId))) //Если текущая система находится в скрытом пиратском секторе",
                        "            {",
                        "                UnknownShipsAttackTurn = CurTurn() + 15;",
                        "                break;",
                        "            }",
                        "",
                        "            //Создаём временную ЧД, из которой вылетят неизвестные корабли",
                        "            cur_hole = HoleCreate2(cur_star, cur_star);",
                        "            HoleMap(cur_hole, 'NoEntry');",
                        "            HoleTurnCreate(cur_hole, CurTurn() - 200); //Закроется сразу же после вылета из неё кораблей",
                        "",
                        "            //Создаём нападающие на систему неизвестные корабли",
                        "            cur_planet = FindPlanetByAdvancement(100);",
                        "            if(!cur_planet) cur_planet = FindPlanetByAdvancement(100, 2);",
                        "            for(i = 0; i < RndObject(3, 6, cur_star); i = i + 1)",
                        "            {",
                        "                cur_ship = SpawnUnknownShip(cur_planet, 2); //Первоначально будут созданы как доминаторские урганты",
                        "                MakeShipEnterStar(cur_ship, cur_star, StarNearbyStars(cur_star, 1), 1);",
                        "                OrderJumpHole(cur_ship, cur_hole);",
                        "            }",
                        "",
                        "            //Через 3-4 дня выводим новость о нападении неизвестных кораблей (минусовое значение служит маркером)",
                        "            UnknownShipsAttackTurn = -(CurTurn() + RndObject(1, 2, cur_star));",
                        "            break;",
                        "        }",
                        "    }",
                        "    else",
                        "    {",
                        "        cur_ship = GroupToShip(UnknownShips);",
                        "        cur_star = ShipStar(cur_ship);",
                        "",
                        "        //Выводим новость о нападении неизвестных кораблей",
                        "        if(ShipStatistic(cur_ship, 11) < 10) //Если прошло менее 10 ходов с начала налёта",
                        "        {",
                        "            if(StarOwner(cur_star) != 1)",
                        "            {",
                        "                tstr1 = Format(CT('Script.Mod_ShuKlissan.UnknownShipsAttack.AttackNews' + RndObject(1, 3, cur_star)), '<Star'+'>', Name(cur_star), '<Sector'+'>', Name(StarToCon(cur_star)));",
                        "                Ether(0, '', Format(tstr1, '0,50,200', '255,240,100', ''));",
                        "                AddPlanetNews(tstr1,89);",
                        "            }",
                        "",
                        "            //Обновляем таймер до следующего нападения (минусовое значение служит маркером)",
                        "            UnknownShipsAttackTurn = -(CurTurn() + RndObject(30, 60, cur_star)); //Через пару месяцев уцелевшие налётчики отступят обратно в ЧД",
                        "        }",
                        "        //Уводим неизвестных налётчиков обратно в ЧД",
                        "        else",
                        "        {",
                        "            cur_hole = HoleCreate2(cur_star, cur_star);",
                        "            HoleMap(cur_hole, 'NoEntry');",
                        "            HoleTurnCreate(cur_hole, CurTurn() - 300);",
                        "            for(i = GroupCount(UnknownShips) - 1; i >= 0; i = i - 1)",
                        "            {",
                        "                cur_ship = GroupShip(UnknownShips, i);",
                        "                SetData(Id(cur_hole), 0, cur_ship);",
                        "                ShipFreeFlight(cur_ship);",
                        "            }",
                        "",
                        "            UnknownShipsAttackTurn = CurTurn() + Rnd(730, 1460); //Следующее нападение возможно через 2-4 года",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "//Производим прибавку исследования",
                        "",
                        "//Если клисанское вторжение уже началось",
                        "if(CurTurn() >= KlissanInvasion['StartDay'])",
                        "{",
                        "    if(!KlissanInvasion['IsStarted']) KlissanInvasion['IsStarted'] = 1; //МАЯЧОК-ЯКОРЁК!!! УНИКАЛЬНЫЕ БАЛАНСЫ МЕХАНИРОВКИ ТУТА!!!",
                        "",
                        "    //Каждый ход пересчитываем ключевые параметры клисан",
                        "    KlissanInvasion['DaysPassedAfterStart'] = CurTurn() - KlissanInvasion['StartDay'];",
                        "",
                        "    //Лимит систем для захвата клисанами меняется динамически, чем позднее по игре - тем больше",
                        "    //KlissanInvasion['StarsCapturedLimit'] = 3 + round(0.9 * (CurTurn() / 365) + 0.08 * KlissanInvasion['KlissanDiffLevel']);",
                        "    KlissanInvasion['StarsCapturedLimit'] = 3 + round(0.9 * (CurTurn() / 365) * (1.0 + 0.002 * KlissanInvasion['KlissanDiffLevel']));",
                        "    KlissanInvasion['StarsCapturedLimit'] = round(0.45 * KlissanInvasion['StarsCapturedLimit']);",
                        "",
                        "    //Считаем общую силу клисан, которая влияет на их количество и оснащение кораблей (задаём здесь зависимость от года, сложности клисан и привязку к текущему ГТУ)",
                        "    //KlissanInvasion['KlissanStrength'] = round(0.75 * (CurTurn() / 365) + 0.2 * KlissanInvasion['KlissanDiffLevel']) + PortionInDiapason(GTL, 1, 8, -15, 15);",
                        "    KlissanInvasion['KlissanStrength'] = round(0.35 * (CurTurn() / 365) * (1.0 + 0.002 * KlissanInvasion['KlissanDiffLevel'])) + 0.08 * KlissanInvasion['KlissanDiffLevel'];",
                        "",
                        "    //Сила клисан тем меньше, чем больше систем было ими захвачено относительно текущего лимита",
                        "    KlissanInvasion['KlissanStrength'] = round(PortionInDiapason(KlissanInvasion['StarsCaptured'], 0.1 * KlissanInvasion['StarsCapturedLimit'], 1.0 * KlissanInvasion['StarsCapturedLimit'], 1.8, 0.95) * KlissanInvasion['KlissanStrength']);",
                        "",
                        "    //Также сила клисан постепенно растёт с течением игрового времени (чем дальше, тем они будут становиться сильнее), вплоть до 9 лет от начала вторжения",
                        "    KlissanInvasion['KlissanStrength'] = round(PortionInDiapason(KlissanInvasion['DaysPassedAfterStart'], 182, 7285, 0.05, 1.5) * KlissanInvasion['KlissanStrength']);",
                        "",
                        "    //Первые 10 нападений будут ощутимо усилены",
                        "    //(Чем больше KlissanStrength, тем слабее они)",
                        "    KlissanInvasion['KlissanStrength'] = KlissanInvasion['KlissanStrength'] * PortionInDiapason(KlissanInvasion['TotalAttacksCount'], 0, 10, 5.0, 1.25);",
                        "",
                        "    //Сила клисан в любом случае не должна быть выше 100% (т.к. это, фактически, не имеет смысла)",
                        "    if(GTL < 8) tint1 = 75; //До наступления 8 ГТУ предельная \"естественная\" сила клисан на данном этапе не будет превышать 75%",
                        "    else tint1 = 100;",
                        "    if(!KlissanInvasion['KlissanControl.WasReceived']) KlissanInvasion['KlissanStrength'] = max(min(KlissanInvasion['KlissanStrength'], tint1), 1);",
                        "    else KlissanInvasion['KlissanStrength'] = max(min(round(1.33 * KlissanInvasion['KlissanStrength']), tint1), 1);",
                        "",
                        "    //Текущий лимит клисанских кораблей в захваченной системе",
                        "    KlissanInvasion['KlissansInStarLimit'] = PortionInDiapason((KlissanInvasion['KlissanStrength'] * 2) + (KlissanInvasion['KlissanDiffLevel'] / 2), 30, 450, 10, 50);",
                        "",
                        "    //Переопределяем шанс на появление определенных типов клисан (зависит от текущего уровня угрозы)",
                        "    KlissanInvasion['MutonieSpawnChance'] = PortionInDiapason(KlissanInvasion['KlissanStrength'], 40, 75, 46, 42);",
                        "    KlissanInvasion['MonchikSpawnChance'] = PortionInDiapason(KlissanInvasion['KlissanStrength'], 40, 75, 27, 26) + KlissanInvasion['MutonieSpawnChance'];",
                        "    KlissanInvasion['CatauriSpawnChance'] = PortionInDiapason(KlissanInvasion['KlissanStrength'], 40, 75, 15, 17) + KlissanInvasion['MonchikSpawnChance'];",
                        "    KlissanInvasion['NondusSpawnChance']  = PortionInDiapason(KlissanInvasion['KlissanStrength'], 40, 75,  8,  9) + KlissanInvasion['CatauriSpawnChance'];",
                        "    KlissanInvasion['EgemonSpawnChance']  = PortionInDiapason(KlissanInvasion['KlissanStrength'], 40, 75,  4,  6) + KlissanInvasion['NondusSpawnChance'];",
                        "    KlissanInvasion['GigasSpawnChance']   = PortionInDiapason(KlissanInvasion['KlissanStrength'], 40, 75,  0,  0) + KlissanInvasion['EgemonSpawnChance'];",
                        "",
                        "    //Удаляем нейролинки из массива перегруппировки, если они были уничтожены в ЧД, либо вернулись в нормальный космос",
                        "    for(i = ArrayDim(KlissanInvasion['RegroupingNeurolinks']) - 1; i >= 1; i = i - 1)",
                        "    {",
                        "        if(KlissanInvasion['RegroupingNeurolinks', i] == -1) continue; //-1 здесь означает особый, неснимаемый маркер, чтобы можно было на произвольное время защитить систему от прибытия новых нейролинков",
                        "",
                        "        cur_ship = IdToShip(KlissanInvasion['RegroupingNeurolinks', i]);",
                        "        if(!cur_ship) ArrayDelete(KlissanInvasion['RegroupingNeurolinks'], i);",
                        "        else if(ShipInNormalSpace(cur_ship)) ArrayDelete(KlissanInvasion['RegroupingNeurolinks'], i);",
                        "    }",
                        "",
                        "    //Спавним новые споровые колонии",
                        "    if(PPCount > 1500) {",
                        "        if(SporesLeft < 5) {",
                        "            if(CurTurn() % 400 == 0) {",
                        "                SporesLeft = SporesLeft + 1;",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Отнимаем прогресс по наглухо дабанутой ёбаформуле",
                        "    for(int serie=0;serie<3;serie=serie+1)",
                        "    {",
                        "        if(!serie) float serie_mod = 0.5; //Основное исследование",
                        "        else if(serie == 1) serie_mod = 0.6; //Исследование Ментального коммуникатора",
                        "        else serie_mod = 0.4; //Исследование Z-трансмиттера",
                        "",
                        "        float max_work_day_mod = GalaxyDiffLevels(2) / 50;",
                        "        if(1 == max_work_day_mod) max_work_day_mod = 0.050;",
                        "        else if(2 == max_work_day_mod) max_work_day_mod = 0.040;",
                        "        else if(3 == max_work_day_mod) max_work_day_mod = 0.030;",
                        "        else if(4 == max_work_day_mod) max_work_day_mod = 0.020;",
                        "        else",
                        "        {",
                        "            int i = int(max_work_day_mod) - 4;",
                        "            max_work_day_mod = 0.020;",
                        "            for(i = i; i >= 1; i = i - 1) max_work_day_mod = max_work_day_mod / 1.5;",
                        "        }",
                        "",
                        "        if(!serie) tstr1 = 'MainResearch';",
                        "        else if(serie == 1) tstr1 = 'MentalCommunicator';",
                        "        else tstr1 = 'ZTransmitter';",
                        "",
                        "        float speed_percent = PortionInDiapason(KlissanInvasion[tstr1+'.Materials'], 0, 300, 20, 100);",
                        "",
                        "        //SFT('PolKlissan: '+serie+' is '+KlissanInvasion[tstr1+'.ResearchLeft']+', turn is '+CurTurn());",
                        "        //SFT('PolKlissan: speed_percent is '+speed_percent);",
                        "        //SFT('PolKlissan: max_work_day_mod is '+max_work_day_mod);",
                        "        //SFT('PolKlissan: serie_mod is '+serie_mod);",
                        "        //SFT('PolKlissan: lowing on '+(PortionInDiapason(speed_percent, 0, 100, 0.00001, max_work_day_mod)));",
                        "        //SFT('PolKlissan: final count is '+(PortionInDiapason(speed_percent, 0, 100, 0.00001, max_work_day_mod) * serie_mod));",
                        "",
                        "        if(KlissanInvasion[tstr1+'.ResearchLeft'] > 0) KlissanInvasion[tstr1+'.ResearchLeft'] = KlissanInvasion[tstr1+'.ResearchLeft'] - (PortionInDiapason(speed_percent, 0, 100, 0.00001, max_work_day_mod) * serie_mod);",
                        "    }",
                        "",
                        "    //Основной цикл проверки захвата/освобождения систем от клисан (проверяет только те системы, в которых прямо сейчас идёт бой)",
                        "    KlissanInvasion['StarsCaptured'] = 0; //Заодно здесь же постоянно пересчитываем текущее число захваченных клисанами систем",
                        "    tdwd1 = ShipStar(Player());",
                        "    KlissanInvasion['WeakestKlissanStar'] = 0;",
                        "    cnt = 50000;",
                        "    for(i = 0; i < GalaxyStars(); i = i + 1)",
                        "    {",
                        "        cur_star = StarNearbyStars(tdwd1, i);",
                        "        if(cur_star == GalaxyStar(TortugatzId) || cur_star == GalaxyStar(NifigatzId)) continue;",
                        "",
                        "        //check == -1 - клисане потеряли систему",
                        "        //check ==  0 - статус системы в отношении клисан не изменился",
                        "        //check ==  1 - клисане захватили систему",
                        "        check = -1;",
                        "        if(StarCustomFaction(cur_star) != 'Klissan')",
                        "        {",
                        "            if(!StarBattle(cur_star))",
                        "            {",
                        "                check = 0;",
                        "                continue;",
                        "            }",
                        "",
                        "            //Считаем общее число всех клисанских и не клисанских кораблей в системе",
                        "            tint1 = 0;",
                        "            tint2 = 0;",
                        "            for(j = StarShips(cur_star) - 1; j >= 0; j = j - 1)",
                        "            {",
                        "                cur_ship = StarShips(cur_star, j);",
                        "                if(ShipInHyperSpace(cur_ship, 1)) continue;",
                        "                cur_planet = GetShipPlanet(cur_ship);",
                        "                if(cur_planet)",
                        "                {",
                        "                    if(PlanetOwner(cur_planet) == None) continue; //Укрытые на незаселёнках не в счёт",
                        "                    else if(IsPlayer(cur_ship)) continue;",
                        "                }",
                        "",
                        "                if(ShipCustomFaction(cur_ship) == 'Klissan') tint1 = tint1 + 1;",
                        "                else tint2 = tint2 + 1;",
                        "            }",
                        "",
                        "            //Клисане только что захватили эту систему",
                        "            if(tint1 && !tint2)",
                        "            {",
                        "                KlissanInvasion['StarsCaptured'] = KlissanInvasion['StarsCaptured'] + 1;",
                        "                //if(player_on_planet) CustomLose(Format(CT('FormGameEnd.LossInPlanetKlissan'), '<Planet'+'>', Name(GetShipPlanet(Player()))));",
                        "                check = 1;",
                        "            }",
                        "            //Система пока остаётся под контролем кого-то ещё",
                        "            else check = 0;",
                        "        }",
                        "        else",
                        "        {",
                        "            //Проверяем, остались ли ещё в захваченной системе клисане",
                        "            tint1 = KlissansInStar(cur_star);",
                        "            if(tint1)",
                        "            {",
                        "                //Если в клисанской системе нет нейролинка, определяем её в кандидаты на пополнение",
                        "                if(!CountIn(Neurolinks, cur_star))",
                        "                {",
                        "                    if(!IsStarGotNeurolinkRegroups(cur_star)) //Если нейролинка в системе точно нет",
                        "                    {",
                        "                        if(tint1 < cnt) //Если в этой системе осталось меньше клисан, чем во всех остальных системах без нейролинка",
                        "                        {",
                        "                            cnt = tint1;",
                        "                            KlissanInvasion['WeakestKlissanStar'] = Id(cur_star);",
                        "                        }",
                        "                    }",
                        "                }",
                        "",
                        "                //Если в системе оказалось слишком много клисан (могли добавиться с подкреплением), избавляемся от лишних",
                        "                tint2 = (KlissanInvasion['KlissansInStarLimit'] + 3) - tint1;",
                        "                if(tint2 < 0)",
                        "                {",
                        "                    if(!StarBattle(cur_star))",
                        "                    {",
                        "                        //Ищем систему, подходящую для отправки в неё излишка клисан",
                        "                        tdwd2 = 0;",
                        "                        for(j = 1; j < GalaxyStars(); j = j + 1)",
                        "                        {",
                        "                            tdwd1 = StarNearbyStars(cur_star, j);",
                        "                            if(NoComeKlingToStar(tdwd1)) continue;",
                        "                            if(GetScriptNoKlingMarksFromStar(tdwd1) != '') continue;",
                        "                            if(StarCustomFaction(tdwd1) == 'Klissan') continue;",
                        "                            if(tdwd1 == GalaxyStar(TortugatzId) || tdwd1 == GalaxyStar(NifigatzId)) continue;",
                        "",
                        "                            tdwd2 = tdwd1;",
                        "                            break;",
                        "                        }",
                        "",
                        "                        //Если нашли",
                        "                        if(tdwd2)",
                        "                        {",
                        "                            tint2 = abs(tint2);",
                        "                            for(j = 0; j < StarShips(cur_star); j = j + 1)",
                        "                            {",
                        "                                cur_ship = StarShips(cur_star, j);",
                        "                                if(ShipInHyperSpace(cur_ship, 1)) continue;",
                        "                                if(ShipCustomFaction(cur_ship) != 'Klissan') continue;",
                        "                                if(!ShipSubType(cur_ship)) continue;",
                        "",
                        "                                SetData(Id(tdwd2), 0, cur_ship);",
                        "                                ChangeState('KlissanShipsAttackStarState', cur_ship);",
                        "                                tint2 = tint2 - 1;",
                        "                                if(!tint2) break;",
                        "                            }",
                        "                        }",
                        "                    }",
                        "                }",
                        "",
                        "                //Система пока остаётся под контролем клисан",
                        "                KlissanInvasion['StarsCaptured'] = KlissanInvasion['StarsCaptured'] + 1;",
                        "                check = 0;",
                        "            }",
                        "            else if(!StarBattle(cur_star))",
                        "            {",
                        "                //Система пока остаётся под контролем клисан",
                        "                KlissanInvasion['StarsCaptured'] = KlissanInvasion['StarsCaptured'] + 1;",
                        "                check = 0;",
                        "            }",
                        "        }",
                        "",
                        "        //Если кроме клисан в системе никого не осталось, то система считается захваченной клисанами",
                        "        if(check == 1)",
                        "        {",
                        "            check = StarOwner(cur_star);",
                        "            if(!check)",
                        "            {",
                        "                tstr1 = Format(CT('GalaxyNews.Global.KlissanTakeSystemFromNormals' + RndObject(1, 3, cur_star)), '<Star'+'>', Name(cur_star), '<Sector'+'>', Name(StarToCon(cur_star)));",
                        "                NewsAdd(tstr1);",
                        "                AddPlanetNews(tstr1,61);",
                        "            }",
                        "            else if(check == 2)",
                        "            {",
                        "                tstr1 = Format(CT('GalaxyNews.Global.KlissanTakeSystemFromPirates' + RndObject(1, 3, cur_star)), '<Star'+'>', Name(cur_star), '<Sector'+'>', Name(StarToCon(cur_star)));",
                        "                NewsAdd(tstr1);",
                        "                AddPlanetNews(tstr1,60);",
                        "            }",
                        "",
                        "            StarCustomFaction(cur_star, 'Klissan');",
                        "            StarOwner(cur_star, 1); //На всякий случай выставляем в качестве основного овнера доминаторов",
                        "",
                        "            //Выставляем всем обитаемым планетам кастомную расу (только чтобы изменить их цвет на миникарте) и овнера Kling, чтобы сделать планету враждебной",
                        "            for(j = 0; j < StarPlanets(cur_star); j = j + 1)",
                        "            {",
                        "                cur_planet = StarPlanets(cur_star, j);",
                        "                if(PlanetOwner(cur_planet) == None) continue;",
                        "",
                        "                //PlanetOwner(cur_planet, Kling); //Выставлять доминаторскую расу для смены цвета на миникарте в данном случае необходимости нет",
                        "                PlanetOwner(cur_planet, Kling);",
                        "                PlanetCustomFaction(cur_planet, 'Klissan');",
                        "            }",
                        "        }",
                        "        //Если всех клисан успешно выбили из системы",
                        "        else if(check == -1)",
                        "        {",
                        "            //Снимаем со всех обитаемых планет кастомную фракцию, а заодно определяем \"наградную планету\"",
                        "            //tdwd2 = GetRewardPlanet(cur_star);",
                        "            tdwd2 = 0;",
                        "            for(j = 0; j < StarPlanets(cur_star); j = j + 1)",
                        "            {",
                        "                cur_planet = StarPlanets(cur_star, j);",
                        "                if(PlanetOwner(cur_planet) == None) continue;",
                        "",
                        "                if(!tdwd2) tdwd2 = cur_planet; //Запоминаем \"наградную планету\" для кораблей-освободителей",
                        "                PlanetCustomFaction(cur_planet, '');",
                        "            }",
                        "",
                        "            //Выясняем, кто конкретно отбил систему у клисан",
                        "            check = StarOwner(cur_star);",
                        "",
                        "            tint1 = ShipKillFactionInCurSystem(Player(), -1); //После снятия StarCustomFaction() этот счётчик сразу же обнулится",
                        "            for(j = StarShips(cur_star) - 1; j >= 0; j = j - 1)",
                        "            {",
                        "                cur_ship = StarShips(cur_star, j);",
                        "                if(ObjectType(cur_ship) != 5) continue; //Сразу скипаем возможные станции",
                        "                if(!ShipInNormalSpace(cur_ship)) continue;",
                        "                if(!ShipKillFactionInCurSystem(cur_ship, -1)) continue;",
                        "                tint2 = ShipTypeN(cur_ship);",
                        "                if(tint2 < t_Ranger) continue;",
                        "                if(tint2 > t_Warrior) continue;",
                        "",
                        "                if(!check) //Если систему отбила Коалиция",
                        "                {",
                        "                    if(ShipOwner(cur_ship) != PirateClan) ShipRankPoints(cur_ship, ShipRankPoints(cur_ship) + 40); //+40 военных очков за освобождение клисанской системы (за доминаторские в ваниле дают 30)",
                        "                }",
                        "                else //Если отбили пираты",
                        "                {",
                        "                    if(ShipOwner(cur_ship) == PirateClan) ShipPirateRankPoints(cur_ship, ShipPirateRankPoints(cur_ship) + 10); //+10 пиратских очков за освобождение клисанской системы (за доминаторские в ваниле дают 16)",
                        "                }",
                        "",
                        "                if(ShipInScript(cur_ship, 0))",
                        "                {",
                        "                    //Если это военный из заказанной игроком операции, то пропускаем его дальше",
                        "                    if(GetShipScriptName(cur_ship, 3) != 'Mod_ShuWarriors.OperativeWarriors') continue;",
                        "                }",
                        "                ShipJoin(ToGetRewardShips, cur_ship, '', Id(tdwd2));",
                        "            }",
                        "",
                        "            StarCustomFaction(cur_star, '');",
                        "",
                        "            //Если систему отбила Коалиция",
                        "            if(!check)",
                        "            {",
                        "                //Выводится новость об освобождении системы от клисан Коалицией",
                        "                tstr1 = Format(CT('GalaxyNews.Global.NormalsTakeSystemFromKlissan' + RndObject(1, 3, cur_star)), '<Star'+'>', Name(cur_star), '<Sector'+'>', Name(StarToCon(cur_star)), '<Planet'+'>', Name(tdwd2));",
                        "                Ether(0, '', tstr1, tdwd2);",
                        "                AddPlanetNews(tstr1,59);",
                        "",
                        "                //Если игрок находится в освобождённой системе, то играется звук освобождения",
                        "                if(ShipInStar(Player(), cur_star))",
                        "                {",
                        "                    if(!ShipInHyperSpace(Player(), 1))",
                        "                    {",
                        "                        //А если игрок ещё и сбивал клисанские корабли (по факту, любые с враждебной кастомной расой), то получает награду",
                        "                        if(tint1)",
                        "                        {",
                        "                            //Все планеты освобождённой системы тут же начинают любить игрока",
                        "                            for(i = 0; i < StarPlanets(cur_star); i = i + 1)",
                        "                            {",
                        "                                cur_planet = StarPlanets(cur_star, i);",
                        "                                if(PlanetOwner(cur_planet) != None) RelationToRanger(cur_planet, Player(), 100);",
                        "                            }",
                        "",
                        "                            ShipStatistic(Player(), 3, ShipStatistic(Player(), 3) + 1); //+1 освобождённая игроком система",
                        "                            ShipRankPoints(Player(), ShipRankPoints(Player()) + 40); //+40 военных очков за освобождение клисанской системы (за доминаторские в ваниле дают 30)",
                        "                            KlissanInvasion['StarLiberationReward.Planet'] = Id(tdwd2);",
                        "                            KlissanInvasion['StarLiberationReward.Star'] = Id(cur_star) - 1;",
                        "                        }",
                        "",
                        "                        Sound('Sound.LiberationSystem');",
                        "                    }",
                        "                }",
                        "            }",
                        "            //Если отбили пираты",
                        "            else if(check == 2)",
                        "            {",
                        "                //Выводится новость об освобождении системы от клисан пиратами",
                        "                tstr1 = Format(CT('GalaxyNews.Global.PiratesTakeSystemFromKlissan' + RndObject(1, 2, cur_star)), '<Star'+'>', Name(cur_star), '<Sector'+'>', Name(StarToCon(cur_star)), '<Planet'+'>', Name(tdwd2));",
                        "                Ether(0, '', tstr1, tdwd2);",
                        "                AddPlanetNews(tstr1,58);",
                        "",
                        "                //Если игрок находится в освобождённой системе, то играется звук освобождения",
                        "                if(ShipInStar(Player(), cur_star))",
                        "                {",
                        "                    if(!ShipInHyperSpace(Player(), 1))",
                        "                    {",
                        "                        //А если игрок ещё и сбивал клисанские корабли (по факту, любые с враждебной кастомной расой), то получает награду",
                        "                        if(tint1)",
                        "                        {",
                        "                            RelationToRanger(PlanetPirateClan(), Player(), RelationToRanger(PlanetPirateClan(), Player()) + 10);",
                        "                            ShipStatistic(Player(), 3, ShipStatistic(Player(), 3) + 1); //+1 освобождённая игроком система",
                        "                            ShipPirateRankPoints(Player(), ShipPirateRankPoints(Player()) + 10); //+10 пиратских очков за освобождение клисанской системы (за доминаторские в ваниле дают 16)",
                        "                            KlissanInvasion['StarLiberationReward.Planet'] = Id(tdwd2);",
                        "                            KlissanInvasion['StarLiberationReward.Star'] = Id(cur_star) - 1;",
                        "                        }",
                        "",
                        "                        Sound('Sound.LiberationSystem');",
                        "                    }",
                        "                }",
                        "            }",
                        "            //Иначе система считается захваченной доминаторами, что нас уже не интересует",
                        "            //else {}",
                        "        }",
                        "    }",
                        "",
                        "    //Обработчик, срабатывающий при влёте игрока в ЧД (необходим для запуска клисанских ЧД)",
                        "    if(ShipInHole(Player()))",
                        "    {",
                        "        if(!StartAB() && !GABStatus)",
                        "        {",
                        "            if(!KlissanInvasion['KlissanBlackHoleBattle'])",
                        "            {",
                        "                cur_hole = ShipOrderObj(Player());",
                        "",
                        "                //Если точка выхода ЧД находится в Тортугаце",
                        "                //Все клисанские ЧД имеют флаг 'SkipAB', а потому боты в них влететь не смогут",
                        "                //Благодаря этому, проверять возможное срабатывание старта АБ от других скриптов, обрабатывающих ЧД, не имеет смысла",
                        "                //tint1 = Id(HoleStar1(cur_hole)) - 1;",
                        "                //tint2 = Id(HoleStar2(cur_hole)) - 1;",
                        "                if(HoleMap(cur_hole) == 'SkipAB_Klissan') //if(tint1 == TortugatzId || tint2 == TortugatzId)",
                        "                {",
                        "                    cur_star = ShipStar(Player());",
                        "                    //Заранее ставим маркер об обработке залёта в ЧД, чтобы терн не перезапускался его по нескольку раз подряд",
                        "                    KlissanInvasion['KlissanBlackHoleBattle'] = 1;",
                        "                    //На всякий случай запрещаем игроку повторный влёт в данную ЧД (боты могут случайно продлить её время жизни своими залётами)",
                        "                    HoleMap(cur_hole, 'NoEntry');",
                        "",
                        "                    //Добавление кораблей происходит вне зависимости от наличия у игрока \"ключа\"",
                        "                    //Ищем корабли, влетевшие в ЧД одновременно с игроком",
                        "                    int machpella_in_the_hole = 0;",
                        "                    check = 0;",
                        "                    tint2 = StarShips(HoleStar1(cur_hole));",
                        "                    tint3 = tint2 + StarShips(HoleStar2(cur_hole));",
                        "                    for(i = 0; i < tint3; i = i + 1)",
                        "                    {",
                        "                        if(i < tint2) cur_ship = StarShips(HoleStar1(cur_hole), i);",
                        "                        else cur_ship = StarShips(HoleStar2(cur_hole), i - tint2);",
                        "",
                        "                        if(IsPlayer(cur_ship)) continue;",
                        "                        if(!ShipInHole(cur_ship)) continue; //Проверка, что корабль находится в ЧД",
                        "                        if(ShipOrderObj(cur_ship) != cur_hole) continue; //Проверка, что корабль находится в той же ЧД, что и игрок",
                        "                        if(ShipType(cur_ship) == 'Machpella') machpella_in_the_hole = 1;",
                        "",
                        "                        ArrayClear(tarr1);",
                        "                        rand = 1;",
                        "                        j = 0;",
                        "                        while(rand)",
                        "                        {",
                        "                            //Совершенно уебанским способом перебираем корабли, сидящие на станции (на нейролинке), которая сама находится в ЧД",
                        "                            if(ShipType(cur_ship) == 'Neurolink' || ObjectType(cur_ship) == 4 || j)",
                        "                            {",
                        "                                if(ArrayDim(tarr1) == 1)",
                        "                                {",
                        "                                    tdwd1 = ShipStar(cur_ship);",
                        "                                    ArrayAdd(tarr1, cur_ship); //Станция во временном массиве служит в качестве маркера, т.к. в теории на ней может вовсе не оказаться кораблей",
                        "                                    for(j = 0; j < StarShips(tdwd1); j = j + 1)",
                        "                                    {",
                        "                                        tdwd2 = StarShips(tdwd1, j);",
                        "                                        if(GetShipRuins(tdwd2) == cur_ship) ArrayAdd(tarr1, tdwd2);",
                        "                                    }",
                        "",
                        "                                    rand = 1;",
                        "                                    j = 1;",
                        "                                }",
                        "",
                        "                                //Перебор массива с кораблями на станции (также включает саму станцию в целях \"маркировки\")",
                        "                                cur_ship = tarr1[j];",
                        "                                if(j == ArrayDim(tarr1) - 1)",
                        "                                {",
                        "                                    rand = 0;",
                        "                                    j = 0;",
                        "                                }",
                        "                                else j = j + 1;",
                        "                            }",
                        "                            else rand = 0;",
                        "",
                        "                            //Проверяем отношение корабля к игроку, если оно враждебно, то корабль останется врагом игрока и в АБ",
                        "                            tstr5 = ShipCustomFaction(cur_ship);",
                        "                            if(RelationToShip(cur_ship, Player()) <= 9 || tstr5 == 'SubFactionKlissan')",
                        "                            {",
                        "                                tstr1 = '' + ShipTypeN(cur_ship) + ',' + ShipSubType(cur_ship) + ',' + ShipType(cur_ship) + ',' + ShipName(cur_ship) + ',' + Name(cur_ship) + ',' + ShipOwner(cur_ship) + ',ShipId_' + Id(cur_ship);",
                        "",
                        "                                if(tstr5 == 'Klissan' || tstr5 == 'SubFactionKlissan') tint1 = 0;",
                        "                                else tint1 = 2;",
                        "                            }",
                        "                            //А всех союзников игрока определяем на другую сторону",
                        "                            else",
                        "                            {",
                        "                                tstr1 = '' + ShipTypeN(cur_ship) + ',' + ShipSubType(cur_ship) + ',' + ShipType(cur_ship) + '_Friend' + ',' + ShipName(cur_ship) + ',' + Name(cur_ship) + ',' + ShipOwner(cur_ship) + ',ShipId_' + Id(cur_ship);",
                        "                                tint1 = 1;",
                        "                            }",
                        "",
                        "                            //Определяем общую силу корабля в АБ",
                        "                            //tint2 = ShipTypeN(cur_ship);",
                        "                            //if(tint2 == t_Pirate) tint2 = 105;",
                        "                            //else if(tint2 == t_Tranclucator) tint2 = 80;",
                        "                            //else tint2 = 120;",
                        "",
                        "                            cur_item = 0;",
                        "                            if(tstr5 == 'Klissan' || tstr5 == 'SubFactionKlissan')",
                        "                            {",
                        "                                //Добавляем аркадный дроп для клисан",
                        "                                cost = RndObject(-1, 1, cur_ship);",
                        "                                if(~cost)",
                        "                                {",
                        "                                    if(!cost) cur_item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(25, 50, cur_ship), 1);",
                        "                                    else cur_item = CreateQuestItem('KlissanRemains' + RndObject(1, CT('Script.Mod_ShuKlissan.KlissanRemainsCount'), cur_ship), None);",
                        "                                    EqCustomFaction(cur_item, 'Klissan');",
                        "                                }",
                        "                            }",
                        "",
                        "                            //Включаем этот корабль в будущую аркадную битву",
                        "                            if(cur_item) tdwd2 = ConvertToABShip(cur_ship, tint1, 100, 100, tstr1, cur_item);",
                        "                            else tdwd2 = ConvertToABShip(cur_ship, tint1, 100, 100, tstr1);",
                        "",
                        "                            //Добавляем автореген за каждого экипированного младшего дроида",
                        "                            ABShipModifiers(tdwd2, 'regen', 100 * ArtefactTypeInUse(cur_ship, t_ArtefactDroid));",
                        "",
                        "                            //Делаем махпеллу полностью неуязвимой в ЧД",
                        "                            if(machpella_in_the_hole) ABShipModifiers(tdwd2, 'fragility', 0);",
                        "",
                        "                            //Ставим кораблю метку, что он попал в ЧД вместе с игроком (если нужна)",
                        "                            tint1 = ShipFindCustomShipInfoByType(cur_ship, 'ExpExplorers_ExplorerInfo');",
                        "                            if(~tint1)",
                        "                            {",
                        "                                //Если данный корабль является партнёром игрока, то артефактов после боя он не получит",
                        "                                if(ShipIsPartner(cur_ship) == Player()) ShipCustomShipInfoData(cur_ship, tint1, 1, 5);",
                        "                                else ShipCustomShipInfoData(cur_ship, tint1, 1, 4);",
                        "                            }",
                        "",
                        "                            if(tstr5 == 'Klissan' || tstr5 == 'SubFactionKlissan') check = check + 1;",
                        "                        }",
                        "                    }",
                        "",
                        "                    //Если не обнаружили клисанских кораблей, попавших в одну ЧД с игроком, либо в одной ЧД с ним оказалась махпелла",
                        "                    if(!check || machpella_in_the_hole)",
                        "                    {",
                        "                        //Спавним на Роджерии рандомных не привязанных к реальным кораблям клисан для битвы в ЧД",
                        "                        cnt = RndObject(5, 10, cur_star);",
                        "                        for(i = 0; i < cnt; i = i + 1)",
                        "                        {",
                        "                            cur_ship = SpawnKlissan(PlanetPirateClan(), RndObject(1, 5, cur_star));",
                        "",
                        "                            //Делаем из них аркадных противников",
                        "                            cur_item = 0;",
                        "                            tint1 = RndObject(-1, 1, cur_ship);",
                        "                            if(~tint1)",
                        "                            {",
                        "                                if(!tint1) cur_item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(25, 50, cur_ship), 1);",
                        "                                else cur_item = CreateQuestItem('KlissanRemains' + RndObject(1, CT('Script.Mod_ShuKlissan.KlissanRemainsCount'), cur_ship), None);",
                        "                                EqCustomFaction(cur_item, 'Klissan');",
                        "                            }",
                        "",
                        "                            ConvertToABShip(cur_ship, 0, 100, 100, '' + ShipTypeN(cur_ship) + ',' + ShipSubType(cur_ship) + ',' + ShipType(cur_ship) + ',' + ShipName(cur_ship) + ',' + Name(cur_ship) + ',' + ShipOwner(cur_ship), cur_item);",
                        "",
                        "                            //Отправляем ненужных более доминаторов на Меркурий и там же их по-тихому убиваем",
                        "                            TransferShip(cur_ship, StarPlanets(GalaxyStar(People), 0));",
                        "                            OrderNone(cur_ship);",
                        "                            OrderLock(cur_ship, 1);",
                        "                            ShipDestroy(cur_ship, 1);",
                        "                        }",
                        "                    }",
                        "",
                        "                    //Если у игрока с собой нет \"ключа\", либо он уже имеет пиратское звание барона, либо ЧД вела не в Тортугац",
                        "                    if(!ItemIn(MacrophaseShiftGenerator, Player()) || GetShipPirateRank(Player()) >= 7 || cur_star != GalaxyStar(TortugatzId))",
                        "                    {",
                        "                        //Отправляем игрока (и все не клисанские корабли, которые оказались в ЧД вместе с ним) в систему, в которой находится вход в ЧД",
                        "                        //По сути, выкидываем его в той же системе, в которой он влетел в ЧД",
                        "                        //Но сперва определяем, ведёт ли эта ЧД игрока именно в Тортугац (т.к. если нет, то и пофиг)",
                        "                        if(cur_star == GalaxyStar(TortugatzId))",
                        "                        {",
                        "                            tdwd2 = HoleStar2(cur_hole);",
                        "                            tint1 = 0;",
                        "                            if(HoleStar2(cur_hole) == cur_star)",
                        "                            {",
                        "                                tdwd2 = HoleStar1(cur_hole);",
                        "                                tint1 = 1;",
                        "                            }",
                        "",
                        "                            for(i = 0; i < StarShips(cur_star); i = i + 1)",
                        "                            {",
                        "                                cur_ship = StarShips(cur_star, i);",
                        "",
                        "                                if(!ShipInHole(cur_ship)) continue;",
                        "                                if(ShipCustomFaction(cur_ship) == 'Klissan') continue;",
                        "                                if(ShipCustomFaction(cur_ship) == 'SubFactionKlissan') continue;",
                        "",
                        "                                MakeShipEnterStar(cur_ship, tdwd2, cur_star, 3);",
                        "                                OrderJumpHole(cur_ship, cur_hole);",
                        "                                //Чтобы задать координаты на вылет с правильного конца ЧД",
                        "                                ShipOrderData2(cur_ship, tint1);",
                        "                            }",
                        "                        }",
                        "",
                        "                        //Выбираем случайную карту для АБ",
                        "                        tint1 = 1+2+4+8+16+32+64+128+256+512+1024+2048+4096+8192; //14 оригинальных карт",
                        "                        //Проверяем, подключёны ли моды RevABMaps и/или SR1ABMaps",
                        "                        if(ResourceExist('ABMap.Tachanka')) tint1 = tint1 + 16384+32768+65536+131072+262144+524288; //+6",
                        "                        if(ResourceExist('ABMap.Azure')) tint1 = tint1 + 1048576+2097152+4194304+8388608; //+4",
                        "                        rand = RndObject(0, 23, cur_star);",
                        "                        while(!(tint1 & (1 << rand))) rand = RndObject(0, 23, cur_star); //Максимальная выборка - 24 карты",
                        "                        //Если выпала оригинальная карта",
                        "                        if(rand <= 13) StartAB('ABMap.map_' + (rand + 1));",
                        "                        //Если выпала карта из мода",
                        "                        else",
                        "                        {",
                        "                            if(rand == 14) StartAB('ABMap.Nonsense');",
                        "                            else if(rand == 15) StartAB('ABMap.Pulsar');",
                        "                            else if(rand == 16) StartAB('ABMap.Strolocobs');",
                        "                            else if(rand == 17) StartAB('ABMap.Tachanka');",
                        "                            else if(rand == 18) StartAB('ABMap.Fifth_Dimension');",
                        "                            else if(rand == 19) StartAB('ABMap.Spider\\\\\\'s_Lair');",
                        "                            else if(rand == 20) StartAB('ABMap.Azure', 1); //Для \"Синевы\" всегда синий фон",
                        "                            else if(rand == 21) StartAB('ABMap.Pseudoball');",
                        "                            else if(rand == 22) StartAB('ABMap.Thor');",
                        "                            else StartAB('ABMap.Bowling_Alley');",
                        "                        }",
                        "                    }",
                        "                    //Иначе пропускаем его в Тортугац и запускаем силовую концовку за Коалицию",
                        "                    else",
                        "                    {",
                        "                        //Увеличиваем число дней, которые игрок проведёт в ЧД до вылета из неё, на один",
                        "                        ShipOrderData1(Player(), ShipOrderData1(Player()) + 1);",
                        "",
                        "                        if(!KlissanInvasion['TortugatzAssaultEndingStage'])",
                        "                        {",
                        "                            //Делаем скрытый пиратский сектор видимым для игрока",
                        "                            SectorVisible(StarToCon(GalaxyStar(TortugatzId)), 1);",
                        "                            //Генератор своё дело сделал, больше не нужен",
                        "                            FreeItem(GetItemFromShip(Player(), ScriptItemToItem(MacrophaseShiftGenerator)));",
                        "",
                        "                            NoLanding(PlanetPirateClan(), 1);",
                        "                            ShipOwner(Player(), ShipPilotRace(Player()));",
                        "",
                        "                            //Если Махпелла по какой-то причине оказалась в этот момент не в Тортугаце - исправляем",
                        "                            cur_ship = GroupToShip(Machpella);",
                        "                            if(cur_ship)",
                        "                            {",
                        "                                if(ShipStar(cur_ship) != GalaxyStar(TortugatzId) || !ShipInNormalSpace(cur_ship))",
                        "                                {",
                        "                                    TransferShip(cur_ship, GalaxyStar(TortugatzId));",
                        "                                    ShipJoinToScript(cur_ship, 'Mod_ShuKlissan.Machpella.MachpellaWaitInTortugatzState');",
                        "                                    ShipOwner(cur_ship, PirateClan);",
                        "                                    ShipCustomFaction(cur_ship, 'SubFactionKlissan');",
                        "                                    NoTargetToShip(cur_ship, 2);",
                        "                                    OrderLock(cur_ship, 0);",
                        "                                    SetData(0, 0, cur_ship);",
                        "                                    SetData(0, 1, cur_ship);",
                        "                                    SetData(0, 2, cur_ship);",
                        "                                    SetData(0, 3, cur_ship);",
                        "                                    HullHP(cur_ship, 'To100');",
                        "                                }",
                        "                                else",
                        "                                {",
                        "                                    SetData(0, 0, cur_ship);",
                        "                                    SetData(0, 1, cur_ship);",
                        "                                    SetData(0, 2, cur_ship);",
                        "                                    SetData(0, 3, cur_ship);",
                        "                                    HullHP(cur_ship, 'To100');",
                        "                                    ShipFreeFlight(cur_ship);",
                        "                                }",
                        "                            }",
                        "                            else throw 'Player on its way to Tortugatz, but Machpella was somehow destroyed.';",
                        "",
                        "                            //Ставим маркер о сюжетном посещении Тортугаца через ЧД (запускает последовательность силовой концовки с захватом Тортугаца за Коалицию)",
                        "                            KlissanInvasion['TortugatzAssaultEndingStage'] = 1;",
                        "                            KlissanInvasion['EndingSequenceIsStarted'] = 1;",
                        "                        }",
                        "",
                        "                        //Начинаем аркадный бой",
                        "                        StartAB('ABMap.map_14', 1);",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "        //Игрок завершил аркадный бой, в котором с ним также оказался другой корабль (сработает, только если бой вызывал данный скрипт)",
                        "        else if(GABStatus == 2)",
                        "        {",
                        "            //Перебираем галаэвенты и выясняем, что стало с копией корабля, влетевшего в ЧД вместе с игроком",
                        "            for(i = GalaxyEvents() - 1; i >= 0; i = i - 1)",
                        "            {",
                        "                if(GalaxyEventDate(i) < CurTurn()) break;",
                        "                tstr1 = GalaxyEventType(i);",
                        "",
                        "                //Если этот корабль погиб",
                        "                if(tstr1 == 'LabeledShipKilledInAB')",
                        "                {",
                        "                    tstr1 = GetParFromString(GalaxyEventsTextData(i, 0), ',', 6, 0);",
                        "                    if(~findsubstr(tstr1, 'ShipId_'))",
                        "                    {",
                        "                        //Определяем Id, а затем ищем и убиваем этот корабль в нормальном гиперпространстве, до его выхода из ЧД",
                        "                        HullHP(IdToShip(int(tstr1)), -100000); //Выставляем минусовое ХП, чтобы никакой дроид не успел отхилить его за один ход",
                        "                    }",
                        "                }",
                        "                //Если выжил",
                        "                else if(tstr1 == 'LabeledShipSurvivedInAB')",
                        "                {",
                        "                    tstr1 = GetParFromString(GalaxyEventsTextData(i, 0), ',', 6, 0);",
                        "                    if(~findsubstr(tstr1, 'ShipId_'))",
                        "                    {",
                        "                        tdwd1 = IdToShip(int(tstr1));",
                        "",
                        "                        //Если в ЧД выжил не клисанский корабль и у игрока с собой нет \"ключа\", то возвращаем его в ту же систему, из которой он влетел в ЧД",
                        "                        tstr1 = ShipCustomFaction(tdwd1);",
                        "                        if(tstr1 != 'Klissan' && tstr1 != 'SubFactionKlissan')",
                        "                        {",
                        "                            cur_hole = ShipOrderObj(tdwd1);",
                        "                            if(!ItemIn(MacrophaseShiftGenerator, Player()) || GetShipPirateRank(Player()) >= 7 || ShipOrderObj(Player()) != cur_hole)",
                        "                            {",
                        "                                tdwd2 = HoleStar2(cur_hole);",
                        "                                if(HoleStar2(cur_hole) == GalaxyStar(TortugatzId)) tdwd2 = HoleStar1(cur_hole);",
                        "                                MakeShipEnterStar(tdwd1, tdwd2, GalaxyStar(TortugatzId), 1);",
                        "                                OrderJumpHole(tdwd1, cur_hole);",
                        "                            }",
                        "                        }",
                        "",
                        "                        //Выставляем ему уровень здоровья, который остался у этого корабля под конец аркадного боя",
                        "                        HullHP(tdwd1, GalaxyEventData(i, 0));",
                        "                        //Проверка на случай, если корабль закончил АБ с минимальным количеством ХП и на выходе получил из события нулевое здоровье",
                        "                        if(HullHP(tdwd1) < 1) HullHP(tdwd1, round(0.01 * ItemSize(ShipItems(tdwd1, 0))) + 1);",
                        "",
                        "                        //Выставляем этому кораблю время вылета из ЧД, идентичное времени вылета игрока",
                        "                        ShipOrderData1(tdwd1, ShipOrderData1(Player()));",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "    //Обнуляем маркер битвы с клисанами в ЧД",
                        "    else if(ShipInNormalSpace(Player())) KlissanInvasion['KlissanBlackHoleBattle'] = 0;",
                        "",
                        "    //Если игрок ещё не инициировал запуск ни одной из клисанских концовок",
                        "    if(!KlissanInvasion['KlissansMustBeDestroyed'])",
                        "    {",
                        "        machpella = GroupToShip(Machpella);",
                        "        if(machpella)",
                        "        {",
                        "            //Типа одноразовый эвент \"нападения\" махпеллы на игрока",
                        "            //Если система, в которой в данный момент находится игрок, является клисанской, то туда может неожиданно с визитом нагрянуть махпелла",
                        "            if(!KlissanInvasion['MachpellaJumpToPlayerStarEvent'])",
                        "            {",
                        "                if(!KlissanInvasion['KlissanControl.WasReceived'])",
                        "                {",
                        "                    if(KlissanInvasion['DaysPassedAfterStart'] >= 547)",
                        "                    {",
                        "                        if(StateIs(machpella, 'MachpellaWaitInTortugatzState')) //Может случиться не раньше, чем через 1.5 года с начала вторжения",
                        "                        {",
                        "                            if(ShipInNormalSpace(machpella))",
                        "                            {",
                        "                                if(!CountIn(Neurolinks, ShipStar(machpella), 1)) //Если в данный момент махпелла не занята отправкой нейролинка",
                        "                                {",
                        "                                    if(ShipInNormalSpace(Player()))",
                        "                                    {",
                        "                                        tdwd1 = ShipStar(Player());",
                        "                                        check = 1;",
                        "                                        if(NoComeKlingToStar(tdwd1)) check = 0;",
                        "                                        else if(StarCustomFaction(tdwd1) != 'Klissan') check = 0;",
                        "                                        else if(CurrentMods('ShusRangers\\ShuMercsHQ')) //Сложная проверка на то, что данная система в настоящий момент находится под заданием на захват от штаба наёмников",
                        "                                        {",
                        "                                            cnt = GetValueFromScript('Mod_ShuMercsHQ', 'ActiveQuestHQ');",
                        "                                            if(cnt)",
                        "                                            {",
                        "                                                if(GetParFromString(GetValueFromScript('Mod_ShuMercsHQ', 'ActiveQuestsHQArray', cnt, 3), '.', 4, 0) == 'AttackKlissan')",
                        "                                                {",
                        "                                                    if(GetValueFromScript('Mod_ShuMercsHQ', 'ActiveQuestsHQArray', cnt, 8) == Id(tdwd1)) check = 0;",
                        "                                                }",
                        "                                            }",
                        "                                        }",
                        "",
                        "                                        if(check)",
                        "                                        {",
                        "                                            SetData(Id(tdwd1), 0, machpella); //Id системы для совершения ЧД прыжка",
                        "                                            SetData(CurTurn() + 70, 1, machpella); //Время пребывания махпеллы в указанной системе",
                        "",
                        "                                            ChangeState('MachpellaJumpToStarState', machpella);",
                        "                                            KlissanInvasion['MachpellaJumpToPlayerStarEvent'] = 1;",
                        "                                        }",
                        "                                    }",
                        "                                }",
                        "                            }",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "",
                        "            //Если махпелла пошла творить какую-то дичь, то спавнить нейролинки она, очевидно, не сможет",
                        "            if(StateIs(machpella, 'MachpellaWaitInTortugatzState'))",
                        "            {",
                        "                if(ShipInNormalSpace(machpella))",
                        "                {",
                        "                    //Если у махпеллы уже созрел новый нейролинк",
                        "                    if(KlissanInvasion['NextNeurolinkReadyTurn'] <= CurTurn())",
                        "                    {",
                        "                        //Если уже можно выбирать следующую систему для атаки",
                        "                        if(KlissanInvasion['NextStarAttackTurn'] <= CurTurn())",
                        "                        {",
                        "                            //Запускаем выбор следующей системы для самостоятельного захвата клисанами (не по приказу игрока)",
                        "                            if(KlissanInvasion['StarsCaptured'] < KlissanInvasion['StarsCapturedLimit'] || KlissanInvasion['KlissanControl.WasReceived'])",
                        "                            {",
                        "                                //Небольшая вероятность следующей атаки, которая проверяется буквально каждый ход",
                        "                                // tint1 = PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 50, 500, 4, 11);",
                        "                                // tint1 = round(1.20 * tint1);",
                        "                                // tint1 = round(PortionInDiapason(GroupCount(Neurolinks), 0, 11, 3.0, 0.5) * tint1);",
                        "                                // tint1 = round(PortionInDiapason(CurTurn(), attack_date + 20, attack_date + 300, 0.7, 1.66) * tint1);",
                        "                                // tint1 = tint1 * 2;",
                        "",
                        "                                // if(Rnd(1, 1000) <= tint1)",
                        "                                // {",
                        "",
                        "                                cur_star = 0;",
                        "                                //Если игрок ещё не получил в свои руки устройство для управления клисанами (управляются самостоятельно)",
                        "                                if(!KlissanInvasion['KlissanControl.WasReceived'])",
                        "                                {",
                        "                                    //Ищем подходящую для атаки систему",
                        "                                    ArrayClear(KlissanInvasion['StarsToAttack.Priority1']);",
                        "                                    ArrayClear(KlissanInvasion['StarsToAttack.Priority2']);",
                        "                                    ArrayClear(KlissanInvasion['StarsToAttack.Priority3']);",
                        "",
                        "                                    for(i = 1; i < GalaxyStars(); i = i + 1)",
                        "                                    {",
                        "                                        tdwd1 = StarNearbyStars(GalaxyStar(TortugatzId), i);",
                        "                                        if(Id(tdwd1) == NifigatzId) continue;",
                        "",
                        "                                        //С меньшей вероятностью клисане будут нападать на одну и ту же систему несколько раз подряд",
                        "                                        if(Id(tdwd1) == KlissanInvasion['LastAttackedStar'])",
                        "                                        {",
                        "                                            if(RndObject(1, 100, tdwd1) <= PortionInDiapason(KlissanInvasion['LastAttackedStar.AttacksCount'], 1, 5, 33, 93)) continue;",
                        "                                        }",
                        "",
                        "                                        //Нельзя нападать на системы, защищённые от захвата",
                        "                                        if(NoComeKlingToStar(tdwd1)) continue;",
                        "                                        if(GetScriptNoKlingMarksFromStar(tdwd1) != '') continue;",
                        "",
                        "                                        //Если игрок ещё не получил контроль над клисанами, то атаковать они будут только Коалицию и доминаторов",
                        "                                        //if(!KlissanInvasion['KlissanControl.WasReceived'])",
                        "                                        if(StarOwner(tdwd1) == 2) continue;",
                        "                                        //Ну и на клисан клисане тоже не нападут, что ожидаемо",
                        "                                        if(StarCustomFaction(tdwd1) == 'Klissan') continue;",
                        "                                        //Обязательно делаем проверку на нахождение в системе другого нейролинка, иначе могут начать стакаться там",
                        "                                        if(CountIn(Neurolinks, tdwd1)) continue;",
                        "",
                        "                                        //Если в системе слишком много кораблей, то клисане на неё не нападут (хз почему)",
                        "                                        //if(StarShips(tdwd1) > 60) continue;",
                        "",
                        "                                        if(IsStarGotNeurolinkRegroups(tdwd1)) continue;",
                        "",
                        "                                        //Также клисане не нападут на Гралгар при живом Терроне",
                        "                                        if(Terron())",
                        "                                        {",
                        "                                            if(tdwd1 == ShipStar(Terron())) continue;",
                        "                                        }",
                        "",
                        "                                        //Наиболее приоритетными считаются системы, максимально удалённые от скрытого пиратского сектора",
                        "                                        if(i >= 50) ArrayAdd(KlissanInvasion['StarsToAttack.Priority1'], tdwd1);",
                        "                                        else if(i >= 26) ArrayAdd(KlissanInvasion['StarsToAttack.Priority2'], tdwd1);",
                        "                                        else ArrayAdd(KlissanInvasion['StarsToAttack.Priority3'], tdwd1);",
                        "                                    }",
                        "",
                        "                                    rand = RndObject(1, 100, machpella);",
                        "                                    if(rand <= 50 && ArrayDim(KlissanInvasion['StarsToAttack.Priority1']) > 1) cur_star = KlissanInvasion['StarsToAttack.Priority1', RndObject(1, ArrayDim(KlissanInvasion['StarsToAttack.Priority1']) - 1, machpella)];",
                        "                                    else if(rand <= 80 && ArrayDim(KlissanInvasion['StarsToAttack.Priority2']) > 1) cur_star = KlissanInvasion['StarsToAttack.Priority2', RndObject(1, ArrayDim(KlissanInvasion['StarsToAttack.Priority2']) - 1, machpella)];",
                        "                                    else if(ArrayDim(KlissanInvasion['StarsToAttack.Priority3']) > 1) cur_star = KlissanInvasion['StarsToAttack.Priority3', RndObject(1, ArrayDim(KlissanInvasion['StarsToAttack.Priority3']) - 1, machpella)];",
                        "                                }",
                        "                                //Иначе приказ мог отдать только сам игрок",
                        "                                else if(KlissanInvasion['KlissanControl.StarToAttack'])",
                        "                                {",
                        "                                    cur_star = GalaxyStar(KlissanInvasion['KlissanControl.StarToAttack'] - 1);",
                        "                                    KlissanInvasion['KlissanControl.StarToAttack'] = 0;",
                        "                                }",
                        "",
                        "                                //Если выбрали подходящую для атаки систему",
                        "                                if(cur_star)",
                        "                                {",
                        "                                    //Считаем, сколько раз подряд уже клисане пытаются нападать на одну и ту же систему, либо обновляем Id последней атакованной системы",
                        "                                    if(KlissanInvasion['LastAttackedStar'] == Id(cur_star))",
                        "                                    {",
                        "                                        KlissanInvasion['LastAttackedStar.AttacksCount'] = KlissanInvasion['LastAttackedStar.AttacksCount'] + 1;",
                        "                                    }",
                        "                                    else",
                        "                                    {",
                        "                                        KlissanInvasion['LastAttackedStar'] = Id(cur_star);",
                        "                                        KlissanInvasion['LastAttackedStar.AttacksCount'] = 1;",
                        "                                    }",
                        "",
                        "                                    //Считаем, сколько всего нападений на системы за всю игру организовали клисане",
                        "                                    KlissanInvasion['TotalAttacksCount'] = KlissanInvasion['TotalAttacksCount'] + 1;",
                        "",
                        "                                    //Открываем ЧД для нейролинка (откроется рядом с махпеллой)",
                        "                                    cur_hole = CreateKlissanHole(GalaxyStar(TortugatzId), cur_star, machpella);",
                        "",
                        "                                    //Спавним сам нейролинк",
                        "                                    cur_ruin = SpawnNeurolink(GalaxyStar(TortugatzId), PlanetPirateClan());",
                        "                                    //Время до рождения на нейролинке следующего клисана",
                        "                                    if(!KlissanInvasion['KlissanControl.WasReceived']) int next_spawn = round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 1.5, 0.5) * RndObject(15, 30, cur_ruin));",
                        "                                    else next_spawn = round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 1.0, 3.5) * RndObject(15, 30, cur_ruin));",
                        "                                    //Заносим нейролинк в группу",
                        "                                    SetData(Id(cur_star), 0, cur_ruin);",
                        "                                    SetData(Id(cur_hole), 1, cur_ruin);",
                        "                                    SetData(CurTurn() + RndObject(30, 45, cur_ruin), 2, cur_ruin);",
                        "                                    SetData(CurTurn() + next_spawn, 3, cur_ruin);",
                        "                                    ShipCustomFaction(cur_ruin, 'SubFactionKlissan'); //Мирная фракция вешается временно, пока нейролинк не достигнет атакуемой системы",
                        "                                    TransferShip(cur_ruin, machpella);",
                        "                                    //Когда будет готов следующий нейролинк",
                        "                                    if(!KlissanInvasion['KlissanControl.WasReceived']) KlissanInvasion['NextNeurolinkReadyTurn'] = CurTurn() + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 50, 500, 50, 10);",
                        "                                    else KlissanInvasion['NextNeurolinkReadyTurn'] = CurTurn() + GetNextNeurolinkReadyTime();",
                        "",
                        "                                    //Определяем количество клисан, которые взлетят на захват системы с нейролинка",
                        "                                    cnt = RndObject(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 6, 12), PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 12, 24), GroupToShip(Machpella));",
                        "                                    if(!KlissanInvasion['KlissanControl.WasReceived']) cnt = round(1.25 * (PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 0.5, 2.5) * cnt));",
                        "                                    else cnt = round(1.50 * (PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 0.5, 2.5) * cnt));",
                        "                                    cnt = min(cnt, KlissanInvasion['KlissansInStarLimit'] + 3); //Чтобы количество клисан в системе после её возможного захвата точно не переполнилось",
                        "",
                        "                                    //Создаём нападающих клисан и отправляем в ангар нейролинка",
                        "                                    for(i = 1; i <= cnt; i = i + 1)",
                        "                                    {",
                        "                                        cur_ship = SpawnKlissan(PlanetPirateClan());",
                        "                                        SetData(Id(cur_star), 0, cur_ship);",
                        "                                        TransferShip(cur_ship, cur_ruin);",
                        "                                    }",
                        "",
                        "                                    //Таймер до вероятности проведения следующей клисанской атаки",
                        "                                    if(!KlissanInvasion['KlissanControl.WasReceived']) KlissanInvasion['NextStarAttackTurn'] = CurTurn() + round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 0.5, 1.5) * PortionInDiapason(KlissanInvasion['StarsCaptured'], 0, 66, 75, 20));",
                        "                                    //Если атаки вызывает игрок, то для него всё, наоборот, будет дольше при высокой сложности настройки клисан",
                        "                                    else KlissanInvasion['NextStarAttackTurn'] = CurTurn() + round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 1.5, 0.5) * PortionInDiapason(KlissanInvasion['StarsCaptured'], 0, 66, 20, 75));",
                        "                                }",
                        "",
                        "                                //}",
                        "                            }",
                        "                        }",
                        "",
                        "                        //Если ранее, в ходе перебора, обнаружили клисанские системы, в которых нет нейролинка, то отправляем в слабейшую из них (где меньше всего клисан) новый",
                        "                        if(KlissanInvasion['WeakestKlissanStar'])",
                        "                        {",
                        "                            //Если новый нейролинк не был отправлен в атаку",
                        "                            if(KlissanInvasion['NextNeurolinkReadyTurn'] <= CurTurn())",
                        "                            {",
                        "                                //Если махпелла пошла творить какую-то дичь, то спавнить нейролинки она, очевидно, не сможет",
                        "                                if(StateIs(machpella, 'MachpellaWaitInTortugatzState'))",
                        "                                {",
                        "                                    if(ShipInNormalSpace(machpella))",
                        "                                    {",
                        "                                        //Открываем ЧД для нейролинка (откроется рядом с махпеллой)",
                        "                                        cur_hole = CreateKlissanHole(GalaxyStar(TortugatzId), GalaxyStar(KlissanInvasion['WeakestKlissanStar'] - 1), machpella);",
                        "",
                        "                                        //Строительство происходит в Тортугаце, после чего нейролинк сразу же отправляется в целевую систему",
                        "                                        cur_ruin = SpawnNeurolink(GalaxyStar(TortugatzId), PlanetPirateClan());",
                        "                                        //Время до рождения на нейролинке следующего клисана",
                        "                                        if(!KlissanInvasion['KlissanControl.WasReceived']) next_spawn = round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 1.5, 0.5) * RndObject(15, 30, cur_ruin));",
                        "                                        else next_spawn = round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 1.0, 3.5) * RndObject(15, 30, cur_ruin));",
                        "                                        //Заносим нейролинк в группу",
                        "                                        SetData(KlissanInvasion['WeakestKlissanStar'], 0, cur_ruin);",
                        "                                        SetData(Id(cur_hole), 1, cur_ruin);",
                        "                                        SetData(CurTurn() + RndObject(30, 45, cur_ruin), 2, cur_ruin);",
                        "                                        SetData(CurTurn() + next_spawn, 3, cur_ruin);",
                        "                                        ShipCustomFaction(cur_ruin, 'SubFactionKlissan'); //Мирная фракция вешается временно, пока нейролинк не достигнет целевой системы",
                        "                                        TransferShip(cur_ruin, machpella);",
                        "                                        //Когда будет готов следующий нейролинк",
                        "                                        if(!KlissanInvasion['KlissanControl.WasReceived']) KlissanInvasion['NextNeurolinkReadyTurn'] = CurTurn() + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 50, 500, 50, 10);",
                        "                                        else KlissanInvasion['NextNeurolinkReadyTurn'] = CurTurn() + GetNextNeurolinkReadyTime();",
                        "                                    }",
                        "                                }",
                        "                            }",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "",
                        "            //После получения игроком контроля над клисанами, эти события более неактуальны",
                        "            if(!KlissanInvasion['KlissanControl.WasReceived'])",
                        "            {",
                        "                if(PirateWin() != 3 && PirateWin() != 4)",
                        "                {",
                        "                    //Этот кусок параши отвечает за рандомный переход клисанской системы в руки пиратов, если у пиратов остаётся мало систем",
                        "                    //С вероятностью 1 к 800, но, тем не менее, оно время от времени таки срабатывает",
                        "                    if(ControlledSystems(2) < 5)",
                        "                    {",
                        "                        tint1 = GalaxyStars() - 3;",
                        "                        for(i = 1; i < tint1; i = i + 1)",
                        "                        {",
                        "                            cur_star = StarNearbyStars(GalaxyStar(TortugatzId), i);",
                        "",
                        "                            if(StarBattle(cur_star)) continue;",
                        "                            if(NoComeKlingToStar(cur_star)) continue;",
                        "                            if(StarCustomFaction(cur_star) != 'Klissan') continue;",
                        "                            if(RndObject(0, 799, cur_star)) continue;",
                        "                            if(cur_star == ShipStar(Player())) continue;",
                        "",
                        "                            for(j = StarShips(cur_star) - 1; j >= 0; j = j - 1)",
                        "                            {",
                        "                                cur_ship = StarShips(cur_star, j);",
                        "                                //tstr1 = TrimNumbers(ShipType(cur_ship));",
                        "                                //if(tstr1 != 'Klissan' && tstr1 != 'Neurolink') continue;",
                        "                                if(ShipCustomFaction(cur_ship) != 'Klissan') continue;",
                        "",
                        "                                OrderNone(cur_ship);",
                        "                                OrderLock(cur_ship, 1);",
                        "                                ShipCustomFaction(cur_ship, '');",
                        "                                ShipOut(cur_ship);",
                        "                                TransferShip(cur_ship, StarPlanets(GalaxyStar(People), 0)); //На Меркурий",
                        "                                ShipDestroy(cur_ship, 1);",
                        "                            }",
                        "",
                        "                            //tdwd1 = GetRewardPlanet(cur_star);",
                        "                            tdwd1 = 0;",
                        "                            for(j = 0; j < StarPlanets(cur_star); j = j + 1)",
                        "                            {",
                        "                                cur_planet = StarPlanets(cur_star, j);",
                        "                                if(PlanetOwner(cur_planet) == None) continue;",
                        "",
                        "                                if(!tdwd1) tdwd1 = cur_planet; //Запоминаем первую обитаемую планету для спавна пирата-захватчика",
                        "                                PlanetCustomFaction(cur_planet, '');",
                        "                                PlanetOwner(cur_planet, PirateClan);",
                        "                            }",
                        "                            //Спавнится клановый пират, чтобы обеспечить переход системы под контроль клана",
                        "                            BuyWarrior(tdwd1);",
                        "",
                        "                            tstr1 = CT('GalaxyNews.Global.PiratesTakeSystemFromKlissan' + RndObject(1, 2, cur_star));",
                        "                            tstr1 = Format(tstr1, '<Star'+'>', Name(cur_star), '<Sector'+'>', Name(StarToCon(cur_star)), '<Planet'+'>', Name(tdwd1));",
                        "                            NewsAdd(tstr1);",
                        "                            AddPlanetNews(tstr1,58);",
                        "                            StarOwner(cur_star, 2);",
                        "                            StarCustomFaction(cur_star, '');",
                        "",
                        "                            cnt = RndObject(3, 5, cur_star);",
                        "                            //Несколько пиратов появляются в Нифигаце и отправляются в \"освобождённую\" систему",
                        "                            for(j = 0; j < cnt; j = j + 1)",
                        "                            {",
                        "                                if(PlanetOwner(PlanetPirateClan()) == PirateClan)",
                        "                                {",
                        "                                    cur_ship = BuyWarrior(PlanetPirateClan());",
                        "                                    MakeShipEnterStar(cur_ship, cur_star, GalaxyStar(NifigatzId), RndObject(5, 8, cur_star));",
                        "                                }",
                        "                                else",
                        "                                {",
                        "                                    cur_ship = BuyPirate(PlanetPirateClan());",
                        "                                    MakeShipEnterStar(cur_ship, cur_star, GalaxyStar(NifigatzId), RndObject(5, 8, cur_star));",
                        "                                }",
                        "                            }",
                        "                        }",
                        "                    }",
                        "",
                        "                    //А эта хуита срабатывает ещё чаще, также отдавая пиратам систему без боя, но уже с вероятностью 1 к 30",
                        "                    //Здесь правда есть условие, что система должна быть очень недалеко от скрытого сектора",
                        "                    for(i = 1; i < 4; i = i + 1)",
                        "                    {",
                        "                        cur_star = StarNearbyStars(GalaxyStar(TortugatzId), i);",
                        "",
                        "                        if(StarBattle(cur_star)) continue;",
                        "                        if(NoComeKlingToStar(cur_star)) continue;",
                        "                        if(StarCustomFaction(cur_star) != 'Klissan') continue;",
                        "                        if(RndObject(0, 29, cur_star)) continue;",
                        "                        if(cur_star == ShipStar(Player())) continue;",
                        "",
                        "                        for(j = StarShips(cur_star) - 1; j >= 0; j = j - 1)",
                        "                        {",
                        "                            cur_ship = StarShips(cur_star, j);",
                        "                            //tstr1 = TrimNumbers(ShipType(cur_ship));",
                        "                            //if(tstr1 != 'Klissan' && tstr1 != 'Neurolink') continue;",
                        "                            if(ShipCustomFaction(cur_ship) != 'Klissan') continue;",
                        "",
                        "                            TransferShip(cur_ship, StarPlanets(GalaxyStar(People), 0)); //На Меркурий",
                        "                            OrderNone(cur_ship);",
                        "                            OrderLock(cur_ship, 1);",
                        "                            ShipCustomFaction(cur_ship, '');",
                        "                            ShipOut(cur_ship);",
                        "                            ShipDestroy(cur_ship, 1);",
                        "                        }",
                        "",
                        "                        //tdwd1 = GetRewardPlanet(cur_star);",
                        "                        tdwd1 = 0;",
                        "                        for(j = 0; j < StarPlanets(cur_star); j = j + 1)",
                        "                        {",
                        "                            cur_planet = StarPlanets(cur_star, j);",
                        "                            if(PlanetOwner(cur_planet) == None) continue;",
                        "",
                        "                            if(!tdwd1) tdwd1 = cur_planet; //Запоминаем первую обитаемую планету для спавна пирата-захватчика",
                        "                            PlanetCustomFaction(cur_planet, '');",
                        "                            PlanetOwner(cur_planet, PirateClan);",
                        "                        }",
                        "                        //Спавнится клановый пират, чтобы обеспечить переход системы под контроль клана",
                        "                        BuyWarrior(tdwd1);",
                        "",
                        "                        tstr1 = CT('GalaxyNews.Global.PiratesTakeSystemFromKlissan' + RndObject(1, 2, cur_star));",
                        "                        tstr1 = Format(tstr1, '<Star'+'>', Name(cur_star), '<Sector'+'>', Name(StarToCon(cur_star)), '<Planet'+'>', Name(tdwd1));",
                        "                        NewsAdd(tstr1);",
                        "                        AddPlanetNews(tstr1,58);",
                        "                        StarOwner(cur_star, 2);",
                        "                        StarCustomFaction(cur_star, '');",
                        "",
                        "                        //Несколько пиратов появляются в Нифигаце и отправляются в \"освобождённую\" систему",
                        "                        cnt = RndObject(3, 5, cur_star);",
                        "                        for(j = 0; j < cnt; j = j + 1)",
                        "                        {",
                        "                            if(PlanetOwner(PlanetPirateClan()) == PirateClan)",
                        "                            {",
                        "                                cur_ship = BuyWarrior(PlanetPirateClan());",
                        "                                MakeShipEnterStar(cur_ship, cur_star, GalaxyStar(NifigatzId), RndObject(5, 8, cur_star));",
                        "                            }",
                        "                            else",
                        "                            {",
                        "                                cur_ship = BuyPirate(PlanetPirateClan());",
                        "                                MakeShipEnterStar(cur_ship, cur_star, GalaxyStar(NifigatzId), RndObject(5, 8, cur_star));",
                        "                            }",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "",
                        "            //Если игрок активировал Z-трансмиттер",
                        "            //Начинается атака клисан на указанную игроком систему",
                        "            if(KlissanInvasion['ZTransmitter.WasActivatedInStar'])",
                        "            {",
                        "                //Как оригинальный движок определяет число домиков для вызова маяком:",
                        "                /*",
                        "                k := PortionInDiapason(art.FPower, MinTransmitterPower, MaxTransmitterPower, 1, 3);",
                        "                ...",
                        "                if(cnt > RndOut(10, 12, FRndOut) * k) or ((cnt > 8 * k) and (strenth > 8 * k)) then break;",
                        "                (strenth это сумма ShipStrengthInBestRanger для призываемых кораблей)",
                        "                */",
                        "",
                        "                tdwd1 = GalaxyStar(KlissanInvasion['ZTransmitter.WasActivatedInStar'] - 1);",
                        "                KlissanInvasion['ZTransmitter.WasActivatedInStar'] = 0;",
                        "",
                        "                //Отправку через ЧД заменил на способ, схожий с вызовом доминаторов трансфакторным маяком",
                        "                cnt = PortionInDiapason(GalaxyDiffLevels(7), 50, 500, 27, 12); //Определяем минимальное число клисан, которые прибудут на вызов",
                        "",
                        "                for(i = 1; i < GalaxyStars(); i = i + 1)",
                        "                {",
                        "                    cur_star = StarNearbyStars(tdwd1, i);",
                        "                    tint2 = RndObject(3, 5, cur_star); //Минимальный остаток кораблей в системе",
                        "                    tint1 = KlissansInStar(cur_star);",
                        "                    if(tint1 <= tint2) continue;",
                        "",
                        "                    for(j = 0; j < StarShips(cur_star); j = j + 1)",
                        "                    {",
                        "                        cur_ship = StarShips(cur_star, j);",
                        "                        if(!ShipInNormalSpace(cur_ship)) continue;",
                        "                        if(ShipCustomFaction(cur_ship) != 'Klissan') continue;",
                        "",
                        "                        tstr1 = ShipType(cur_ship);",
                        "                        if(tstr1 == 'Machpella')",
                        "                        {",
                        "                            tint1 = tint1 - 1;",
                        "                            continue;",
                        "                        }",
                        "                        if(tstr1 == 'Neurolink')",
                        "                        {",
                        "                            tint1 = tint1 - 1;",
                        "                            continue;",
                        "                        }",
                        "",
                        "                        //Отправляем клисана в атаку на систему призыва",
                        "                        SetData(Id(tdwd1), 0, cur_ship);",
                        "                        //MakeShipEnterStar(cur_ship, tdwd1, cur_star, RndObject(9, 12, cur_ship));",
                        "                        ChangeState('KlissanShipsAttackStarState', cur_ship);",
                        "",
                        "                        cnt = cnt - 1;",
                        "                        tint1 = tint1 - 1;",
                        "                        if(tint1 <= tint2) break; //В системе осталось слишком мало клисан",
                        "                    }",
                        "",
                        "                    if(cnt <= 0) break;",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Когда игрок достигает пиратского звания хана, но при этом играет за спецагента, ему выводят уведомление от Коалиции",
                        "    if(KlissanInvasion['DaysPassedAfterStart'] > 4)",
                        "    {",
                        "        if(!KlissanInvasion['SpecagentNearPlotEndMessage'])",
                        "        {",
                        "            if(ShipInNormalSpace(Player()))",
                        "            {",
                        "                if(GetShipPirateRank(Player()) == 6)",
                        "                {",
                        "                    //agent_counter - глобальная переменная из HD-шных скриптов, означает продвижение по сюжету внедрённого в клан агента (игрока)",
                        "                    if(agent_counter >= 3)",
                        "                    {",
                        "                        Ether(0, '', \"<Player>! <br> Мы знаем, кому вы симпатизируете и к чему стремитесь, но нашим разведчикам недавно удалось найти очередное косвенное подтверждение связи клисанского вторжения с пиратами: некоторые технологии, используемые в клисанском оборудовании, имеют ряд концептуальных сходств с разработками, попавшими в руки к Клану. Сейчас еще рано что-то утверждать наверняка, но мы настоятельно рекомендуем вам приложить максимальные усилия в предварительном изучении угрозы, с которой собираетесь столкнуться. Если наши предположения хотя бы частично верны, сталкиваться с двойной угрозой неподготовленными - самоубийство. Возможно, наши исследовательские команды сети научных баз сумеют помочь вам в этом нелёгком вопросе.\");",
                        "",
                        "                        KlissanInvasion['SpecagentNearPlotEndMessage'] = 1;",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //В случае если игрок находится в Тортугаце и нанёс Хандлеру повреждение, либо если здоровье Хандлера опустилось ниже 50%",
                        "    //Спавнится \"защита\" Хандлера",
                        "    if(KlissanInvasion['HandlerSpecialGuardsWasSpawned'] <= CurTurn())",
                        "    {",
                        "        cur_ruin = GroupToShip(Handler);",
                        "        if(cur_ruin)",
                        "        {",
                        "            if(ShipInStar(Player(), GalaxyStar(TortugatzId)))",
                        "            {",
                        "                if(HullDamage(cur_ruin) > 33 && (KlissanInvasion['EndingSequenceIsStarted'] || Hit(cur_ruin, 0)))",
                        "                {",
                        "                    KlissanInvasion['HandlerSpecialGuardsWasSpawned'] = CurTurn() + 182;",
                        "",
                        "                    for(i = 1; i <= 5; i = i + 1)",
                        "                    {",
                        "                        cur_ship = BuyPirate(PlanetPirateClan(), 1000);",
                        "                        Chameleon(cur_ship, 'Ship.Akrin.HandlerSpecialGuard');",
                        "                        ShipMoney(cur_ship, 1000000);",
                        "                        for(j = 1; j <= 7; j = j + 1) ShipRefit(cur_ship);",
                        "                        ShipImproveItems(cur_ship, 15);",
                        "                        ShipRepairEq(cur_ship);",
                        "                        NoTalkToShip(cur_ship, 1);",
                        "",
                        "                        TransferShip(cur_ship, cur_ruin);",
                        "                        ShipJoin(HandlerGuardShips, cur_ship);",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Если была запущена силовая концовка захвата Тортугаца за Коалицию",
                        "    if(KlissanInvasion['TortugatzAssaultEndingStage'])",
                        "    {",
                        "        //Если Хандлер и махпелла успешно уничтожены, то пираты считаются потерпевшими поражение в войне",
                        "        if(!GroupCount(Machpella) && !GroupCount(Handler))",
                        "        {",
                        "            PirateWin(3);",
                        "            NoJump(0);",
                        "        }",
                        "",
                        "        //Код спавна военной базы, атакующей Тортугац, если была запущена силовая концовка за Коалицию",
                        "        if(KlissanInvasion['TortugatzAssaultEndingStage'] == 1)",
                        "        {",
                        "            //Только если игрок уже вылетел из ЧД в Тортугац",
                        "            if(ShipInNormalSpace(Player()))",
                        "            {",
                        "                //Запрет игроку покидать Тортугац до окончания \"разборок\"",
                        "                NoJump(1);",
                        "",
                        "                //Выбираем для спавна военных самую развитую планету в коалицонной системе (в доминаторской, если коалиционых систем уже не осталось)",
                        "                cur_planet = FindPlanetByAdvancement(100);",
                        "                if(!cur_planet) cur_planet = FindPlanetByAdvancement(100, 1);",
                        "                cur_star = PlanetToStar(cur_planet);",
                        "                tint1 = PlanetOwner(cur_planet);",
                        "                tint2 = PlanetRace(cur_planet);",
                        "                PlanetOwner(cur_planet, tint2);",
                        "                RelationToRanger(cur_planet, Player(), 100);",
                        "",
                        "                cur_ruin = BuildRuins(cur_star, t_WB);",
                        "",
                        "                tflt1 = 0.01 * RndObject(0, 200, cur_ruin);",
                        "                CoordX(cur_ruin, round(sin(tflt1 * pi) * 500) + CoordX(GroupToShip(Handler)));",
                        "                CoordY(cur_ruin, round(cos(tflt1 * pi) * 500) + CoordY(GroupToShip(Handler)));",
                        "",
                        "                SetName(cur_ruin, CT('Script.Mod_ShuKlissan.CoalitionAssaultStationName.' + RndObject(1, int(CT('Script.Mod_ShuKlissan.CoalitionAssaultStationName.Count')), cur_ruin)));",
                        "                ShipSkill(cur_ruin, 'Accuracy', 6);",
                        "                ShipSkill(cur_ruin, 'Mobility', 6);",
                        "                ShipSkill(cur_ruin, 'Technical', 6);",
                        "",
                        "                TransferShip(cur_ruin, cur_planet);",
                        "                ShipMoney(cur_ruin, 10000000);",
                        "                for(i = 1; i <= 7; i = i + 1) ShipRefit(cur_ruin);",
                        "                ShipMoney(cur_ruin, 0);",
                        "                ShipImproveItems(cur_ruin, RndObject(10, 20, cur_ruin));",
                        "                ArrangeItems(cur_ruin);",
                        "",
                        "                NoLanding(cur_ruin, 1);",
                        "                ShipOwner(cur_ruin, Maloc);",
                        "",
                        "                cur_item = ShipItems(cur_ruin, 0);",
                        "                ItemSize(cur_item, round(1.6 * ItemSize(cur_item)));",
                        "                HullHP(cur_ruin, 'To100');",
                        "                //Военная база технически будет неуязвима, но с учётом её пассивности в бою, это и не особо важно",
                        "                ShipAddCustomShipInfo(cur_ruin, 'ShipImmortalInfo', 'NoShow');",
                        "                ShipSpecialBonuses(cur_ruin, bonResistAsteroid, 95);",
                        "",
                        "                //Если подключена EvoArmada, вешаем на ВБ дополнительные залпы и бонусы",
                        "                if(EvoArmadaInit)",
                        "                {",
                        "                    j = GalaxyDiffLevels() / 50;",
                        "                    ItemExtraSpecialsAddByType(cur_item, FindBonusByNameInCfg('EvoArmada_ExtraSpecialsLineBreak'));",
                        "                    tint3 = round((7.5 * j) + (7.5 * PortionInDiapason(ItemLevel(cur_item), 1, 8, 1, 10)));",
                        "                    ItemExtraSpecialsAddByType(cur_item, FindBonusByNameInCfg('EvoArmada_bonWRadius'), tint3);",
                        "                    tint3 = round((2.0 * j) + (2.0 * PortionInDiapason(ItemLevel(cur_item), 1, 8, 1, 10)));",
                        "                    ItemExtraSpecialsAddByType(cur_item, FindBonusByNameInCfg('EvoArmada_bonHull'), tint3);",
                        "                    //Также увеличиваем скорость для компенсации замедления от возросших размеров базы",
                        "                    tint3 = 400;",
                        "                    ItemExtraSpecialsAddByType(cur_item, FindBonusByNameInCfg('EvoArmada_bonSpeed'), tint3);",
                        "",
                        "                    ShipSpecialBonuses(cur_ruin, bonAttacks, 4);",
                        "",
                        "                    //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "                    ShipAddCustomShipInfo(cur_ruin, 'EvoArmada_CapitalShipInfos', 'NoShow', 4);",
                        "                }",
                        "",
                        "                ShipJoinToScript(cur_ruin, 'Mod_ShuKlissan.CoalitionAssaultWB');",
                        "                MakeShipEnterStar(cur_ruin, GalaxyStar(TortugatzId), cur_star, 1);",
                        "                OrderTeleport(cur_ruin, GalaxyStar(TortugatzId), CoordX(Player()) - 150, CoordY(Player()) - 150, 0, 1); //ShipOrderData1(Player()) + 1 //Позже игроку скручивают таймер",
                        "",
                        "                //Спавним военных, которые взлетят с прибывшей ВБ, и будут поддерживать игрока в бою",
                        "                cnt = RndObject(21, 25, cur_ruin);",
                        "                for(i = 0; i < cnt; i = i + 1)",
                        "                {",
                        "                    //Чтобы игроку помогали военные всех рас, а не какой-то одной",
                        "                    j = RndObject(Maloc, Gaal, cur_planet);",
                        "                    PlanetOwner(cur_planet, j);",
                        "                    PlanetRace(cur_planet, j);",
                        "",
                        "                    cur_ship = BuyWarrior(cur_planet);",
                        "                    ShipSkill(cur_ship, 'Accuracy', 6);",
                        "                    ShipSkill(cur_ship, 'Mobility', 6);",
                        "                    ShipSkill(cur_ruin, 'Technical', 3);",
                        "                    ShipMoney(cur_ship, 10000000);",
                        "                    for(j = 1; j <= 4; j = j + 1) ShipRefit(cur_ship);",
                        "                    ShipImproveItems(cur_ship, RndObject(3, 15, cur_ship));",
                        "                    ShipJoin(CoalitionAssaultWarriors, cur_ship);",
                        "                    OrderLock(cur_ship, 1); //Временно лочим военных, чтобы не могли слинять с базы до её прибытия в Тортугац",
                        "                    TransferShip(cur_ship, cur_ruin);",
                        "                    //MakeShipEnterStar(cur_ship, GalaxyStar(TortugatzId), cur_star, RndObject(6, 8, cur_ship));",
                        "                }",
                        "",
                        "                //Вариант ответа игроку в зависимости от того, была ли побеждена Коалиция или нет",
                        "                //Выводится, когда игрок вылетает из ЧД в Тортугаце",
                        "                PlanetOwner(cur_planet, tint1);",
                        "                PlanetRace(cur_planet, tint2);",
                        "                if(CoalitionDefeated())",
                        "                {",
                        "                    Ether(0, '', \"Генератор автоматически отправил координаты системы <Name(GalaxyStar(TortugatzId))> по секретному каналу связи КВСМК. Мысленно проклянув устройство, вы продолжили пилотирование, как вдруг получили ответное сообщение по тому же каналу: <br>\\\"На связи капитан засекреченной военной базы <clr>Реконкиста<clrEnd>. Мы в вас не сомневались. Ликвидируйте максимально возможное число боевых единиц противника. Продержитесь до прибытия подкрепления.\\\"\");",
                        "                }",
                        "                else Ether(0, '', \"Координаты системы <Name(GalaxyStar(TortugatzId))> отправлены КВСМК. Бортовой компьютер почти сразу же сообщил о получении ответа: <br>\\\"Говорит капитан военной базы <clr>Реконкиста<clrEnd>. Ликвидируйте максимально возможное число боевых единиц противника. Держитесь до прибытия подкрепления.\\\"\");",
                        "",
                        "                //Спавним пиратов, которые будут оборонять Тортугац",
                        "                cur_planet = PlanetPirateClan();",
                        "                cnt = RndObject(3, 5, cur_planet);",
                        "                for(i = 0; i < cnt; i = i + 1)",
                        "                {",
                        "                    cur_ship = BuyWarrior(cur_planet);",
                        "                    RelationToRanger(cur_ship, Player(), 0);",
                        "                    ShipSkill(cur_ship, 'Accuracy', RndObject(1, 5, cur_ship));",
                        "                    ShipSkill(cur_ship, 'Mobility', RndObject(1, 5, cur_ship));",
                        "                    ShipSkill(cur_ship, 'Technical', RndObject(1, 5, cur_ship));",
                        "                    ShipMoney(cur_ship, 10000000);",
                        "                    for(i = 1; i <= 3; i = i + 1) ShipRefit(cur_ship);",
                        "                    ShipImproveItems(cur_ship, RndObject(0, 4, cur_ship));",
                        "                    ShipSpecialBonuses(cur_ship, bonFuel, -10000);",
                        "                }",
                        "",
                        "                //Спавним пиратов, которые незаметно разлетятся по системам вокруг Тортугаца",
                        "                cnt = RndObject(3, 5, cur_planet);",
                        "                for(i = 0; i < cnt; i = i + 1)",
                        "                {",
                        "                    cur_ship = BuyWarrior(cur_planet);",
                        "                    RelationToRanger(cur_ship, Player(), 0);",
                        "                    ShipSkill(cur_ship, 'Accuracy', RndObject(1, 5, cur_ship));",
                        "                    ShipSkill(cur_ship, 'Mobility', RndObject(1, 5, cur_ship));",
                        "                    ShipSkill(cur_ship, 'Technical', RndObject(1, 5, cur_ship));",
                        "                    ShipMoney(cur_ship, 10000000);",
                        "                    for(j = 1; j <= 3; j = j + 1) ShipRefit(cur_ship);",
                        "                    ShipImproveItems(cur_ship, RndObject(0, 4, cur_ship));",
                        "                    ShipSpecialBonuses(cur_ship, bonFuel, -10000);",
                        "                    MakeShipEnterStar(cur_ship, GalaxyStar(TortugatzId), StarNearbyStars(GalaxyStar(TortugatzId), RndObject(55, 67, cur_ship)), RndObject(10, 20, cur_ship));",
                        "                }",
                        "",
                        "                //Спавним пиратов, которые незаметно отправятся в Нифигац",
                        "                cnt = RndObject(3, 5, cur_planet);",
                        "                for(i = 0; i < cnt; i = i + 1)",
                        "                {",
                        "                    cur_ship = BuyWarrior(cur_planet);",
                        "                    RelationToRanger(cur_ship, Player(), 0);",
                        "                    ShipSkill(cur_ship, 'Accuracy', RndObject(1, 5, cur_ship));",
                        "                    ShipSkill(cur_ship, 'Mobility', RndObject(1, 5, cur_ship));",
                        "                    ShipSkill(cur_ship, 'Technical', RndObject(1, 5, cur_ship));",
                        "                    ShipMoney(cur_ship, 10000000);",
                        "                    for(j = 1; j <= 3; j = j + 1) ShipRefit(cur_ship);",
                        "                    ShipImproveItems(cur_ship, RndObject(0, 4, cur_ship));",
                        "                    ShipSpecialBonuses(cur_ship, bonFuel, -10000);",
                        "                    MakeShipEnterStar(cur_ship, GalaxyStar(TortugatzId), GalaxyStar(NifigatzId), RndObject(3, 5, cur_ship));",
                        "                }",
                        "",
                        "                //Агрим всех пиратов и случайные нейролинки в системе на игрока",
                        "                cur_star = ShipStar(Player());",
                        "                for(i = 0; i < StarShips(cur_star); i = i + 1)",
                        "                {",
                        "                    cur_ship = StarShips(cur_star, i);",
                        "                    if(!ShipInNormalSpace(cur_ship)) continue;",
                        "                    if(ShipTypeN(cur_ship) != t_Pirate || ShipType(cur_ship) != 'Neurolink') continue;",
                        "",
                        "                    RelationToRanger(cur_ship, Player(), 0);",
                        "                    if(ShipType(cur_ship) != 'Neurolink') ShipFreeFlight(cur_ship);",
                        "                    else",
                        "                    {",
                        "                        NoTargetToShip(cur_ship, 5);",
                        "                        ChangeState('NeurolinksAttackOnPlayerState', cur_ship);",
                        "                    }",
                        "                }",
                        "",
                        "                RelationToRanger(PlanetPirateClan(), Player(), 0);",
                        "",
                        "                cur_ship = GroupToShip(Handler);",
                        "                RelationToRanger(cur_ship, Player(), 0);",
                        "                ShipDeleteCustomShipInfo(cur_ship, 'ShipImmortalInfo');",
                        "                NoTargetToShip(cur_ship, 5);",
                        "",
                        "                cur_ship = GroupToShip(Machpella);",
                        "                RelationToRanger(cur_ship, Player(), 0);",
                        "                ShipDeleteCustomShipInfo(cur_ship, 'ShipImmortalInfo');",
                        "                NoTargetToShip(cur_ship, 5);",
                        "",
                        "                KlissanInvasion['TortugatzAssaultEndingStage'] = 2;",
                        "            }",
                        "        }",
                        "    }",
                        "    else",
                        "    {",
                        "        //Если пиратским скриптом PC_final игроку было выдано задание (вешается уведомление) с вот таким идентификатором",
                        "        if(EtherState('BABB37FE-1007-4A51-A103-DB9EBEAA4C10') == 3)",
                        "        {",
                        "            //За каким-то хреном шу превращает уведомление о задании в уведомление о провале задания (тип 5)",
                        "            //<PlayerFull>, вам надлежит срочно прибыть на ближайшую работоспособную  пиратскую станцию.",
                        "            if(PirateWin() != 3) Ether(5, 'BABB37FE-1007-4A51-A103-DB9EBEAA4C10', CT('Script.PC_final.186'));",
                        "            //<PlayerFull>, вам надлежит срочно прибыть в ближайший центр рейнджеров. Форма одежды - штатская, парадная.",
                        "            else Ether(5, 'BABB37FE-1007-4A51-A103-DB9EBEAA4C10', CT('Script.PC_final.250'));",
                        "        }",
                        "    }",
                        "",
                        "    //Если игрок покинул освобождённую от клисан систему, так и не получив награду за освобождение",
                        "    if(~KlissanInvasion['StarLiberationReward.Star'])",
                        "    {",
                        "        if(!ShipInStar(Player(), GalaxyStar(KlissanInvasion['StarLiberationReward.Star'])))",
                        "        {",
                        "            KlissanInvasion['StarLiberationReward.Star'] = -1; //Нулевой номер имеет Тарон",
                        "            KlissanInvasion['StarLiberationReward.Planet'] = 0;",
                        "        }",
                        "    }",
                        "",
                        "    //Перекидываем игрока в правительство при освобождении системы",
                        "    if(GetShipPlanet(Player()))",
                        "    {",
                        "        if(Id(GetShipPlanet(Player())) == KlissanInvasion['StarLiberationReward.Planet'])",
                        "        {",
                        "            GotoGov(1);",
                        "        }",
                        "    }",
                        "",
                        "    //Проверка на выполнение финального условия для получения концовки с убийством Алакая за пиратский клан",
                        "    if(KlissanInvasion['KlissansMustBeDestroyed'] == 1)",
                        "    {",
                        "        if(KlissanInvasion['PlotEnding'] != 'PirateClan.AlakayKilled')",
                        "        {",
                        "            if(!GroupCount(Machpella) && !GroupCount(Handler))",
                        "            {",
                        "                NoJump(0);",
                        "",
                        "                Ether(0, '', \"Махпелла успешно ликвидирована. Вы можете покинуть секретный сектор.\");",
                        "                Ether(3, 'PirateClan.AlakayKilled', \"Немедленно посетить ближайшую пиратскую базу.\");",
                        "",
                        "                KlissanInvasion['PlotEnding'] = 'PirateClan.AlakayKilled';",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Проверка на выполнение финального условия для получения концовки с убийством Алакая за спецагента",
                        "    if(KlissanInvasion['KlissansMustBeDestroyed'] == 2)",
                        "    {",
                        "        if(KlissanInvasion['PlotEnding'] != 'Specagent.AlakayKilled')",
                        "        {",
                        "            if(!GroupCount(Machpella) && !GroupCount(Handler))",
                        "            {",
                        "                NoJump(0);",
                        "",
                        "                Ether(0, '', \"Махпелла успешно ликвидирована. Вы можете покинуть пиратский сектор.\");",
                        "                Ether(3, 'Specagent.AlakayKilled', \"Срочное сообщение от\"+' '+GameDateTxtByTurn(CurTurn())+' '+\".<br>Рейнджер <Name(Player())>, вам следует немедленно прибыть в ближайший центр рейнджеров.<br>Форма одежды - парадная!\");",
                        "",
                        "                KlissanInvasion['PlotEnding'] = 'Specagent.AlakayKilled';",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Уничтожаем махпеллу и Хандлера сразу после их ухода в гипер при выборе игроком концовки с изгнанием Алакая",
                        "    //Хотя, фактически, это и не имеет большого смысла, ведь они будут лететь к своей целевой системе аж 5 883 247 лет",
                        "    if(KlissanInvasion['PlotEnding'] == 'PirateClan.AlakayExiled')",
                        "    {",
                        "        cur_ship = GroupToShip(Handler);",
                        "        if(cur_ship)",
                        "        {",
                        "            if(ShipInHyperSpace(cur_ship)) ShipDestroy(cur_ship, 1);",
                        "        }",
                        "        cur_ship = GroupToShip(Machpella);",
                        "        if(cur_ship)",
                        "        {",
                        "            if(ShipInHyperSpace(cur_ship)) ShipDestroy(cur_ship, 1);",
                        "        }",
                        "    }",
                        "",
                        "    //Этапы выполнения концовки освобождения Галактики за спецагента",
                        "    if(KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] == 1)",
                        "    {",
                        "        //Здесь типа начинается полномасштабное наступление клисан по всем фронтам",
                        "        if(DomiksDefeated())",
                        "        {",
                        "            tdwd2 = GalaxyStar(TortugatzId);",
                        "            if(!GroupIn(PlayerGroup, tdwd2) && !GroupIn(PlayerGroup, GalaxyStar(NifigatzId)))",
                        "            {",
                        "                cur_ship = GroupToShip(Machpella);",
                        "                if(ShipInNormalSpace(cur_ship))",
                        "                {",
                        "                    ShipDestroy(GroupToShip(Handler));",
                        "                    cur_ship = GroupToShip(Machpella);",
                        "                    ShipCustomFaction(cur_ship, 'Klissan');",
                        "                    NoTargetToShip(cur_ship, 0);",
                        "                    OrderNone(cur_ship); //Приказ сбрасываем чисто на всякий случай, вдруг махпелла в этот самый момент и так собиралась совершать прыжок?",
                        "                    SetData(NifigatzId, 0, cur_ship); //Id системы для совершения ЧД прыжка",
                        "                    SetData(-1, 1, cur_ship); //Маркер о переводе махпеллы в стейт атаки игрока по прибытии в целевую систему",
                        "                    ChangeState('MachpellaJumpToStarState', cur_ship);",
                        "",
                        "                    tdwd1 = GalaxyStar(People);",
                        "                    cnt = RndObject(max(200 + KlissanInvasion['KlissanDiffLevel'] * 2,400), max(400 + KlissanInvasion['KlissanDiffLevel'] * 2,600), tdwd1);",
                        "                    for(i = 0; i < cnt; i = i + 1)",
                        "                    {",
                        "                        cur_ship = SpawnKlissan(PlanetPirateClan(), -1);",
                        "                        ShipJoinToScript(cur_ship, 'Mod_ShuKlissan.KlissanShips.KlissanShipsNormalState');",
                        "                        cur_star = GalaxyStar(RndObject(0, 69, tdwd1));",
                        "                        if(GroupIn(PlayerGroup, cur_star)) MakeShipEnterStar(cur_ship, cur_star, tdwd2, 3);",
                        "                        else TransferShip(cur_ship, cur_star);",
                        "                    }",
                        "",
                        "                    Ether(3, 'Specagent.GalaxyFreed', \"Срочное сообщение от\"+' '+GameDateTxtByTurn(CurTurn())+' '+\".<br>Рейнджер <Name(Player())>, вам следует немедленно прибыть в ближайший центр рейнджеров.<br>Форма одежды - парадная!\");",
                        "                    KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] = 2;",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] == 3)",
                        "    {",
                        "        //Если махпелла уничтожена, игрока снова вызывают в ЦР, где он может завершить игру, либо продолжить добивать пиратов (если они ещё остались)",
                        "        if(!GroupCount(Machpella))",
                        "        {",
                        "            Ether(3, 'Specagent.GalaxyFreed', \"Срочное сообщение от\"+' '+GameDateTxtByTurn(CurTurn())+' '+\".<br>Рейнджер <Name(Player())>, вам следует немедленно прибыть в ближайший центр рейнджеров.<br>Форма одежды - парадная!\");",
                        "            KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] = 4;",
                        "        }",
                        "    }",
                        "    else if(KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] == 5)",
                        "    {",
                        "        //Если игрок добил остатки пиратов за спецагента, его снова вызывают в ЦР, на этот раз уже для окончательного завершения игры",
                        "        if(!ControlledSystems(2))",
                        "        {",
                        "            Ether(3, 'Specagent.GalaxyFreed', \"Срочное сообщение от\"+' '+GameDateTxtByTurn(CurTurn())+' '+\".<br>Рейнджер <Name(Player())>, вам следует немедленно прибыть в ближайший центр рейнджеров.<br>Форма одежды - парадная!\");",
                        "            KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] = 6;",
                        "            KlissanInvasion['PlotEnding'] = 'Specagent.GalaxyFreed';",
                        "        }",
                        "    }",
                        "",
                        "    //Проверка на выполнение финального условия для получения концовки с захватом всей Галактики за пиратский клан",
                        "    if(KlissanInvasion['GalaxyPirateConquestBegan'])",
                        "    {",
                        "        if(KlissanInvasion['PlotEnding'] != 'PirateClan.GalaxyConquered')",
                        "        {",
                        "            //Если у Коалиции не осталось подконтрольных систем",
                        "            if(!ControlledSystems(0))",
                        "            {",
                        "                //Если у доминаторов также не осталось подконтрольных систем",
                        "                if(!ControlledSystems(1))",
                        "                {",
                        "                    Ether(3, 'PirateClan.GalaxyConquered', \"Немедленно посетить ближайшую пиратскую базу.\");",
                        "                    KlissanInvasion['PlotEnding'] = 'PirateClan.GalaxyConquered';",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Эта проверка выставляет кастомную клисанскую концовку сразу после проигрыша победного ролика, которые заказывает данный скрипт в диалоге одной из концовок",
                        "    if(GVideoStatus > 1)",
                        "    {",
                        "        GVideoStatus = 0;",
                        "        tint1 = 1;",
                        "        if(KlissanInvasion['PlotDone'] == 3) tint1 = 13;",
                        "        if(KlissanInvasion['PlotDone'] == 4) tint1 = 3 + ShipPilotRace(Player());",
                        "        if(KlissanInvasion['PlotDone'] > 6) tint1 = 2;",
                        "        CustomWin(Format(CT('FormGameEnd.Ending'+KlissanInvasion['PlotDone']),'ranger',ShipName(Player())), tint1);",
                        "    }",
                        "}",
                        "",
                        "//Всегда оставлять в самом низу всех обработчиков терна!",
                        "//Нужно, чтобы код некоторых счётчиков в терне не срабатывал по нескольку раз за ход",
                        "TurnCodeIsDone = CurTurn();"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 80,
                    "Pos.y": 0,
                    "Parent": 2,
                    "#": 19,
                    "Code.Type": "DialogBegin",
                    "Code": 
                    [
                        "cur_planet = GetShipPlanet(Player());",
                        "if(!cur_planet) cur_ruin = GetShipRuins(Player());",
                        "",
                        "//Игроку выводится диалог освобождении системы от клисан",
                        "if(cur_planet)",
                        "{",
                        "    if(Id(cur_planet) == KlissanInvasion['StarLiberationReward.Planet'])",
                        "    {",
                        "        if(ShipOnSidePirateClan(Player())) AddDialogOverride('LiberationPirates', 500);",
                        "        else AddDialogOverride('LiberationNormals', 500);",
                        "    }",
                        "}",
                        "else if(cur_ruin)",
                        "{",
                        "    tstr1 = ShipType(cur_ruin);",
                        "    if(tstr1 == 'SB')",
                        "    {",
                        "        if(KlissanInvasion['DaysPassedAfterStart'] > 4)",
                        "        {",
                        "            //Стандартные диалоги по изучению клисан на НБ",
                        "            if(!KlissanInvasion['EndingSequenceIsStarted'])",
                        "            {",
                        "                if(CurrentMods('Evolution\\EvoSB')) j = 39;",
                        "                else j = 1;",
                        "",
                        "                if(!KlissanInvasion['MainResearch.WasStarted']) AddDialogInject('RemainsBegin', '', \"Исследование клисан\", j);",
                        "                else",
                        "                {",
                        "                    //Всё норм, если союзная Махпелла не заспавнилась",
                        "                    if(KlissanInvasion['AllyMachpellaStage'] != 1) {",
                        "                        AddDialogInject('Remains', '', \"Исследование клисан\", j);",
                        "                    }",
                        "                    else {",
                        "                        AddDialogInject('SBAllyMahpellaDialog', '', \"Исследование клисан\", j);",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(tstr1 == 'RC')",
                        "    {",
                        "        if(KlissanInvasion['DaysPassedAfterStart'] > 4)",
                        "        {",
                        "            //Стандартные диалоги в ЦР, связанные с клисанским вторжением",
                        "            if(!KlissanInvasion['EndingSequenceIsStarted'])",
                        "            {",
                        "                //Информационный диалог на ЦР в ключе, \"Как я могу помочь Коалиции в борьбе с клиcанами?\"",
                        "                AddDialogInject('KlissanInfoRC', '', CT('Script.Mod_ShuKlissan.KlissanInfoRC.PlayerAsk'), 1);",
                        "",
                        "                tint1 = 0;",
                        "                tint2 = 0;",
                        "                for(i = 1; i < ShipItems(Player()); i = i + 1)",
                        "                {",
                        "                    cur_item = ShipItems(Player(), i);",
                        "                    if(ItemType(cur_item) != t_UselessCountableItem) continue;",
                        "                    if(EquipmentImageName(cur_item) != 'KlissanProtoplasm') continue;",
                        "",
                        "                    tint1 = tint1 + ItemSize(cur_item);",
                        "                }",
                        "                if(tint1)",
                        "                {",
                        "                    tstr1 = Format(CT('Script.Mod_ShuKlissan.HandOverProtoplasm'), '<Count'+'>', tint1, '<Cost'+'>', tint1 * 3);",
                        "                    AddDialogInject('Protoplasm', '', tstr1, 1);",
                        "                }",
                        "",
                        "                if(tint2) {",
                        "                    if(PPCount > 500) {",
                        "                        AddDialogInject('SellSpore', '', \"\", 1);",
                        "                    }",
                        "                }",
                        "",
                        "                if(PPCount > 1500) {",
                        "                    if(SporesLeft) {",
                        "                        AddDialogInject('BuySpore', '', \"\", 1);",
                        "                    }",
                        "                }",
                        "            }",
                        "            else",
                        "            {",
                        "                if(!KlissanInvasion['PlotDone'])",
                        "                {",
                        "                    //Коалиционная силовая концовка с захватом Тортугаца",
                        "                    if(KlissanInvasion['PlotEnding'] == 'Coalition.TortugatzCaptured')",
                        "                    {",
                        "                        //Если в данный момент активно задание из пиратской ветки на прибытие в ближайший ЦР, выполняем его",
                        "                        if(EtherState('BABB37FE-1007-4A51-A103-DB9EBEAA4C10') == 3) Ether(4, 'BABB37FE-1007-4A51-A103-DB9EBEAA4C10', CT('Script.PC_final.250'));",
                        "                        AddDialogOverride('Ending_Coalition_TortugatzCaptured', 500);",
                        "                    }",
                        "",
                        "                    //Варианты упрощённых концовок за спецагента, включая стандартную из пиратской сюжетки HD",
                        "                    //(не уверен, что последняя сможет быть тут запущена в принципе)",
                        "                    if(KlissanInvasion['PlotEnding'] == 'Specagent.AlakayKilled')",
                        "                    {",
                        "                        //Если в данный момент активно задание из пиратской ветки на прибытие в ближайший ЦР, выполняем его",
                        "                        if(EtherState('BABB37FE-1007-4A51-A103-DB9EBEAA4C10') == 3) Ether(4, 'BABB37FE-1007-4A51-A103-DB9EBEAA4C10', CT('Script.PC_final.250'));",
                        "                        AddDialogOverride('Ending_Specagent_AlakayKilled', 500);",
                        "                    }",
                        "                    else if(KlissanInvasion['PlotEnding'] == 'Specagent.AlakayExiled')",
                        "                    {",
                        "                        //Если в данный момент активно задание из пиратской ветки на прибытие в ближайший ЦР, выполняем его",
                        "                        if(EtherState('BABB37FE-1007-4A51-A103-DB9EBEAA4C10') == 3) Ether(4, 'BABB37FE-1007-4A51-A103-DB9EBEAA4C10', CT('Script.PC_final.250'));",
                        "                        AddDialogOverride('Ending_Specagent_AlakayExiled', 500);",
                        "                    }",
                        "                    //Стандартная коалиционная концовка за спецагента из пиратской сюжетки HD (скрипт PC_final),",
                        "                    //в которой игрок может продолжить борьбу с доминаторами, либо же завершить игру",
                        "                    //Тексты диалогов были слегка адаптированы под дополнительную клисанскую ветку",
                        "                    else",
                        "                    {",
                        "                        //Если ещё не выставлен маркер завершения пиратской сюжетки из HD (переменная находится в PC_final)",
                        "                        if(!clan_win_choice)",
                        "                        {",
                        "                            //Если вторжение в Тортугац за Коалицию не началось",
                        "                            if(!KlissanInvasion['TortugatzAssaultEndingStage'])",
                        "                            {",
                        "                                //Если пираты проиграли войну с Коалицией",
                        "                                if(PirateWin() == 3)",
                        "                                {",
                        "                                    //А домики всё ещё не побеждены",
                        "                                    if(!DomiksDefeated()) AddDialogOverride('DialogRCWin5', 10);",
                        "                                }",
                        "                            }",
                        "                        }",
                        "                    }",
                        "",
                        "                    //Диалоги для концовки с полным освобождением Галактики за спецагента",
                        "                    if(KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] == 2)",
                        "                    {",
                        "                        AddDialogOverride('Ending_Specagent_GalaxyFreedStage1', 500);",
                        "                    }",
                        "                    else if(KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] == 4)",
                        "                    {",
                        "                        AddDialogOverride('Ending_Specagent_GalaxyFreedStage2', 500);",
                        "                    }",
                        "                    else if(KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] == 6)",
                        "                    {",
                        "                        AddDialogOverride('Ending_Specagent_GalaxyFreedStage3', 500);",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(tstr1 == 'PB')",
                        "    {",
                        "        if(KlissanInvasion['DaysPassedAfterStart'] > 4)",
                        "        {",
                        "            if(!KlissanInvasion['PlotDone'])",
                        "            {",
                        "                //Клисанская пиратская концовка с захватом всей Галактики",
                        "                if(KlissanInvasion['PlotEnding'] == 'PirateClan.GalaxyConquered')",
                        "                {",
                        "                    AddDialogOverride('Ending_PirateClan_GalaxyConquered', 500);",
                        "                }",
                        "                //Стандартные пиратские концовки из HD (скрипт PC_final),",
                        "                //в которых игрок может продолжить борьбу с доминаторами, либо же завершить игру",
                        "                //Тексты диалогов были слегка адаптированы под дополнительную клисанскую ветку",
                        "                else if(!clan_win_choice)",
                        "                {",
                        "                    //Пираты проникли во власть",
                        "                    if(PirateWin() == 1)",
                        "                    {",
                        "                        //А домики всё ещё не побеждены",
                        "                        if(!DomiksDefeated()) AddDialogOverride('DialogPBWin2', 500);",
                        "                    }",
                        "                    //Пираты вернулись к грабежам и анархизму",
                        "                    else if(PirateWin() == 2)",
                        "                    {",
                        "                        //А домики всё ещё не побеждены",
                        "                        if(!DomiksDefeated()) AddDialogOverride('DialogPBWin4', 500);",
                        "                    }",
                        "                }",
                        "",
                        "                //Клисанская пиратская концовка с убийством Алакая",
                        "                if(KlissanInvasion['PlotEnding'] == 'PirateClan.AlakayKilled')",
                        "                {",
                        "                    AddDialogOverride('Ending_PirateClan_AlakayKilled', 500);",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(tstr1 == 'WB')",
                        "    {",
                        "        if(KlissanInvasion['DaysPassedAfterStart'] > 4)",
                        "        {",
                        "            if(!KlissanInvasion['PlotDone'])",
                        "            {",
                        "                AddDialogBlock(CT('FormRuins.WB.WarWithKlingAndPirates.PlayerSend'), 2);",
                        "                AddDialogInject('WB_talk', '', \"Расскажите мне о ходе военных действий\", 1);",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(tstr1 == 'CB')",
                        "    {",
                        "        if(KlissanInvasion['DaysPassedAfterStart'] > 4)",
                        "        {",
                        "            if(!KlissanInvasion['PlotDone'])",
                        "            {",
                        "                AddDialogInject('CB_talk', '', \"Дайте детальную информацию о ситуации на фронтах\", 1);",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(tstr1 == 'Handler')",
                        "    {",
                        "        AddDialogOverride('HandlerDialog', 300);",
                        "    }",
                        "    else if(tstr1 == 'PlayerBridge')",
                        "    {",
                        "        //Добавляем диалог управления клисанами только на стартовый экран мостика",
                        "        if(PlayerBridge() == 1 || PlayerBridge() == 3)",
                        "        {",
                        "            if(KlissanInvasion['KlissanControl.WasReceived'])",
                        "            {",
                        "                if(GroupToShip(Machpella))",
                        "                {",
                        "                    if(KlissanInvasion['KlissansMustBeDestroyed']) AddDialogBlock(\"Управление клисанами\", 1);",
                        "                    AddDialogInject('KlissanControl', '', \"Управление клисанами\", 1);",
                        "                }",
                        "                else KlissanInvasion['KlissanControl.WasReceived'] = 0;",
                        "            }",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 21,
                    "#": 57,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Data0 - Id системы, в которую должна выполнить ЧД прыжок махпелла из стейта MachpellaJumpToStarState (Id систем тут записаны без вычитания -1)",
                        "//Data1 - до какого числа махпелла должна будет находиться в системе, в которую совершила прыжок, для стейта MachpellaFlyAroundStarState (если равно -1, то по прибытии в систему будет автоматически переведена в стейт нападения на игрока)",
                        "//Data2 - ---",
                        "//Data3 - ---",
                        "",
                        "if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDestroy(CurShip, 0);",
                        "RelationToRanger(CurShip, Player(), 50); //Стабильно нейтральное отношение к игроку",
                        "",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "",
                        "//dword cur_star = ShipStar(CurShip);",
                        "//Чиним всё бортовое оборудование махпеллы",
                        "ShipRepairEq(CurShip);",
                        "",
                        "//Данный стейт является основным, большую часть игры махпелла просто сидит в Тортугаце и ждёт, пока что-нибудь случится",
                        "//Если началась коалиционная концовка с захватом Тортугаца",
                        "if(KlissanInvasion['TortugatzAssaultEndingStage'])",
                        "{",
                        "    ChangeState('MachpellaAttackOnPlayerState');",
                        "    exit;",
                        "}",
                        "//Если игрок решил уничтожить Хандлер с Алакаем и махпеллу по концовке клана, либо по концовке спецагента",
                        "else if(KlissanInvasion['KlissansMustBeDestroyed'])",
                        "{",
                        "    RelationToRanger(CurShip, Player(), 0);",
                        "    ChangeState('MachpellaAttackOnPlayerState');",
                        "    exit;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 22,
                    "#": 58,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "dword handler = GroupToShip(Handler);",
                        "dword cur_star = ShipStar(handler);",
                        "if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDestroy(CurShip, 0);",
                        "",
                        "//Если началось вторжение коалиции в Тортугац",
                        "//Типа Хандлер самоуничтожают изнутри захватившие его учёные и рабочие в случае, когда его здоровье падает ниже 40%",
                        "if(KlissanInvasion['TortugatzAssaultEndingStage'] >= 3)",
                        "{",
                        "    if(ShipInNormalSpace(CurShip))",
                        "    {",
                        "        if(HullDamage(CurShip) > 60)",
                        "        {",
                        "            Ether(0,'',\"Внимание, граждане Галактики! Под каким бы флагом вы ни летали, под чьим бы началом ни служили, прошу, выслушайте нас, персонал станции <clr>Хандлер<clrEnd>, все это время порождавшей орды клисан! <br> С нас хватит! Мы устали, устали от этих безумных экспериментов, от последствий, создаваемых одержимой собственными амбициями верховной власти! Все это - сплошное безумие, и было им с самого начала. <br> Наш лидер, <clr>Алакай<clrEnd>, стремился к своей детской мечте. Мораль у него была такой же... детской. Мы не задумывались, для всех нас это было просто игрой... очередной тайной, которую мы стремились любой ценой разгадать. Только вот, в действительности, ради чего?.. <br> Мы чувствовали, что все так и обернётся, но были слишком слабы, чтобы противостоять. Все несогласные тут же уничтожались. Но больше мы не боимся. Мы искупим свою вину перед миллионами пострадавших, и перед теми, кого пытались подчинить. <br> Внимайте, наше время подходит к концу! Мы уничтожили безумца, но он успел активировать систему самоуничтожения станции. Нам не сбежать - при конструировании секретного объекта спасательные капсулы предусмотрены не были. Поэтому мы унесем последнее упоминание о возможности контроля над клисанами с собой в могилу. Это оружие, которое не должно существовать, и мы покончим с ним здесь, и сейчас. <br> Прощайте.\");",
                        "            AddPlanetNews(\"Внимание, граждане Галактики! Под каким бы флагом вы ни летали, под чьим бы началом ни служили, прошу, выслушайте нас, персонал станции <clr>Хандлер<clrEnd>, все это время порождавшей орды клисан! <br> С нас хватит! Мы устали, устали от этих безумных экспериментов, от последствий, создаваемых одержимой собственными амбициями верховной власти! Все это - сплошное безумие, и было им с самого начала. <br> Наш лидер, <clr>Алакай<clrEnd>, стремился к своей детской мечте. Мораль у него была такой же... детской. Мы не задумывались, для всех нас это было просто игрой... очередной тайной, которую мы стремились любой ценой разгадать. Только вот, в действительности, ради чего?.. <br> Мы чувствовали, что все так и обернётся, но были слишком слабы, чтобы противостоять. Все несогласные тут же уничтожались. Но больше мы не боимся. Мы искупим свою вину перед миллионами пострадавших, и перед теми, кого пытались подчинить. <br> Внимайте, наше время подходит к концу! Мы уничтожили безумца, но он успел активировать систему самоуничтожения станции. Нам не сбежать - при конструировании секретного объекта спасательные капсулы предусмотрены не были. Поэтому мы унесем последнее упоминание о возможности контроля над клисанами с собой в могилу. Это оружие, которое не должно существовать, и мы покончим с ним здесь, и сейчас. <br> Прощайте.\",56);",
                        "            ShipDestroy(CurShip, 1);",
                        "        }",
                        "    }",
                        "}",
                        "else",
                        "{",
                        "    //Если игрок уже стал бароном и попал в Тортугац, то его с Хендлера вызывает (и принуждает к посадке) Алакай",
                        "    if(!KlissanInvasion['ArrivalOnHandler'])",
                        "    {",
                        "        if(!KlissanInvasion['TortugatzAssaultEndingStage'])",
                        "        {",
                        "            if(ShipStar(Player()) == cur_star)",
                        "            {",
                        "                if(GetShipPirateRank(Player()) >= 7)",
                        "                {",
                        "                    if(ShipInNormalSpace(Player()))",
                        "                    {",
                        "                        if(CurTurn() > 301) //Иначе вызов диалога может завесить, хз почему",
                        "                        {",
                        "                            NoJump(1);",
                        "                            Dialog(CurShip);",
                        "",
                        "                            KlissanInvasion['ArrivalOnHandler'] = 1;",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 23,
                    "#": 59,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDestroy(CurShip, 0);",
                        "",
                        "//Данный стейт является тупиковым, травит махпеллу на игрока по всей системе, и выбраться из этого стейта самостоятельно у неё шансов нет",
                        "dword cur_star = ShipStar(CurShip);",
                        "//Чиним всё бортовое оборудование махпеллы",
                        "ShipRepairEq(CurShip);",
                        "//if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDeleteCustomShipInfo(CurShip, 'ShipImmortalInfo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 24,
                    "#": 60,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Пришло время сваливать обратно в ЧД",
                        "if(GetData(0))",
                        "{",
                        "    if(!ShipInNormalSpace(CurShip)) ShipDestroy(CurShip, 1);",
                        "    else OrderJumpHole(CurShip, IdToHole(GetData(0)));",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 26,
                    "#": 61,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Data0 - ---",
                        "//Data1 - ---",
                        "//Data2 - ---",
                        "//Data3 - маркера диалогов с игроком в виде сета:",
                        "        // 0 - диалогов не было",
                        "        // 1 - был первый диалог",
                        "        // 2 - был второй диалог",
                        "        // 3 - был третий диалог",
                        "",
                        "if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDestroy(CurShip, 0);",
                        "",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "dword cur_star = ShipStar(CurShip);",
                        "if(cur_star != GalaxyStar(TortugatzId)) exit;",
                        "",
                        "//Штурмующая военная база прибыла в Тортугац, начинается бой за систему",
                        "//ВБ появится в системе, выпустит военных, после чего сразу отправиться садиться на Роджерию, типа как с целью её захвата",
                        "if(KlissanInvasion['TortugatzAssaultEndingStage'] < 3)",
                        "{",
                        "    OrderLanding(CurShip, PlanetPirateClan());",
                        "    OrderLock(CurShip, 1);",
                        "",
                        "    KlissanInvasion['TortugatzAssaultEndingStage'] = 3;",
                        "}",
                        "",
                        "//Выход на связь с игроком",
                        "if(ShipInNormalSpace(Player()))",
                        "{",
                        "    if(ShipInNormalSpace(CurShip))",
                        "    {",
                        "        if(ShipStar(Player()) == ShipStar(CurShip))",
                        "        {",
                        "            //Если игрок прибыл с союзной Махпеллой, то дела пойдут иначе",
                        "            if(KlissanInvasion['AllyMachpellaStage'] == 3 || KlissanInvasion['AllyMachpellaStage'] == 5) {",
                        "                //ВБ только что вышла из гипера и сейчас впервые связывается с игроком",
                        "                if(!GetData(3))",
                        "                {",
                        "                    if(GroupCount(Handler))",
                        "                    {",
                        "                        SetData(1, 3);",
                        "                        ShipStanding(GroupToShip(Handler),5);",
                        "                        ShipStanding(GroupToShip(Machpella),5);",
                        "                        NoLanding(GroupToShip(Handler),0);",
                        "",
                        "                        //Обновляем задание",
                        "                        Ether(3, 'Coalition.TortugatzCaptured', \"Секретный объект Хандлер и Махпелла подлежат немедленному уничтожению. Подлежали. Но наш союз с клисанами требует немного иных действий... И у нас кое-что есть в запасе. Займитесь объектом Хандлер, а мы займёмся всем остальным.\");",
                        "                    }",
                        "",
                        "                    //Снимаем запрет захвата с Тортугаца, чтобы игра не баговала",
                        "                    NoComeKlingToStar(PlanetToStar(PlanetPirateClan()), 0);",
                        "                }",
                        "                //Если был уничтожен только Хандлер, либо только махпелла",
                        "                else if(GetData(3) == 1)",
                        "                {",
                        "                    if(!GroupCount(Handler) || !GroupCount(Machpella))",
                        "                    {",
                        "                        Dialog(CurShip);//Ending_Coalition_TortugatzCaptured_TalkWB2, CoalitionAssaultWB);",
                        "                        SetData(2, 3);",
                        "",
                        "                        //Обновляем задание",
                        "                        if(!GroupCount(Handler)) Ether(3, 'Coalition.TortugatzCaptured', \"Махпелла подлежит немедленному уничтожению.\");",
                        "                        else Ether(3, 'Coalition.TortugatzCaptured', \"Секретный объект Хандлер подлежит немедленному уничтожению.\");",
                        "                    }",
                        "                }",
                        "            }",
                        "            else {",
                        "                //ВБ только что вышла из гипера и сейчас впервые связывается с игроком",
                        "                if(!GetData(3))",
                        "                {",
                        "                    if(GroupCount(Handler))",
                        "                    {",
                        "                        Dialog(CurShip);//Ending_Coalition_TortugatzCaptured_TalkWB1, CoalitionAssaultWB);",
                        "                        SetData(1, 3);",
                        "",
                        "                        //Обновляем задание",
                        "                        Ether(3, 'Coalition.TortugatzCaptured', \"Секретный объект Хандлер и Махпелла подлежат немедленному уничтожению.\");",
                        "                    }",
                        "",
                        "                    //Снимаем запрет захвата с Тортугаца, чтобы игра не баговала",
                        "                    NoComeKlingToStar(PlanetToStar(PlanetPirateClan()), 0);",
                        "                }",
                        "                //Игрок полетел на Хандлер",
                        "                else if(GetData(3) == 1)",
                        "                {",
                        "                    if(!GroupCount(Handler) || !GroupCount(Machpella))",
                        "                    {",
                        "                        Dialog(CurShip);//Ending_Coalition_TortugatzCaptured_TalkWB2, CoalitionAssaultWB);",
                        "                        SetData(2, 3);",
                        "",
                        "                        //Обновляем задание",
                        "                        if(!GroupCount(Handler)) Ether(3, 'Coalition.TortugatzCaptured', \"Махпелла подлежит немедленному уничтожению.\");",
                        "                        else Ether(3, 'Coalition.TortugatzCaptured', \"Секретный объект Хандлер подлежит немедленному уничтожению.\");",
                        "                    }",
                        "                }",
                        "                //Если уже были уничтожены и Хандлер и махпелла",
                        "                else if(GetData(3) == 2)",
                        "                {",
                        "                    if(PlanetOwner(PlanetPirateClan()) != PirateClan) //Если ВБ уже захватила Роджерию",
                        "                    {",
                        "                        if(!GroupCount(Handler) && !GroupCount(Machpella))",
                        "                        {",
                        "                            Dialog(CurShip);//Ending_Coalition_TortugatzCaptured_TalkWB3, CoalitionAssaultWB);",
                        "                            SetData(3, 3);",
                        "",
                        "                            //Обновляем задание",
                        "                            //Ether(3, 'Coalition.TortugatzCaptured', \"Срочно прибыть в ближайший Центр рейнджеров.\");",
                        "                            //Завершаем задание",
                        "                            Ether(4, 'Coalition.TortugatzCaptured', \"Хандлер и махпелла успешно ликвидированы. Коалиция спасена!\");",
                        "",
                        "                            //Если Роджерия уже захвачена и ВБ с неё взлетела",
                        "                            NoJump(0);",
                        "                            NoLanding(CurShip, 0);",
                        "                            OrderLock(CurShip, 0);",
                        "                            ShipDeleteCustomShipInfo(CurShip, 'ShipImmortalInfo');",
                        "                            ShipOut(CurShip);",
                        "",
                        "                            float angle = 0.01 * RndObject(0, 200, CurShip);",
                        "                            int coordX = round(sin(angle * pi) * 325) + CoordX(CurShip);",
                        "                            int coordY = round(cos(angle * pi) * 325) + CoordY(CurShip);",
                        "                            OrderMove(CurShip, coordX, coordY);",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "    //Чтобы не тормозила вылетать за игроком",
                        "    //else if(ShipInHyperSpace(CurShip)) ShipOrderData1(CurShip, 0);",
                        "}",
                        "else if(GetShipPlanet(CurShip))",
                        "{",
                        "    if(!GroupCount(Handler) && !GroupCount(Machpella))",
                        "    {",
                        "        OrderTakeOff(CurShip);",
                        "        PlanetOwner(PlanetPirateClan(), 2);",
                        "        StarOwner(GalaxyStar(TortugatzId), 0);",
                        "        CoalitionDefeated(0); //Этим захватом Роджерии можно даже уже побеждённую Коалицию воскресить",
                        "        Sound('Sound.LiberationSystem');",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 27,
                    "#": 62,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Защита Хандлера, которая появляется (и взлетает с Хандлера), если игрок так или иначе напал на станцию",
                        "OrderLock(CurShip, 1);",
                        "ShipFreeFlight(CurShip);",
                        "",
                        "if(ShipStar(CurShip) == ShipStar(Player()))",
                        "{",
                        "    if(!ShipInNormalSpace(CurShip)) OrderTakeOff(CurShip);",
                        "    else OrderFollowShip(CurShip, Player(), 1);",
                        "}",
                        "//Если таймер спавна новых защитников обновился, ликвидируем старых",
                        "else",
                        "{",
                        "    if(ShipInNormalSpace(CurShip)) OrderLanding(CurShip, NearCivilPlanet(CurShip));",
                        "    else ShipDestroy(CurShip, 1);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 28,
                    "#": 63,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDestroy(CurShip, 0);",
                        "RelationToRanger(CurShip, Player(), 50); //Стабильно нейтральное отношение к игроку",
                        "",
                        "//Махпелла прибыла в указанную систему (влетела в ЧД), меняем её стейт на патрульный",
                        "dword cur_star = ShipStar(CurShip);",
                        "if(cur_star == GalaxyStar(GetData(0) - 1))",
                        "{",
                        "    OrderLock(CurShip, 0);",
                        "    ShipOwner(CurShip, None);",
                        "    ShipCustomFaction(CurShip, 'Klissan');",
                        "    NoTargetToShip(CurShip, 0);",
                        "",
                        "    if(~int(GetData(1)))",
                        "    {",
                        "        //Чтобы сразу же не исполнялся привязанный стейткод",
                        "        ShipJoinToScript(CurShip, 'Mod_ShuKlissan.Machpella.MachpellaFlyAroundStarState');",
                        "    }",
                        "    //Если выставлен маркер на перевод махпеллы в стейт атаки игрока по прибытии в систему",
                        "    else",
                        "    {",
                        "        SetData(0, 1);",
                        "        //Чтобы сразу же не исполнялся привязанный стейткод",
                        "        ShipJoinToScript(CurShip, 'Mod_ShuKlissan.Machpella.MachpellaAttackOnPlayerState');",
                        "    }",
                        "",
                        "    exit;",
                        "}",
                        "",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "",
                        "//Чиним всё бортовое оборудование махпеллы",
                        "ShipRepairEq(CurShip);",
                        "",
                        "//Данный стейт используется для отправки махпеллы в указанную систему",
                        "//Совершаем ЧД прыжок",
                        "if(ShipOrder(CurShip) != 4) //Если махпелла прямо сейчас не совершает прыжок в ЧД",
                        "{",
                        "    if(cur_star != GalaxyStar(GetData(0) - 1))",
                        "    {",
                        "        dword hole = CreateKlissanHole(GalaxyStar(TortugatzId), GalaxyStar(GetData(0) - 1), CurShip);",
                        "        OrderJumpHole(CurShip, hole);",
                        "        OrderLock(CurShip, 1);",
                        "",
                        "        //if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDeleteCustomShipInfo(CurShip, 'ShipImmortalInfo');",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 29,
                    "#": 64,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDestroy(CurShip, 0);",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "",
                        "dword cur_star = ShipStar(CurShip);",
                        "//Чиним всё бортовое оборудование махпеллы",
                        "ShipRepairEq(CurShip);",
                        "",
                        "//Данный стейт патрульный, и сам переключится на стейт возврата в Тортугац через указанный промежуток времени",
                        "//Если махпелле навешали люлей, либо срок её пребывания в целевой системе подошёл к концу",
                        "if(HullDamage(CurShip) > 66 || CurTurn() >= GetData(1))",
                        "{",
                        "    OrderLock(CurShip, 0); //Нулевой лок здесь используется как маркер для открытия ЧД, не менять",
                        "    ChangeState('MachpellaJumpToTortugatzState');",
                        "    exit;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 30,
                    "#": 65,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDestroy(CurShip, 0);",
                        "RelationToRanger(CurShip, Player(), 50); //Стабильно нейтральное отношение к игроку",
                        "",
                        "//Махпелла вернулась в Тортугац (влетела в ЧД), меняем стейт на стейт ожидания в Тортугаце",
                        "dword cur_star = ShipStar(CurShip);",
                        "dword tort = GalaxyStar(TortugatzId);",
                        "if(ShipInStar(CurShip, tort))",
                        "{",
                        "    OrderLock(CurShip, 0);",
                        "    SetData(0, 0); //Зануляем Id системы (Id систем тут записаны без вычитания -1)",
                        "    SetData(0, 1); //Зануляем конечное число пребывания в указанной системе",
                        "    if(StarOwner(tort) == 2) ShipOwner(CurShip, PirateClan);",
                        "    else ShipOwner(CurShip, ShipPilotRace(CurShip));",
                        "    ShipCustomFaction(CurShip, 'SubFactionKlissan');",
                        "    NoTargetToShip(CurShip, 2);",
                        "    RelationToRanger(CurShip, Player(), 50);",
                        "",
                        "    //Чтобы сразу же не исполнялся привязанный стейткод",
                        "    ShipJoinToScript(CurShip, 'Mod_ShuKlissan.Machpella.MachpellaWaitInTortugatzState');",
                        "    exit;",
                        "}",
                        "",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "",
                        "//Чиним всё бортовое оборудование махпеллы",
                        "ShipRepairEq(CurShip);",
                        "",
                        "//Данный стейт занимается возвратом махпеллы обратно в Тортугац",
                        "//Совершаем ЧД прыжок",
                        "if(!OrderLock(CurShip))",
                        "{",
                        "    dword hole = CreateKlissanHole(cur_star, GalaxyStar(TortugatzId), CurShip);",
                        "    OrderJumpHole(CurShip, hole);",
                        "    OrderLock(CurShip, 1);",
                        "",
                        "    //ShipAddCustomShipInfo(CurShip, 'ShipImmortalInfo', 'NoShow');",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": -160,
                    "Parent": -1,
                    "#": 203,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(2);",
                        "NoJump(0);",
                        "OrderLock(Player(), 0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 34,
                    "#": 204,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Считаем текущий \"заряд\" приказа атаки",
                        "tstr1 = '' + round(PortionInDiapason(max(KlissanInvasion['KlissanControl.NextAttackOrderTurn'] - CurTurn(), 0), KlissanInvasion['KlissanControl.NextAttackOrderTurn'] - KlissanInvasion['KlissanControl.LastAttackOrderTurn'], 0, 0, 100)) + '%';",
                        "",
                        "check = 0;",
                        "machpella = GroupToShip(Machpella);",
                        "if(machpella)",
                        "{",
                        "    if(StateIs(machpella, 'MachpellaWaitInTortugatzState') && ShipInNormalSpace(machpella))",
                        "    {",
                        "        tstr2 = Format(CT('Script.Mod_ShuKlissan.KlissanControlDialog.MachpellaDispositionStar'), '<Star'+'>', Name(ShipStar(machpella)));",
                        "        if(KlissanInvasion['KlissanControl.NextAttackOrderTurn'] <= CurTurn() && KlissanInvasion['NextNeurolinkReadyTurn'] <= CurTurn())",
                        "        {",
                        "            check = check + 1;",
                        "            tstr3 = CT('Script.Mod_ShuKlissan.KlissanControlDialog.AttackOrderAvailabilityYes');",
                        "        }",
                        "",
                        "        //Призвать махпеллу можно только если уже откатился таймер, и если в данный момент ей не дана команда на спавн нейролинка для атаки",
                        "        if(KlissanInvasion['KlissanControl.NextMachpellaOrderTurn'] <= CurTurn() && !KlissanInvasion['KlissanControl.StarToAttack'])",
                        "        {",
                        "            check = check + 2;",
                        "            tstr4 = CT('Script.Mod_ShuKlissan.KlissanControlDialog.MachpellaCallAvailabilityYes');",
                        "        }",
                        "    }",
                        "    else",
                        "    {",
                        "        if(ShipInHyperSpace(machpella)) tstr2 = CT('Script.Mod_ShuKlissan.KlissanControlDialog.MachpellaDispositionHyper');",
                        "        else tstr2 = Format(CT('Script.Mod_ShuKlissan.KlissanControlDialog.MachpellaDispositionStar'), '<Star'+'>', Name(ShipStar(machpella)), '');",
                        "        tstr3 = CT('Script.Mod_ShuKlissan.KlissanControlDialog.AttackOrderAvailabilityNo');",
                        "        tstr4 = CT('Script.Mod_ShuKlissan.KlissanControlDialog.MachpellaCallAvailabilityNo');",
                        "    }",
                        "",
                        "    tstr1 = '</color>' + Format(CT('Script.Mod_ShuKlissan.KlissanControlDialog.KlissanControlState'),",
                        "                                '<ChargePercent'+'>', tstr1,",
                        "                                '<MachpellaDisposition'+'>', tstr2,",
                        "                                '<AttackOrderAvailability'+'>', tstr3,",
                        "                                '<MachpellaCallAvailability'+'>', tstr4);",
                        "}",
                        "else",
                        "{",
                        "    tstr1 = '</color>' + Format(CT('Script.Mod_ShuKlissan.KlissanControlDialog.KlissanControlState'),",
                        "                                '<ChargePercent'+'>', tstr1,",
                        "                                '<MachpellaDisposition'+'>', CT('Script.Mod_ShuKlissan.KlissanControlDialog.MachpellaDispositionUnknown'),",
                        "                                '<AttackOrderAvailability'+'>', CT('Script.Mod_ShuKlissan.KlissanControlDialog.AttackOrderAvailabilityNo'),",
                        "                                '<MachpellaCallAvailability'+'>', CT('Script.Mod_ShuKlissan.KlissanControlDialog.MachpellaCallAvailabilityNo'));",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 35,
                    "#": 205,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Игрок выдал приказ клисанам атаковать указанную систему, либо отправить туда махпеллу",
                        "cur_star = StarNearbyStars(ShipStar(Player()), GAnswerData);",
                        "if(check == 1)",
                        "{",
                        "    KlissanInvasion['KlissanControl.StarToAttack'] = Id(cur_star);",
                        "",
                        "    //До перезарядки выбираем наибольшее значение из таймера до возможности спавна следующего нейролинка, либо условного таймера заряда",
                        "    int next_attack_in = max(GetNextNeurolinkReadyTime() + 1, round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 1.5, 0.5) * PortionInDiapason(KlissanInvasion['StarsCaptured'], 0, 66, 75, 25)));",
                        "    KlissanInvasion['KlissanControl.NextAttackOrderTurn'] = CurTurn() + next_attack_in;",
                        "    KlissanInvasion['KlissanControl.LastAttackOrderTurn'] = CurTurn(); //Запоминаем для подсчёта \"заряда\"",
                        "}",
                        "",
                        "else //if(check == 2)",
                        "{",
                        "    machpella = GroupToShip(Machpella);",
                        "",
                        "    SetData(Id(cur_star), 0, machpella); //Id системы для совершения ЧД прыжка",
                        "    int time_in_star = 3 * round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 2.0, 0.75) * PortionInDiapason(KlissanInvasion['StarsCaptured'], 0, 66, 25, 75));",
                        "    SetData(CurTurn() + time_in_star, 1, machpella); //Время пребывания махпеллы в указанной системе",
                        "    ChangeState('MachpellaJumpToStarState', machpella);",
                        "",
                        "    KlissanInvasion['KlissanControl.NextMachpellaOrderTurn'] = CurTurn() + time_in_star + RndObject(20, 45, machpella);",
                        "    KlissanInvasion['KlissanControl.LastMachpellaOrderTurn'] = CurTurn(); //Запоминаем просто так",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 37,
                    "#": 206,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(i = 0; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    cur_item = ShipItems(Player(), i);",
                        "    if(ItemType(cur_item) != t_UselessCountableItem) continue;",
                        "    if(EquipmentImageName(cur_item) != 'KlissanProtoplasm') continue;",
                        "",
                        "    PPCount = PPCount + ItemSize(cur_item);",
                        "    RangerBaseNodes(Player(), RangerBaseNodes(Player()) + ItemSize(cur_item) * 3);",
                        "    ShipFreeExp(Player(), ShipFreeExp(Player()) + ItemSize(cur_item) * 3);",
                        "    SetShipExpByType(Player(), GetShipExpByType(Player()) + ItemSize(cur_item) * 3, 0);",
                        "    FreeItem(GetItemFromShip(Player(), i));",
                        "}",
                        "Sound('Sound.Buy');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 38,
                    "#": 207,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tint1 = PlanetRace(cur_planet);",
                        "rand = RndObject(1, 2, cur_planet);",
                        "if(rand == 1)",
                        "{",
                        "    GiveRewardByNom(Player(), 13);",
                        "    tstr1 = CT('Reward.13.Name'); //Орден достоинства",
                        "}",
                        "else",
                        "{",
                        "    if(tint1 == Maloc)",
                        "    {",
                        "        GiveRewardByNom(Player(), 0);",
                        "        tstr1 = CT('Reward.0.Name'); //Орден Быка",
                        "    }",
                        "    else if(tint1 == Peleng)",
                        "    {",
                        "        GiveRewardByNom(Player(), 5);",
                        "        tstr1 = CT('Reward.5.Name'); //Дух болот",
                        "    }",
                        "    else if(tint1 == People)",
                        "    {",
                        "        GiveRewardByNom(Player(), 19);",
                        "        tstr1 = CT('Reward.19.Name'); //Тройной ореон",
                        "    }",
                        "    else if(tint1 == Fei)",
                        "    {",
                        "        GiveRewardByNom(Player(), 30);",
                        "        tstr1 = CT('Reward.30.Name'); //Айбо-3001",
                        "    }",
                        "    else if(tint1 == Gaal)",
                        "    {",
                        "        GiveRewardByNom(Player(), 22);",
                        "        tstr1 = CT('Reward.22.Name'); //Урановый млеко",
                        "    }",
                        "}",
                        "",
                        "//3 гту - 1500 опыта",
                        "//8 гту - 4000 опыта",
                        "i = PortionInDiapason(GalaxyDiffLevels(7), 50, 500, 150, 45);",
                        "i = GTL * 50;",
                        "i = RndObject(i * 80 / 100, i * 120 / 100, cur_planet);",
                        "i = i * 10;",
                        "ShipFreeExp(Player(), ShipFreeExp(Player()) + i);",
                        "SetShipExpByType(Player(), GetShipExpByType(Player()) + i, 0);",
                        "",
                        "tstr2 = Name(ShipStar(Player()));",
                        "tstr3 = Name(cur_planet);",
                        "tstr4 = '<color=45,105,45>' + Format(CT('PlanetCongratulations.LiberationAwardPirateClan.AddPoints'), '<Points'+'>', i, '') + '</color>';",
                        "",
                        "rand = RndObject(1, 4, cur_planet);",
                        "tstr1 = '</color>' + Format(CT('Script.Mod_ShuKlissan.StarKlissanLiberationDialogs.PirateClanCongrats' + rand),",
                        "                               '<Star'+'>', tstr2,",
                        "                               '<Planet'+'>', tstr3,",
                        "                               '<Reward'+'>', tstr1);",
                        "tstr1 = tstr1 + \"<br>\" + \"<br>\" + tstr4;",
                        "tstr2 = '</color>' + CT('Script.Mod_ShuKlissan.StarKlissanLiberationDialogs.PlayerThanksPirateClan');",
                        "",
                        "KlissanInvasion['StarLiberationReward.Star'] = -1; //Потому что нулевой номер имеет Тарон",
                        "KlissanInvasion['StarLiberationReward.Planet'] = 0;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 39,
                    "#": 208,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tint1 = PlanetRace(cur_planet);",
                        "rand = RndObject(1, 3, cur_planet);",
                        "if(rand == 1)",
                        "{",
                        "    GiveRewardByNom(Player(), 13);",
                        "    tstr1 = CT('Reward.13.Name'); //Орден достоинства",
                        "}",
                        "else if(rand == 2)",
                        "{",
                        "    GiveRewardByNom(Player(), 33);",
                        "    tstr1 = CT('Reward.33.Name'); //Алмазная гильза",
                        "}",
                        "else",
                        "{",
                        "    if(tint1 == Maloc)",
                        "    {",
                        "        GiveRewardByNom(Player(), 14);",
                        "        tstr1 = CT('Reward.14.Name'); //Гвардейский вымпел",
                        "    }",
                        "    else if(tint1 == Peleng)",
                        "    {",
                        "        GiveRewardByNom(Player(), 13);",
                        "        tstr1 = CT('Reward.13.Name'); //Орден достоинства",
                        "    }",
                        "    else if(tint1 == People)",
                        "    {",
                        "        GiveRewardByNom(Player(), 18);",
                        "        tstr1 = CT('Reward.18.Name'); //Золотая звезда героя",
                        "    }",
                        "    else if(tint1 == Fei)",
                        "    {",
                        "        GiveRewardByNom(Player(), 20);",
                        "        tstr1 = CT('Reward.20.Name'); //Ашианская лента",
                        "    }",
                        "    else if(tint1 == Gaal)",
                        "    {",
                        "        GiveRewardByNom(Player(), 21);",
                        "        tstr1 = CT('Reward.21.Name'); //Большой англум",
                        "    }",
                        "}",
                        "",
                        "//3 гту - 1500 опыта",
                        "//8 гту - 4000 опыта",
                        "i = PortionInDiapason(GalaxyDiffLevels(7), 50, 500, 150, 45);",
                        "i = GTL * 50;",
                        "i = RndObject(i * 80 / 100, i * 120 / 100, cur_planet);",
                        "i = i * 10;",
                        "ShipFreeExp(Player(), ShipFreeExp(Player()) + i);",
                        "SetShipExpByType(Player(), GetShipExpByType(Player()) + i, 0);",
                        "",
                        "tstr2 = Name(ShipStar(Player()));",
                        "tstr3 = Name(cur_planet);",
                        "tstr4 = '<color=45,105,45>' + Format(CT('PlanetCongratulations.LiberationAwardNormals.AddPoints'), '<Points'+'>', i, '') + '</color>';",
                        "",
                        "if(tint1 == Maloc)",
                        "{",
                        "    tstr1 = '</color>' + Format(CT('Script.Mod_ShuKlissan.StarKlissanLiberationDialogs.CoalitionMalocCongrats'),",
                        "                                   '<Star'+'>', tstr2,",
                        "                                   '<Planet'+'>', tstr3,",
                        "                                   '<Reward'+'>', tstr1);",
                        "}",
                        "else if(tint1 == Peleng)",
                        "{",
                        "    tstr1 = '</color>' + Format(CT('Script.Mod_ShuKlissan.StarKlissanLiberationDialogs.CoalitionPelengCongrats'),",
                        "                                   '<Star'+'>', tstr2,",
                        "                                   '<Planet'+'>', tstr3,",
                        "                                   '<Reward'+'>', tstr1);",
                        "}",
                        "else if(tint1 == People)",
                        "{",
                        "    tstr1 = '</color>' + Format(CT('Script.Mod_ShuKlissan.StarKlissanLiberationDialogs.CoalitionPeopleCongrats'),",
                        "                                   '<Star'+'>', tstr2,",
                        "                                   '<Planet'+'>', tstr3,",
                        "                                   '<Reward'+'>', tstr1);",
                        "}",
                        "else if(tint1 == Fei)",
                        "{",
                        "    tstr1 = '</color>' + Format(CT('Script.Mod_ShuKlissan.StarKlissanLiberationDialogs.CoalitionFeiCongrats'),",
                        "                                   '<Star'+'>', tstr2,",
                        "                                   '<Planet'+'>', tstr3,",
                        "                                   '<Reward'+'>', tstr1);",
                        "}",
                        "else if(tint1 == Gaal)",
                        "{",
                        "    tstr1 = '</color>' + Format(CT('Script.Mod_ShuKlissan.StarKlissanLiberationDialogs.CoalitionGaalCongrats'),",
                        "                                   '<Star'+'>', tstr2,",
                        "                                   '<Planet'+'>', tstr3,",
                        "                                   '<Reward'+'>', tstr1);",
                        "}",
                        "tstr1 = tstr1 + \"<br>\" + \"<br>\" + tstr4;",
                        "tstr2 = '</color>' + CT('Script.Mod_ShuKlissan.StarKlissanLiberationDialogs.PlayerThanksCoalition');",
                        "",
                        "KlissanInvasion['StarLiberationReward.Star'] = -1; //Потому что нулевой номер имеет Тарон",
                        "KlissanInvasion['StarLiberationReward.Planet'] = 0;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 42,
                    "#": 209,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(2);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 47,
                    "#": 210,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Производится \"очистка от клисан\" в указанной системе по приказу игрока",
                        "if(~int(GAnswerData))",
                        "{",
                        "    cur_star = StarNearbyStars(ShipStar(Player()), GAnswerData);",
                        "    for(i = 0; i < StarShips(cur_star); i = i + 1)",
                        "    {",
                        "        cur_ship = StarShips(cur_star, i);",
                        "        tstr1 = ShipCustomFaction(cur_ship);",
                        "        if(ShipInHyperSpace(cur_ship)) continue;",
                        "        if(tstr1 != 'Klissan' && tstr1 != 'SubFactionKlissan') continue;",
                        "        if(ShipType(cur_ship) == 'Machpella') continue;",
                        "",
                        "        ShipDestroy(cur_ship, 1);",
                        "    }",
                        "}",
                        "//Производится \"очистка от клисан\" по всей Галактике по приказу игрока",
                        "else",
                        "{",
                        "    for(i = 0; i < GalaxyStars(); i = i + 1)",
                        "    {",
                        "        cur_star = GalaxyStar(i);",
                        "        for(j = 0; j < StarShips(cur_star); j = j + 1)",
                        "        {",
                        "            cur_ship = StarShips(cur_star, j);",
                        "            tstr1 = ShipCustomFaction(cur_ship);",
                        "            if(ShipInHyperSpace(cur_ship)) continue;",
                        "            if(tstr1 != 'Klissan' && tstr1 != 'SubFactionKlissan') continue;",
                        "            if(ShipType(cur_ship) == 'Machpella') continue;",
                        "",
                        "            ShipDestroy(cur_ship, 1);",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 52,
                    "#": 211,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Если в данный момент активно задание из пиратской ветки на прибытие в ближайший ЦР, выполняем его",
                        "if(EtherState('BABB37FE-1007-4A51-A103-DB9EBEAA4C10') == 3)",
                        "{",
                        "    //Текст из скрипта PC_final: \"<PlayerFull>, вам надлежит срочно прибыть в ближайший центр рейнджеров. Форма одежды - штатская, парадная.\"",
                        "    Ether(4, 'BABB37FE-1007-4A51-A103-DB9EBEAA4C10', CT('Script.PC_final.250'));",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 53,
                    "#": 212,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Если в данный момент активно пиратское задание на прибытие в ближайшую ПБ, завершаем его, выполняем его",
                        "if(EtherState('BABB37FE-1007-4A51-A103-DB9EBEAA4C10') == 3)",
                        "{",
                        "    //Текст из скрипта PC_final: \"<PlayerFull>, вам надлежит срочно прибыть на ближайшую работоспособную пиратскую станцию.\"",
                        "    Ether(4, 'BABB37FE-1007-4A51-A103-DB9EBEAA4C10', CT('Script.PC_final.186'));",
                        "}",
                        "//Награждаем Орденом Белого Знамени",
                        "if(!CountRewardByNom(Player(),49)) GiveRewardByNom(Player(),49);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 54,
                    "#": 213,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Если в данный момент активно пиратское задание на прибытие в ближайшую ПБ, выполняем его",
                        "if(EtherState('BABB37FE-1007-4A51-A103-DB9EBEAA4C10') == 3)",
                        "{",
                        "    //Текст из скрипта PC_final: \"<PlayerFull>, вам надлежит срочно прибыть на ближайшую работоспособную пиратскую станцию.\"",
                        "    Ether(4, 'BABB37FE-1007-4A51-A103-DB9EBEAA4C10', CT('Script.PC_final.186'));",
                        "}",
                        "//Награждаем Орденом Белого Знамени",
                        "if(!CountRewardByNom(Player(),49)) GiveRewardByNom(Player(),49);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 55,
                    "#": 214,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "int coal_ships = 0;",
                        "int domik_ships = 0;",
                        "int pirate_ships = 0;",
                        "int klissan_ships = 0;",
                        "",
                        "for(i = 0; i < GalaxyStars(); i = i + 1)",
                        "{",
                        "    cur_star = GalaxyStar(i);",
                        "    if(StarCustomFaction(cur_star) == '')",
                        "    {",
                        "        if(StarOwner(cur_star) == 1) domik_ships = domik_ships + 1;",
                        "        if(StarOwner(cur_star) == 2) pirate_ships = pirate_ships + 1;",
                        "    }",
                        "    else if(StarCustomFaction(cur_star) == 'Klissan') klissan_ships = klissan_ships + 1;",
                        "}",
                        "",
                        "tint1 = GalaxyStars();",
                        "pirate_ships = pirate_ships * 100 / tint1;",
                        "domik_ships = domik_ships * 100 / tint1;",
                        "klissan_ships = klissan_ships * 100 / tint1;",
                        "coal_ships = 100 - (pirate_ships + domik_ships + klissan_ships);",
                        "",
                        "if(coal_ships >= 100) tint1 = 1;",
                        "else if(coal_ships >= 90) tint1 = 2;",
                        "else if(coal_ships >= 70) tint1 = 3;",
                        "else if(coal_ships >= 50) tint1 = 4;",
                        "else if(coal_ships >= 30) tint1 = 5;",
                        "else if(coal_ships >= 10) tint1 = 6;",
                        "else tint1 = 7;",
                        "",
                        "cur_star = ShipStar(Player());",
                        "for(i = 1; i < GalaxyStars(); i = i + 1)",
                        "{",
                        "    tdwd1 = StarNearbyStars(cur_star, i);",
                        "    if(StarOwner(tdwd1))",
                        "    {",
                        "        tstr2 = Name(tdwd1);",
                        "        tstr3 = Name(StarToCon(cur_star));",
                        "        break;",
                        "    }",
                        "}",
                        "",
                        "if(KlissanInvasion['DaysPassedAfterStart'] > 4)",
                        "{",
                        "    if(tint1 == 1) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br>Клисаны - <klissan_ships>%<br><br>Мы полностью контролируем наш рукав галактики и практически уже празднуем победу. Все враги, по нашим сведениям, повержены, рейнджер <Player>.\";",
                        "    else if(tint1 == 2) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br>Клисаны - <klissan_ships>%<br><br>На текущий момент мы контролируем около девяти десятых обжитых миров. Враги не представляют особой угрозы, и мы планируем уже в следующем году полностью освободить все захваченные ими системы. Пора, <Player>, перейти к финальному наступлению!\";",
                        "    else if(tint1 == 3) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br>Клисаны - <klissan_ships>%<br><br>Дела обстоят хорошо. Рейнджеры вкупе с вооруженными силами медленно вытесняют силы противника с захваченных территорий. Наши технологии на данный момент успешно могут поспорить с вражескими, и наше оружие эффективно поражает их корабли. Так что верь, <Player>, в нашу победу! Сейчас мы как раз планируем освобождение системы <tstr2> в секторе <tstr3>.\";",
                        "    else if(tint1 == 4) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br>Клисаны - <klissan_ships>%<br><br>В последнее время инициатива переходит от одной стороны к другой. Враги никак не желают сдавать своих позиций, но развязка близка. Одна из сторон рано или поздно одержит верх, и мы надеемся, что победа останется за Коалицией.<br>Ты, <Player>, можешь оказать нам посильную помощь, если освободишь систему <tstr2> в секторе <tstr3>.\";",
                        "    else if(tint1 == 5) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br>Клисаны - <klissan_ships>%<br><br>На текущий момент нам принадлежит всего лишь небольшая доля освоенных систем. Это плачевный факт, равно как и то, что мы безнадежно проигрываем.<br>Стратегически важной точкой для нас является система <tstr2> (сектор <tstr3>). Ты должен полететь туда, <Player>, и принять участие в боевых действиях.\";",
                        "    else if(tint1 == 6) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br>Клисаны - <klissan_ships>%<br><br>В данный момент ситуация на фронтах ужасна. Силы противника захватывают систему за системой. <br>Сейчас мы собираемся отбить систему <tstr2>. Если ты, <Player>, хочешь принять участие в этой операции, то поспеши, так как уже несколько рейнджеров вызвались участвовать в освобождении.\";",
                        "    else if(tint1 == 7) tstr1 =  '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br>Клисаны - <klissan_ships>%<br><br>В данный момент ситуация на фронтах ужасна. Силы противника захватили уже почти весь наш рукав галактики. Оставшиеся в живых рейнджеры планируют начать операцию по освобождению системы <tstr2>. На таких как ты, <Player>, и остались все наши надежды.\";",
                        "}",
                        "else",
                        "{",
                        "    if(tint1 == 1) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br><br>Мы полностью контролируем наш рукав галактики и практически уже празднуем победу. Все враги, по нашим сведениям, повержены, рейнджер <Player>.\";",
                        "    else if(tint1 == 2) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br><br>На текущий момент мы контролируем около девяти десятых обжитых миров. Враги не представляют особой угрозы, и мы планируем уже в следующем году полностью освободить все захваченные ими системы. Пора, <Player>, перейти к финальному наступлению!\";",
                        "    else if(tint1 == 3) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br><br>Дела обстоят хорошо. Рейнджеры вкупе с вооруженными силами медленно вытесняют силы противника с захваченных территорий. Наши технологии на данный момент успешно могут поспорить с вражескими, и наше оружие эффективно поражает их корабли. Так что верь, <Player>, в нашу победу! Сейчас мы как раз планируем освобождение системы <tstr2> в секторе <tstr3>.\";",
                        "    else if(tint1 == 4) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br><br>В последнее время инициатива переходит от одной стороны к другой. Враги никак не желают сдавать своих позиций, но развязка близка. Одна из сторон рано или поздно одержит верх, и мы надеемся, что победа останется за Коалицией.<br>Ты, <Player>, можешь оказать нам посильную помощь, если освободишь систему <tstr2> в секторе <tstr3>.\";",
                        "    else if(tint1 == 5) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br><br>На текущий момент нам принадлежит всего лишь небольшая доля освоенных систем. Это плачевный факт, равно как и то, что мы безнадежно проигрываем.<br>Стратегически важной точкой для нас является система <tstr2> (сектор <tstr3>). Ты должен полететь туда, <Player>, и принять участие в боевых действиях.\";",
                        "    else if(tint1 == 6) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br><br>В данный момент ситуация на фронтах ужасна. Силы противника захватывают систему за системой. <br>Сейчас мы собираемся отбить систему <tstr2>. Если ты, <Player>, хочешь принять участие в этой операции, то поспеши, так как уже несколько рейнджеров вызвались участвовать в освобождении.\";",
                        "    else if(tint1 == 7) tstr1 = '</color>' + \"Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br><br>В данный момент ситуация на фронтах ужасна. Силы противника захватили уже почти весь наш рукав галактики. Оставшиеся в живых рейнджеры планируют начать операцию по освобождению системы <tstr2>. На таких как ты, <Player>, и остались все наши надежды.\";",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 56,
                    "#": 215,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "int coal_ships = 0;",
                        "int domik_ships = 0;",
                        "int pirate_ships = 0;",
                        "int klissan_ships = 0;",
                        "",
                        "for(i = 0; i < GalaxyStars(); i = i + 1)",
                        "{",
                        "    cur_star = GalaxyStar(i);",
                        "    if(StarCustomFaction(cur_star) == '')",
                        "    {",
                        "        if(StarOwner(cur_star) == 1) domik_ships = domik_ships + 1;",
                        "        else if(StarOwner(cur_star) == 2) pirate_ships = pirate_ships + 1;",
                        "    }",
                        "    else if(StarCustomFaction(cur_star) == 'Klissan') klissan_ships = klissan_ships + 1;",
                        "}",
                        "tint1 = GalaxyStars();",
                        "pirate_ships = pirate_ships * 100 / tint1;",
                        "domik_ships = domik_ships * 100 / tint1;",
                        "klissan_ships = klissan_ships * 100 / tint1;",
                        "coal_ships = 100 - (pirate_ships + domik_ships + klissan_ships);",
                        "",
                        "if(KlissanInvasion['DaysPassedAfterStart'] > 4) tstr1 = '</color>' + \"Наши спецы проанализировали принадлежность систем и наанализировали следующее:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%\";",
                        "else tstr1 = '</color>' + \"Наши спецы проанализировали принадлежность систем и наанализировали следующее:<br><br>Коалиция - <coal_ships>%<br>Доминаторы - <domik_ships>%<br>Пираты - <pirate_ships>%<br>Клисаны - <klissan_ships>%\";"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 30,
                    "Pos.y": 0,
                    "Parent": 197,
                    "#": 216,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "clan_win_choice = 1; //Маркер, что одна из концовок в пиратской ветке из HD была выполнена",
                        "coal_defeat_grats = 1; //Маркер, что игрок получил коалиционные поздравления в честь завершения пиратской ветки (вероятно)",
                        "",
                        "pirate_planet_unlocked = 1; //Маркер разблокировки Роджерии для возможности посадки игрока",
                        "NoLanding(PlanetPirateClan(), 0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 40,
                    "Pos.y": 0,
                    "Parent": 91,
                    "#": 217,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "dword player_star = ShipStar(Player());",
                        "for(int i = 0; i < GalaxyStars(); i = i + 1)",
                        "{",
                        "    cur_star = StarNearbyStars(player_star, i);",
                        "",
                        "    if(StarCustomFaction(cur_star) == 'Klissan') continue;",
                        "    if(NoComeKlingToStar(cur_star)) continue; //Если почему-то на системе стоит лок от нападения доминаторов",
                        "    if(GetScriptNoKlingMarksFromStar(cur_star) != '') continue; //Если лок от нападения доминаторов на систему выставлен внутри какого-то скрипта",
                        "    if(cur_star == GalaxyStar(TortugatzId)) continue;",
                        "    if(cur_star == GalaxyStar(NifigatzId)) continue;",
                        "    if(IsStarGotNeurolinkRegroups(cur_star)) continue;",
                        "",
                        "    InjectAnswer('KlissanControl_OrderStarAttack', '<color=0,50,200>' + Name(cur_star) + '</color>', i);",
                        "}",
                        "",
                        "DAnswer('restart~' + \"Назад\");"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 116,
                    "#": 218,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "dword player_star = ShipStar(Player());",
                        "for(int i = 0; i < GalaxyStars(); i = i + 1)",
                        "{",
                        "    cur_star = StarNearbyStars(player_star, i);",
                        "    if(!KlissansInStar(cur_star)) continue;",
                        "",
                        "    InjectAnswer('KlissanControl_OrderStarFree', '<color=0,50,200>' + Name(cur_star) + '</color>', i);",
                        "}",
                        "",
                        "InjectAnswer('KlissanControl_OrderStarFree', \"Все системы! Очистите всё!\", -1);",
                        "DAnswer('restart~' + \"Назад\");"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 69,
                    "#": 220,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(i = 0; i < StarShips(GalaxyStar(TortugatzId)); i = i + 1)",
                        "{",
                        "    cur_ship = StarShips(GalaxyStar(TortugatzId), i);",
                        "    if(ShipOrderObj(cur_ship) == Player())",
                        "    {",
                        "        TruceBetweenShips(Player(), cur_ship);",
                        "        RelationToRanger(cur_ship, Player(), 50);",
                        "    }",
                        "}",
                        "",
                        "NoLanding(GroupToShip(Handler), 0);",
                        "OrderLanding(Player(), GroupToShip(Handler));",
                        "OrderLock(Player(), 1);",
                        "//FilmFlags(3, 1);",
                        "ForceNextDay();"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 730,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 221,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(0);",
                        "OrderTakeOff(Player());",
                        "OrderLock(Player(), 0);",
                        "NoJump(0);",
                        "",
                        "ArrayClear(tarr1);",
                        "",
                        "dword handler = GroupToShip(Handler);",
                        "ShipDeleteCustomShipInfo(handler, 'ShipImmortalInfo');",
                        "NoTargetToShip(handler, 0);",
                        "RuinsChangeType(handler, t_SB);",
                        "RelationToRanger(handler, Player(), 0);",
                        "ChangeState('HandlerAttackOnPlayerState', handler);",
                        "NoLanding(handler, 1);",
                        "",
                        "machpella = GroupToShip(Machpella);",
                        "if(ShipStar(machpella) != GalaxyStar(TortugatzId) || !ShipInNormalSpace(machpella))",
                        "{",
                        "    TransferShip(machpella, GalaxyStar(TortugatzId));",
                        "    ShipJoinToScript(machpella, 'Mod_ShuKlissan.Machpella.MachpellaWaitInTortugatzState');",
                        "    ShipOwner(machpella, PirateClan);",
                        "    ShipCustomFaction(machpella, 'Klissan');",
                        "    OrderLock(machpella, 0);",
                        "    SetData(0, 0, machpella);",
                        "    SetData(0, 1, machpella);",
                        "    SetData(0, 2, machpella);",
                        "    SetData(0, 3, machpella);",
                        "    HullHP(machpella, 'To100');",
                        "}",
                        "ShipDeleteCustomShipInfo(machpella, 'ShipImmortalInfo');",
                        "NoTargetToShip(machpella, 0);",
                        "ShipOwner(machpella, Maloc); //Чтобы сагрить пиратов",
                        "RelationToRanger(machpella, Player(), 0);",
                        "ChangeState('MachpellaAttackOnPlayerState', machpella);",
                        "ArrayAdd(tarr1, machpella);",
                        "",
                        "//Также делаем враждебными к пиратам все случайно оказавшиеся в Тортугаце в этот момент нейролинки",
                        "dword cur_star = ShipStar(Player());",
                        "for(int i = 0; i < StarShips(cur_star); i = i + 1)",
                        "{",
                        "    dword cur_ship = StarShips(cur_star, i);",
                        "    if(!ShipInNormalSpace(cur_ship)) continue;",
                        "    if(ShipType(cur_ship) != 'Neurolink') continue;",
                        "",
                        "    RelationToRanger(cur_ship, Player(), 0);",
                        "    NoTargetToShip(cur_ship, 0);",
                        "    ShipOwner(cur_ship, Maloc); //Чтобы сагрить пиратов",
                        "    ChangeState('NeurolinksAttackOnPlayerState', cur_ship);",
                        "    ArrayAdd(tarr1, cur_ship);",
                        "}",
                        "//Агрим всех пиратов в системе на махпеллу и нейролинки",
                        "for(i = 0; i < StarShips(cur_star); i = i + 1)",
                        "{",
                        "    cur_ship = StarShips(cur_star, i);",
                        "    if(!ShipInNormalSpace(cur_ship)) continue;",
                        "    if(IsPlayer(cur_ship)) continue;",
                        "    if(ShipTypeN(cur_ship) >= t_RC) continue;",
                        "",
                        "    for(int j = 1; j < ArrayDim(tarr1); j = j + 1) RelationToRanger(cur_ship, tarr1[j], 0);",
                        "}",
                        "",
                        "Ether(3, 'PirateClan.AlakayKilled', \"Секретный объект Хандлер и Махпелла подлежат немедленному уничтожению.\");",
                        "KlissanInvasion['KlissansMustBeDestroyed'] = 1;",
                        "KlissanInvasion['EndingSequenceIsStarted'] = 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 800,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 222,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(0);",
                        "OrderTakeOff(Player());",
                        "OrderLock(Player(), 0);",
                        "NoLanding(GroupToShip(Handler), 1);",
                        "NoJump(0);",
                        "",
                        "Ether(3, 'PirateClan.GalaxyConquered', \"Поработить Галактику.\");",
                        "KlissanInvasion['KlissanControl.WasReceived'] = 1;",
                        "KlissanInvasion['NextNeurolinkReadyTurn'] = 0; //Сбрасываем таймер до спавна нейролинка, чтобы игрок мог, при желании, тут же начать атаку",
                        "",
                        "KlissanInvasion['GalaxyPirateConquestBegan'] = 1;",
                        "KlissanInvasion['EndingSequenceIsStarted'] = 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 750,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 223,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(0);",
                        "OrderTakeOff(Player());",
                        "OrderLock(Player(), 0);",
                        "NoJump(0);",
                        "",
                        "dword handler = GroupToShip(Handler);",
                        "ShipDeleteCustomShipInfo(handler, 'ShipImmortalInfo');",
                        "NoTargetToShip(handler, 5);",
                        "RuinsChangeType(handler, t_SB);",
                        "RelationToRanger(handler, Player(), 0);",
                        "ChangeState('HandlerAttackOnPlayerState', handler);",
                        "NoLanding(handler, 1);",
                        "",
                        "machpella = GroupToShip(Machpella);",
                        "if(ShipStar(machpella) != GalaxyStar(TortugatzId) || !ShipInNormalSpace(machpella))",
                        "{",
                        "    TransferShip(machpella, GalaxyStar(TortugatzId));",
                        "    ShipJoinToScript(machpella, 'Mod_ShuKlissan.Machpella.MachpellaWaitInTortugatzState');",
                        "    ShipOwner(machpella, PirateClan);",
                        "    ShipCustomFaction(machpella, 'SubFactionKlissan');",
                        "    OrderLock(machpella, 0);",
                        "    SetData(0, 0, machpella);",
                        "    SetData(0, 1, machpella);",
                        "    SetData(0, 2, machpella);",
                        "    SetData(0, 3, machpella);",
                        "    HullHP(machpella, 'To100');",
                        "}",
                        "ShipDeleteCustomShipInfo(machpella, 'ShipImmortalInfo');",
                        "NoTargetToShip(machpella, 5);",
                        "RelationToRanger(machpella, Player(), 0);",
                        "ChangeState('MachpellaAttackOnPlayerState', machpella);",
                        "",
                        "//Также делаем враждебными к пиратам все случайно оказавшиеся в Тортугаце в этот момент нейролинки",
                        "dword cur_star = ShipStar(Player());",
                        "for(int i = 0; i < StarShips(cur_star); i = i + 1)",
                        "{",
                        "    dword cur_ship = StarShips(cur_star, i);",
                        "    if(ShipType(cur_ship) != 'Neurolink') continue;",
                        "",
                        "    RelationToRanger(cur_ship, Player(), 0);",
                        "    NoTargetToShip(cur_ship, 5);",
                        "    ChangeState('NeurolinksAttackOnPlayerState', cur_ship);",
                        "}",
                        "",
                        "Ether(3, 'Specagent.AlakayKilled', \"Секретный объект Хандлер и Махпелла подлежат немедленному уничтожению.\");",
                        "KlissanInvasion['KlissansMustBeDestroyed'] = 2;",
                        "KlissanInvasion['EndingSequenceIsStarted'] = 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 730,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 224,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(0);",
                        "OrderTakeOff(Player());",
                        "OrderLock(Player(), 0);",
                        "NoJump(0);",
                        "",
                        "dword cur_hole = CreateKlissanHole(GalaxyStar(TortugatzId), GalaxyStar(NifigatzId), GroupToShip(Machpella));",
                        "HoleTurnCreate(cur_hole, CurTurn() - 300); //Должна закрыться сразу же, но поскольку на ней будут висеть приказы прыжка от Хандлера и махпеллы - подождёт",
                        "HoleMap(cur_hole, 'NoEntry');",
                        "",
                        "dword handler = GroupToShip(Handler);",
                        "cur_star = ShipStar(handler);",
                        "OrderJumpHole(handler, cur_hole);",
                        "ShipOrderData1(handler, 65535); //Будут уничтожены сразу после ухода в гипер, хотя висеть в гипере 179 (5 883 247) лет - тоже не подарок",
                        "ShipOrderData2(handler, 0);",
                        "NoTargetToShip(handler, 1);",
                        "OrderLock(handler, 1);",
                        "NoLanding(handler, 1);",
                        "",
                        "machpella = GroupToShip(Machpella);",
                        "if(ShipStar(machpella) != GalaxyStar(TortugatzId) || !ShipInNormalSpace(machpella))",
                        "{",
                        "    TransferShip(machpella, GalaxyStar(TortugatzId));",
                        "    ShipJoinToScript(machpella, 'Mod_ShuKlissan.Machpella.MachpellaWaitInTortugatzState');",
                        "    ShipOwner(machpella, PirateClan);",
                        "    ShipCustomFaction(machpella, 'SubFactionKlissan');",
                        "    SetData(0, 0, machpella);",
                        "    SetData(0, 1, machpella);",
                        "    SetData(0, 2, machpella);",
                        "    SetData(0, 3, machpella);",
                        "    HullHP(machpella, 'To100');",
                        "}",
                        "",
                        "OrderJumpHole(machpella, cur_hole);",
                        "ShipOrderData1(machpella, 65535); //Будут уничтожены сразу после ухода в гипер, хотя висеть в гипере 179 (5 883 247) лет - тоже не подарок",
                        "ShipOrderData2(machpella, 0);",
                        "NoTargetToShip(machpella, 1);",
                        "OrderLock(machpella, 1);",
                        "",
                        "//Также заранее уничтожаем все случайно оказавшиеся в Тортугаце в этот момент нейролинки",
                        "dword cur_star = ShipStar(Player());",
                        "for(int i = 0; i < StarShips(cur_star); i = i + 1)",
                        "{",
                        "    dword cur_ship = StarShips(cur_star, i);",
                        "    if(ShipType(cur_ship) != 'Neurolink') continue;",
                        "    ShipDestroy(cur_ship, 1);",
                        "}",
                        "",
                        "//В данном случае концовка выставляется сразу, нет нужды дополнительно делать что-то ещё",
                        "Ether(3, 'Specagent.AlakayExiled', \"Срочно прибыть в ближайший Центр рейнджеров.\");",
                        "KlissanInvasion['EndingSequenceIsStarted'] = 1;",
                        "KlissanInvasion['PlotEnding'] = 'Specagent.AlakayExiled';"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 670,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 225,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(0);",
                        "OrderTakeOff(Player());",
                        "OrderLock(Player(), 0);",
                        "NoJump(0);",
                        "",
                        "dword handler = GroupToShip(Handler);",
                        "ShipDeleteCustomShipInfo(handler, 'ShipImmortalInfo');",
                        "NoTargetToShip(handler, 5);",
                        "RuinsChangeType(handler, t_SB);",
                        "RelationToRanger(handler, Player(), 0);",
                        "ChangeState('HandlerAttackOnPlayerState', handler);",
                        "NoLanding(handler, 1);",
                        "",
                        "machpella = GroupToShip(Machpella);",
                        "if(ShipStar(machpella) != GalaxyStar(TortugatzId) || !ShipInNormalSpace(machpella))",
                        "{",
                        "    TransferShip(machpella, GalaxyStar(TortugatzId));",
                        "    ShipJoinToScript(machpella, 'Mod_ShuKlissan.Machpella.MachpellaWaitInTortugatzState');",
                        "    ShipOwner(machpella, PirateClan);",
                        "    ShipCustomFaction(machpella, 'SubFactionKlissan');",
                        "    OrderLock(machpella, 0);",
                        "    SetData(0, 0, machpella);",
                        "    SetData(0, 1, machpella);",
                        "    SetData(0, 2, machpella);",
                        "    SetData(0, 3, machpella);",
                        "    HullHP(machpella, 'To100');",
                        "}",
                        "ShipDeleteCustomShipInfo(machpella, 'ShipImmortalInfo');",
                        "NoTargetToShip(machpella, 5);",
                        "RelationToRanger(machpella, Player(), 0);",
                        "ChangeState('MachpellaAttackOnPlayerState', machpella);",
                        "",
                        "//Также делаем враждебными к пиратам все случайно оказавшиеся в Тортугаце в этот момент нейролинки",
                        "dword cur_star = ShipStar(Player());",
                        "for(int i = 0; i < StarShips(cur_star); i = i + 1)",
                        "{",
                        "    dword cur_ship = StarShips(cur_star, i);",
                        "    if(ShipType(cur_ship) != 'Neurolink') continue;",
                        "",
                        "    RelationToRanger(cur_ship, Player(), 0);",
                        "    NoTargetToShip(cur_ship, 5);",
                        "    ChangeState('NeurolinksAttackOnPlayerState', cur_ship);",
                        "}",
                        "",
                        "Ether(3, 'Specagent.AlakayKilled', \"Секретный объект Хандлер и Махпелла подлежат немедленному уничтожению.\");",
                        "KlissanInvasion['KlissansMustBeDestroyed'] = 2;",
                        "KlissanInvasion['EndingSequenceIsStarted'] = 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 226,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(0);",
                        "OrderTakeOff(Player());",
                        "OrderLock(Player(), 0);",
                        "NoJump(0);",
                        "",
                        "NoComeKlingToStar(GalaxyStar(TortugatzId), 0); //Начинается битва за Тортугац",
                        "",
                        "dword handler = GroupToShip(Handler);",
                        "NoLanding(handler, 1);",
                        "//Хандлер теперь за Коалицию",
                        "RuinsChangeType(handler, t_SB);",
                        "ShipOwner(handler, ShipPilotRace(handler));",
                        "//Чтобы залетевшие в систему военные перестали ломать Хандлер и махпеллу",
                        "for(int i = 0; i < StarShips(cur_star); i = i + 1)",
                        "{",
                        "    dword cur_ship = StarShips(cur_star, i);",
                        "    if(RelationToShip(cur_ship, handler) > 9) continue;",
                        "    if(ShipGetBad(cur_ship) != handler) continue;",
                        "    if(ShipStanding(cur_ship) <= 4) continue;",
                        "    if(ShipStanding(cur_ship) == 9) continue;",
                        "",
                        "    ShipSetBad(cur_ship, 0);",
                        "    ShipFreeFlight(cur_ship);",
                        "}",
                        "",
                        "machpella = GroupToShip(Machpella);",
                        "if(StateIs(machpella, 'MachpellaWaitInTortugatzState'))",
                        "{",
                        "    ShipOwner(machpella, ShipPilotRace(machpella));",
                        "    //Корректируем текущий ShipStanding для рейнджера-махпеллы",
                        "    ShipKillFactionInCurSystem(machpella, 2, ShipKillFactionInCurSystem(machpella, 0) + 1);",
                        "    ShipKillFactionInCurSystem(machpella, 0, 0);",
                        "",
                        "    for(i = 0; i < StarShips(cur_star); i = i + 1)",
                        "    {",
                        "        cur_ship = StarShips(cur_star, i);",
                        "        if(RelationToRanger(cur_ship, machpella) > 9) continue;",
                        "        if(ShipStanding(cur_ship) <= 4) continue;",
                        "        if(ShipStanding(cur_ship) == 9) continue;",
                        "",
                        "        if(ShipTypeN(cur_ship) != t_Warrior) RelationToRanger(cur_ship, machpella, 100);",
                        "        else RelationToRanger(GetShipHomePlanet(cur_ship), machpella, 100);",
                        "",
                        "        ShipSetBad(cur_ship, 0);",
                        "        ShipFreeFlight(cur_ship);",
                        "    }",
                        "",
                        "    cur_ship = ShipGetBad(machpella);",
                        "    if(cur_ship)",
                        "    {",
                        "        if(ShipStanding(cur_ship) <= 4)",
                        "        {",
                        "            ShipSetBad(machpella, 0);",
                        "            ShipFreeFlight(machpella);",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "Ether(3, 'Specagent.GalaxyFreed', \"Истребить остатки доминаторов.\");",
                        "KlissanInvasion['KlissanControl.WasReceived'] = 1;",
                        "KlissanInvasion['NextNeurolinkReadyTurn'] = 0; //Сбрасываем таймер до спавна нейролинка, чтобы игрок мог, при желании, тут же начать атаку",
                        "",
                        "KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] = 1;",
                        "KlissanInvasion['EndingSequenceIsStarted'] = 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 157,
                    "#": 227,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "check = 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -980,
                    "Pos.y": -380,
                    "Parent": -1,
                    "#": 228,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "cur_ruin = GroupToShip(CoalitionAssaultWB); //От греха подальше буду брать адрес напрямую, а не из GetTalkShip()",
                        "",
                        "//Первый диалог с нападающей на Тортугац ВБ, вызывается из стейта этой ВБ",
                        "if(!GetData(3, cur_ruin))",
                        "{",
                        "    cur_ruin = GroupToShip(Handler);",
                        "    StarMapCenterView(CoordX(cur_ruin), CoordY(cur_ruin));",
                        "",
                        "    tstr1 = '</color>' + \"Рейнджер <Player>, вражеский научный объект <clr>Хандлер<clrEnd> уходит у нас из-под носа! Немедленно взорвите объект, кого возможно - возьмите в плен.\";",
                        "    tstr2 = '</color>' + \"Вас понял!\";",
                        "}",
                        "//Второй диалог с нападающей на Тортугац ВБ, вызывается из стейта этой ВБ сразу после уничтожения Хандлера, либо махпеллы",
                        "else if(GetData(3, cur_ruin) == 1)",
                        "{",
                        "    cur_ruin = GroupToShip(Handler);",
                        "    //Если первой уничтожили махпеллу",
                        "    if(cur_ruin)",
                        "    {",
                        "        cur_ruin = GroupToShip(Machpella);",
                        "        tstr1 = '</color>' + \"Так держать, <Player>! Уничтожением клисанского мозгового центра вы официально положили конец вторжению клисан в наш рукав Галактики. Безусловно, этот день войдет в историю!<br>Следующая цель - объект под кодовым наименованием <clr>Хандлер<clrEnd>. Добьем врага до конца!\";",
                        "        StarMapCenterView(CoordX(cur_ruin), CoordY(cur_ruin));",
                        "    }",
                        "    //Если первым уничтожили Хандлер",
                        "    else",
                        "    {",
                        "        cur_ruin = GetTalkShip();",
                        "        tstr1 = '</color>' + \"Так держать, <Player>! Уничтожением секретного объекта вы положили конец жизням множества гнусных предателей, натравивших для нас клисан ради собственных интересов. Безусловно, этот день войдет в историю!<br>Следующая цель - <clr>Махпелла<clrEnd>. Добьем врага до конца!\";",
                        "        StarMapCenterView(CoordX(cur_ruin), CoordY(cur_ruin));",
                        "    }",
                        "",
                        "    tstr2 = '</color>' + \"Так точно!\";",
                        "}",
                        "//Третий диалог с нападающей на Тортугац ВБ, вызывается из стейта этой ВБ сразу после уничтожения и Хандлера, и махпеллы",
                        "else //if(GetData(3, cur_ruin) == 2)",
                        "{",
                        "    for(i = GroupCount(CoalitionAssaultWarriors) - 1; i >= 0; i = i - 1)",
                        "    {",
                        "        ShipOut(GroupShip(CoalitionAssaultWarriors, i));",
                        "    }",
                        "",
                        "    KlissanInvasion['PlotEnding'] = 'Coalition.TortugatzCaptured';",
                        "",
                        "    tstr1 = '</color>' + \"Благодарим за проявленный героизм, рейнджер! Сегодня, благодаря гениальности наших ученых и вашей доблести, мы закончили Третью клисанскую войну и одержали убедительную победу над пиратскими интервентами. Выжившие корсары обезглавлены и деморализованы, и теперь окончательная зачистка всех систем от их присутствия - всего лишь вопрос времени. Все граждане Коалиции сегодня салютуют вам! Отправляйтесь в ближайший центр рейнджеров за заслуженной наградой.\";",
                        "    tstr2 = '</color>' + \"Служу Коалиции!\";",
                        "",
                        "    AddPlanetNews(\"Граждане Коалиции Разумных Рас!<br><clr><clrEnd><br>Наступил великий день<br>В ходе невероятно авантюрной операции адмирала Дурдыма штурмовое подразделение Космических Сил Межзвёздной Коалиции смогло вычислить координаты центра управления действиями мятежников, называвших себя Анархистским Братством, более известным как Пиратский Клан, и, сходу вступив в бой с превосходящими силами врага, наголову разгромить их и обнаружить, что в руках мятежника оказался сумасшедший гений, сумевший подчинить своей воле клисан и использовавший клисан на пользу разбойникам.<br><clr><clrEnd><br>Это не остановило наших бравых защитников, разгромивших научный комплекс безумного учёного и запустивших процесс самоликвидации клисан. А это значит, что наступил великий день - день окончания Третьей Клисанской войны, и конец анархистскому мятежу. Отныне над Галактикой будет развеваться великое знамя Коалиции - знамя свободы рас и мира между расами. Виват!\",56);",
                        "    NewsAdd(\"Граждане Коалиции Разумных Рас!<br><clr><clrEnd><br>Наступил великий день<br>В ходе невероятно авантюрной операции адмирала Дурдыма штурмовое подразделение Космических Сил Межзвёздной Коалиции смогло вычислить координаты центра управления действиями мятежников, называвших себя Анархистским Братством, более известным как Пиратский Клан, и, сходу вступив в бой с превосходящими силами врага, наголову разгромить их и обнаружить, что в руках мятежника оказался сумасшедший гений, сумевший подчинить своей воле клисан и использовавший клисан на пользу разбойникам.<br><clr><clrEnd><br>Это не остановило наших бравых защитников, разгромивших научный комплекс безумного учёного и запустивших процесс самоликвидации клисан. А это значит, что наступил великий день - день окончания Третьей Клисанской войны, и конец анархистскому мятежу. Отныне над Галактикой будет развеваться великое знамя Коалиции - знамя свободы рас и мира между расами. Виват!\");",
                        "    Sound('Sound.NewMsg');",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 164,
                    "#": 231,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = -1;",
                        "Ether(4, 'Coalition.TortugatzCaptured', CT('FormInfo.KlissansInfo.Ending_Coalition_TortugatzCaptured'));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 165,
                    "#": 232,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(KlissanInvasion['AllyMachpellaStage'] == 7) KlissanInvasion['PlotDone'] = 10;",
                        "else KlissanInvasion['PlotDone'] = 8;",
                        "StartVideo('data/outro.vdo', 'Outro');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 167,
                    "#": 235,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotEnding'] = 'Specagent.GalaxyFreed'; //Записываю их сюда чисто на всякий случай",
                        "KlissanInvasion['PlotDone'] = 5;",
                        "StartVideo('data/outro.vdo', 'Outro');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 168,
                    "#": 236,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] = 5;",
                        "Ether(3, 'Specagent.GalaxyFreed', \"Окончательно расправиться с пиратской угрозой.\");"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 169,
                    "#": 237,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotEnding'] = 'Specagent.GalaxyFreed'; //Записываю их сюда чисто на всякий случай",
                        "KlissanInvasion['PlotDone'] = 4;",
                        "StartVideo('data/outro.vdo', 'Outro');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 90,
                    "Parent": 170,
                    "#": 238,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GotoGov(0);",
                        "",
                        "if(ShipOnSidePirateClan(Player()))",
                        "{",
                        "    ShipOwner(Player(), ShipPilotRace(Player()));",
                        "}",
                        "",
                        "//Просто мгновенный перенос игрока к выходу из гипера в нужной системе",
                        "//MakeShipEnterStar(Player(), GalaxyStar(NifigatzId), ShipStar(Player()), 10);",
                        "//FormChange('Jump');",
                        "",
                        "//Отправляем махпеллу в Нифигац и выставляем ей стейт ожидания игрока (чтобы потом на него напасть)",
                        "dword machpella = GroupToShip(Machpella);",
                        "//MakeShipEnterStar(machpella, GalaxyStar(NifigatzId), ShipStar(machpella), 0);",
                        "TransferShip(machpella, GalaxyStar(NifigatzId));",
                        "RelationToRanger(machpella, Player(), 0);",
                        "ShipDeleteCustomShipInfo(machpella, 'ShipImmortalInfo');",
                        "NoTargetToShip(machpella, 0);",
                        "",
                        "dword handler = GroupToShip(Handler);",
                        "ShipOut(handler);",
                        "ShipDeleteCustomShipInfo(handler, 'ShipImmortalInfo');",
                        "OrderNone(handler);",
                        "OrderLock(handler, 1);",
                        "TransferShip(handler, StarPlanets(GalaxyStar(People), 0)); //На Меркурий",
                        "ShipDestroy(handler, 1);",
                        "KlissanInvasion['KlissanControl.WasReceived'] = 0;",
                        "",
                        "Ether(3, 'Specagent.GalaxyFreed', \"Ликвидировать махпеллу.\");",
                        "KlissanInvasion['SpecagentFreedTheGalaxyEndingStage'] = 3;",
                        "",
                        "//По нажатии данного ответа игрок моментально взлетит, и будет отправлен в систему с махпеллой",
                        "ShipDestination(Player(), GalaxyStar(NifigatzId));",
                        "OrderTakeOff(Player());",
                        "ExtremalTakeOff();",
                        "",
                        "//Подстановки пустого диалога ниже в данном случае не обязательны,",
                        "//но могут быть полезны на случай, если нужно будет снять с ответа тэг takeoff"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 171,
                    "#": 239,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = 6;",
                        "StartVideo('data/outro.vdo', 'Outro');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 172,
                    "#": 240,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = -1;",
                        "if(KlissanInvasion['AllyMachpellaStage'] == 4) CustomWin(CT('FormGameEnd.Ending_PirateClan_GalaxyConquered_KlissanCivilWar'));",
                        "else CustomWin(CT('FormGameEnd.Ending_PirateClan_GalaxyConquered'));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 174,
                    "#": 243,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = 2;",
                        "StartVideo('data/outro.vdo', 'Outro');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 175,
                    "#": 244,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = -1;",
                        "Ether(4, 'Specagent.AlakayKilled', CT('FormInfo.KlissansInfo.Ending_Specagent_AlakayKilled'));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 176,
                    "#": 245,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(KlissanInvasion['AllyMachpellaStage'] == 7) KlissanInvasion['PlotDone'] = 9;",
                        "else KlissanInvasion['PlotDone'] = 7;",
                        "StartVideo('data/outro.vdo', 'Outro');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 177,
                    "#": 246,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = 3;",
                        "StartVideo('data/outro.vdo', 'Outro');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 247,
                    "#": 249,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = -1;",
                        "CustomWin(CT('FormGameEnd.Ending_PirateClan_AlakayKilled_DomiksAlive_CoalitionDead'), 8 + ShipPilotRace(Player()));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 248,
                    "#": 250,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = -1;",
                        "CustomWin(CT('FormGameEnd.Ending_PirateClan_AlakayKilled_DomiksAlive_CoalitionAlive'), 2);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 180,
                    "#": 251,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = 1;",
                        "Ether(4, 'PirateClan.AlakayKilled', \"Вы приняли решение уничтожить Алакая, сочтя его слишком опасным. Остальные пираты поддержали ваше решение, тем самым лишь укрепив авторитет нового Верховного Барона - ведь Пиратский Клан лучше всего говорит на языке силы, которую вы сумели продемонстрировать абсолютно беспрецедентно.\");"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 181,
                    "#": 252,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = 1;",
                        "StartVideo('data/outro.vdo', 'Outro');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 253,
                    "#": 255,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = -1;",
                        "CustomWin(CT('FormGameEnd.Ending_PirateClan_AlakayKilled_DomiksDead_CoalitionAlive'));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 254,
                    "#": 256,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = -1;",
                        "CustomWin(CT('FormGameEnd.Ending_PirateClan_AlakayKilled_DomiksDead_CoalitionDead'));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 344,
                    "#": 257,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "check = 2;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 119,
                    "#": 258,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Вручаем игроку готовый ментальный коммуникатор",
                        "ShipAddCustomShipInfo(Player(), 'ShuKlissan_MentalCommunicator');",
                        "KlissanInvasion['MentalCommunicator.WasReceived'] = 1;",
                        "Sound('Sound.QuestOk');",
                        "",
                        "//Переберём галактику и уберём клисанам NoScanToShip",
                        "for(i=0;GalaxyStars()>i;i=i+1) {",
                        "    tdwd1 = GalaxyStar(i);",
                        "    for(j=0;StarShips(tdwd1)>j;j=j+1) {",
                        "        if(ShipInCurScript(StarShips(tdwd1,j))) {",
                        "            if(NoScanToShip(StarShips(tdwd1,j))) NoScanToShip(StarShips(tdwd1,j),0);",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 120,
                    "#": 259,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Вручаем игроку готовый Z-трансмиттер",
                        "cur_item = CreateQuestItem('ShuKlissan_ZTransmitter', ShipPilotRace(cur_ruin));",
                        "AddItemToShip(Player(), cur_item);",
                        "KlissanInvasion['ZTransmitter.WasReceived'] = 1;",
                        "Sound('Sound.QuestOk');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 0,
                    "Parent": 192,
                    "#": 260,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['PlotDone'] = -1;",
                        "EndGame(7); //Выводит на экран пиратскую концовку"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 194,
                    "#": 261,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "clan_win_choice = 1; //Маркер, что одна из концовок в пиратской ветке из HD была выполнена",
                        "",
                        "pirate_planet_unlocked = 1; //Маркер разблокировки Роджерии для возможности посадки игрока",
                        "NoLanding(PlanetPirateClan(), 0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 196,
                    "#": 262,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(!CoalitionDefeated()) EndGame(5);",
                        "else",
                        "{",
                        "    if(!DomiksDefeated()) EndGame(11);",
                        "    else EndGame(13);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 199,
                    "#": 263,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(!CoalitionDefeated()) EndGame(6);",
                        "else",
                        "{",
                        "    if(!DomiksDefeated()) EndGame(11);",
                        "    else EndGame(13);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 266,
                    "#": 265,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Записываем текущий ГТУ в локальную переменную",
                        "GTL = GalaxyTechLevel();",
                        "",
                        "//Выставляем маркер о том, что был подключён мод EvoArmada (может быть подключён во время партии)",
                        "if(!EvoArmadaInit)",
                        "{",
                        "    if(BlockExist('Script.Mod_EvoArmada')) EvoArmadaInit = 1;",
                        "    if(BlockExist('Script.Mod_EvoDreadnought')) EvoArmadaInit = 1;",
                        "}",
                        "",
                        "//Автоматическое обновление характеристик кастомных орудий",
                        "//Срабатывает, только если параметр StatsVersion для ShuKlissan был изменён",
                        "if(gunUpdateCheck != CT('Items.Weapon.CustomWeapon.StatsVersion.ShuKlissan'))",
                        "{",
                        "    InventShuKlissanCustomGuns();",
                        "    gunUpdateCheck = CT('Items.Weapon.CustomWeapon.StatsVersion.ShuKlissan');",
                        "}",
                        "",
                        "//Хандлер и махпелла создаются ещё в ините, но добавить их в группы оттуда мы не можем",
                        "//Поэтому добавляем их в группы из тёрна на первом же ходу после запуска скрипта",
                        "if(!KlissanInvasion['HandlerAndMachpellaSpawned'])",
                        "{",
                        "    cur_ruin = IdToShip(KlissanInvasion['HandlerId']);",
                        "    OrderLock(cur_ruin, 0);",
                        "    ShipJoin(Handler, cur_ruin);",
                        "    cur_ship = IdToShip(KlissanInvasion['MachpellaId']);",
                        "    OrderLock(cur_ship, 0);",
                        "    ShipJoin(Machpella, cur_ship);",
                        "    ShipCustomFaction(cur_ship, 'SubFactionKlissan');",
                        "",
                        "    KlissanInvasion['HandlerAndMachpellaSpawned'] = 1;",
                        "}",
                        "",
                        "//Во-первых, никак раньше срока это не запустится, то есть исследования, что случится на бородатом году",
                        "//Во-вторых, мне лень мотать пулемётную ленту соседнего блока кода",
                        "if(!CoalitionDefeated() && !PirateWin()) {",
                        "    if(KlissanInvasion['MentalCommunicator.WasReceived']) {",
                        "        if(KlissanInvasion['AlliedMahpellaTurns'] > 0) KlissanInvasion['AlliedMahpellaTurns'] = KlissanInvasion['AlliedMahpellaTurns'] - 1;",
                        "        else {",
                        "            if(!KlissanInvasion['AllyMachpellaStage']) {",
                        "                //Найдём систему с научкой недалеко от игрока",
                        "                cur_star = -1;",
                        "                for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                    cur_star = StarNearbyStars(ShipStar(Player()),i);",
                        "                    if(!StarRuins(cur_star,'SB')) continue;",
                        "                    else break;",
                        "                }",
                        "",
                        "                if(~cur_star) {",
                        "                    KlissanInvasion['AllyMachpellaStage'] = 1;",
                        "",
                        "                    cur_ship = SpawnAllyMachpella(GalaxyStar(TortugatzId));",
                        "                    hole = CreateKlissanHole(cur_star, GalaxyStar(TortugatzId), cur_ship);",
                        "                    OrderJumpHole(cur_ship, hole);",
                        "                    SetData(Id(hole),0,cur_ship);",
                        "                    //Не забываем спрей от комаров",
                        "                    NoComeKlingToStar(cur_star,1);",
                        "                }",
                        "                else {",
                        "                    //Система не найдена, ставим дальше таймер",
                        "                    KlissanInvasion['AlliedMahpellaTurns'] = Rnd(120,150);",
                        "                }",
                        "            }",
                        "            else if(KlissanInvasion['AllyMachpellaStage'] == 1) {",
                        "                if(ShipInNormalSpace(GroupToShip(MahpellaAlly))) {",
                        "                    if(ShipStar(GroupToShip(MahpellaAlly)) == GalaxyStar(TortugatzId)) {",
                        "                        OrderJumpHole(GroupToShip(MahpellaAlly),IdToHole(GetData(0,cur_ship)));",
                        "                    }",
                        "                    else {",
                        "                        CustomEther('GalaxyAlert', 7, 'ShuKlissan_AllyMahpellaCame',\"Внимание всем рейнджерам!\"+ CT('FormInfo.br')+\"В системе\"+' '+Name(ShipStar(GroupToShip(MahpellaAlly)))+' '+\"замечен новый представитель клисанской формы жизни. Объявлена тревога! Всем рейнджерам прибыть в зону оцепления.\",56);",
                        "                        Sound('Sound.NewMsg');",
                        "                        KlissanInvasion['AllyMachpellaStage'] = 2;",
                        "                        for(i=0;i<Rnd(12,17);i=i+1) SpawnAllyKlissan(PlanetPirateClan());",
                        "                    }",
                        "                }",
                        "            }",
                        "            else if(KlissanInvasion['AllyMachpellaStage'] == 2) {",
                        "                for(i=0;StarShips(ShipStar(GroupToShip(MahpellaAlly)))>i;i=i+1) {",
                        "                    cur_ship = StarShips(ShipStar(GroupToShip(MahpellaAlly)),i);",
                        "                    if(ShipTypeN(cur_ship) == t_Warrior) ShipJoin(GroupWaiting,cur_ship);",
                        "                }",
                        "                KlissanInvasion['MachpellaWaiting'] = KlissanInvasion['MachpellaWaiting'] + 1;",
                        "",
                        "                //Не заставляйте женщину ждать СЛИШКОМ долго",
                        "                if(KlissanInvasion['MachpellaWaiting'] >= 1825) {",
                        "                    KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "                    ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "                    for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "                        ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "                    }",
                        "                    AllyMahpellaAttacked();",
                        "                }",
                        "            }",
                        "            else if(KlissanInvasion['AllyMachpellaStage'] == 3) {",
                        "                //Считаем, скока можно клисаней",
                        "                i = 40 + round(ControlledSystems(0));",
                        "                i = i + KlissanInvasion['KlissanDiffLevel']/50;",
                        "",
                        "                //Доспавниваем клисаней",
                        "                if(GroupCount(KlissanAlly) + GroupCount(KlissanAllyRaid) < i) {",
                        "                    for(j=0;j<(i - GroupCount(KlissanAlly) - GroupCount(KlissanAllyRaid));j=j+1) {",
                        "                        SpawnAllyKlissan(PlanetPirateClan());",
                        "                    }",
                        "                }",
                        "",
                        "                //Если в личной группе Махпеллы накопилось слишком много кораблей, то она отправляет их в атаку",
                        "                if(GroupCount(KlissanAlly) > 35) {",
                        "                    tint3 = GroupCount(KlissanAlly) - 15;",
                        "                    //В первую очередь нужно защитить",
                        "                    for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                        cur_star = GalaxyStar(i);",
                        "                        if(StarOwner(cur_star) || StarCustomFaction(cur_star) != '') continue;",
                        "                        if(!StarBattle(cur_star)) continue;",
                        "",
                        "                        for(j=tint3;j>(tint3-18);j=j-1) {",
                        "                            cur_ship = GroupShip(KlissanAlly,j);",
                        "                            ShipJoin(KlissanAllyRaid,cur_ship);",
                        "                            ChangeState('StateDefend',cur_ship);",
                        "                            SetData(3,i);",
                        "                        }",
                        "                        tint3 = tint3 - 18;",
                        "",
                        "                        if(tint3 < 15) break;",
                        "                    }",
                        "",
                        "                    //Если ещё остались клисаны в резерве, то отправляем их в атаку",
                        "                    if(tint3 > 20) {",
                        "                        for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                            cur_star = GalaxyStar(i);",
                        "                            if(!StarOwner(cur_star) && StarCustomFaction(cur_star) != '') continue;",
                        "",
                        "                            for(j=tint3;j>(tint3-20);j=j-1) {",
                        "                                cur_ship = GroupShip(KlissanAlly,j);",
                        "                                ShipJoin(KlissanAllyRaid,cur_ship);",
                        "                                ChangeState('StateAttack',cur_ship);",
                        "                                SetData(3,i);",
                        "                            }",
                        "                            tint3 = tint3 - 20;",
                        "",
                        "                            if(tint3 < 20) break;",
                        "                        }",
                        "                    }",
                        "                }",
                        "",
                        "                //Если игрок пошёл по сюжетке, то Махпелла отправляется туда",
                        "                if(ShipInStar(Player(),GalaxyStar(TortugatzId))) {",
                        "                    KlissanInvasion['AllyMachpellaStage'] = 5;",
                        "                    cur_ship = GroupToShip(MahpellaAlly);",
                        "                    dword hole = CreateKlissanHole(ShipStar(cur_ship), GalaxyStar(TortugatzId), cur_ship);",
                        "                    OrderJumpHole(cur_ship, hole);",
                        "                    SetData(Id(hole),0,cur_ship);",
                        "                }",
                        "            }",
                        "            else if(KlissanInvasion['AllyMachpellaStage'] == 4) {",
                        "                if(GroupCount(MahpellaAlly)) {",
                        "                    //Злая, спавнит новых клисаней!",
                        "                    if(StarShips(ShipStar(GroupToShip(MahpellaAlly))) < 100) {",
                        "                        if(CurTurn() % 80 == 0) {",
                        "                            i = Rnd(9,14);",
                        "                            for(j=0;j<i;j=j+1) SpawnAllyKlissan(PlanetPirateClan());",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "            else if(KlissanInvasion['AllyMachpellaStage'] == 5) {",
                        "                //Махпелла литит давать люля-кебаб",
                        "                if(ShipStar(GroupToShip(MahpellaAlly)) != GalaxyStar(TortugatzId)) {",
                        "                    OrderJumpHole(GroupToShip(MahpellaAlly),IdToHole(GetData(0,cur_ship)));",
                        "                    SetData(0,1);",
                        "                }",
                        "                else {",
                        "                    //Махпелла прилетела и вкинула своих",
                        "                    if(!GetData(1)) {",
                        "                        SetData(1,1);",
                        "                        i = Rnd(9,14);",
                        "                        for(j=0;j<i;j=j+1) SpawnAllyKlissan(PlanetPirateClan());",
                        "                    }",
                        "                    else if(CurTurn() % 80 == 0) {",
                        "                        //Продолжает вкидывать своих, чтобы помочь игроку",
                        "                        i = Rnd(9,14);",
                        "                        for(j=0;j<i;j=j+1) SpawnAllyKlissan(PlanetPirateClan());",
                        "                    }",
                        "                }",
                        "            }",
                        "            else if(KlissanInvasion['AllyMachpellaStage'] == 6) {",
                        "                //Настолько недолго, что недолго",
                        "            }",
                        "            else if(KlissanInvasion['AllyMachpellaStage'] == 7) {",
                        "                //Пока Коалиция не победила совсем, Махпелла продолжает помогать военно",
                        "                if(!DomiksDefeated() && ControlledSystems(2)) {",
                        "                    //Считаем, скока можно клисаней",
                        "                    i = 40 + round(ControlledSystems(0));",
                        "                    i = i + KlissanInvasion['KlissanDiffLevel']/50;",
                        "",
                        "                    //Доспавниваем клисаней",
                        "                    if(GroupCount(KlissanAlly) + GroupCount(KlissanAllyRaid) < i) {",
                        "                        for(j=0;j<(i - GroupCount(KlissanAlly) - GroupCount(KlissanAllyRaid));j=j+1) {",
                        "                            SpawnAllyKlissan(PlanetPirateClan());",
                        "                        }",
                        "                    }",
                        "",
                        "                    //Если в личной группе Махпеллы накопилось слишком много кораблей, то она отправляет их в атаку",
                        "                    if(GroupCount(KlissanAlly) > 35) {",
                        "                        tint3 = GroupCount(KlissanAlly) - 15;",
                        "                        //В первую очередь нужно защитить",
                        "                        for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                            cur_star = GalaxyStar(i);",
                        "                            if(StarOwner(cur_star) || StarCustomFaction(cur_star) != '') continue;",
                        "                            if(!StarBattle(cur_star)) continue;",
                        "",
                        "                            for(j=tint3;j>(tint3-18);j=j-1) {",
                        "                                cur_ship = GroupShip(KlissanAlly,j);",
                        "                                ShipJoin(KlissanAllyRaid,cur_ship);",
                        "                                ChangeState('StateDefend',cur_ship);",
                        "                                SetData(3,i);",
                        "                            }",
                        "                            tint3 = tint3 - 18;",
                        "",
                        "                            if(tint3 < 15) break;",
                        "                        }",
                        "",
                        "                        //Если ещё остались клисаны в резерве, то отправляем их в атаку",
                        "                        if(tint3 > 20) {",
                        "                            for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                                cur_star = GalaxyStar(i);",
                        "                                if(!StarOwner(cur_star) && StarCustomFaction(cur_star) != '') continue;",
                        "",
                        "                                for(j=tint3;j>(tint3-20);j=j-1) {",
                        "                                    cur_ship = GroupShip(KlissanAlly,j);",
                        "                                    ShipJoin(KlissanAllyRaid,cur_ship);",
                        "                                    ChangeState('StateAttack',cur_ship);",
                        "                                    SetData(3,i);",
                        "                                }",
                        "                                tint3 = tint3 - 20;",
                        "",
                        "                                if(tint3 < 20) break;",
                        "                            }",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 312,
                    "#": 313,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Data0 - Id планеты награждения",
                        "//Data1 ---",
                        "//Data2 ---",
                        "//Data3 ---",
                        "",
                        "//Отправляем корабли NPC без других скриптовых групп за наградой, после освобождения системы от клисан",
                        "OrderLock(CurShip, 1);",
                        "",
                        "dword reward_planet = IdToPlanet(GetData(0));",
                        "if(GetShipPlanet(CurShip) != reward_planet)",
                        "{",
                        "    OrderLanding(CurShip, reward_planet);",
                        "}",
                        "else",
                        "{",
                        "    //Система Коалиции",
                        "    if(!StarOwner(ShipStar(CurShip)))",
                        "    {",
                        "        int race = PlanetRace(reward_planet);",
                        "        int rand = RndObject(1, 3, reward_planet);",
                        "        if(rand == 1)",
                        "        {",
                        "            GiveRewardByNom(CurShip, 13); //Орден достоинства",
                        "        }",
                        "        else if(rand == 2)",
                        "        {",
                        "            GiveRewardByNom(CurShip, 33); //Алмазная гильза",
                        "        }",
                        "        else",
                        "        {",
                        "            if(race == Maloc)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 14); //Гвардейский вымпел",
                        "            }",
                        "            else if(race == Peleng)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 13); //Орден достоинства",
                        "            }",
                        "            else if(race == People)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 18); //Золотая звезда героя",
                        "            }",
                        "            else if(race == Fei)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 20); //Ашианская лента",
                        "            }",
                        "            else if(race == Gaal)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 21); //Большой англум",
                        "            }",
                        "        }",
                        "",
                        "        //3 гту - 1500 опыта",
                        "        //8 гту - 4000 опыта",
                        "        int expir = PortionInDiapason(GalaxyDiffLevels(7), 50, 500, 150, 45);",
                        "        expir = GTL * 50;",
                        "        expir = RndObject(expir * 80 / 100, expir * 120 / 100, reward_planet);",
                        "        expir = expir * 10;",
                        "        ShipFreeExp(CurShip, ShipFreeExp(CurShip) + expir);",
                        "        SetShipExpByType(CurShip, GetShipExpByType(CurShip) + expir, 0);",
                        "    }",
                        "    //Система клана",
                        "    else",
                        "    {",
                        "        race = PlanetRace(reward_planet);",
                        "        rand = RndObject(1, 2, reward_planet);",
                        "        if(rand == 1)",
                        "        {",
                        "            GiveRewardByNom(CurShip, 13); //Орден достоинства",
                        "        }",
                        "        else",
                        "        {",
                        "            if(race == Maloc)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 0); //Орден Быка",
                        "            }",
                        "            else if(race == Peleng)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 5); //Дух болот",
                        "            }",
                        "            else if(race == People)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 19); //Тройной ореон",
                        "            }",
                        "            else if(race == Fei)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 30); //Айбо-3001",
                        "            }",
                        "            else if(race == Gaal)",
                        "            {",
                        "                GiveRewardByNom(CurShip, 22); //Урановый млеко",
                        "            }",
                        "        }",
                        "",
                        "        //3 гту - 1500 опыта",
                        "        //8 гту - 4000 опыта",
                        "        expir = PortionInDiapason(GalaxyDiffLevels(7), 50, 500, 150, 45);",
                        "        expir = GTL * 50;",
                        "        expir = RndObject(expir * 80 / 100, expir * 120 / 100, reward_planet);",
                        "        expir = expir * 10;",
                        "        ShipFreeExp(CurShip, ShipFreeExp(CurShip) + expir);",
                        "        SetShipExpByType(CurShip, GetShipExpByType(CurShip) + expir, 0);",
                        "    }",
                        "",
                        "    OrderLock(CurShip, 0);",
                        "    if(ShipFindCustomShipInfoByType(CurShip, 'ChangeShipScriptGroupInfo') == -1) ShipOut(CurShip);",
                        "    //На случай, если мы отправляли за наградой корабль из другого скрипта и на нём висит инфошка переключения скриптовой группы",
                        "    else ChangeShipScriptGroupFromInfo(CurShip);",
                        "    ShipFreeFlight(CurShip);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 25,
                    "#": 316,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Стейт для военных, выполняющих захват Тортугаца в силовой концовке за Коалицию",
                        "//Выпускаем военных порезвиться, если база с ними уже прибыла в Тортугац",
                        "if(OrderLock(CurShip))",
                        "{",
                        "    //Военная база прибыла в Тортугац",
                        "    if(!ShipInHyperSpace(CurShip, 1))",
                        "    {",
                        "        OrderLock(CurShip, 0);",
                        "        OrderTakeOff(CurShip);",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 31,
                    "#": 317,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tstr1 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.PlayerNext');",
                        "tstr2 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.PlayerDone');",
                        "",
                        "tstr3 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.KlissanInfo1');",
                        "tstr4 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.KlissanInfo2');",
                        "tstr5 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.KlissanInfo3');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 282,
                    "#": 323,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "int wait_days = KlissanInvasion['KlissanControl.NextMachpellaOrderTurn'] - CurTurn();",
                        "if(!CountIn(Neurolinks, ShipStar(machpella), 1) /*!KlissanInvasion['KlissanControl.StarToAttack']*/) tstr1 = '</color>' + \"Призвать Махпеллу (<wait_days> дней)\";",
                        "else tstr1 = '</color>' + \"Призвать Махпеллу (Махпелла занята организацией атаки)\";"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 50,
                    "#": 324,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(ShipFindCustomShipInfoByType(Player(), 'ShuKlissan_MentalCommunicator') == -1) tstr1 = '</color>' + '...' + \"<br>\" + '...'; //Первую строчку таких символов игровой движок потрёт",
                        "else tstr1 = '</color>' + \"[Передача сигнала кораблю <Name(GetTalkShip())>... ошибка 137<br>Повторение попытки... ошибка 137<br>Повторение попытки... ОК<br>Передача сигнала кораблю <clr>Махпелла<clrEnd>... ошибка 508<br>Повторение попытки... ошибка 508<br>Повторение попытки... ошибка 508<br>Повторение попытки... ошибка 508<br>Вероятная причина ошибки - <clr>сигнал заблокирован с другого конца<clrEnd>]\";",
                        "",
                        "tstr2 = '</color>' + CT('Talk.Exit'); //Конец связи"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 326,
                    "#": 327,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Data0 - таймер до возможности нейролинку отступить за следующим подкреплением в ЧД",
                        "//Data1 - Id ЧД, в которую должен сбежать нейролинк при получении серьёзного урона",
                        "//Data2 - таймер до проведения планового ремонта оборудования на нейролинке",
                        "//Data3 - таймер до рождения следующего клисана на нейролинке (если записать сюда число со знаком минус, то будет считаться строкой заказа на спавн конкретных типов клисан, где каждая цифра в числе - номер типа)",
                        "",
                        "if(!GroupCount(Machpella)) ShipDestroy(CurShip, 1);",
                        "",
                        "dword cur_star = ShipStar(CurShip);",
                        "//Если нейролинк сбегает с поля боя",
                        "if(GetData(1))",
                        "{",
                        "    //Нейролинк направляется к \"отступной\" ЧД",
                        "    if(ShipInNormalSpace(CurShip)) OrderJumpHole(CurShip, IdToHole(GetData(1)));",
                        "    //Нейролинк влетел в \"отступную\" ЧД",
                        "    else",
                        "    {",
                        "        //Обновляем таймер до возможности спавна следующего нейролинка",
                        "        //В теории новый нейролинк могут направить обратно в эту же систему и тогда это сработает как \"отход за подкреплением\"",
                        "        dword back_star = HoleStar1(IdToHole(GetData(1)));",
                        "        MakeShipEnterStar(CurShip, back_star, GalaxyStar(TortugatzId), 2);",
                        "        OrderJumpHole(CurShip, IdToHole(GetData(1))); //Выставит время прыжка на 2",
                        "        ShipOrderData1(CurShip, RndObject(5, 9, CurShip));",
                        "        ShipOrderData2(CurShip, 1); //Вылетит со стороны входа в ЧД",
                        "",
                        "        //Доспавниваем ему на борт нескольких новых клисан в качестве подкрепления",
                        "        cnt = RndObject(PortionInDiapason(KlissanInvasion['KlissanStrength'], 10, 100, 3, 6), PortionInDiapason(KlissanInvasion['KlissanStrength'], 10, 100, 6, 12), CurShip);",
                        "        for(int i = 1; i <= cnt; i = i + 1)",
                        "        {",
                        "            dword new_klissan = SpawnKlissan(PlanetPirateClan(),EgemonCount(ShipStar(CurShip)));",
                        "            SetData(Id(back_star), 0);",
                        "            TransferShip(new_klissan, CurShip);",
                        "        }",
                        "",
                        "        //Как скоро нейролинк сможет снова провернуть фокус с таким отступлением",
                        "        SetData(CurTurn() + RndObject(PortionInDiapason(KlissanInvasion['KlissanStrength'], 10, 100, 60, 30), PortionInDiapason(KlissanInvasion['KlissanStrength'], 10, 100, 120, 60), CurShip), 0);",
                        "        //Также обнуляем маркер целевой ЧД",
                        "        SetData(0, 1);",
                        "        OrderLock(CurShip, 0);",
                        "",
                        "        ArrayAdd(KlissanInvasion['RegroupingNeurolinks'], Id(CurShip), '' + Id(back_star));",
                        "    }",
                        "    exit;",
                        "}",
                        "",
                        "//Не трогаем нейролинк, пока тот совершает прыжок",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "",
                        "//Чиним всё оборудование нейролинка",
                        "if(GetData(2) <= CurTurn())",
                        "{",
                        "    ShipRepairEq(CurShip);",
                        "    SetData(CurTurn() + RndObject(30, 45, CurShip), 2);",
                        "}",
                        "",
                        "//Если подошёл срок, рожаем нового клисана",
                        "if(int(GetData(3)) >= 0)",
                        "{",
                        "    if(GetData(3) <= CurTurn())",
                        "    {",
                        "        int next_spawn = 0;",
                        "        if(KlissansInStar(cur_star) < KlissanInvasion['KlissansInStarLimit'])",
                        "        {",
                        "            new_klissan = SpawnKlissan(PlanetPirateClan(),EgemonCount(ShipStar(CurShip)));",
                        "            ShipJoinToScript(new_klissan, 'Mod_ShuKlissan.KlissanShips.KlissanShipsNormalState');",
                        "            TransferShip(new_klissan, CurShip);",
                        "",
                        "            if(!KlissanInvasion['KlissanControl.WasReceived']) next_spawn = round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 1.5, 0.5) * RndObject(15, 30, CurShip));",
                        "            else next_spawn = round(PortionInDiapason(KlissanInvasion['KlissanStrength'], 1, 100, 1.0, 3.5) * RndObject(15, 30, CurShip));",
                        "            SetData(CurTurn() + next_spawn, 3);",
                        "        }",
                        "        else",
                        "        {",
                        "            next_spawn = 10;",
                        "            //Первое время клисане особо толкучие",
                        "            if(KlissanInvasion['StartDay'] + KlissanInvasion['KlissanDiffLevel'] * 3 > CurTurn()) next_spawn = Rnd(1,4);",
                        "            SetData(CurTurn() + next_spawn, 3);",
                        "        }",
                        "    }",
                        "}",
                        "else",
                        "{",
                        "    str spawn_order = abs(GetData(3));",
                        "    for(i = ParsCountFromString(spawn_order, '') - 1; i >= 0; i = i - 1)",
                        "    {",
                        "        new_klissan = SpawnKlissan(PlanetPirateClan(),EgemonCount(ShipStar(CurShip)), GetParFromString(spawn_order, '', i, 0));",
                        "        ShipJoinToScript(new_klissan, 'Mod_ShuKlissan.KlissanShips.KlissanShipsNormalState');",
                        "        TransferShip(new_klissan, CurShip);",
                        "    }",
                        "",
                        "    next_spawn = 10; //Вероятнее всего число клисан в системе к этому моменту будет уже максимальным",
                        "    SetData(CurTurn() + next_spawn, 3);",
                        "}",
                        "",
                        "//Если нейролинк сильно повреждён, то он сбегает с поля боя для \"восстановления\"",
                        "if(HullDamage(CurShip) > 45)",
                        "{",
                        "    if(GetData(0) <= CurTurn())",
                        "    {",
                        "        OrderLock(CurShip, 1);",
                        "        dword hole = CreateKlissanHole(ShipStar(CurShip), GalaxyStar(TortugatzId), CurShip);",
                        "        OrderJumpHole(CurShip, hole);",
                        "        SetData(Id(hole), 1);",
                        "    }",
                        "}",
                        "",
                        "//На всякий случай",
                        "//if(!ShipOrder(CurShip)) OrderMove(CurShip, NeurolinksPatrol, 0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 328,
                    "#": 329,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//В этом стейте нейролинк летит через ЧД в систему, которую он должен атаковать или поддержать",
                        "//Data0 - Id системы, в которую должен попасть нейролинк",
                        "//Data1 - Id ЧД, в которую должен прыгнуть нейролинк",
                        "//Data2 - таймер до проведения планового ремонта оборудования на нейролинке (в этом стейте не используется)",
                        "//Data3 - таймер до рождения следующего клисана на данном нейролинке (если записать сюда число со знаком минус, то будет считаться строкой заказа на спавн конкретных типов клисан, где каждая цифра в числе - номер типа)",
                        "",
                        "if(!GroupCount(Machpella)) ShipDestroy(CurShip, 1);",
                        "",
                        "dword cur_star = ShipStar(CurShip);",
                        "//Если нейролинк влетел в целевую ЧД",
                        "if(GetData(1))",
                        "{",
                        "    if(ShipInHole(CurShip))",
                        "    {",
                        "        //После чего обнуляем маркер целевой ЧД",
                        "        SetData(0, 1);",
                        "",
                        "        //Делаем нейролинка враждебным всему живому (важно сделать это до его выхода из ЧД, а то другие клисане \"не поймут\")",
                        "        OrderLock(CurShip, 0);",
                        "        ShipOwner(CurShip, None);",
                        "        ShipCustomFaction(CurShip, 'Klissan');",
                        "        NoTargetToShip(CurShip, 0);",
                        "        ShipSpecialBonuses(CurShip, bonResistAsteroid, 0); //На время нахождения в Тортугаце нейролинки имеют защиту",
                        "        exit;",
                        "",
                        "        if(ArtefactTypeInUse(Player(),t_ArtefactAnalyzer)) {",
                        "            Sound('Sound.NewMsg');",
                        "            dword target_star;",
                        "            ",
                        "            NewsAdd(Format(CT('Artefacts.ArtAnalyzer.AttackKlissans'),'star',Name(GalaxyStar(GetData(0)-1))));",
                        "        }",
                        "    }",
                        "}",
                        "//Не трогаем нейролинк, пока он совершает прыжок",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "",
                        "if(!ShipInNormalSpace(CurShip))",
                        "{",
                        "    OrderLock(CurShip, 1);",
                        "    OrderTakeOff(CurShip);",
                        "    exit;",
                        "}",
                        "",
                        "//Нейролинк прибыл в указанную систему и уже вылетел из ЧД",
                        "if(Id(cur_star) == GetData(0))",
                        "{",
                        "    SetData(0, 0);",
                        "",
                        "    //Если совершается самая первая атака клисан во всей партии",
                        "    if(KlissanInvasion['TotalAttacksCount'] <= 1)",
                        "    {",
                        "        //if(StarOwner(cur_star) != 1) //Если впервые напали на враждебную разумной жизни систему",
                        "        //{",
                        "        if(!CoalitionDefeated()) {",
                        "            AddPlanetNews(\"Граждане и гражданки Коалиции Разумных Рас!\" + CT('FormInfo.br') + CT('FormInfo.br') + \"Галактический Совет поручил мне выступить со следующим заявлением: сегодня космическое пространство одной из наших систем пересекли неизвестные корабли. Они атаковали наши регулярные части и гражданские суда. Сведения штатных радиолокационных систем говорят о том, что мы вновь столкнулись с клисанской угрозой. Галактический Совет объявил об ужесточении чрезвычайного положения и объявлении Третьей Клисанской войны. Всем пилотам надлежит беспощадно вести боевые действия против новых захватчиков. Все мы должны ещё теснее сплотиться вокруг наших идеалов.\" + CT('FormInfo.br') + CT('FormInfo.br') + \"Наше дело правое. Победа будет за нами.\",56);",
                        "            Sound('Sound.NewMsg');",
                        "            CustomEther('GalaxyAlert', 7, 'ShuKlissan_InvasionStarted', \"Граждане и гражданки Коалиции Разумных Рас!\" + CT('FormInfo.br') + CT('FormInfo.br') + \"Галактический Совет поручил мне выступить со следующим заявлением: сегодня космическое пространство одной из наших систем пересекли неизвестные корабли. Они атаковали наши регулярные части и гражданские суда. Сведения штатных радиолокационных систем говорят о том, что мы вновь столкнулись с клисанской угрозой. Галактический Совет объявил об ужесточении чрезвычайного положения и объявлении Третьей Клисанской войны. Всем пилотам надлежит беспощадно вести боевые действия против новых захватчиков. Все мы должны ещё теснее сплотиться вокруг наших идеалов.\" + CT('FormInfo.br') + CT('FormInfo.br') + \"Наше дело правое. Победа будет за нами.\");",
                        "        }",
                        "        else {",
                        "            AddPlanetNews(\"Храбрые бойцы нашего великого Братства!\" + CT('FormInfo.br') + CT('FormInfo.br') + \"Сегодня наши бравые соколики были атакованы неизвестными кораблями. Всё говорит о том, что мы вновь столкнулись с клисанами, и началась Третья Клисанская Война. Всем пилотам надлежит беспощадно вести боевые действия против новых захватчиков. Все мы должны ещё теснее сплотиться вокруг наших идеалов.\" + CT('FormInfo.br') + CT('FormInfo.br') + \"Наше дело правое. Победа будет за нами.\",56);",
                        "            Sound('Sound.NewMsg');",
                        "            CustomEther('GalaxyAlert', 7, 'ShuKlissan_InvasionStarted', \"Храбрые бойцы нашего великого Братства!\" + CT('FormInfo.br') + CT('FormInfo.br') + \"Сегодня наши бравые соколики были атакованы неизвестными кораблями. Всё говорит о том, что мы вновь столкнулись с клисанами, и началась Третья Клисанская Война. Всем пилотам надлежит беспощадно вести боевые действия против новых захватчиков. Все мы должны ещё теснее сплотиться вокруг наших идеалов.\" + CT('FormInfo.br') + CT('FormInfo.br') + \"Наше дело правое. Победа будет за нами.\");",
                        "        }",
                        "        //}",
                        "        //else",
                        "        //{",
                        "        //}",
                        "    }",
                        "    //Если клисане атаковали очередную не враждебную систему",
                        "    else if(StarOwner(cur_star) != 1)",
                        "    {",
                        "        AddPlanetNews(\"Внимание всем пилотам! <br>В системе <Name(cur_star)> обнаружены враждебно настроенные корабли клисан! Патрульные корабли уже вступили в бой. Всем грузовым судам, идущим транзитом через эту систему, настоятельно рекомендуется изменить маршрут.\",57);",
                        "    }",
                        "",
                        "    ChangeState('NeurolinksNormalState');",
                        "}",
                        "//Иначе направляем нейролинк в ЧД",
                        "else",
                        "{",
                        "    OrderLock(CurShip, 1);",
                        "    OrderJumpHole(CurShip, IdToHole(GetData(1)));",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 331,
                    "#": 332,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//В этом стейте клисане сидят и ожидают окончания полёта нейролинка (сидят они как раз в нейролинке) в ЧД",
                        "//Либо же летят сквозь ЧД сами",
                        "//Data0 - Id системы, в которую должен попасть клисан перед сменой стейта на обычный",
                        "//Data1 - реальная X координата выхода ЧД, в которой находится клисан (только если был вызван трансмиттером)",
                        "//Data2 - реальная Y координата выхода ЧД, в которой находится клисан (только если был вызван трансмиттером)",
                        "//Data3 - оставшееся время нахождения клисана в ЧД (только если был вызван трансмиттером)",
                        "",
                        "if(!GroupCount(Machpella)) ShipDestroy(CurShip, 1);",
                        "//Не трогаем клисана, пока тот находится в гипере",
                        "if(ShipInHyperSpace(CurShip, 1))",
                        "{",
                        "    //dword neurolink = GetShipRuins(CurShip);",
                        "    //if(neurolink) exit;",
                        "",
                        "    if(!GetData(3)) exit;",
                        "    //За ход до вылета из ЧД меняем её координаты, выводим выход из ЧД из-за края карты",
                        "    else if(GetData(3) == CurTurn())",
                        "    {",
                        "        dword cur_hole = ShipOrderObj(CurShip);",
                        "        if(HoleX2(cur_hole) > 80000)",
                        "        {",
                        "            HoleX2(cur_hole, int(GetData(1)));",
                        "            HoleY2(cur_hole, int(GetData(2)));",
                        "            SetData(0, 1);",
                        "            SetData(0, 2);",
                        "            SetData(0, 3);",
                        "        }",
                        "        else",
                        "        {",
                        "            SetData(0, 1);",
                        "            SetData(0, 2);",
                        "            SetData(0, 3);",
                        "        }",
                        "    }",
                        "    exit;",
                        "}",
                        "",
                        "dword cur_star = ShipStar(CurShip);",
                        "dword target_star = GetData(0);",
                        "if(target_star)",
                        "{",
                        "    if(Id(cur_star) == target_star)",
                        "    {",
                        "        SetData(0, 0);",
                        "        ShipCustomFaction(CurShip, 'Klissan');",
                        "        //Прикреплённый к стейту код исполнен не будет",
                        "        ShipJoinToScript(CurShip, 'Mod_ShuKlissan.KlissanShips.KlissanShipsNormalState');",
                        "        if(!ShipInNormalSpace(CurShip)) OrderTakeOff(CurShip);",
                        "        else ShipFreeFlight(CurShip);",
                        "        exit;",
                        "    }",
                        "}",
                        "else",
                        "{",
                        "    SetData(0, 0);",
                        "    ShipCustomFaction(CurShip, 'Klissan');",
                        "    //Прикреплённый к стейту код исполнен не будет",
                        "    ShipJoinToScript(CurShip, 'Mod_ShuKlissan.KlissanShips.KlissanShipsNormalState');",
                        "    if(!ShipInNormalSpace(CurShip)) OrderTakeOff(CurShip);",
                        "    else ShipFreeFlight(CurShip);",
                        "    exit;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 333,
                    "#": 334,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Data0 - ---",
                        "//Data1 - ---",
                        "//Data2 - ---",
                        "//Data3 - ---",
                        "",
                        "if(!GroupCount(Machpella)) ShipDestroy(CurShip, 1); //Есди махпелла была уничтожена или \"покинула местный рукав Галактики\"",
                        "",
                        "if(!ShipInNormalSpace(CurShip))",
                        "{",
                        "    OrderTakeOff(CurShip);",
                        "    exit;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 337,
                    "#": 338,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//В этот стейт Хандлер попадает, чтобы испортить его отношения с игроком",
                        "if(~ShipFindCustomShipInfoByType(CurShip, 'ShipImmortalInfo')) ShipDestroy(CurShip, 0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 341,
                    "#": 342,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Вообще этот стейт финальный, на случай, если какой-то нейролинк оказался в Тортугаце,",
                        "//когда игрок инициировал концовку с уничтожением Хандлера/махпеллы, так что особо расписывать его смысла нет",
                        "//Data0 - ---",
                        "//Data1 - ---",
                        "//Data2 - таймер до проведения планового ремонта оборудования на нейролинке",
                        "//Data3 - ---",
                        "",
                        "if(!GroupCount(Machpella)) ShipDestroy(CurShip, 1);",
                        "",
                        "//Не трогаем нейролинк, пока он совершает прыжок",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "",
                        "//Чиним всё оборудование нейролинка",
                        "if(GetData(2) <= CurTurn())",
                        "{",
                        "    ShipRepairEq(CurShip);",
                        "    SetData(CurTurn() + RndObject(30, 45, CurShip), 2);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 51,
                    "#": 346,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(ShipFindCustomShipInfoByType(Player(), 'ShuKlissan_MentalCommunicator') == -1) tstr1 = '</color>' + '...' + \"<br>\" + '...'; //Первую строчку таких символов игровой движок потрёт",
                        "else tstr1 = '</color>' + \"[Передача сигнала кораблю <clr>Махпелла<clrEnd>... ошибка 508<br>Повторение попытки... ошибка 508<br>Повторение попытки... ошибка 508<br>Повторение попытки... ошибка 508<br>Вероятная причина ошибки - <clr>сигнал заблокирован с другого конца<clrEnd>]<br>\";",
                        "",
                        "tstr2 = '</color>' + CT('Talk.Exit'); //Конец связи"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 347,
                    "#": 348,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//В этом стейте клисане совершают обычное нападение на указанную систему, через гипер, а не через ЧД",
                        "//Data0 - Id системы, в которую должен прыгнуть клисан (обычный прыжок, не ЧД) перед сменой стейта на обычный",
                        "//Data1 - ---",
                        "//Data2 - ---",
                        "//Data3 - ---",
                        "",
                        "if(!GroupCount(Machpella)) ShipDestroy(CurShip, 1);",
                        "if(ShipInHyperSpace(CurShip)) exit;",
                        "//Для автоматического выбора целей вокруг корабля",
                        "ShipFreeFlight(CurShip);",
                        "",
                        "dword cur_star = ShipStar(CurShip);",
                        "dword target_star = GalaxyStar(GetData(0) - 1);",
                        "if(cur_star != target_star)",
                        "{",
                        "    OrderLock(CurShip, 1);",
                        "    OrderJump(CurShip, target_star);",
                        "}",
                        "else",
                        "{",
                        "    OrderLock(CurShip, 0);",
                        "    SetData(0, 0);",
                        "    //Прикреплённый к стейту код исполнен не будет",
                        "    ShipJoinToScript(CurShip, 'Mod_ShuKlissan.KlissanShips.KlissanShipsNormalState');",
                        "    ShipFreeFlight(CurShip);",
                        "    exit;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -290,
                    "Pos.y": -40,
                    "Parent": -1,
                    "#": 359,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayClear(tarr1);",
                        "ArrayDelete(tarr1, 0);",
                        "",
                        "if(GetGameOptions('FontDialog') == '0') tstr5 = '-------------------------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '1') tstr5 = '------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '2') tstr5 = '-----------------------------------------';",
                        "else /*if(GetGameOptions('FontDialog') == '3')*/ tstr5 = '-------------------------------------';",
                        "",
                        "for(int i = 1; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    dword item = ShipItems(Player(), i);",
                        "    if(ItemType(item) != t_MicroModule) continue;",
                        "    int bon_num = EqModule(item);",
                        "    if(ItemSubrace(item) != 6) continue; //Пропускаем не-клисанский шмот",
                        "",
                        "    int cost = round(PortionInDiapason(BonusPriority(bon_num), 100, 0, 100, 2000));",
                        "    cost = Rnd(round(0.8 * cost), round(1.2 * cost), cost + Id(cur_ruin));",
                        "",
                        "    //Модификатор для повышения стоимости сдачи особых ММ",
                        "    int unique = CT('MicroModuls.' + BonusNumInCfg(bon_num) + '.UniqueMM');",
                        "    if(unique == 1) cost = 3.5 * cost; //Цена сдачи уникальных ММ (тех, что могут быть получены лишь раз за игру)",
                        "    else if(unique == 2) cost = 1.5 * cost; //Цена сдачи условно уникальных (редких) ММ",
                        "",
                        "    if(BonusPriority(bon_num) <= 69) cost = RoundTo(1.0 * cost / 1.5, 100, -1);",
                        "    else cost = RoundTo(1.0 * cost / 1.5, 10, -1);",
                        "    cost = max(5, round(0.3 * cost));",
                        "",
                        "    if(!ArrayDim(tarr1))",
                        "    {",
                        "        ArrayAdd(tarr1, newarray(1), 'Item');",
                        "        ArrayAdd(tarr1, newarray(1), 'Cost');",
                        "        ArrayDelete(tarr1['Item'], 0);",
                        "        ArrayDelete(tarr1['Cost'], 0);",
                        "    }",
                        "",
                        "    ArrayAdd(tarr1['Item'], item);",
                        "    ArrayAdd(tarr1['Cost'], cost);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -290,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 361,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str MMList = '';",
                        "if(ArrayDim(tarr1))",
                        "{",
                        "    ArraySort(tarr1['Cost'], tarr1['Item']);",
                        "    MMList = tstr5;",
                        "",
                        "    for(i = 0; i < ArrayDim(tarr1['Item']); i = i + 1)",
                        "    {",
                        "        str name = '<' + GetParFromString(ItemFullName(tarr1['Item', i]), '<', 1, 0) + '</color>';",
                        "        MMList = MMList + Format('<br>') + Format(CT('FormRuins.RC.GiveNod.NodSpore'), '<Name'+'>', name, '<Count'+'>', '<color=0,50,200>' + tarr1['Cost', i] + '</color>', '');",
                        "    }",
                        "",
                        "    MMList = MMList + Format('<br>') + tstr5 + Format('<br>') + Format(CT('FormRuins.RC.GiveNod.Sum'), '<BaseNod'+'>', RangerBaseNodes(Player()));",
                        "}",
                        "else MMList = tstr5 + Format('<br>') + CT('FormRuins.RC.GiveNod.NothingSpore');",
                        "",
                        "tstr1 = '</color>' + Format(CT('FormRuins.RC.GiveNod.AnswerSpore'), '<MMList'+'>', MMList, '');",
                        "tstr2 = '</color>' + CT('FormRuins.RC.GiveNod.PlayerNoSpore');",
                        "tstr3 = '</color>' + CT('FormRuins.RC.GiveNod.AfterNoSpore');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -290,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 362,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//У игрока в трюме нашлись какие-то ММ для сдачи",
                        "if(ArrayDim(tarr1))",
                        "{",
                        "    ArraySort(tarr1['Cost'], tarr1['Item']);",
                        "    for(i = 0; i < ArrayDim(tarr1['Item']); i = i + 1)",
                        "    {",
                        "        str name = '<' + GetParFromString(ItemFullName(tarr1['Item', i]), '<', 1, 0) + '</color>';",
                        "        InjectAnswer('SellMMDone', Format(CT('FormRuins.RC.GiveNod.PlayerOkSpore'), '<Name'+'>', name, '<Count'+'>', '<color=0,50,200>' + tarr1['Cost', i] + '</color>', ''), i);",
                        "    }",
                        "}",
                        "else ArrayAdd(tarr1, 0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": -40,
                    "Parent": -1,
                    "#": 366,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tstr5 = CT('Script.Mod_ShuKlissan.SporesRCGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesRCGiveList.Count'), GetShipRuins(Player())));",
                        "",
                        "j = round(PortionInDiapason(BonusPriority(FindBonusByNameInCfg(tstr5)), 100, 0, 100, 2000));",
                        "j = Rnd(round(0.8 * j), round(1.2 * j), j + Id(GetShipRuins(Player())));",
                        "j = j/2;",
                        "",
                        "    //Добавляем в текст название, описанием и стоимость в нодах очередного ММ",
                        "    tstr1 = tstr1 + Format('<br>') + DefSplt;",
                        "    tstr1 = tstr1 + Format('<br>') + i + Format(CT('FormRuins.RC.TakeNod.RCAnswerMMSpore'), '<Name'+'>', BonusName(FindBonusByNameInCfg(tstr5))) + Format('<br>') + BonusText(FindBonusByNameInCfg(tstr5));",
                        "    tstr1 = tstr1 + Format('<br>') + Format('<clr><clrEnd><br>') + Format(CT('FormRuins.RC.TakeNod.RCAnswerMMCostSpore'), '<Count'+'>', j);",
                        "",
                        "    //Запоминаем текст ответа игрока для выбора приобретаемого ММ",
                        "    tstr2 = '</color>' + Format(CT('FormRuins.RC.TakeNod.PlayerOkSpore'), '<Count'+'>', j, '<Name'+'>', BonusName(FindBonusByNameInCfg(tstr5)));",
                        "",
                        "",
                        "//Собираем строчки для подстановки",
                        "tstr1 = '</color>' + Format(CT('FormRuins.RC.TakeNod.RCAnswerStartSpore'), '<Text'+'>', tstr1, '') + Format('<br>') + DefSplt + Format('<br>') + Format(CT('FormRuins.RC.TakeNod.RCAnswerEndSpore'), '<BaseNod'+'>', RangerBaseNodes(Player()));",
                        "tstr3 = '</color>' + CT('FormRuins.RC.TakeNod.PlayerNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 373,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Добавляем приобретённый ММ в трюм игрока",
                        "AddItemToShip(Player(), CreateMM(FindBonusByNameInCfg(tstr5)));",
                        "//Вычитаем ноды со счёта игрока и выводим сообщение об успешной покупке",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) - j);",
                        "Sound('Sound.Sell');",
                        "",
                        "tstr1 = '</color>' + Format(CT('FormRuins.RC.TakeNod.RCAfterPlayerOk'), '<NodCnt' + '>', j, '<Name' + '>', BonusName(FindBonusByNameInCfg(tstr5)));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -120,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 374,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tstr1 = '</color>' + CT('FormRuins.RC.TakeNod.RCAfterPlayerNoSpore');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 387,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Игрок совершил первое посещение НБ с вопросом по исследованию клисан",
                        "KlissanInvasion['MainResearch.WasStarted'] = 1;",
                        "//Впервые заводим счётчик основного исследования клисан (всего перезапускается ещё 3 раза)",
                        "//Счётчик постепенно сам \"тикает\" из терна, но сдача обломков клисан ускоряет его",
                        "//соответственно весу сданных обломков",
                        "KlissanInvasion['MainResearch.ResearchLeft'] = 100.0;",
                        "KlissanInvasion['MentalCommunicator.ResearchLeft'] = 100.0;",
                        "KlissanInvasion['ZTransmitter.ResearchLeft'] = 100.0;",
                        "KlissanInvasion['MainResearch.StagesCompleted'] = 1;",
                        "",
                        "tstr1 = KlissanInvasion['MainResearch.ResearchLeft']; //RScript не умеет в одинарные кавычки внутри кавычек двойных",
                        "tint1 = KlissanInvasion['MainResearch.StagesCompleted']; //RScript не умеет в одинарные кавычки внутри кавычек двойных",
                        "",
                        "if(GetGameOptions('FontDialog') == '0') DefSplt = '</color>-------------------------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '1') DefSplt = '</color>------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '2') DefSplt = '</color>-----------------------------------------';",
                        "else /*if(GetGameOptions('FontDialog') == '3')*/ DefSplt = '</color>-------------------------------------';",
                        "",
                        "tstr1 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInvestSB.KlissanMainPageFirstTime');",
                        "tstr1 = tstr1 + Format('<br>') + Format(CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBAnswer'), '<SBSectionInfo'+'>', ComposeResearchDepartmentsText(), '');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 60,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 390,
                    "Code.Type": "Init",
                    "Code": 
                    [
                        "//Да, я лентяй Божий и просто спионерил всё из EvoSB, а минусы отказа от изобретения велосипеда приведёте?",
                        "function ComposeResearchDepartmentsText()",
                        "{",
                        "    //Считаем оставшиеся до окончания исследования дни по наглухо дабанутой ёбаформуле",
                        "    if(KlissanInvasion['MainResearch.StagesCompleted'] < 4)",
                        "    {",
                        "        str text_blazer = Format(CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSectionInfoAdd')",
                        "                                              '<Count'+'>', KlissanInvasion['MainResearch.Materials'],",
                        "                                              '<Speed'+'>', '' + int(PortionInDiapason(KlissanInvasion['MainResearch.Materials'], 0, 300, 20, 100)) + '%',",
                        "                                              '<Day'+'>', DabsShitCalc(0));",
                        "    }",
                        "    else text_blazer = CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSectionEnd');",
                        "",
                        "    if(KlissanInvasion['MentalCommunicator.ResearchLeft'] > 0)",
                        "    {",
                        "        str text_keller = Format(CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSectionInfoAdd')",
                        "                                              '<Count'+'>', KlissanInvasion['MentalCommunicator.Materials'],",
                        "                                              '<Speed'+'>', '' + int(PortionInDiapason(KlissanInvasion['MentalCommunicator.Materials'], 0, 300, 20, 100)) + '%',",
                        "                                              '<Day'+'>', DabsShitCalc(1));",
                        "    }",
                        "    else text_keller = CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSectionEnd');",
                        "",
                        "    if(KlissanInvasion['ZTransmitter.ResearchLeft'] > 0)",
                        "    {",
                        "        str text_terron = Format(CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSectionInfoAdd')",
                        "                                              '<Count'+'>', KlissanInvasion['ZTransmitter.Materials'],",
                        "                                              '<Speed'+'>', '' + int(PortionInDiapason(KlissanInvasion['ZTransmitter.Materials'], 0, 300, 20, 100)) + '%',",
                        "                                              '<Day'+'>', DabsShitCalc(2));",
                        "    }",
                        "    else text_terron = CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSectionEnd');",
                        "",
                        "    if(GetGameOptions('FontDialog') == '0') DefSplt = '</color>-------------------------------------------------------------';",
                        "    else if(GetGameOptions('FontDialog') == '1') DefSplt = '</color>------------------------------------------';",
                        "    else if(GetGameOptions('FontDialog') == '2') DefSplt = '</color>-----------------------------------------';",
                        "    else /*if(GetGameOptions('FontDialog') == '3')*/ DefSplt = '</color>-------------------------------------';",
                        "",
                        "",
                        "    result = Format(CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSectionInfo'),",
                        "                                   '<SBAnswerInfoBlazer'+'>', text_blazer,",
                        "                                   '<SBAnswerInfoKeller'+'>', text_keller,",
                        "                                   '<SBAnswerInfoTerron'+'>', text_terron,",
                        "                                   '<SplitLine'+'>', DefSplt,",
                        "                                   '');",
                        "}",
                        "",
                        "//Считаем оставшиеся до окончания исследования дни по наглухо дабанутой ёбаформуле",
                        "function DabsShitCalc(int serie)",
                        "{",
                        "    if(!serie) float serie_mod = 0.5; //Основное исследование",
                        "    else if(serie == 1) serie_mod = 0.6; //Исследование Ментального коммуникатора",
                        "    else serie_mod = 0.4; //Исследование Z-трансмиттера",
                        "",
                        "    float max_work_day_mod = GalaxyDiffLevels(2) / 50;",
                        "    if(1 == max_work_day_mod) max_work_day_mod = 0.050;",
                        "    else if(2 == max_work_day_mod) max_work_day_mod = 0.040;",
                        "    else if(3 == max_work_day_mod) max_work_day_mod = 0.030;",
                        "    else if(4 == max_work_day_mod) max_work_day_mod = 0.020;",
                        "    else",
                        "    {",
                        "        int i = int(max_work_day_mod) - 4;",
                        "        max_work_day_mod = 0.020;",
                        "        for(i = i; i >= 1; i = i - 1) max_work_day_mod = max_work_day_mod / 1.5;",
                        "    }",
                        "",
                        "    if(!serie) tstr1 = 'MainResearch';",
                        "    else if(serie == 1) tstr1 = 'MentalCommunicator';",
                        "    else tstr1 = 'ZTransmitter';",
                        "",
                        "    float percents;",
                        "    if(!serie) percents = GalaxyDiffLevels(2)/40 * (KlissanInvasion['MainResearch.StagesCompleted'] + 1);",
                        "    else if(serie == 1) percents = round(GalaxyDiffLevels(2)/15);",
                        "    else percents = round(GalaxyDiffLevels(2)/20);",
                        "",
                        "    percents = KlissanInvasion[tstr1+'.ResearchLeft'] / percents * 100;",
                        "",
                        "    int speed_percent = PortionInDiapason(KlissanInvasion[tstr1+'.Materials'], 0, 300, 20, 100);",
                        "    result = round(max(1.0, (100.0 - percents) / PortionInDiapason(speed_percent, 0, 100, 0.00001, max_work_day_mod) * serie_mod));",
                        "}",
                        "",
                        "//Основная функция спавна случайного (либо конкретного, если sub_type != -1) корабля клисан:",
                        "// 5 - мутенок",
                        "// 4 - рогит",
                        "// 3 - катаури",
                        "// 2 - нондус",
                        "// 1 - эгемон",
                        "function g_SpawnKlissan(dword planet, int EgCount = 0, int sub_type = -1)",
                        "{",
                        "    //Временная конверсия сложности для более удобных внутренних расчётов",
                        "    int klissan_diff = 0.02 * KlissanInvasion['KlissanDiffLevel'];",
                        "    int klissan_diff_div2 = 0.01 * KlissanInvasion['KlissanDiffLevel'];",
                        "    dword ship;",
                        "",
                        "    //Определяется тип будущего клисана",
                        "    if(sub_type == -1)",
                        "    {",
                        "        sub_type = RndObject(1, 100, planet);",
                        "        //Мутенок",
                        "        if(sub_type <= KlissanInvasion['MutonieSpawnChance'])",
                        "        {",
                        "            sub_type = 5;",
                        "            ship = BuyDomikExtremal(planet, 5);",
                        "        }",
                        "        //Рогит",
                        "        else if(sub_type <= KlissanInvasion['MonchikSpawnChance'])",
                        "        {",
                        "            sub_type = 4;",
                        "            ship = BuyDomikExtremal(planet, 4);",
                        "        }",
                        "        //Катаури",
                        "        else if(sub_type <= KlissanInvasion['CatauriSpawnChance'])",
                        "        {",
                        "            sub_type = 3;",
                        "            ship = BuyDomikExtremal(planet, 3);",
                        "        }",
                        "        //Нондус",
                        "        else if(sub_type <= KlissanInvasion['NondusSpawnChance'])",
                        "        {",
                        "            sub_type = 2;",
                        "            ship = BuyDomikExtremal(planet, 2);",
                        "        }",
                        "        //Эгемон",
                        "        else //if(sub_type <= KlissanInvasion['EgemonSpawnChance']) //Ожидаемо, всегда должно быть равно 100%",
                        "        {",
                        "            if(EgCount >= 3) {",
                        "                sub_type = 5;",
                        "                ship = BuyDomikExtremal(planet, 5);",
                        "            }",
                        "            else {",
                        "                sub_type = 1;",
                        "                ship = BuyDomikExtremal(planet, 1);",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(!sub_type) //Если заказали спавн гигаса",
                        "    {",
                        "        int is_gigas = 1;",
                        "        sub_type = 1;",
                        "        ship = BuyDomikExtremal(planet, 1);",
                        "    }",
                        "    else ship = BuyDomikExtremal(planet, sub_type);",
                        "",
                        "    //Выбираем неповторяющееся имя (вплоть до N уникальных имён подряд, потом могут начать повторяться)",
                        "    int names_count = CT('ShipName.Klissan.Count');",
                        "    str klissan_name = CT('ShipName.Klissan.' + RndObject(1, names_count, ship));",
                        "    while(~findsubstr(KlissanInvasion['LastSpawnedKlissanNames'], '*' + klissan_name + '*')) klissan_name = CT('ShipName.Klissan.' + RndObject(1, names_count, ship));",
                        "    KlissanInvasion['LastSpawnedKlissanNames'] = KlissanInvasion['LastSpawnedKlissanNames'] + klissan_name + '*';",
                        "    //Если имён в строке скопилось слишком много, подчищаем её с конца",
                        "    if(ParsCountFromString(KlissanInvasion['LastSpawnedKlissanNames'], '*') > (names_count - 30 + 2)) //В строке запоминается на 30 имён меньше от их максимального числа в списке",
                        "    {",
                        "        KlissanInvasion['LastSpawnedKlissanNames'] = SetParFromString(KlissanInvasion['LastSpawnedKlissanNames'], '*', 1, '');",
                        "        KlissanInvasion['LastSpawnedKlissanNames'] = substr(KlissanInvasion['LastSpawnedKlissanNames'], 1);",
                        "    }",
                        "    klissan_name = klissan_name + ' -' + RndObject(1, 99, ship) + '-';",
                        "    SetName(ship, klissan_name);",
                        "",
                        "    for(int i = ShipItems(ship) - 1; i > 0; i = i - 1) FreeItem(GetItemFromShip(ship, i)); //Удаляем все оборудование, кроме корпуса",
                        "",
                        "    //Приступаем к определению типа клисана и соответствующему его снаряжению",
                        "    dword item;",
                        "    dword hull = ShipItems(ship, 0);",
                        "    int hull_tech_level;",
                        "    int bonus;",
                        "    if(!EvoArmadaInit || BlockExist('Script.Mod_EvoDreadnought')) str hull_bon_mod = 'ShuKlissan';",
                        "    else if(!BlockExist('Script.Mod_EvoDreadnought')) hull_bon_mod = 'EvoArmada';",
                        "    else hull_bon_mod = 'ShuKlissan';",
                        "    int remains_count = max(RndObject(1, 100, ship) - (klissan_diff_div2 * 5), 1);",
                        "    dword mutations_fit_set = 1; //Используем для записи битсета, какая оборудка имеется у клисана, чтобы определить вариативность выдачи подходящих мутаций (акринов), по умолчанию в первом бите записана всегда доступная категория Common",
                        "",
                        "    ShipType(ship, 'Klissan' + sub_type);",
                        "    //Мутенок",
                        "    if(sub_type == 5)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из мутёнка",
                        "        for(i = 1; i <= RndObject(1, 3, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(1, max(15 - (klissan_diff_div2 * 3), 3), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из мутёнка (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 30, 90, 1, 3);",
                        "",
                        "        //Выдача оружия и оборудования для мутёнка (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        unknown damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveMutenokEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveMutenokEq(ship, t_Engine);",
                        "        GiveMutenokEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveMutenokEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveMutenokEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса мутёнка в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = round(Rnd(0,1) + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 100, 200, 0, 2) + PortionInDiapason(KlissanInvasion['KlissanStrength'], 15, 90, 3, 5));",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 55), 150) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_MutonieHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Мутёнку вешаем бонус на скорость и повышаем навык манёвренности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = (10 * klissan_diff) + (10 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonSpeed'), bonus);",
                        "        ShipSkill(ship, 'Mobility', ShipSkill(ship, 'Mobility') + 3);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Рогит",
                        "    else if(sub_type == 4)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из рогита",
                        "        for(i = 1; i <= RndObject(1, 3, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(3 - klissan_diff_div2, 1), max(25 - (klissan_diff_div2 * 4), 6), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из рогита (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 25, 80, 2, 5);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Rogit_damage', 'NoShow'); //Акткод на урон рогита, даёт процентный бонус к урону тем больший, чем больший процент HP отсутствует",
                        "",
                        "        //Задаём размер корпуса рогита в зависимости от сложности клисан и текущего ТУ",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 3, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 62.5), 185) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg('ShuKlissan_RogitHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Выдача оружия и оборудования для рогита (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveRogitEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveRogitEq(ship, t_Engine);",
                        "        GiveRogitEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveRogitEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveRogitEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса рогита в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 3, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 62.5), 185) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_MonchikHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Рогиту вешаем бонусы на силу энергетического и ракетного оружия, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = klissan_diff + PortionInDiapason(hull_tech_level, 1, 8, 1, 10);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 1);",
                        "        ShipSkill(ship, 'Mobility', ShipSkill(ship, 'Mobility') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Катаури",
                        "    else if(sub_type == 3)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из катаури",
                        "        for(i = 1; i <= RndObject(1, 3, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(5 - klissan_diff_div2, 1), max(45 - (klissan_diff_div2 * 4), 12), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из катаури (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 15, 85, 3, 6);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Katauri_attack', 'NoShow'); //Акткод на крит катаури. Позволяет нанести полуторный урон любым неракетным выстрелом с шансом 25%, а если цель имеет меньше половины ХП - двойной урон с шансом 33%.",
                        "",
                        "        //Выдача оружия и оборудования для катаури (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        int is_missiles = 0; //Маркер о наличии в оружейном наборе катаури ракетных орудий (необходим для гарантированной выдачи таким катаури радара)",
                        "",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveKatauriEq(ship, t_CustomWeapon, damage_type_arr, is_missiles);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveKatauriEq(ship, t_Engine);",
                        "        GiveKatauriEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveKatauriEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveKatauriEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2) || is_missiles)",
                        "        {",
                        "            GiveKatauriEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveKatauriEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveKatauriEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса катаури в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 2, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 75), 275) + RndObject(-25, 45, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_CatauriHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Катаури вешаем бонус на силу ракетных орудий и дальность стрельбы, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = klissan_diff + PortionInDiapason(hull_tech_level, 1, 8, 1, 10);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "        bonus = (5 * klissan_diff) + (5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWRadius'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Нондус",
                        "    else if(sub_type == 2)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из нондуса",
                        "        for(i = 1; i <= RndObject(1, 4, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(15 - klissan_diff_div2, max(60 - (klissan_diff_div2 * 4), 18), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из нондуса (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 10, 65, 4, 7);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Nondus_shield', 'NoShow'); //Акткод на щит нондуса. Щит блокирует весь наносимый кораблю урон и имеет прочность 30-40% от запаса ХП нондуса, когда спадает - наносит всем кораблям в радиусе 250 ед. урон, равный последнему нанесенному нондусу урону, увеличенному вдвое.",
                        "",
                        "        //Выдача оружия и оборудования для нондуса (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveNondusEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveNondusEq(ship, t_Engine);",
                        "        GiveNondusEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveNondusEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveNondusEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса нондуса в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 1, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 135), 400) + RndObject(-25, 45, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_NondusHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "        if(klissan_diff_div2 > 1) ItemImprovement(hull, 1);",
                        "",
                        "        //Нондусу вешаем бонус на силу осколочных орудий и ГЗП, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWSplinter'), bonus);",
                        "        bonus = round((1.5 * klissan_diff / 2) + (1.5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "",
                        "        //Если подключён мод EvoArmada, добавляем нондусу дополнительные залпы",
                        "        if(EvoArmadaInit) ShipSpecialBonuses(ship, bonAttacks, 1);",
                        "    }",
                        "    //Эгемон",
                        "    else //if(sub_type == 1)",
                        "    {",
                        "        //Шанс на появление гигаса",
                        "        if(!is_gigas)",
                        "        {",
                        "            if(RndObject(1, 100, ship) <= 10)",
                        "            {",
                        "                is_gigas = 1;",
                        "                ShipType(ship, 'Klissan0');",
                        "                //SetName(ship, CT('ShipType.Klissan.Gigas') + ' ' + ShipName(ship));",
                        "            }",
                        "        }",
                        "",
                        "        //Определяем, сколько протоплазмы выпадет из эгемона",
                        "        int protoplasm_pieces = RndObject(2, 5, ship);",
                        "        if(is_gigas) protoplasm_pieces = RndObject(8, 12, ship);",
                        "        for(i = 1; i <= protoplasm_pieces; i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(20 - klissan_diff_div2, 1), max(90 - (klissan_diff_div2 * 4), 24), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из эгемона (создание и заполнение ошмётков производится ниже)",
                        "        if(is_gigas) remains_count = PortionInDiapason(remains_count, 15, 90, 7, 11);",
                        "        else remains_count = PortionInDiapason(remains_count, 5, 90, 5, 8);",
                        "",
                        "        //ShipAddCustomShipInfo(ship, 'Egemon_armor', 'NoShow'); //Акткод на контратаку эгемона. Позволяет эгемону контратаковать противника подходящей по дальности и не сломанной пушкой с шансом [12 + количество_орудий * 6]% при каждом попадании врага по эгемону.",
                        "",
                        "        //Выдача оружия и оборудования для эгемона (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveEgemonEq(ship, t_CustomWeapon, -1, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveEgemonEq(ship, t_Engine);",
                        "        GiveEgemonEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveEgemonEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveEgemonEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //Эгемон",
                        "        if(!is_gigas)",
                        "        {",
                        "            //Задаём размер корпуса эгемона в зависимости от сложности клисан и текущего ТУ (нет)",
                        "            //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 225), 650) + RndObject(-45, 65, ship));",
                        "            SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_EgemonHull'), hull);",
                        "",
                        "            //Эгемону вешаем бонус на силу энергетических орудий, защиту и броню",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "            bonus = round((1.2 * klissan_diff / 2) + (1.2 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonHull'), bonus);",
                        "            bonus = round((1.5 * klissan_diff / 2) + (1.5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "",
                        "            //Если подключён мод EvoArmada, добавляем эгемону дополнительные залпы",
                        "            if(EvoArmadaInit)",
                        "            {",
                        "                ShipSpecialBonuses(ship, bonAttacks, 1);",
                        "                //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "                ShipAddCustomShipInfo(ship, 'EvoArmada_CapitalShipInfos', 'NoShow', 1);",
                        "                //Ограничиваем максимальный уровень навыка атаки (чтобы не так сильно нагибал)",
                        "                if(ShipSkill(ship, 'Accuracy') > 2) ShipSkill(ship, 'Accuracy', RndObject(2, 3, ship));",
                        "            }",
                        "        }",
                        "        //Гигас",
                        "        else",
                        "        {",
                        "            //Задаём размер корпуса гигаса в зависимости от сложности клисан и текущего ТУ (нет)",
                        "            //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 625), 1750) + RndObject(-60, 100, ship));",
                        "            ItemSize(hull, round(2.5 * ItemSize(hull)) + RndObject(-50, 50, ship));",
                        "            SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_GigasHull'), hull);",
                        "",
                        "            //Гигасу вешаем целую кучу бонусов",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWSplinter'), bonus);",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "            bonus = round((0.8 * klissan_diff / 2) + (0.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonHull'), bonus);",
                        "            bonus = round((10.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 25, 100) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonSpeed'), bonus);",
                        "            bonus = round((1.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 5, 25) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonScan'), bonus); //Используется для эффективного применения всяких оружейных бонусов, зависящих от сканера",
                        "            bonus = round((2.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 5, 20) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDroid'), bonus);",
                        "            bonus = round((1.0 * klissan_diff / 2) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "",
                        "            //Старые бонусы",
                        "            //Заменил деление умножением, т.к. для процессора это более простая операция",
                        "            // ShipSpecialBonuses(ship, bonSpeed, (0.111 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 9",
                        "            // ShipSpecialBonuses(ship, bonWEnergy, (0.0133 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 75",
                        "            // ShipSpecialBonuses(ship, bonWSplinter, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonWMissile, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonDef, (0.00666 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 150",
                        "            // ShipSpecialBonuses(ship, bonHull, (0.00333 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 300",
                        "            // ShipSpecialBonuses(ship, bonDroid, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonScan, 100); //Используется для эффективного применения всяких оружейных бонусов, зависящих от сканера",
                        "",
                        "            //Если подключён мод EvoArmada, добавляем дополнительные залпы кораблю в этом же цикле (чтоб два раза не перебирать доминаторов в разных модах)",
                        "            if(EvoArmadaInit)",
                        "            {",
                        "                ShipSpecialBonuses(ship, bonAttacks, 2);",
                        "                //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "                ShipAddCustomShipInfo(ship, 'EvoArmada_CapitalShipInfos', 'NoShow', 2);",
                        "                //Ограничиваем максимальный уровень навыка атаки (чтобы не так сильно нагибал)",
                        "                if(ShipSkill(ship, 'Accuracy') > 1) ShipSkill(ship, 'Accuracy', RndObject(1, 2, ship));",
                        "            }",
                        "        }",
                        "",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "        if(klissan_diff_div2 > 1) ItemImprovement(hull, RndObject(1, 2, ship)); //Улучшение корпуса обычными или лучшими специалистами",
                        "    }",
                        "",
                        "    //Выдача клисану подходящих мутаций (акринов)",
                        "    if(KlissanInvasion['MutationsStartDay'] <= CurTurn())",
                        "    {",
                        "        //Для каждого нового клисана делаем N попыток повесить мутацию на оборудование с некоторым шансом",
                        "        int mutation_chance = PortionInDiapason(sub_type, 1, 5, 35, 10) + (round(0.7 * klissan_diff) * 7); //Крупные корабли получают мутации с большим шансом",
                        "        int roll = RndObject(1, 100, ship);",
                        "",
                        "        if(roll <= mutation_chance)",
                        "        {",
                        "            int mutations_try_quantity = PortionInDiapason(mutation_chance - roll, 1, mutation_chance, 1, PortionInDiapason(CurTurn() - KlissanInvasion['MutationsStartDay'], 1, 5475, 5, 10)); //Определяем число попыток для наложения мутаций, чем больше прошло времени с момента начала их появления, тем больше попыток",
                        "",
                        "            int mutations_added = 0; //Превращаем шанс в счётчик успешно установленных мутаций для ограничения их максимального количества на корабль",
                        "            for(i = 1; i <= mutations_try_quantity; i = i + 1)",
                        "            {",
                        "                //Выбираем случайную подходящую категорию из доступных (включая общую Common в первом бите)",
                        "                int mutations_category = -1;",
                        "                while(!(mutations_fit_set & (1 << mutations_category))) mutations_category = RndObject(0, 8, ship);",
                        "                //Выбираем случайную доступную мутацию из этой категории",
                        "                bonus = KlissanInvasion['MutationsGiveList', mutations_category, RndObject(0, ArrayDim(KlissanInvasion['MutationsGiveList', mutations_category]) - 1, ship)];",
                        "",
                        "                //Ищем подходящую оборудку для установки мутации (перебор строки для определения подходящей был бы не быстрее)",
                        "                for(int j = 1; j < ShipItems(ship); j = j + 1)",
                        "                {",
                        "                    item = ShipItems(ship, j);",
                        "                    if(EqSpecial(item) == -1)",
                        "                    {",
                        "                        if(MayAddBonusToEq(bonus, item))",
                        "                        {",
                        "                            SpecialToEquipment(bonus, item);",
                        "                            mutations_added = mutations_added + 1;",
                        "                            break;",
                        "                        }",
                        "                    }",
                        "                }",
                        "",
                        "                if(mutations_added >= 5) break;",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    SetName(hull, Format(Name(hull), '<KlissanType'+'>', CT('Items.Hull.KlissanType.' + hull_tech_level), ''));",
                        "    EqCustomFaction(hull, 'Klissan'); //Вешаем на корпус клисанскую фракцию",
                        "    Chameleon(ship); //Обновляем скин корпуса после всех проведённых изменений",
                        "    Chameleon(ship); //Повторно на всякий пожарный",
                        "",
                        "    //Заполняем дроп клисана ошмётками",
                        "    int remains_max = CT('Script.Mod_ShuKlissan.KlissanRemainsCount');",
                        "    int set_remains_added = 0;",
                        "    for(i = 0; i < remains_count; i = i + 1)",
                        "    {",
                        "        //Подбираем ошмёток, который ещё не выпадал в дроп данному клисану",
                        "        int rand = RndObject(1, remains_max, ship);",
                        "        while((set_remains_added & (1 << rand))) rand = RndObject(1, remains_max, ship);",
                        "        set_remains_added = set_remains_added + (1 << rand);",
                        "        //Добавляемый выбранный ошмёток в дроп",
                        "        item = CreateQuestItem('KlissanRemains' + rand, None);",
                        "        //if(is_gigas) ItemCost(item, ItemCost(item) * 2 + GalaxyMoney(1));",
                        "        EqCustomFaction(item, 'Klissan');",
                        "        ShipAddDropItem(ship, item);",
                        "    }",
                        "",
                        "    //Запрещаем боту самостоятельно совершать прыжки",
                        "    ShipSpecialBonuses(ship, bonFuel, -10000);",
                        "",
                        "    //Вешаем фракцию сразу, т.к. в противном случае клисану не будут автоматически выдаваться фракционные ММ",
                        "    ShipJoinToScript(ship, 'Mod_ShuKlissan.KlissanShips');",
                        "    ShipCustomFaction(ship, 'Klissan');",
                        "",
                        "    //Выдаём клисану споры",
                        "    ShipImproveItems(ship, RndObject(klissan_diff_div2, 7 + klissan_diff_div2, ship)); //Эта строка автоматически вешает подходящие ММ на его оборудку",
                        "    if(RndObject(1, 100, ship) <= PortionInDiapason(sub_type, 5, 1, 1, 7)) //Шанс на добавление клисанской споры в дроп тем выше, чем выше класс клисана",
                        "    {",
                        "        item = CreateMM(FindBonusByNameInCfg(CT('Script.Mod_ShuKlissan.SporesGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesGiveList.Count'), ship))));",
                        "        ShipAddDropItem(ship, item);",
                        "    }",
                        "",
                        "    //Общие для всех кораблей клисан параметры",
                        "    ShipOwner(ship, None);",
                        "    int free_exp = ShipFreeExp(ship);",
                        "    ShipFreeExp(ship, 0);",
                        "    SetShipExpByType(ship, GetShipExpByType(ship) - free_exp, 0);",
                        "    ShipFace(ship, 0);",
                        "    HullHP(ship,ItemSize(ShipEqInSlot(ship,t_Hull)));",
                        "",
                        "    Chameleon(ship); //И ещё разок напоследок",
                        "",
                        "    if(!KlissanInvasion['MentalCommunicator.WasReceived']) NoScanToShip(ship,1);",
                        "",
                        "    //Удаляем всё лишнее (хз, есть ли там вообще такое) оборудование из трюма клисана",
                        "    //FreeAllHoldEquipment(ship);",
                        "    //FixOverweight(ship); //Нет смысла проверять, т.к. тоже самое автоматически делает функция ShipImproveItems()",
                        "",
                        "    result = ship;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 90,
                    "Pos.y": 40,
                    "Parent": -1,
                    "#": 391,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tstr1 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInvestSB.KlissanMainPage');",
                        "tstr1 = tstr1 + Format('<br>') + Format(CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBAnswer'), '<SBSectionInfo'+'>', ComposeResearchDepartmentsText(), '');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 90,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 393,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(KlissanInvasion['MainResearch.ResearchLeft'] == 0 && KlissanInvasion['MainResearch.StagesCompleted'] < 4) InjectAnswer('InvestigEnd',CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBAskForEndMain'),KlissanInvasion['MainResearch.StagesCompleted']);",
                        "else if(KlissanInvasion['MainResearch.StagesCompleted'] < 4) InjectAnswer('SellRemains',CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSellMain'),1);",
                        "",
                        "if(!KlissanInvasion['MentalCommunicator.WasReceived'] && KlissanInvasion['MentalCommunicator.ResearchLeft'] <= 0) InjectAnswer('InvestigEnd',CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBAskForEndMental'),2);",
                        "else if(KlissanInvasion['MentalCommunicator.ResearchLeft'] > 0) InjectAnswer('SellRemains',CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSellMental'),2);",
                        "",
                        "if(!KlissanInvasion['ZTransmitter.WasReceived'] && KlissanInvasion['ZTransmitter.ResearchLeft'] <= 0) InjectAnswer('InvestigEnd',CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSectionEndedTransmitter'),3);",
                        "else if(KlissanInvasion['ZTransmitter.ResearchLeft'] > 0) InjectAnswer('SellRemains',CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBSellTransmitter'),3);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 440,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 396,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tint1 = GAnswerData;",
                        "KlissanInvasion['MainResearch.StagesCompleted'] = KlissanInvasion['MainResearch.StagesCompleted'] + 1;",
                        "",
                        "if(KlissanInvasion['MainResearch.StagesCompleted'] == 4) {",
                        "    //Ставим маркер о завершении основного исследования клисан (игроку необходимо будет ещё прочитать финальный текст и получить макрофазовый генератор)",
                        "    KlissanInvasion['MainResearch.StagesCompleted'] = 5;",
                        "}",
                        "else {",
                        "    KlissanInvasion['MainResearch.ResearchLeft'] = round(GalaxyDiffLevels(2)/40) * (KlissanInvasion['MainResearch.StagesCompleted'] + 1) * 1.0;",
                        "}",
                        "",
                        "Sound('Sound.QuestOk');",
                        "",
                        "tstr1 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBInvestMain'+KlissanInvasion['MainResearch.StagesCompleted']);",
                        "tstr2 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInvestSB.SBInvestMainAnswer'+KlissanInvasion['MainResearch.StagesCompleted']);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 400,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "DAnswer('restart~' + \"На моем корабле нет материала для сдачи\");",
                        "",
                        "if(GAnswerData <= 3) cur_sec = GAnswerData;",
                        "",
                        "if(cur_sec == 1) tstr2 = \"Основной отдел исследований\";",
                        "else if(cur_sec == 2) tstr2 = \"Отдел исследований Ментального коммуникатора\";",
                        "else if(cur_sec == 3) tstr2 = \"Отдел исследований Z-трансмиттера\";",
                        "",
                        "tstr1 = '</color>' + Format(CT('FormRuins.SB.Scn.SBSection1'),'<SectionName'+'>', tstr2,'<SplitLine'+'>', DefSplt,'');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 160,
                    "Parent": -1,
                    "#": 402,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Выводим список клисанских вещей для сдачи",
                        "tint1 = 0;",
                        "tint2 = 0;",
                        "for(i = 0; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    cur_item = ShipItems(Player(), i);",
                        "    if(ItemIsInUse(cur_item)) continue;",
                        "    if(ItemOwner(cur_item) != None) continue;",
                        "    if(EqCustomFaction(cur_item) != 'Klissan') continue;",
                        "    //Исключаем протоплазму",
                        "    if(ItemType(cur_item) == t_UselessCountableItem) continue;",
                        "    //Исключаем корпуса с ЧР",
                        "    if(ItemType(cur_item) == t_Hull) continue;",
                        "",
                        "    //Если сдаются ошмётки",
                        "    if(ItemType(cur_item) == t_UselessItem) {",
                        "        InjectAnswer('Sold', '<color=0,50,200>' + DeleteTags(Name(cur_item)) + '</color>' + '  (<ItemCost(cur_item)> cr.) <color=0,50,200>x2</color>', i);",
                        "        tint1 = 1;",
                        "    }",
                        "    //Если сдаётся оборудка",
                        "    else {",
                        "        InjectAnswer('Sold', '<color=0,50,200>' + DeleteTags(Name(cur_item)) + '</color>' + '  (<ItemCost(cur_item)> cr.)', i);",
                        "        tint2 = 1;",
                        "    }",
                        "}",
                        "",
                        "if(tint1) InjectAnswer('SoldMore',CT('Script.Mod_ShuKlissan.KlissanInvestSB.SectionUsl'),-1);",
                        "if(tint2) InjectAnswer('SoldMore',CT('Script.Mod_ShuKlissan.KlissanInvestSB.SectionEquip'),-2);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 210,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 404,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Удаляем из инвентаря игрока выбранный им для сдачи предмет, и обновляем счётчики материала",
                        "cur_item = ShipItems(Player(), GAnswerData);",
                        "//Ошмётки сдаются дороже, чем оборудка",
                        "if(ItemType(cur_item) == t_UselessItem) cost = ItemCost(cur_item) * 2;",
                        "else cost = ItemCost(cur_item);",
                        "",
                        "//Сдаём на основную ветку",
                        "if(cur_sec == 1)",
                        "{",
                        "    KlissanInvasion['MainResearch.Materials'] = KlissanInvasion['MainResearch.Materials'] + ItemSize(cur_item);",
                        "}",
                        "//Сдаём на менталку",
                        "else if(cur_sec == 2)",
                        "{",
                        "    KlissanInvasion['MentalCommunicator.Materials'] = KlissanInvasion['MentalCommunicator.Materials'] + ItemSize(cur_item);",
                        "}",
                        "//Сдаём на Z-z-z..-трансмиттер",
                        "else if(cur_sec == 3)",
                        "{",
                        "    KlissanInvasion['ZTransmitter.Materials'] = KlissanInvasion['ZTransmitter.Materials'] + ItemSize(cur_item);",
                        "}",
                        "",
                        "Sound('Sound.Sell');",
                        "",
                        "ShipMoney(Player(), ShipMoney(Player()) + cost);",
                        "FreeItem(GetItemFromShip(Player(), cur_item));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 440,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 406,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Для концовки клисан",
                        "//Компромисс между старым кодом и моей структурой",
                        "if(KlissanInvasion['MainResearch.StagesCompleted'] == 5) {",
                        "    cur_item = CreateQuestItem('ShuKlissan_MacrophaseShiftGenerator', ShipOwner(GetShipRuins(Player())));",
                        "    ItemCost(cur_item, ItemCost(cur_item) * 2);",
                        "    LinkItemToScript(cur_item, MacrophaseShiftGenerator);",
                        "    AddItemToShip(Player(), cur_item);",
                        "    //Ставим маркер о полном завершении основного исследования клисан",
                        "    KlissanInvasion['MainResearch.StagesCompleted'] = 6;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 270,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 408,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(GAnswerData == -1) {",
                        "    //Сдаём ошмётки",
                        "    for(i = 0; i < ShipItems(Player()); i = i + 1)",
                        "    {",
                        "        cur_item = ShipItems(Player(), i);",
                        "        if(ItemIsInUse(cur_item)) continue;",
                        "        if(ItemOwner(cur_item) != None) continue;",
                        "        if(EqCustomFaction(cur_item) != 'Klissan') continue;",
                        "        //Исключаем протоплазму",
                        "        if(ItemType(cur_item) == t_UselessCountableItem) continue;",
                        "        //Исключаем корпуса с ЧР",
                        "        if(ItemType(cur_item) == t_Hull) continue;",
                        "",
                        "        //Если сдаются ошмётки",
                        "        if(ItemType(cur_item) == t_UselessItem) {",
                        "            //Удаляем из инвентаря игрока выбранный им для сдачи предмет, и обновляем счётчики материала",
                        "            //Ошмётки сдаются дороже, чем оборудка",
                        "            if(ItemType(cur_item) == t_UselessItem) cost = ItemCost(cur_item) * 2;",
                        "            else cost = ItemCost(cur_item);",
                        "",
                        "            //Сдаём на основную ветку",
                        "            if(cur_sec == 1)",
                        "            {",
                        "                KlissanInvasion['MainResearch.Materials'] = KlissanInvasion['MainResearch.Materials'] + ItemSize(cur_item);",
                        "            }",
                        "            //Сдаём на менталку",
                        "            else if(cur_sec == 2)",
                        "            {",
                        "                KlissanInvasion['MentalCommunicator.Materials'] = KlissanInvasion['MentalCommunicator.Materials'] + ItemSize(cur_item);",
                        "            }",
                        "            //Сдаём на Z-z-z..-трансмиттер",
                        "            else if(cur_sec == 3)",
                        "            {",
                        "                KlissanInvasion['ZTransmitter.Materials'] = KlissanInvasion['ZTransmitter.Materials'] + ItemSize(cur_item);",
                        "            }",
                        "",
                        "            ShipMoney(Player(), ShipMoney(Player()) + cost);",
                        "            FreeItem(GetItemFromShip(Player(), cur_item));",
                        "        }",
                        "        //Если сдаётся оборудка",
                        "        else continue;",
                        "    }",
                        "}",
                        "else if(GAnswerData == -2) {",
                        "    //Сдаём оборудку",
                        "    for(i = 0; i < ShipItems(Player()); i = i + 1)",
                        "    {",
                        "        cur_item = ShipItems(Player(), i);",
                        "        if(ItemIsInUse(cur_item)) continue;",
                        "        if(ItemOwner(cur_item) != None) continue;",
                        "        if(EqCustomFaction(cur_item) != 'Klissan') continue;",
                        "        //Исключаем протоплазму",
                        "        if(ItemType(cur_item) == t_UselessCountableItem) continue;",
                        "        //Исключаем корпуса с ЧР",
                        "        if(ItemType(cur_item) == t_Hull) continue;",
                        "",
                        "        //Если сдаются ошмётки",
                        "        if(ItemType(cur_item) == t_UselessItem) continue;",
                        "        //Если сдаётся оборудка",
                        "        else {",
                        "            //Удаляем из инвентаря игрока выбранный им для сдачи предмет, и обновляем счётчики материала",
                        "            //Ошмётки сдаются дороже, чем оборудка",
                        "            if(ItemType(cur_item) == t_UselessItem) cost = ItemCost(cur_item) * 2;",
                        "            else cost = ItemCost(cur_item);",
                        "",
                        "            //Сдаём на основную ветку",
                        "            if(cur_sec == 1)",
                        "            {",
                        "                KlissanInvasion['MainResearch.Materials'] = KlissanInvasion['MainResearch.Materials'] + ItemSize(cur_item);",
                        "            }",
                        "            //Сдаём на менталку",
                        "            else if(cur_sec == 2)",
                        "            {",
                        "                KlissanInvasion['MentalCommunicator.Materials'] = KlissanInvasion['MentalCommunicator.Materials'] + ItemSize(cur_item);",
                        "            }",
                        "            //Сдаём на Z-z-z..-трансмиттер",
                        "            else if(cur_sec == 3)",
                        "            {",
                        "                KlissanInvasion['ZTransmitter.Materials'] = KlissanInvasion['ZTransmitter.Materials'] + ItemSize(cur_item);",
                        "            }",
                        "",
                        "            ShipMoney(Player(), ShipMoney(Player()) + cost);",
                        "            FreeItem(GetItemFromShip(Player(), cur_item));",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "Sound('Sound.Sell');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -1170,
                    "Pos.y": -70,
                    "Parent": -1,
                    "#": 409,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Награждаем Орденом Белого Знамени",
                        "if(!CountRewardByNom(Player(),49)) GiveRewardByNom(Player(),49);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -940,
                    "Pos.y": -70,
                    "Parent": -1,
                    "#": 410,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Награждаем Орденом Белого Знамени",
                        "if(!CountRewardByNom(Player(),49)) GiveRewardByNom(Player(),49);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -440,
                    "Pos.y": 200,
                    "Parent": -1,
                    "#": 411,
                    "Code.Type": "Init",
                    "Code": 
                    [
                        "function SpawnAllyMachpella(dword star) {",
                        "    dword machpella = BuyRanger(FindPlanet(star));",
                        "    RangerExcludedFromRating(machpella, 1);",
                        "    ShipType(machpella, 'Machpella');",
                        "    ShipPilotRace(machpella, Gaal); //Чтобы точно не прилетела графика Таухито",
                        "    ShipOwner(machpella, Gaal); //ОтсылОчка",
                        "    SetName(machpella, CT('ShipType.Klissan.Machpella'));",
                        "    ShipFace(machpella, 0);",
                        "    ShipSubType(machpella, 0); //Статус торговец (просто для маркерности)",
                        "    ShipStatus(machpella, 0, 34);",
                        "    ShipStatus(machpella, 1, 33);",
                        "    ShipStatus(machpella, 2, 33);",
                        "    ShipMoney(machpella, 0);",
                        "    Chameleon(machpella, 'Ruins.AllyMachpella');",
                        "",
                        "    //Так как безусловно появится до диалога с игроком, то нейтралка",
                        "    ShipStanding(machpella,5);",
                        "",
                        "    ShipSkill(machpella, 'Accuracy', 6);",
                        "    ShipSkill(machpella, 'Mobility', 6);",
                        "    ShipSkill(machpella, 'Technical', 6);",
                        "    ShipSkill(machpella, 'Trader', 0);",
                        "    ShipSkill(machpella, 'Charm', 0);",
                        "    ShipSkill(machpella, 'Leadership', 0);",
                        "",
                        "    int klissan_diff = 0.02 * KlissanInvasion['KlissanDiffLevel'];",
                        "    int klissan_diff_div2 = 0.01 * KlissanInvasion['KlissanDiffLevel'];",
                        "",
                        "    //Меняем базовый размер корпуса махпеллы в зависимости от сложности настройки клисан",
                        "    int hull_level = 8;",
                        "    dword hull = CreateHull(6, PortionInDiapason(klissan_diff, 1, 10, 4250, 18600) + RndObject(-300, 600, machpella), hull_level, None, -1);",
                        "    SpecialToEquipment(FindBonusByNameInCfg('ShuKlissan_MachpellaHull'), hull);",
                        "    EqCustomFaction(hull, 'Klissan');",
                        "    //Удаляем старый корпус и устанавливаем новый",
                        "    FreeItem(GetItemFromShip(machpella, 0));",
                        "    AddItemToShip(machpella, hull);",
                        "",
                        "    //Сперва удаляем всё базовое оборудование махпеллы",
                        "    for(int i = ShipItems(machpella) - 1; i > 0; i = i - 1) FreeItem(GetItemFromShip(machpella, i));",
                        "    //Выдаём ей 4 клисанские пушки",
                        "    for(i = 1; i <= 4; i = i + 1) GiveEgemonEq(machpella, t_CustomWeapon, 100);",
                        "",
                        "    //Также выдаём ей особую клисанскую пушку, и заносим копию этой пушки в гарантированный дроп",
                        "    dword item = CreateCustomWeapon('klissan_hellwave', 150, 8, None);",
                        "    SetName(item, '<color=0,191,255>' + CT('Items.Weapon.Name.MachpellaHellWave') + '</color>');",
                        "    EqCustomFaction(item, 'Klissan');",
                        "    SpecialToEquipment(FindBonusByNameInCfg('ShuKlissan_MachpellaHellWave'), item);",
                        "    SetEquipmentStats(item, 140, 0);",
                        "    SetEquipmentStats(item, 140, 1);",
                        "    SetEquipmentStats(item, 400, 2);",
                        "    AddItemToShip(machpella, item);",
                        "    ItemIsInUse(item, machpella, 1);",
                        "    NoDropItem(item, 1);",
                        "",
                        "    dword cloned_item = CreateCustomWeapon('klissan_hellwave', 150, 8, None);",
                        "    SetName(cloned_item, Name(item));",
                        "    EqCustomFaction(cloned_item, 'Klissan');",
                        "    SpecialToEquipment(EqSpecial(item), cloned_item);",
                        "    ItemSize(cloned_item, ItemSize(item));",
                        "    ItemCost(cloned_item, ItemCost(item));",
                        "    SetEquipmentStats(cloned_item, GetEquipmentStats(item, 0), 0);",
                        "    SetEquipmentStats(cloned_item, GetEquipmentStats(item, 1), 1);",
                        "    SetEquipmentStats(cloned_item, GetEquipmentStats(item, 2), 2);",
                        "    ShipAddDropItem(machpella, cloned_item);",
                        "",
                        "    //Выдаём махпелле лучшее клисанское снаряжение",
                        "    for(i = t_FuelTanks; i <= t_DefGenerator; i = i + 1) GiveEgemonEq(machpella, i, 100);",
                        "    ShipSpecialBonuses(machpella, bonHookRadius, -1000); //Чтобы не собирала минералы",
                        "",
                        "    //Если подключена EvoArmada, бафаем махпеллу",
                        "    if(EvoArmadaInit)",
                        "    {",
                        "        int GeneralDiffLevel = round(0.02 * GalaxyDiffLevels());",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_ExtraSpecialsLineBreak'));",
                        "        //Вешаем махпелле бонусы на силу энергетических и осколочных орудий, эффективность дроида, а также на эффективность ГЗП",
                        "        int tint = round((1.5 * GeneralDiffLevel) + (1.5 * PortionInDiapason(hull_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_bonWEnergy'), tint);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('EvoArmada_bonWSplinter'), tint);",
                        "        tint = round((7.5 * GeneralDiffLevel) + (7.5 * PortionInDiapason(hull_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(item, FindBonusByNameInCfg('EvoArmada_bonDroid'), tint);",
                        "        tint = round((1.75 * GeneralDiffLevel) + (1.75 * PortionInDiapason(hull_level, 1, 8, 1, 10)));",
                        "        ItemExtraSpecialsAddByType(item, FindBonusByNameInCfg('EvoArmada_bonDef'), tint);",
                        "",
                        "        //Увеличиваем размер корпуса махпеллы",
                        "        ItemSize(hull, round(ItemSize(hull) * (1.0 + (0.45 * GeneralDiffLevel))));",
                        "",
                        "        //Также увеличиваем число её залпов",
                        "        int bon_attacks = 2;",
                        "        ShipSpecialBonuses(machpella, bonAttacks, bon_attacks);",
                        "        //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "        ShipAddCustomShipInfo(machpella, 'EvoArmada_CapitalShipInfos', 'NoShow', bon_attacks);",
                        "    }",
                        "    HullHP(hull, 'To100');",
                        "",
                        "    //Добавляем протоплазму в гарантированный дроп",
                        "    tint = PortionInDiapason(klissan_diff, 1, 10, 35, 15);",
                        "    for(i = 1; i <= tint; i = i + 1)",
                        "    {",
                        "        item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(40 - klissan_diff_div2, 1), max(120 - (klissan_diff_div2 * 4), 24), machpella), 1);",
                        "        EqCustomFaction(item, 'Klissan');",
                        "        ItemCost(item, ItemSize(item) * 30);",
                        "        ShipAddDropItem(machpella, item);",
                        "    }",
                        "",
                        "    //ArrangeItems(machpella);",
                        "    FreeAllHoldEquipment(machpella);",
                        "    //FixOverweight(machpella); //Нет смысла проверять, т.к. тоже самое автоматически делает функция ShipImproveItems()",
                        "",
                        "    //Выдаём махпелле споры",
                        "    ShipImproveItems(machpella, PortionInDiapason(klissan_diff, 1, 10, 7, 18)); //Эта строка автоматически вешает подходящие ММ на оборудку махпеллы",
                        "",
                        "    int free_exp = ShipFreeExp(machpella);",
                        "    ShipFreeExp(machpella, 0);",
                        "    SetShipExpByType(machpella, GetShipExpByType(machpella) - free_exp, 0);",
                        "",
                        "    NoTargetToShip(machpella, 2); //Чтобы отключить случайную агрессию со стороны пиратов",
                        "    ArrangeItems(machpella);",
                        "    //Повышаем махпелле пиратское звание до хана, чтоб, сука, уважали её тупые пираты! (применимо только для кораблей, не для станций)",
                        "    RaisePirateRank(machpella, 6);",
                        "    RelationToRanger(machpella, Player(), 50); //Нейтральное отношение к игроку",
                        "",
                        "    ShipAddCustomShipInfo(machpella, 'ShipImmortalInfo', 'NoShow');",
                        "    KlissanInvasion['MachpellaId'] = Id(machpella);",
                        "    TransferShip(machpella, star);",
                        "    ShipJoin(MahpellaAlly,machpella);",
                        "",
                        "    result = machpella;",
                        "}",
                        "",
                        "//Основная функция спавна случайного (либо конкретного, если sub_type != -1) корабля клисан:",
                        "// 5 - мутенок",
                        "// 4 - рогит",
                        "// 3 - катаури",
                        "// 2 - нондус",
                        "// 1 - эгемон",
                        "function SpawnAllyKlissan(dword planet, int sub_type = -1)",
                        "{",
                        "    //Временная конверсия сложности для более удобных внутренних расчётов",
                        "    int klissan_diff = 0.02 * KlissanInvasion['KlissanDiffLevel'];",
                        "    int klissan_diff_div2 = 0.01 * KlissanInvasion['KlissanDiffLevel'];",
                        "    dword ship;",
                        "",
                        "    //Лень убирать старую штуку, просто костылёк поставлю",
                        "    int EgCount = 0;",
                        "",
                        "    //Определяется тип будущего клисана",
                        "    if(sub_type == -1)",
                        "    {",
                        "        sub_type = RndObject(1, 100, planet);",
                        "        //Мутенок",
                        "        if(sub_type <= KlissanInvasion['MutonieSpawnChance'])",
                        "        {",
                        "            sub_type = 5;",
                        "            ship = BuyDomikExtremal(planet, 5);",
                        "        }",
                        "        //Рогит",
                        "        else if(sub_type <= KlissanInvasion['MonchikSpawnChance'])",
                        "        {",
                        "            sub_type = 4;",
                        "            ship = BuyDomikExtremal(planet, 4);",
                        "        }",
                        "        //Катаури",
                        "        else if(sub_type <= KlissanInvasion['CatauriSpawnChance'])",
                        "        {",
                        "            sub_type = 3;",
                        "            ship = BuyDomikExtremal(planet, 3);",
                        "        }",
                        "        //Нондус",
                        "        else if(sub_type <= KlissanInvasion['NondusSpawnChance'])",
                        "        {",
                        "            sub_type = 2;",
                        "            ship = BuyDomikExtremal(planet, 2);",
                        "        }",
                        "        //Эгемон",
                        "        else //if(sub_type <= KlissanInvasion['EgemonSpawnChance']) //Ожидаемо, всегда должно быть равно 100%",
                        "        {",
                        "            if(EgCount >= 3) {",
                        "                sub_type = 5;",
                        "                ship = BuyDomikExtremal(planet, 5);",
                        "            }",
                        "            else {",
                        "                sub_type = 1;",
                        "                ship = BuyDomikExtremal(planet, 1);",
                        "            }",
                        "        }",
                        "    }",
                        "    else if(!sub_type) //Если заказали спавн гигаса",
                        "    {",
                        "        int is_gigas = 1;",
                        "        sub_type = 1;",
                        "        ship = BuyDomikExtremal(planet, 1);",
                        "    }",
                        "    else ship = BuyDomikExtremal(planet, sub_type);",
                        "",
                        "    //Выбираем неповторяющееся имя (вплоть до N уникальных имён подряд, потом могут начать повторяться)",
                        "    int names_count = CT('ShipName.Klissan.Count');",
                        "    str klissan_name = CT('ShipName.Klissan.' + RndObject(1, names_count, ship));",
                        "    while(~findsubstr(KlissanInvasion['LastSpawnedKlissanNames'], '*' + klissan_name + '*')) klissan_name = CT('ShipName.Klissan.' + RndObject(1, names_count, ship));",
                        "    KlissanInvasion['LastSpawnedKlissanNames'] = KlissanInvasion['LastSpawnedKlissanNames'] + klissan_name + '*';",
                        "    //Если имён в строке скопилось слишком много, подчищаем её с конца",
                        "    if(ParsCountFromString(KlissanInvasion['LastSpawnedKlissanNames'], '*') > (names_count - 30 + 2)) //В строке запоминается на 30 имён меньше от их максимального числа в списке",
                        "    {",
                        "        KlissanInvasion['LastSpawnedKlissanNames'] = SetParFromString(KlissanInvasion['LastSpawnedKlissanNames'], '*', 1, '');",
                        "        KlissanInvasion['LastSpawnedKlissanNames'] = substr(KlissanInvasion['LastSpawnedKlissanNames'], 1);",
                        "    }",
                        "    klissan_name = klissan_name + ' -' + RndObject(1, 99, ship) + '-';",
                        "    SetName(ship, klissan_name);",
                        "",
                        "    for(int i = ShipItems(ship) - 1; i > 0; i = i - 1) FreeItem(GetItemFromShip(ship, i)); //Удаляем все оборудование, кроме корпуса",
                        "",
                        "    //Приступаем к определению типа клисана и соответствующему его снаряжению",
                        "    dword item;",
                        "    dword hull = ShipItems(ship, 0);",
                        "    int hull_tech_level;",
                        "    int bonus;",
                        "    if(!EvoArmadaInit || BlockExist('Script.Mod_EvoDreadnought')) str hull_bon_mod = 'ShuKlissan';",
                        "    else if(!BlockExist('Script.Mod_EvoDreadnought')) hull_bon_mod = 'EvoArmada';",
                        "    else hull_bon_mod = 'ShuKlissan';",
                        "    int remains_count = max(RndObject(1, 100, ship) - (klissan_diff_div2 * 5), 1);",
                        "    dword mutations_fit_set = 1; //Используем для записи битсета, какая оборудка имеется у клисана, чтобы определить вариативность выдачи подходящих мутаций (акринов), по умолчанию в первом бите записана всегда доступная категория Common",
                        "",
                        "    ShipType(ship, 'Klissan' + sub_type);",
                        "    //Мутенок",
                        "    if(sub_type == 5)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из мутёнка",
                        "        for(i = 1; i <= RndObject(1, 3, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(1, max(15 - (klissan_diff_div2 * 3), 3), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из мутёнка (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 30, 90, 1, 3);",
                        "",
                        "        //Выдача оружия и оборудования для мутёнка (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        unknown damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveMutenokEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveMutenokEq(ship, t_Engine);",
                        "        GiveMutenokEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveMutenokEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveMutenokEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveMutenokEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса мутёнка в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = round(Rnd(0,1) + PortionInDiapason(KlissanInvasion['KlissanDiffLevel'], 100, 200, 0, 2) + PortionInDiapason(KlissanInvasion['KlissanStrength'], 15, 90, 3, 5));",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 55), 150) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_AllyMutonieHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Мутёнку вешаем бонус на скорость и повышаем навык манёвренности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = (10 * klissan_diff) + (10 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonSpeed'), bonus);",
                        "        ShipSkill(ship, 'Mobility', ShipSkill(ship, 'Mobility') + 3);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Рогит",
                        "    else if(sub_type == 4)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из рогита",
                        "        for(i = 1; i <= RndObject(1, 3, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(3 - klissan_diff_div2, 1), max(25 - (klissan_diff_div2 * 4), 6), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из рогита (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 25, 80, 2, 5);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Rogit_damage', 'NoShow'); //Акткод на урон рогита, даёт процентный бонус к урону тем больший, чем больший процент HP отсутствует",
                        "",
                        "        //Задаём размер корпуса рогита в зависимости от сложности клисан и текущего ТУ",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 3, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 62.5), 185) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg('ShuKlissan_RogitHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Выдача оружия и оборудования для рогита (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveRogitEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveRogitEq(ship, t_Engine);",
                        "        GiveRogitEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveRogitEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveRogitEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveRogitEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса рогита в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 3, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 62.5), 185) + RndObject(-15, 35, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_AllyMonchikHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Рогиту вешаем бонусы на силу энергетического и ракетного оружия, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = klissan_diff + PortionInDiapason(hull_tech_level, 1, 8, 1, 10);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 1);",
                        "        ShipSkill(ship, 'Mobility', ShipSkill(ship, 'Mobility') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Катаури",
                        "    else if(sub_type == 3)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из катаури",
                        "        for(i = 1; i <= RndObject(1, 3, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(5 - klissan_diff_div2, 1), max(45 - (klissan_diff_div2 * 4), 12), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из катаури (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 15, 85, 3, 6);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Katauri_attack', 'NoShow'); //Акткод на крит катаури. Позволяет нанести полуторный урон любым неракетным выстрелом с шансом 25%, а если цель имеет меньше половины ХП - двойной урон с шансом 33%.",
                        "",
                        "        //Выдача оружия и оборудования для катаури (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        int is_missiles = 0; //Маркер о наличии в оружейном наборе катаури ракетных орудий (необходим для гарантированной выдачи таким катаури радара)",
                        "",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveKatauriEq(ship, t_CustomWeapon, damage_type_arr, is_missiles);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveKatauriEq(ship, t_Engine);",
                        "        GiveKatauriEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveKatauriEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveKatauriEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2) || is_missiles)",
                        "        {",
                        "            GiveKatauriEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveKatauriEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveKatauriEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса катаури в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 2, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 75), 275) + RndObject(-25, 45, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_AllyCatauriHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "",
                        "        //Катаури вешаем бонус на силу ракетных орудий и дальность стрельбы, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = klissan_diff + PortionInDiapason(hull_tech_level, 1, 8, 1, 10);",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "        bonus = (5 * klissan_diff) + (5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWRadius'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "    }",
                        "    //Нондус",
                        "    else if(sub_type == 2)",
                        "    {",
                        "        //Определяем, сколько протоплазмы выпадет из нондуса",
                        "        for(i = 1; i <= RndObject(1, 4, ship); i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(15 - klissan_diff_div2, max(60 - (klissan_diff_div2 * 4), 18), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из нондуса (создание и заполнение ошмётков производится ниже)",
                        "        remains_count = PortionInDiapason(remains_count, 10, 65, 4, 7);",
                        "",
                        "        ShipAddCustomShipInfo(ship, 'Nondus_shield', 'NoShow'); //Акткод на щит нондуса. Щит блокирует весь наносимый кораблю урон и имеет прочность 30-40% от запаса ХП нондуса, когда спадает - наносит всем кораблям в радиусе 250 ед. урон, равный последнему нанесенному нондусу урону, увеличенному вдвое.",
                        "",
                        "        //Выдача оружия и оборудования для нондуса (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveNondusEq(ship, t_CustomWeapon, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveNondusEq(ship, t_Engine);",
                        "        GiveNondusEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveNondusEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveNondusEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveNondusEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        //Задаём размер корпуса нондуса в зависимости от сложности клисан и текущего ТУ (нет)",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2 - 1, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 135), 400) + RndObject(-25, 45, ship));",
                        "        SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_AllyNondusHull'), hull);",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "        if(klissan_diff_div2 > 1) ItemImprovement(hull, 1);",
                        "",
                        "        //Нондусу вешаем бонус на силу осколочных орудий и ГЗП, а также повышаем навык точности",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "        bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWSplinter'), bonus);",
                        "        bonus = round((1.5 * klissan_diff / 2) + (1.5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "        ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "        ShipSkill(ship, 'Accuracy', ShipSkill(ship, 'Accuracy') + 2);",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "",
                        "        //Если подключён мод EvoArmada, добавляем нондусу дополнительные залпы",
                        "        if(EvoArmadaInit) ShipSpecialBonuses(ship, bonAttacks, 1);",
                        "    }",
                        "    //Эгемон",
                        "    else //if(sub_type == 1)",
                        "    {",
                        "        //Шанс на появление гигаса",
                        "        if(!is_gigas)",
                        "        {",
                        "            if(RndObject(1, 100, ship) <= 10)",
                        "            {",
                        "                is_gigas = 1;",
                        "                ShipType(ship, 'Klissan0');",
                        "                //SetName(ship, CT('ShipType.Klissan.Gigas') + ' ' + ShipName(ship));",
                        "            }",
                        "        }",
                        "",
                        "        //Определяем, сколько протоплазмы выпадет из эгемона",
                        "        int protoplasm_pieces = RndObject(2, 5, ship);",
                        "        if(is_gigas) protoplasm_pieces = RndObject(8, 12, ship);",
                        "        for(i = 1; i <= protoplasm_pieces; i = i + 1)",
                        "        {",
                        "            item = CreateCustomCountableItem('KlissanProtoplasm', RndObject(max(20 - klissan_diff_div2, 1), max(90 - (klissan_diff_div2 * 4), 24), ship), 1);",
                        "            EqCustomFaction(item, 'Klissan');",
                        "            ItemCost(item, ItemSize(item) * 30);",
                        "            ShipAddDropItem(ship, item);",
                        "        }",
                        "",
                        "        //Определяем, сколько ошмётков выпадет из эгемона (создание и заполнение ошмётков производится ниже)",
                        "        if(is_gigas) remains_count = PortionInDiapason(remains_count, 15, 90, 7, 11);",
                        "        else remains_count = PortionInDiapason(remains_count, 5, 90, 5, 8);",
                        "",
                        "        //ShipAddCustomShipInfo(ship, 'Egemon_armor', 'NoShow'); //Акткод на контратаку эгемона. Позволяет эгемону контратаковать противника подходящей по дальности и не сломанной пушкой с шансом [12 + количество_орудий * 6]% при каждом попадании врага по эгемону.",
                        "",
                        "        //Выдача оружия и оборудования для эгемона (ожидается, что с возможным перевесом он что-нибудь придумает сам)",
                        "        damage_type_arr = newarray(3);",
                        "        damage_type_arr[0] = 0;",
                        "        damage_type_arr[1] = 0;",
                        "        damage_type_arr[2] = 0;",
                        "        for(i = 0; i < CountKlissanEqByType(ship, sub_type, 0); i = i + 1) GiveEgemonEq(ship, t_CustomWeapon, -1, damage_type_arr);",
                        "        if(damage_type_arr[0] >= damage_type_arr[1] && damage_type_arr[0] >= damage_type_arr[2]) mutations_fit_set = mutations_fit_set | 2;",
                        "        else if(damage_type_arr[1] >= damage_type_arr[2]) mutations_fit_set | 4;",
                        "        else mutations_fit_set | 8;",
                        "",
                        "        GiveEgemonEq(ship, t_Engine);",
                        "        GiveEgemonEq(ship, t_FuelTanks);",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveEgemonEq(ship, t_RepairRobot);",
                        "            mutations_fit_set = mutations_fit_set | 64;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 1))",
                        "        {",
                        "            GiveEgemonEq(ship, t_DefGenerator);",
                        "            mutations_fit_set = mutations_fit_set | 256;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_Radar);",
                        "            mutations_fit_set = mutations_fit_set | 16;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_Scaner);",
                        "            mutations_fit_set = mutations_fit_set | 32;",
                        "        }",
                        "        if(CountKlissanEqByType(ship, sub_type, 2))",
                        "        {",
                        "            GiveEgemonEq(ship, t_CargoHook);",
                        "            mutations_fit_set = mutations_fit_set | 128;",
                        "        }",
                        "",
                        "        hull_tech_level = max(min(GTL + klissan_diff_div2, 8), 1);",
                        "        ItemLevel(hull, hull_tech_level);",
                        "        //Эгемон",
                        "        if(!is_gigas)",
                        "        {",
                        "            //Задаём размер корпуса эгемона в зависимости от сложности клисан и текущего ТУ (нет)",
                        "            //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 225), 650) + RndObject(-45, 65, ship));",
                        "            SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_AllyEgemonHull'), hull);",
                        "",
                        "            //Эгемону вешаем бонус на силу энергетических орудий, защиту и броню",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "            bonus = round((1.2 * klissan_diff / 2) + (1.2 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonHull'), bonus);",
                        "            bonus = round((1.5 * klissan_diff / 2) + (1.5 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "",
                        "            //Если подключён мод EvoArmada, добавляем эгемону дополнительные залпы",
                        "            if(EvoArmadaInit)",
                        "            {",
                        "                ShipSpecialBonuses(ship, bonAttacks, 1);",
                        "                //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "                ShipAddCustomShipInfo(ship, 'EvoArmada_CapitalShipInfos', 'NoShow', 1);",
                        "                //Ограничиваем максимальный уровень навыка атаки (чтобы не так сильно нагибал)",
                        "                if(ShipSkill(ship, 'Accuracy') > 2) ShipSkill(ship, 'Accuracy', RndObject(2, 3, ship));",
                        "            }",
                        "        }",
                        "        //Гигас",
                        "        else",
                        "        {",
                        "            //Задаём размер корпуса гигаса в зависимости от сложности клисан и текущего ТУ (нет)",
                        "            //ItemSize(hull, max(round((0.00085 * KlissanInvasion['KlissanDiffLevel'] + 1) * hull_tech_level * 625), 1750) + RndObject(-60, 100, ship));",
                        "            ItemSize(hull, round(2.5 * ItemSize(hull)) + RndObject(-50, 50, ship));",
                        "            SpecialToEquipment(FindBonusByNameInCfg(hull_bon_mod + '_GigasHull'), hull);",
                        "",
                        "            //Гигасу вешаем целую кучу бонусов",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_ExtraSpecialsLineBreak'));",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWEnergy'), bonus);",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWSplinter'), bonus);",
                        "            bonus = round((1.8 * klissan_diff / 2) + (1.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonWMissile'), bonus);",
                        "            bonus = round((0.8 * klissan_diff / 2) + (0.8 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonHull'), bonus);",
                        "            bonus = round((10.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 25, 100) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonSpeed'), bonus);",
                        "            bonus = round((1.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 5, 25) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonScan'), bonus); //Используется для эффективного применения всяких оружейных бонусов, зависящих от сканера",
                        "            bonus = round((2.0 * klissan_diff) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 5, 20) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDroid'), bonus);",
                        "            bonus = round((1.0 * klissan_diff / 2) + (1.0 * PortionInDiapason(hull_tech_level, 1, 8, 1, 10) / 2));",
                        "            ItemExtraSpecialsAddByType(hull, FindBonusByNameInCfg('ShuKlissan_bonDef'), bonus);",
                        "",
                        "            //Старые бонусы",
                        "            //Заменил деление умножением, т.к. для процессора это более простая операция",
                        "            // ShipSpecialBonuses(ship, bonSpeed, (0.111 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 9",
                        "            // ShipSpecialBonuses(ship, bonWEnergy, (0.0133 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 75",
                        "            // ShipSpecialBonuses(ship, bonWSplinter, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonWMissile, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonDef, (0.00666 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 150",
                        "            // ShipSpecialBonuses(ship, bonHull, (0.00333 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 300",
                        "            // ShipSpecialBonuses(ship, bonDroid, (0.0166 * KlissanInvasion['KlissanDiffLevel']) * GTL); //аналог деления на 60",
                        "            // ShipSpecialBonuses(ship, bonScan, 100); //Используется для эффективного применения всяких оружейных бонусов, зависящих от сканера",
                        "",
                        "            //Если подключён мод EvoArmada, добавляем дополнительные залпы кораблю в этом же цикле (чтоб два раза не перебирать доминаторов в разных модах)",
                        "            if(EvoArmadaInit)",
                        "            {",
                        "                ShipSpecialBonuses(ship, bonAttacks, 2);",
                        "                //Вешаем инфошку для пересчёта числа доп. залпов при стрельбе крупных кораблей по более мелким судам",
                        "                ShipAddCustomShipInfo(ship, 'EvoArmada_CapitalShipInfos', 'NoShow', 2);",
                        "                //Ограничиваем максимальный уровень навыка атаки (чтобы не так сильно нагибал)",
                        "                if(ShipSkill(ship, 'Accuracy') > 1) ShipSkill(ship, 'Accuracy', RndObject(1, 2, ship));",
                        "            }",
                        "        }",
                        "",
                        "        ShipSkill(ship, 'Trader', 0);",
                        "        ShipSkill(ship, 'Charm', 0);",
                        "        ShipSkill(ship, 'Leadership', 0);",
                        "",
                        "        ItemOwner(hull, None);",
                        "        HullHP(hull, 'To100');",
                        "        if(klissan_diff_div2 > 1) ItemImprovement(hull, RndObject(1, 2, ship)); //Улучшение корпуса обычными или лучшими специалистами",
                        "    }",
                        "",
                        "    //Выдача клисану подходящих мутаций (акринов)",
                        "    if(KlissanInvasion['MutationsStartDay'] <= CurTurn())",
                        "    {",
                        "        //Для каждого нового клисана делаем N попыток повесить мутацию на оборудование с некоторым шансом",
                        "        int mutation_chance = PortionInDiapason(sub_type, 1, 5, 35, 10) + (round(0.7 * klissan_diff) * 7); //Крупные корабли получают мутации с большим шансом",
                        "        int roll = RndObject(1, 100, ship);",
                        "",
                        "        if(roll <= mutation_chance)",
                        "        {",
                        "            int mutations_try_quantity = PortionInDiapason(mutation_chance - roll, 1, mutation_chance, 1, PortionInDiapason(CurTurn() - KlissanInvasion['MutationsStartDay'], 1, 5475, 5, 10)); //Определяем число попыток для наложения мутаций, чем больше прошло времени с момента начала их появления, тем больше попыток",
                        "",
                        "            int mutations_added = 0; //Превращаем шанс в счётчик успешно установленных мутаций для ограничения их максимального количества на корабль",
                        "            for(i = 1; i <= mutations_try_quantity; i = i + 1)",
                        "            {",
                        "                //Выбираем случайную подходящую категорию из доступных (включая общую Common в первом бите)",
                        "                int mutations_category = -1;",
                        "                while(!(mutations_fit_set & (1 << mutations_category))) mutations_category = RndObject(0, 8, ship);",
                        "                //Выбираем случайную доступную мутацию из этой категории",
                        "                bonus = KlissanInvasion['MutationsGiveList', mutations_category, RndObject(0, ArrayDim(KlissanInvasion['MutationsGiveList', mutations_category]) - 1, ship)];",
                        "",
                        "                //Ищем подходящую оборудку для установки мутации (перебор строки для определения подходящей был бы не быстрее)",
                        "                for(int j = 1; j < ShipItems(ship); j = j + 1)",
                        "                {",
                        "                    item = ShipItems(ship, j);",
                        "                    if(EqSpecial(item) == -1)",
                        "                    {",
                        "                        if(MayAddBonusToEq(bonus, item))",
                        "                        {",
                        "                            SpecialToEquipment(bonus, item);",
                        "                            mutations_added = mutations_added + 1;",
                        "                            break;",
                        "                        }",
                        "                    }",
                        "                }",
                        "",
                        "                if(mutations_added >= 5) break;",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    SetName(hull, Format(Name(hull), '<KlissanType'+'>', CT('Items.Hull.KlissanType.' + hull_tech_level), ''));",
                        "    EqCustomFaction(hull, 'Klissan'); //Вешаем на корпус клисанскую фракцию",
                        "    Chameleon(ship); //Обновляем скин корпуса после всех проведённых изменений",
                        "    Chameleon(ship); //Повторно на всякий пожарный",
                        "",
                        "    //Заполняем дроп клисана ошмётками",
                        "    int remains_max = CT('Script.Mod_ShuKlissan.KlissanRemainsCount');",
                        "    int set_remains_added = 0;",
                        "    for(i = 0; i < remains_count; i = i + 1)",
                        "    {",
                        "        //Подбираем ошмёток, который ещё не выпадал в дроп данному клисану",
                        "        int rand = RndObject(1, remains_max, ship);",
                        "        while((set_remains_added & (1 << rand))) rand = RndObject(1, remains_max, ship);",
                        "        set_remains_added = set_remains_added + (1 << rand);",
                        "        //Добавляемый выбранный ошмёток в дроп",
                        "        item = CreateQuestItem('KlissanRemains' + rand, None);",
                        "        //if(is_gigas) ItemCost(item, ItemCost(item) * 2 + GalaxyMoney(1));",
                        "        EqCustomFaction(item, 'Klissan');",
                        "        ShipAddDropItem(ship, item);",
                        "    }",
                        "",
                        "    //Запрещаем боту самостоятельно совершать прыжки",
                        "    ShipSpecialBonuses(ship, bonFuel, -10000);",
                        "",
                        "    //Вешаем фракцию сразу, т.к. в противном случае клисану не будут автоматически выдаваться фракционные ММ",
                        "    ShipJoinToScript(ship, 'Mod_ShuKlissan.KlissanAlly');",
                        "    ShipCustomFaction(ship, 'Klissan');",
                        "",
                        "    //Выдаём клисану споры",
                        "    ShipImproveItems(ship, RndObject(klissan_diff_div2, 7 + klissan_diff_div2, ship)); //Эта строка автоматически вешает подходящие ММ на его оборудку",
                        "    if(RndObject(1, 100, ship) <= PortionInDiapason(sub_type, 5, 1, 1, 7)) //Шанс на добавление клисанской споры в дроп тем выше, чем выше класс клисана",
                        "    {",
                        "        item = CreateMM(FindBonusByNameInCfg(CT('Script.Mod_ShuKlissan.SporesGiveList.' + RndObject(1, CT('Script.Mod_ShuKlissan.SporesGiveList.Count'), ship))));",
                        "        ShipAddDropItem(ship, item);",
                        "    }",
                        "",
                        "    //Общие для всех кораблей клисан параметры",
                        "    ShipOwner(ship, None);",
                        "    int free_exp = ShipFreeExp(ship);",
                        "    ShipFreeExp(ship, 0);",
                        "    SetShipExpByType(ship, GetShipExpByType(ship) - free_exp, 0);",
                        "    ShipFace(ship, 0);",
                        "",
                        "    Chameleon(ship); //И ещё разок напоследок",
                        "",
                        "    //Выставляем в зависимости от сюжет-развития",
                        "    if(KlissanInvasion['AllyMachpellaStage'] == 1) ShipStanding(ship,5);",
                        "    else if(KlissanInvasion['AllyMachpellaStage'] == 4) ShipStanding(ship,9);",
                        "    else if(KlissanInvasion['AllyMachpellaStage'] == 6) ShipStanding(ship,9);",
                        "    else ShipStanding(ship,2);",
                        "",
                        "    TransferShip(ship,GroupToShip(MahpellaAlly));",
                        "    OrderTakeOff(ship);",
                        "    HullHP(ship,ItemSize(ShipEqInSlot(ship,t_Hull)));",
                        "",
                        "    result = ship;",
                        "}",
                        "",
                        "//Сообщаем игроку, что он ИДИОТ",
                        "//ОН ДОПУСТИЛ ПОТЕРЮ ДОРОГОСТОЯЩЕГО ОСОЮЗНИВАНИЯ, ЕГО СТОИМОСТЬ БУДЕТ ВЫЧТЕНА ИЗ ЕГО ЖАЛОВАНИЯ",
                        "//И ЕМУ ПРИДЁТСЯ БЫТЬ РЕЙНДЖЕРОМ 510 ЛЕТ, ПОТОМУ ЧТО ИМЕННО СТОЛЬКО ЛЕТ ЕМУ ПОТРЕБУЕТСЯ, ЧТОБЫ",
                        "//ОПЛАТИТЬ КОМПЛЕКТ СОЮЗНОЙ МАХПЕЛЛЫ МОДЕЛЬ ДВА",
                        "function AllyMahpellaAttacked() {",
                        "    CustomEther('GalaxyAlert', 7, 'ShuKlissan_AllyMahpellaCame',\"Внимание всем рейнджерам!\"+ CT('FormInfo.br')+\"В системе\"+' '+Name(ShipStar(GroupToShip(MahpellaAlly)))+' '+\"произошло столкновение с новым представителем клисанской формы жизни. Всем свободным пилотам срочно прибыть в систему для подавления инородных форм жизни!\",56);",
                        "    Sound('Sound.NewMsg');",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 170,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 415,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Если игрок атаковал Махпеллу, то она обозляется",
                        "if(Hit(CurShip)) {",
                        "    KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "    ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "    for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "    }",
                        "    for(i=0;GroupCount(KlissanAllyRaid)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAllyRaid,i),9);",
                        "    }",
                        "    AllyMahpellaAttacked();",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 170,
                    "Pos.y": 530,
                    "Parent": -1,
                    "#": 417,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(!GroupCount(MahpellaAlly)) {",
                        "    OrderLock(CurShip,1);",
                        "    ShipDestroy(CurShip,1);",
                        "}",
                        "",
                        "//Если игрок атаковал Махпеллу, то она обозляется",
                        "if(Hit(CurShip)) {",
                        "    KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "    ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "    for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "    }",
                        "    for(i=0;GroupCount(KlissanAllyRaid)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAllyRaid,i),9);",
                        "    }",
                        "    AllyMahpellaAttacked();",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 440,
                    "Pos.y": 510,
                    "Parent": -1,
                    "#": 419,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(!GroupCount(MahpellaAlly)) {",
                        "    OrderLock(CurShip,1);",
                        "    ShipDestroy(CurShip,1);",
                        "}",
                        "",
                        "cur_star = ShipStar(CurShip);",
                        "if(cur_star != GalaxyStar(GetData(3))) {",
                        "    OrderJump(CurShip, GalaxyStar(GetData(3)));",
                        "}",
                        "else {",
                        "    if(!StarOwner(cur_star) && StarCustomFaction(cur_star) == '') {",
                        "        //Если система освобождена - автоматически переводим в стейт обороны системы",
                        "        ChangeState(StateDefend,CurShip);",
                        "    }",
                        "}",
                        "",
                        "//Если игрок атаковал Махпеллу, то она обозляется",
                        "if(Hit(CurShip)) {",
                        "    KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "    ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "    for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "    }",
                        "    for(i=0;GroupCount(KlissanAllyRaid)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAllyRaid,i),9);",
                        "    }",
                        "    AllyMahpellaAttacked();",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 310,
                    "Pos.y": 530,
                    "Parent": -1,
                    "#": 421,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(!GroupCount(MahpellaAlly)) {",
                        "    OrderLock(CurShip,1);",
                        "    ShipDestroy(CurShip,1);",
                        "}",
                        "",
                        "cur_star = ShipStar(CurShip);",
                        "if(!StarBattle(cur_star)) {",
                        "    if(GetData(2) != 20) SetData(GetData(2)+1,2);",
                        "    else {",
                        "        j = 0;",
                        "        tint1 = 0;",
                        "        for(i=0;StarPlanets(cur_star)>i;i=i+1) {",
                        "            cur_planet = StarPlanets(cur_star,i);",
                        "            if(PlanetOwner(cur_planet) == 6) continue;",
                        "            j = j + PlanetWarriors(cur_planet);",
                        "            tint1 = tint1 + 1;",
                        "        }",
                        "",
                        "        if(j >= (tint1 * 2)) {",
                        "            ChangeState(ToMahpella,CurShip);",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "//Если игрок атаковал Махпеллу, то она обозляется",
                        "if(Hit(CurShip)) {",
                        "    KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "    ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "    for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "    }",
                        "    for(i=0;GroupCount(KlissanAllyRaid)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAllyRaid,i),9);",
                        "    }",
                        "    AllyMahpellaAttacked();",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 440,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 425,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Клисане возвращаются с задания в резерв Махпеллы",
                        "if(!GroupCount(MahpellaAlly)) {",
                        "    OrderLock(CurShip,1);",
                        "    ShipDestroy(CurShip,1);",
                        "}",
                        "else {",
                        "    if(ShipStar(CurShip) != ShipStar(GroupToShip(MahpellaAlly))) {",
                        "        OrderJump(CurShip,ShipStar(GroupToShip(MahpellaAlly)));",
                        "    }",
                        "    else {",
                        "        ShipJoin(KlissanAlly,CurShip);",
                        "    }",
                        "}",
                        "",
                        "//Если игрок атаковал Махпеллу, то она обозляется",
                        "if(Hit(CurShip)) {",
                        "    KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "    ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "    for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "    }",
                        "    for(i=0;GroupCount(KlissanAllyRaid)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAllyRaid,i),9);",
                        "    }",
                        "    AllyMahpellaAttacked();",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 230,
                    "Pos.y": 340,
                    "Parent": -1,
                    "#": 436,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(KlissanInvasion['AllyMachpellaStage'] != 2) {",
                        "    ShipOut(CurShip);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 459,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "    ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "}",
                        "AllyMahpellaAttacked();"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 660,
                    "Pos.y": 530,
                    "Parent": -1,
                    "#": 466,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "CustomEther('GalaxyAlert', 7, 'ShuKlissan_AllyMahpellaCame',\"Внимание всем рейнджерам!\"+ CT('FormInfo.br')+\"Благодаря отваге и смекалке рейнджера\"+' '+Name(Player())+' '+\"Коалиции Разумных Рас удалось выйти на связь с новоприбывшей Махпеллой. Как оказалось, она сама разыскивает одного из сородичей, который подавал сигналы о помощи из нашего Рукава. Межзвёздная Коалиция не может оставить существ, какой расы бы они ни были, в беде, и протянула руку помощи клисанам. Этот день - великий день, ведь с этого дня мы с гордостью говорим о союзе Коалиции и клисан, существ из двух разных рукавов - Ориона и Персея!\",56);",
                        "Sound('Sound.NewMsg');",
                        "AddPlanetNews(\"Внимание всем!\"+ CT('FormInfo.br')+\"Благодаря отваге и смекалке рейнджера\"+' '+Name(Player())+' '+\"Коалиции Разумных Рас удалось выйти на связь с новоприбывшей Махпеллой. Как оказалось, она сама разыскивает одного из сородичей, который подавал сигналы о помощи из нашего Рукава. Межзвёздная Коалиция не может оставить существ, какой расы бы они ни были, в беде, и протянула руку помощи клисанам. Этот день - великий день, ведь с этого дня мы с гордостью говорим о союзе Коалиции и клисан, существ из двух разных рукавов - Ориона и Персея!\",56);",
                        "KlissanInvasion['AllyMachpellaStage'] = 3;",
                        "//Снимаем защиту от проклятых комаров",
                        "NoComeKlingToStar(ShipStar(Player()),0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 310,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 500,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(!GroupCount(MahpellaAlly)) {",
                        "    OrderLock(CurShip,1);",
                        "    ShipDestroy(CurShip,1);",
                        "}",
                        "",
                        "//Если игрок атаковал Махпеллу, то она обозляется",
                        "if(Hit(CurShip)) {",
                        "    KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "    ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "    for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "    }",
                        "    for(i=0;GroupCount(KlissanAllyRaid)>i;i=i+1) {",
                        "        ShipStanding(GroupShip(KlissanAllyRaid,i),9);",
                        "    }",
                        "    AllyMahpellaAttacked();",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -370,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 512,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(ShipStar(GroupToShip(MahpellaAlly)) == GalaxyStar(TortugatzId)) {",
                        "    if(GetShipPlanet(Player()) == PlanetPirateClan()) {",
                        "        if(ShipOnSidePirateClan(Player())) {",
                        "            if(PirateWin() == 1 || PirateWin() == 2 || PirateWin() == 5) {",
                        "                KlissanInvasion['AllyMachpellaStage'] = 6;",
                        "                Dialog(GroupToShip(MahpellaAlly));",
                        "            }",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1140,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 518,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] = 4;",
                        "ShipStanding(GroupToShip(MahpellaAlly),9);",
                        "for(i=0;GroupCount(KlissanAlly)>i;i=i+1) {",
                        "    ShipStanding(GroupShip(KlissanAlly,i),9);",
                        "}",
                        "AllyMahpellaAttacked();"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 770,
                    "Pos.y": -110,
                    "Parent": -1,
                    "#": 519,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "AddPlanetNews(\"Граждане Коалиции Разумных Рас!<br><clr><clrEnd><br>Наступил великий день<br>В ходе невероятно авантюрной операции адмирала Дурдыма штурмовое подразделение Космических Сил Межзвёздной Коалиции смогло вычислить координаты центра управления действиями мятежников, называвших себя Анархистским Братством, более известным как Пиратский Клан, и, сходу вступив в бой с превосходящими силами врага, наголову разгромить их и обнаружить, что в руках мятежника оказался сумасшедший гений, сумевший подчинить своей воле клисан и использовавший клисан на пользу разбойникам.<br><clr><clrEnd><br>Это не остановило наших бравых защитников, разгромивших научный комплекс безумного учёного и запустивших процесс самоликвидации клисан. А это значит, что наступил великий день - день окончания Третьей Клисанской войны, и конец анархистскому мятежу. Отныне над Галактикой будет развеваться великое знамя Коалиции - знамя свободы рас и мира между расами. Виват!\",56);",
                        "NewsAdd(\"Граждане Коалиции Разумных Рас!<br><clr><clrEnd><br>Наступил великий день<br>В ходе невероятно авантюрной операции адмирала Дурдыма штурмовое подразделение Космических Сил Межзвёздной Коалиции смогло вычислить координаты центра управления действиями мятежников, называвших себя Анархистским Братством, более известным как Пиратский Клан, и, сходу вступив в бой с превосходящими силами врага, наголову разгромить их и обнаружить, что в руках мятежника оказался сумасшедший гений, сумевший подчинить своей воле клисан и использовавший клисан на пользу разбойникам.<br><clr><clrEnd><br>Это не остановило наших бравых защитников, разгромивших научный комплекс безумного учёного и запустивших процесс самоликвидации клисан. А это значит, что наступил великий день - день окончания Третьей Клисанской войны, и конец анархистскому мятежу. Отныне над Галактикой будет развеваться великое знамя Коалиции - знамя свободы рас и мира между расами. Виват!\");",
                        "Sound('Sound.NewMsg');",
                        "",
                        "cur_ship = GroupToShip(Handler);",
                        "//Закрываем лавочку обратно",
                        "NoLanding(cur_ship,1);",
                        "",
                        "//Ставим общую, нафиг частности",
                        "KlissanInvasion['PlotEnding'] = 'Coalition.TortugatzCaptured';",
                        "",
                        "//Чтобы не мешались и вообще",
                        "ShipOwner(cur_ship,Fei);",
                        "ShipOwner(GroupToShip(Machpella),Fei);",
                        "",
                        "KlissanInvasion['AllyMachpellaStage'] = 7;"
                    ]
                }
            ],
            "Places": 
            [
                {
                    "Type": "TPlace",
                    "Name": "MachpellaPlace",
                    "Pos.x": 30,
                    "Pos.y": -60,
                    "Parent": 4,
                    "#": 7,
                    "Place.Type": 5,
                    "Angle": "0",
                    "Dist": "0",
                    "Radius": 300,
                    "Obj1": 12,
                    "Obj2": -1
                },
                {
                    "Type": "TPlace",
                    "Name": "MachpellaPatrol",
                    "Pos.x": 30,
                    "Pos.y": -40,
                    "Parent": 4,
                    "#": 8,
                    "Place.Type": 0,
                    "Angle": "0",
                    "Dist": "0",
                    "Radius": 500,
                    "Obj1": -1,
                    "Obj2": -1
                },
                {
                    "Type": "TPlace",
                    "Name": "NeurolinksPatrol",
                    "Pos.x": -190,
                    "Pos.y": 260,
                    "Parent": -1,
                    "#": 343,
                    "Place.Type": 0,
                    "Angle": "0",
                    "Dist": "0",
                    "Radius": 650,
                    "Obj1": -1,
                    "Obj2": -1
                },
                {
                    "Type": "TPlace",
                    "Name": "WatchingAlliedMahpella",
                    "Pos.x": -190,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 437,
                    "Place.Type": 5,
                    "Angle": "0",
                    "Dist": "0.5",
                    "Radius": 700,
                    "Obj1": 412,
                    "Obj2": -1
                }
            ],
            "Planets": 
            [
                {
                    "Type": "TPlanet",
                    "Name": "InitPlanet",
                    "Pos.x": -100,
                    "Pos.y": 0,
                    "Parent": 4,
                    "#": 5,
                    "Race": 62,
                    "Owner": 62,
                    "Economy": 14,
                    "Goverment": 62,
                    "RangeMin": 0,
                    "RangeMax": 100,
                    "Dialog": -1
                }
            ],
            "Ships": 
            [
                {
                    "Type": "TStarShip",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": -60,
                    "Parent": 4,
                    "#": 6,
                    "Count": 1,
                    "Owner": 62,
                    "Ship.Type": 126,
                    "Player": true,
                    "SpeedMin": 0,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                }
            ],
            "Stars": 
            [
                {
                    "Type": "TStar",
                    "Name": "InitStar",
                    "Pos.x": -220,
                    "Pos.y": 280,
                    "Parent": -1,
                    "#": 4,
                    "Constellation": 0,
                    "Priority": 0,
                    "NoKling": false,
                    "NoComeKling": false
                }
            ],
            "Statements": 
            [
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 124,
                    "#": 219,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!KlissanInvasion['KlissanControl.WasReceived']"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 20,
                    "Parent": 163,
                    "#": 229,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 20,
                    "Parent": 163,
                    "#": 230,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 30,
                    "Pos.y": 20,
                    "Parent": 166,
                    "#": 233,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!ControlledSystems(2)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -30,
                    "Pos.y": 20,
                    "Parent": 166,
                    "#": 234,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(2) != 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 173,
                    "#": 241,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 106,
                    "#": 242,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -10,
                    "Pos.y": 20,
                    "Parent": 179,
                    "#": 247,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "CoalitionDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 10,
                    "Pos.y": 20,
                    "Parent": 179,
                    "#": 248,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!CoalitionDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 20,
                    "Parent": 184,
                    "#": 253,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!CoalitionDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 184,
                    "#": 254,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "CoalitionDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 40,
                    "Pos.y": -20,
                    "Parent": 2,
                    "#": 266,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!ShipIsTakeoff(Player())"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 32,
                    "#": 267,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "PirateWin() != 3"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 30,
                    "Parent": 32,
                    "#": 268,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "PirateWin() == 3"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": -70,
                    "Parent": -1,
                    "#": 269,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "PirateWin() == 3 || PirateWin() == 4"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": -70,
                    "Parent": -1,
                    "#": 270,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "PirateWin() != 3 && PirateWin() != 4"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 271,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 272,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 273,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!ControlledSystems(0) && !ControlledSystems(1)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": -50,
                    "Parent": -1,
                    "#": 274,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(0) || ControlledSystems(1)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 70,
                    "Pos.y": 20,
                    "Parent": 45,
                    "#": 275,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 45,
                    "#": 276,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 20,
                    "Parent": 211,
                    "#": 277,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GetShipPirateRank(Player()) >= 7"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 20,
                    "Parent": 211,
                    "#": 278,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GetShipPirateRank(Player()) < 7"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -30,
                    "Pos.y": 20,
                    "Parent": 204,
                    "#": 280,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!GroupCount(Machpella)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 204,
                    "#": 281,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "GroupCount(Machpella)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 40,
                    "Pos.y": 40,
                    "Parent": 90,
                    "#": 282,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!(check & 2)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 40,
                    "Parent": 90,
                    "#": 283,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "(check & 2)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 40,
                    "Parent": 90,
                    "#": 284,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "(check & 1)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 60,
                    "Pos.y": 40,
                    "Parent": 90,
                    "#": 319,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 80,
                    "Pos.y": 40,
                    "Parent": 90,
                    "#": 322,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 420,
                    "Pos.y": -270,
                    "Parent": -1,
                    "#": 335,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!(check & 1)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -10,
                    "Pos.y": 20,
                    "Parent": 98,
                    "#": 351,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 10,
                    "Pos.y": 20,
                    "Parent": 98,
                    "#": 352,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 99,
                    "#": 353,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 369,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) >= j"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 423,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] == 2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 920,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 427,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipStar(GetShipRuins(Player())) != ShipStar(GroupToShip(MahpellaAlly))"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 960,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 428,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipStar(GetShipRuins(Player())) == ShipStar(GroupToShip(MahpellaAlly))"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 448,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 449,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!DomiksDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 467,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] == 4"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 780,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 470,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] == 3"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1060,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 501,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] == 5"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": -110,
                    "Parent": -1,
                    "#": 504,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] == 4 || !KlissanInvasion['AllyMachpellaStage']"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 610,
                    "Pos.y": -110,
                    "Parent": -1,
                    "#": 505,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] != 4 && KlissanInvasion['AllyMachpellaStage']"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -400,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 510,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipIsTakeoff(Player())"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -400,
                    "Pos.y": 160,
                    "Parent": -1,
                    "#": 511,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] == 5"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1140,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 513,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] == 6"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -1200,
                    "Pos.y": -370,
                    "Parent": -1,
                    "#": 521,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] != 7"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -1170,
                    "Pos.y": -370,
                    "Parent": -1,
                    "#": 522,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['AllyMachpellaStage'] == 7"
                    ]
                }
            ],
            "States": 
            [
                {
                    "Type": "TState",
                    "Name": "PlayerState",
                    "Pos.x": 0,
                    "Pos.y": -30,
                    "Parent": 10,
                    "#": 20,
                    "Move": 0,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "MachpellaWaitInTortugatzState",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 11,
                    "#": 21,
                    "Move": 1,
                    "MoveObj": 7,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "MachpellaTalk",
                    "OnActCode": "[t_OnShowingShipInfo,t_OnEnteringForm,t_OnStep|0]\r\nMachpellaActCode();",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "HandlerState",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 12,
                    "#": 22,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "HandlerCall",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "MachpellaAttackOnPlayerState",
                    "Pos.x": -230,
                    "Pos.y": 100,
                    "Parent": 21,
                    "#": 23,
                    "Move": 2,
                    "MoveObj": 10,
                    "Attack.Count": 1,
                    "Attack.Items": 
                    [
                        {
                            "Target.0": 10
                        }
                    ],
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "MachpellaTalk",
                    "OnActCode": "[t_OnShowingShipInfo,t_OnEnteringForm,t_OnStep|0]\r\nMachpellaActCode();",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "UnknownShipsState",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 14,
                    "#": 24,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "AssaultWarriorsState",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 15,
                    "#": 25,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "AssaultWBState",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 16,
                    "#": 26,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 3,
                    "Attack.Items": 
                    [
                        {
                            "Target.0": 11,
                            "Target.1": 12,
                            "Target.2": 13
                        }
                    ],
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "Ending_Coalition_TortugatzCaptured_TalkWB",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "HandlerGuardShipsState",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 13,
                    "#": 27,
                    "Move": 2,
                    "MoveObj": 10,
                    "Attack.Count": 3,
                    "Attack.Items": 
                    [
                        {
                            "Target.0": 10,
                            "Target.1": 16,
                            "Target.2": 15
                        }
                    ],
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "MachpellaJumpToStarState",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 21,
                    "#": 28,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "MachpellaTalk",
                    "OnActCode": "[t_OnShowingShipInfo,t_OnEnteringForm,t_OnStep|0]\r\nMachpellaActCode();",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "MachpellaFlyAroundStarState",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 28,
                    "#": 29,
                    "Move": 1,
                    "MoveObj": 8,
                    "Attack.Count": 1,
                    "Attack.Items": 
                    [
                        {
                            "Target.0": 10
                        }
                    ],
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "MachpellaTalk",
                    "OnActCode": "[t_OnShowingShipInfo,t_OnEnteringForm,t_OnStep|0]\r\nMachpellaActCode();",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "MachpellaJumpToTortugatzState",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 29,
                    "#": 30,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 1,
                    "Attack.Items": 
                    [
                        {
                            "Target.0": 10
                        }
                    ],
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "MachpellaTalk",
                    "OnActCode": "[t_OnShowingShipInfo,t_OnEnteringForm,t_OnStep|0]\r\nMachpellaActCode();",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "OrderGetReward",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 314,
                    "#": 312,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "NeurolinksNormalState",
                    "Pos.x": 0,
                    "Pos.y": 60,
                    "Parent": 325,
                    "#": 326,
                    "Move": 1,
                    "MoveObj": 343,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "KlissanTalk",
                    "OnActCode": "[t_OnShowingShipInfo,t_OnEnteringForm,t_OnStep|0]\r\nNeurolinkActCode();",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "NeurolinksJumpState",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 325,
                    "#": 328,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "KlissanTalk",
                    "OnActCode": "[t_OnShowingShipInfo,t_OnEnteringForm,t_OnStep|0]\r\nNeurolinkActCode();",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "KlissanShipsJumpBHState",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 330,
                    "#": 331,
                    "Move": 0,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "KlissanTalk",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "KlissanShipsNormalState",
                    "Pos.x": 0,
                    "Pos.y": 60,
                    "Parent": 332,
                    "#": 333,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "KlissanTalk",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "HandlerAttackOnPlayerState",
                    "Pos.x": 0,
                    "Pos.y": 60,
                    "Parent": 12,
                    "#": 337,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 1,
                    "Attack.Items": 
                    [
                        {
                            "Target.0": 10
                        }
                    ],
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "HandlerCall",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "NeurolinksAttackOnPlayerState",
                    "Pos.x": 0,
                    "Pos.y": 100,
                    "Parent": 325,
                    "#": 341,
                    "Move": 1,
                    "MoveObj": 343,
                    "Attack.Count": 1,
                    "Attack.Items": 
                    [
                        {
                            "Target.0": 10
                        }
                    ],
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "KlissanTalk",
                    "OnActCode": "[t_OnShowingShipInfo,t_OnEnteringForm,t_OnStep|0]\r\nNeurolinkActCode();",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "KlissanShipsAttackStarState",
                    "Pos.x": 0,
                    "Pos.y": 60,
                    "Parent": 330,
                    "#": 347,
                    "Move": 0,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "KlissanTalk",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "StateMahpaAlly",
                    "Pos.x": 170,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 414,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "StateDefendingMahpella",
                    "Pos.x": 170,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 416,
                    "Move": 2,
                    "MoveObj": 412,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "StateAttack",
                    "Pos.x": 440,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 418,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "StateDefend",
                    "Pos.x": 310,
                    "Pos.y": 480,
                    "Parent": -1,
                    "#": 420,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "ToMahpella",
                    "Pos.x": 440,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 424,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "StateWaiting",
                    "Pos.x": 230,
                    "Pos.y": 310,
                    "Parent": -1,
                    "#": 435,
                    "Move": 1,
                    "MoveObj": 437,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "WaitingOrders",
                    "Pos.x": 310,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 499,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                }
            ],
            "Variables": 
            [
                {
                    "Type": "TVar",
                    "Name": "i",
                    "Pos.x": -610,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 0,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "j",
                    "Pos.x": -580,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 1,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cost",
                    "Pos.x": -610,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 3,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "gunUpdateCheck",
                    "Pos.x": -860,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 264,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_star",
                    "Pos.x": -710,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 286,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_ship",
                    "Pos.x": -710,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 287,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_item",
                    "Pos.x": -710,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 288,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_hole",
                    "Pos.x": -710,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 289,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr1",
                    "Pos.x": -530,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 290,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr2",
                    "Pos.x": -530,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 291,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr3",
                    "Pos.x": -530,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 292,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tint1",
                    "Pos.x": -610,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 293,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tint2",
                    "Pos.x": -610,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 294,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "GTL",
                    "Pos.x": -530,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 295,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TortugatzId",
                    "Pos.x": -860,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 296,
                    "Var.Type": "Dword",
                    "Init": "70",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "NifigatzId",
                    "Pos.x": -860,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 297,
                    "Var.Type": "Dword",
                    "Init": "71",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_ruin",
                    "Pos.x": -710,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 298,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_planet",
                    "Pos.x": -710,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 299,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "rand",
                    "Pos.x": -610,
                    "Pos.y": 250,
                    "Parent": -1,
                    "#": 300,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TurnCodeIsDone",
                    "Pos.x": -860,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 301,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ScientistsIntelligence",
                    "Pos.x": -860,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 302,
                    "Var.Type": "Int",
                    "Init": "9",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tdwd1",
                    "Pos.x": -530,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 303,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "check",
                    "Pos.x": -610,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 304,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "size",
                    "Pos.x": -610,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 305,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tarr1",
                    "Pos.x": -710,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 306,
                    "Var.Type": "Array",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "UnknownShipsAttackTurn",
                    "Pos.x": -1030,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 307,
                    "Var.Type": "Int",
                    "Init": "1395",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "EvoArmadaInit",
                    "Pos.x": -860,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 308,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cnt",
                    "Pos.x": -610,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 309,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr4",
                    "Pos.x": -530,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 310,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tdwd2",
                    "Pos.x": -530,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 311,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "KlissanInvasion",
                    "Pos.x": -1030,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 315,
                    "Var.Type": "Array",
                    "Init": "",
                    "Global": true
                },
                {
                    "Type": "TVar",
                    "Name": "tstr5",
                    "Pos.x": -530,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 318,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tint3",
                    "Pos.x": -610,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 339,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tdwd3",
                    "Pos.x": -530,
                    "Pos.y": 250,
                    "Parent": -1,
                    "#": 340,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tflt1",
                    "Pos.x": -610,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 349,
                    "Var.Type": "Float",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "DummyForDefaultRefs",
                    "Pos.x": -1030,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 350,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "machpella",
                    "Pos.x": -860,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 354,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "PPCount",
                    "Pos.x": -360,
                    "Pos.y": -120,
                    "Parent": -1,
                    "#": 355,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "SporesLeft",
                    "Pos.x": -360,
                    "Pos.y": -140,
                    "Parent": -1,
                    "#": 357,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "MainInvests",
                    "Pos.x": -1030,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 377,
                    "Var.Type": "Float",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "MentalComm",
                    "Pos.x": -1030,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 378,
                    "Var.Type": "Float",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ZTransmitter",
                    "Pos.x": -1030,
                    "Pos.y": 340,
                    "Parent": -1,
                    "#": 379,
                    "Var.Type": "Float",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "DefSplt",
                    "Pos.x": -1030,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 380,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tarr2",
                    "Pos.x": -1030,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 381,
                    "Var.Type": "Array",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_sec",
                    "Pos.x": 60,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 405,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                }
            ]
        }
    ],
    "Visual.Links": 
    [
        {
            "Type": "TGraphLink",
            "Begin": 5,
            "End": 4,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 6,
            "End": 4,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 10,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 11,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 12,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 13,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 14,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 15,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 16,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 10,
            "End": 20,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 11,
            "End": 21,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 12,
            "End": 22,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 13,
            "End": 27,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 14,
            "End": 24,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 15,
            "End": 25,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 7,
            "End": 4,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 8,
            "End": 4,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 21,
            "End": 57,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 22,
            "End": 58,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 23,
            "End": 59,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 24,
            "End": 60,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 26,
            "End": 61,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 27,
            "End": 62,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 28,
            "End": 63,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 29,
            "End": 64,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 30,
            "End": 65,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 33,
            "End": 203,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 34,
            "End": 204,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 35,
            "End": 205,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 37,
            "End": 206,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 38,
            "End": 207,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 39,
            "End": 208,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 40,
            "End": 100,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 41,
            "End": 104,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 42,
            "End": 209,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 43,
            "End": 105,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 44,
            "End": 106,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 46,
            "End": 111,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 47,
            "End": 210,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 48,
            "End": 119,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 49,
            "End": 120,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 52,
            "End": 211,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 53,
            "End": 212,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 54,
            "End": 213,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 55,
            "End": 214,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 56,
            "End": 215,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 200,
            "End": 216,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 216,
            "End": 129,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 66,
            "End": 132,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 67,
            "End": 133,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 68,
            "End": 134,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 70,
            "End": 147,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 71,
            "End": 146,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 72,
            "End": 149,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 73,
            "End": 138,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 74,
            "End": 136,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 75,
            "End": 137,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 76,
            "End": 139,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 77,
            "End": 140,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 78,
            "End": 141,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 79,
            "End": 143,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 80,
            "End": 142,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 80,
            "End": 144,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 82,
            "End": 145,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 83,
            "End": 148,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 84,
            "End": 151,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 85,
            "End": 150,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 86,
            "End": 153,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 86,
            "End": 154,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 87,
            "End": 152,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 87,
            "End": 154,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 87,
            "End": 155,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 88,
            "End": 156,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 91,
            "End": 217,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 94,
            "End": 160,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 95,
            "End": 161,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 96,
            "End": 162,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 97,
            "End": 163,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 100,
            "End": 166,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 168,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 169,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 102,
            "End": 167,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 103,
            "End": 182,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 104,
            "End": 171,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 105,
            "End": 172,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 106,
            "End": 173,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 107,
            "End": 174,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 108,
            "End": 175,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 108,
            "End": 177,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 109,
            "End": 178,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 110,
            "End": 179,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 110,
            "End": 180,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 111,
            "End": 181,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 112,
            "End": 183,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 113,
            "End": 170,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 114,
            "End": 158,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 115,
            "End": 184,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 116,
            "End": 218,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 118,
            "End": 186,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 121,
            "End": 189,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 122,
            "End": 190,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 123,
            "End": 191,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 123,
            "End": 193,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 124,
            "End": 219,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 219,
            "End": 192,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 124,
            "End": 193,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 125,
            "End": 194,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 126,
            "End": 194,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 127,
            "End": 195,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 128,
            "End": 196,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 128,
            "End": 197,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 129,
            "End": 198,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 130,
            "End": 199,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 130,
            "End": 200,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 131,
            "End": 202,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 132,
            "End": 67,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 133,
            "End": 68,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 136,
            "End": 75,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 137,
            "End": 77,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 138,
            "End": 76,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 139,
            "End": 78,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 140,
            "End": 79,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 141,
            "End": 80,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 142,
            "End": 81,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 143,
            "End": 82,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 144,
            "End": 221,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 145,
            "End": 222,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 146,
            "End": 70,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 147,
            "End": 85,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 148,
            "End": 84,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 149,
            "End": 83,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 150,
            "End": 87,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 151,
            "End": 86,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 152,
            "End": 88,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 153,
            "End": 223,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 154,
            "End": 224,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 155,
            "End": 225,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 156,
            "End": 226,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 157,
            "End": 227,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 227,
            "End": 91,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 163,
            "End": 229,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 163,
            "End": 230,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 229,
            "End": 99,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 230,
            "End": 98,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 164,
            "End": 231,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 165,
            "End": 232,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 166,
            "End": 233,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 166,
            "End": 234,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 233,
            "End": 102,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 234,
            "End": 101,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 167,
            "End": 235,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 168,
            "End": 236,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 169,
            "End": 237,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 171,
            "End": 239,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 172,
            "End": 240,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 173,
            "End": 241,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 173,
            "End": 242,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 241,
            "End": 107,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 242,
            "End": 108,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 174,
            "End": 243,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 175,
            "End": 244,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 176,
            "End": 245,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 177,
            "End": 246,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 178,
            "End": 115,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 179,
            "End": 247,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 179,
            "End": 248,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 247,
            "End": 249,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 248,
            "End": 250,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 180,
            "End": 251,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 181,
            "End": 252,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 182,
            "End": 112,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 183,
            "End": 113,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 184,
            "End": 253,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 184,
            "End": 254,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 253,
            "End": 255,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 254,
            "End": 256,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 257,
            "End": 91,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 185,
            "End": 116,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 191,
            "End": 124,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 192,
            "End": 260,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 193,
            "End": 125,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 194,
            "End": 261,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 195,
            "End": 126,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 196,
            "End": 262,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 199,
            "End": 263,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 197,
            "End": 216,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 266,
            "End": 265,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 32,
            "End": 267,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 32,
            "End": 268,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 267,
            "End": 69,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 69,
            "End": 220,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 89,
            "End": 220,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 220,
            "End": 135,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 269,
            "End": 271,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 269,
            "End": 272,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 270,
            "End": 273,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 270,
            "End": 274,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 271,
            "End": 71,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 272,
            "End": 72,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 273,
            "End": 73,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 274,
            "End": 74,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 209,
            "End": 103,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 45,
            "End": 276,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 45,
            "End": 275,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 275,
            "End": 109,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 276,
            "End": 110,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 206,
            "End": 94,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 277,
            "End": 123,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 211,
            "End": 278,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 211,
            "End": 277,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 278,
            "End": 127,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 212,
            "End": 128,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 213,
            "End": 130,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 214,
            "End": 279,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 279,
            "End": 201,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 205,
            "End": 92,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 210,
            "End": 117,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 204,
            "End": 280,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 204,
            "End": 281,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 280,
            "End": 114,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 281,
            "End": 90,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 90,
            "End": 284,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 208,
            "End": 96,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 207,
            "End": 95,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 284,
            "End": 157,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 119,
            "End": 258,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 258,
            "End": 187,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 120,
            "End": 259,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 259,
            "End": 188,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 312,
            "End": 313,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 314,
            "End": 312,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 314,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 265,
            "End": 18,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 25,
            "End": 316,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 16,
            "End": 26,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 228,
            "End": 93,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 93,
            "End": 159,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 31,
            "End": 317,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 317,
            "End": 66,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 215,
            "End": 131,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 90,
            "End": 319,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 319,
            "End": 185,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 92,
            "End": 321,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 117,
            "End": 320,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 90,
            "End": 322,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 322,
            "End": 285,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 282,
            "End": 323,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 50,
            "End": 324,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 324,
            "End": 121,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 325,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 326,
            "End": 327,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 328,
            "End": 329,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 325,
            "End": 328,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 330,
            "End": 331,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 331,
            "End": 332,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 333,
            "End": 334,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 330,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 90,
            "End": 335,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 335,
            "End": 336,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 337,
            "End": 338,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 341,
            "End": 342,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 343,
            "End": 4,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 90,
            "End": 283,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 90,
            "End": 282,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 323,
            "End": 345,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 283,
            "End": 344,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 344,
            "End": 257,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 51,
            "End": 346,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 346,
            "End": 122,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 347,
            "End": 348,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 36,
            "End": 228,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 170,
            "End": 238,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 238,
            "End": 118,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 99,
            "End": 353,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 353,
            "End": 165,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 98,
            "End": 352,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 352,
            "End": 164,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 98,
            "End": 351,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 351,
            "End": 176,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 268,
            "End": 89,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 79,
            "End": 144,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 81,
            "End": 145,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 356,
            "End": 359,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 359,
            "End": 361,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 361,
            "End": 360,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 360,
            "End": 362,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 360,
            "End": 363,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 363,
            "End": 364,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 364,
            "End": 365,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 358,
            "End": 366,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 366,
            "End": 367,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 367,
            "End": 369,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 369,
            "End": 370,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 367,
            "End": 368,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 371,
            "End": 372,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 370,
            "End": 373,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 373,
            "End": 371,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 368,
            "End": 374,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 374,
            "End": 375,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 375,
            "End": 376,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 382,
            "End": 383,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 383,
            "End": 384,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 384,
            "End": 385,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 385,
            "End": 386,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 386,
            "End": 387,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 387,
            "End": 388,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 389,
            "End": 391,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 391,
            "End": 388,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 388,
            "End": 392,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 388,
            "End": 393,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 395,
            "End": 396,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 396,
            "End": 397,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 399,
            "End": 388,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 398,
            "End": 399,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 394,
            "End": 400,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 400,
            "End": 398,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 397,
            "End": 401,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 398,
            "End": 402,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 403,
            "End": 404,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 404,
            "End": 400,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 401,
            "End": 406,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 407,
            "End": 408,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 408,
            "End": 400,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 110,
            "End": 409,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 109,
            "End": 409,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 105,
            "End": 410,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 412,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 413,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 412,
            "End": 414,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 414,
            "End": 415,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 413,
            "End": 416,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 416,
            "End": 417,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 418,
            "End": 419,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 420,
            "End": 421,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 424,
            "End": 425,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 426,
            "End": 427,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 426,
            "End": 428,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 427,
            "End": 429,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 429,
            "End": 430,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 428,
            "End": 431,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 431,
            "End": 432,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 432,
            "End": 433,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 434,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 434,
            "End": 435,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 435,
            "End": 436,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 437,
            "End": 4,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 422,
            "End": 423,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 433,
            "End": 438,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 423,
            "End": 439,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 439,
            "End": 440,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 440,
            "End": 441,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 441,
            "End": 442,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 442,
            "End": 443,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 443,
            "End": 444,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 444,
            "End": 445,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 445,
            "End": 446,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 446,
            "End": 447,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 447,
            "End": 448,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 447,
            "End": 449,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 448,
            "End": 450,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 449,
            "End": 451,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 451,
            "End": 452,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 450,
            "End": 452,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 452,
            "End": 453,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 453,
            "End": 454,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 454,
            "End": 455,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 454,
            "End": 456,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 456,
            "End": 457,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 457,
            "End": 458,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 458,
            "End": 459,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 455,
            "End": 460,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 460,
            "End": 461,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 461,
            "End": 462,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 462,
            "End": 463,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 463,
            "End": 464,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 464,
            "End": 465,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 465,
            "End": 466,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 422,
            "End": 467,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 467,
            "End": 468,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 468,
            "End": 469,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 422,
            "End": 470,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 470,
            "End": 471,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 472,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 472,
            "End": 473,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 473,
            "End": 474,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 474,
            "End": 475,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 472,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 476,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 476,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 477,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 477,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 477,
            "End": 478,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 478,
            "End": 479,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 479,
            "End": 475,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 480,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 480,
            "End": 481,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 481,
            "End": 482,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 482,
            "End": 475,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 483,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 486,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 480,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 483,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 486,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 483,
            "End": 484,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 484,
            "End": 485,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 485,
            "End": 475,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 486,
            "End": 487,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 487,
            "End": 488,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 488,
            "End": 475,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 489,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 489,
            "End": 490,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 490,
            "End": 491,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 489,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 491,
            "End": 475,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 492,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 492,
            "End": 493,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 493,
            "End": 494,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 494,
            "End": 475,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 492,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 471,
            "End": 495,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 475,
            "End": 495,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 495,
            "End": 496,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 496,
            "End": 497,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 497,
            "End": 475,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 498,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 498,
            "End": 499,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 499,
            "End": 500,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 422,
            "End": 501,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 502,
            "End": 503,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 203,
            "End": 504,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 203,
            "End": 505,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 504,
            "End": 269,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 504,
            "End": 270,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 505,
            "End": 506,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 506,
            "End": 507,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 507,
            "End": 508,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 508,
            "End": 509,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 511,
            "End": 510,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 510,
            "End": 512,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 501,
            "End": 502,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 422,
            "End": 513,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 513,
            "End": 514,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 514,
            "End": 515,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 515,
            "End": 516,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 516,
            "End": 517,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 517,
            "End": 518,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 520,
            "End": 521,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 521,
            "End": 97,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 520,
            "End": 522,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 522,
            "End": 523,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 523,
            "End": 163,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 509,
            "End": 524,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 524,
            "End": 525,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 525,
            "End": 526,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 526,
            "End": 527,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 527,
            "End": 519,
            "Nom": 0,
            "Arrow": true
        }
    ],
    "Rect.Text": 
    [
        {
            "Type": "TGraphRectText",
            "Rect.Left": -1054,
            "Rect.Top": 46,
            "Rect.Right": -461,
            "Rect.Bottom": 266,
            "FStyle": 1,
            "FColor": 10710818,
            "BStyle": 0,
            "BColor": 14474460,
            "BSize": 1,
            "BCoef": "0.300000011920929",
            "AlignX": 0,
            "AlignY": 1,
            "AlignRect": false,
            "Text": "",
            "Color": 0,
            "Font": "Arial",
            "FontSize": 10,
            "fsBold": false,
            "fsItalic": false,
            "fsUnderline": false
        },
        {
            "Type": "TGraphRectText",
            "Rect.Left": -1222,
            "Rect.Top": -459,
            "Rect.Right": -406,
            "Rect.Bottom": -424,
            "FStyle": 1,
            "FColor": 10710818,
            "BStyle": 0,
            "BColor": 14474460,
            "BSize": 1,
            "BCoef": "0.300000011920929",
            "AlignX": 0,
            "AlignY": 0,
            "AlignRect": false,
            "Text": "VVV Диалоги для концовок клисан VVV",
            "Color": 0,
            "Font": "Arial",
            "FontSize": 10,
            "fsBold": false,
            "fsItalic": false,
            "fsUnderline": false
        },
        {
            "Type": "TGraphRectText",
            "Rect.Left": -404,
            "Rect.Top": -459,
            "Rect.Right": -52,
            "Rect.Bottom": -424,
            "FStyle": 1,
            "FColor": 10710818,
            "BStyle": 0,
            "BColor": 14474460,
            "BSize": 1,
            "BCoef": "0.300000011920929",
            "AlignX": 0,
            "AlignY": 0,
            "AlignRect": false,
            "Text": "Диалоги концовок из PC_final, продублированные сюда",
            "Color": 0,
            "Font": "Arial",
            "FontSize": 10,
            "fsBold": false,
            "fsItalic": false,
            "fsUnderline": false
        }
    ],
    "BlockPar.EC.Total.Strings": 253,
    "BlockPar.EC": 
    [
        {
            "#": "111",
            "String": "Это было не самым лёгким испытаний, но вы успешно справились с задачей, рейнджер! Клисанское логово полностью уничтожено, а Пиратский Клан, замешанный в жуткой истории с попыткой приручения Махпеллы, обезврежен и обезглавлен. Мы уже выяснили, кто был основной причиной всего этого беспредела - <clr>Далани Алакай<clrEnd>, который рассматривался в рамках задачи \"найти и уничтожить\" спецподразделениями Коалиции. Явно потерявший рассудок учёный ещё очень давно пытался продвинуть свою идею контроля над клисанами, за что и был арестован, и из-под ареста же при поддержке неизвестных - едва уловимой нитью там просматривался след очередной группы коррумпированных чиновников и лидеров Клана - бежал. Спецслужбы искали его долгие годы, и вот выяснилось, что именно отступники под предводительством своего нового Барона укрыли безумца. Вы прекрасно понимаете, почему мы не могли допустить существования данной технологии. Это необходимо было сделать, <Player>, и мы благодарны вам за ликвидацию последствий, допущенных, пожалуй, наиболее страшным из наших провалов. Ваше имя, как и всех, кто участвовал в штурме секретной пиратской базы, навсегда войдёт в историю Коалиции."
        },
        {
            "#": "112",
            "String": "<Player>, в ходе этой операции мы расправились сразу с тремя проблемами, уничтожив пиратский Клан, покончив с клисанской угрозой и одновременно выведя лидера коррупционного движения - адмирала <clr>Дурдыма<clrEnd> на чистую воду, поймав его во время попытки предупредить предупредить высшее руководства Клана о готовящемся штурме, курировавшемся непосредственно Галактическим Советом.<br><br>Увы, Коалиции ещё нельзя ослаблять напора - <clr>доминаторская угроза<clrEnd> всё ещё не побеждена. Впрочем, теперь дело пойдёт куда проще, ведь врагов стало куда меньше.<br>Вы, как заслуженный воин, сможете выйти на пенсию. Отставка подарит вам долгую мирную жизнь, и Галактический Совет лично предлагает вам, как и всем участникам штурма, по собственному особняку в наиболее элитных курортных регионах. Вам более не придётся ни о чём заботиться, и ваше право принять этот подарок прямо сейчас."
        },
        {
            "#": "113",
            "String": "<Player>, в ходе этой операции мы расправились сразу с тремя проблемами, уничтожив пиратский Клан, покончив с клисанской угрозой и одновременно выведя лидера коррупционного движения - адмирала <clr>Дурдыма<clrEnd> на чистую воду, поймав его во время попытки предупредить предупредить высшее руководства Клана о готовящемся штурме, курировавшемся непосредственно Галактическим Советом.<br><br>И, после столь подведения итогов, мы наконец можем выдохнуть спокойно, с уверенностью заявив, что <clr>угроза миру в Галактике ликвидирована<clrEnd>. Все предводители уничтожены, а с остатками врагов миру в Галактике наши штатные подразделения расправятся за считанные месяцы. Настал наш час, час Единства Пяти Рас!<br>Вы, как заслуженный воин, сможете выйти на пенсию. Отставка подарит вам долгую мирную жизнь, и Галактический Совет лично предлагает вам, как и всем участникам штурма, по собственному особняку в наиболее элитных курортных регионах. Ваше право решать, что делать с вашей жизнью, но вы просто обязаны принять этот подарок без лишних отлагательств, сразу после приготовленного по случаю Победы концерта."
        },
        {
            "#": "114",
            "String": "Отлично сработано, <Player>: от Махпеллы не осталось и следа! Вся клисанская армада сдетонировала аккурат сутки спустя ликвидации материнского корабля, и с этого момента угроза, созданная учёным-ренегатом - лишь очередная страница в книгах истории. И большая часть заслуги в этом, без сомнения, ваша, рейнджер."
        },
        {
            "#": "115",
            "String": "Что сделано, то сделано, <Player>, и былого не воротить. Эта история не будет забыта: мы наложим табу на проведение любых исследований подобного рода, чтобы трагические события второй и третьей клисанских войн впредь никогда не повторились. Пусть мы использовали инструменты врагов против них же самих - боеспособные остатки Клана, словно сорняки, остаются в открытом космосе. Лишённые руководства, но не боевой мощи, они разбились на мелкие банды и продолжают разорять захваченные миры. Уж теперь-то мы не потеряем контроль так легко, как это допустили наши предшественники, поверьте. Но мы не стремимся навязать вам никаких новых трудностей, рейнджер - ваша отставка целиком и полностью заслужена. Галактический Совет даже готов выделить вам собственный элитный особняк на одном из лучших курортов контролируемой части обитаемого космоса. Впрочем, вы получите его при любом своём решении. Дело осталось за малым - поставить несколько десятков подписей, и вы вправе забыть обо всех этих трудовых буднях."
        },
        {
            "#": "116",
            "String": "Что сделано, то сделано, <Player>, былого не воротить. Эта история не будет забыта, и мы наложим серьёзное табу на проведение любых исследований подобного рода, чтобы трагические события второй клисанской войны впредь никогда не повторились. И теперь, когда сорняки Пиратского Клана были вырваны с корнем, а доминаторы истреблены - наступит мирное время, которое, надеюсь, продлится настолько долго, насколько это позволит сама Вселенная. Уж теперь-то мы не потеряем контроль так легко, как это допустили наши предшественники, поверьте. А пока давайте отложим все эти пагубно влияющие на здоровье мысли о трудовых буднях, и перейдём к специально подготовленному на случай победы банкету. <Player>, вас уже заждались."
        },
        {
            "#": "117",
            "String": "Ну вот и всё, рейнджер: наши парни так разошлись, что теперь и от остатков пиратских головорезов, собственно, ничего и не осталось. Были рапорты об одиноких кораблях, скрывающихся от властей, но, думается мне, что продлится это ровно до тех пор, пока у них не останется денег на топливо. Операция выполнена успешно. Успешнее некуда. А вот скупердяи из верховного командования опять себе все заслуги присвоили... Ну, ваше имя хотя бы продолжает появляться на титульных страницах всех их пропагандистских бахвальств. Что ж, главное, что это лишь поддержит укрепление воцарившегося мира. Да и награду вы свою точно получите - искоренить все последние сорняки, угрожавшие единству Пяти Рас, это вам не загадки на незаселённых планетах разгадывать."
        },
        {
            "#": "118",
            "String": "<Player>, шикарная работа.<br>Долгие поздравления, думаю, здесь излишни - все мы знаем, что твои заслуги перед Кланом попросту не оценить. Вся галактика, брати... Ой, то есть барон, вся галактика - теперь наша! Наконец-то ни прогнившей Коалиции, ни бездумных машин - ничего. Уцелела лишь справедливость нашего славного братства. И всё благодаря инструменту, сохранность которого ты обеспечил. Клисане - страшная штука, но, оставаясь на поводке, они обеспечат стойкость нашей власти в этом рукаве.<br><br>Теперь, когда врагов не осталось, а политики верно служат Клану, дрожа перед потенциальной возможностью опустошения их миров клисанской армадой - ты, <Player>, достин пожинать все заслуженные лавры. Оставаясь королём королей, тебе не придётся вообще ничего делать, кроме как наслаждаться своей новой жизнью. Галактика обеспечит тебя всем, чего ты только пожелаешь. На весь сектор в твою честь уже готовится вечеринка, так что самое время хорошенько оторваться после всех бесконечностей честных трудовых будней на пользу общему делу, хе-хе.<br><br>И да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!<br>Носи его как подобает величайшему из пиратов братства."
        },
        {
            "#": "119",
            "String": "Это было не самым лёгким из испытаний, но вы успешно справились с задачей, рейнджер! Клисанское логово полностью уничтожено, а Пиратский Клан, замешанный в жуткой истории с попыткой приручения Махпеллы, обезврежен и обезглавлен. Благодаря вам мы выяснили, кто был основной причиной всего этого беспредела - <clr>Далани Алакай<clrEnd>, который рассматривался в рамках задачи \"найти и уничтожить\" спецподразделениями Коалиции. Явно потерявший рассудок учёный ещё очень давно пытался продвинуть свою идею контроля над клисанами, за что и был арестован, и из-под ареста же при поддержке неизвестных - едва уловимой нитью там просматривался след очередной группы коррумпированных чиновников и лидеров Клана - бежал. Спецслужбы искали его долгие годы, и вот выяснилось, что именно отступники под предводительством своего нового Барона укрыли безумца. Вы прекрасно понимаете, почему мы не могли допустить существования данной технологии. Это необходимо было сделать, <Player>, и мы благодарны вам за ликвидацию последствий, допущенных, пожалуй, наиболее страшным из наших провалов. Ваше имя, как и всех наших бойцов, кто в ключевой момент не последовал воле продажного <clr>Дурдыма<clrEnd>, встав на вашу сторону, навсегда войдёт в историю Коалиции."
        },
        {
            "#": "122",
            "String": "Поздравляем тебя, <Player>, от лица всего пиратского клана, с достойным исполнением всех обязанностей, возложенных на плечи Верховного Барона! Теперь, когда угроза со стороны роботов сведена к минимуму, мы можем заняться реформами, нацеленными на усиление пиратской власти и сплочению всех находящихся под нашим контролем планет. В связи с этим мы предлагаем тебе, <Player>, как одному из наиболее ярких героев прошедшей войны, сменить кабину пилота на трибуну политика!<br><br>Обдумай серьёзно это предложение, ведь оно открывает перед тобой новые горизонты!<br><br>И да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!<br>Носи его как подобает величайшему из пиратов братства."
        },
        {
            "#": "123",
            "String": "Поздравляем тебя, <Player>, от лица всего пиратского клана, с достойным началом исполнения обязанностей, возложенных на плечи Верховного Барона! Твоя безапелляционная чистка в неоднозначной кадровой среде, созданной почившим Чушкачом, просто впечатляет. Теперь, когда ты заслуженно вступил на свою новую должность, мы можем заняться реформами, нацеленными на усиление пиратской власти и сплочению всех находящихся под нашим контролем планет. В связи с этим мы предлагаем тебе, <Player>, как одному из наиболее ярких героев прошедшей войны, сменить кабину пилота на трибуну политика!<br><br>Обдумай серьёзно это предложение, ведь оно открывает перед тобой новые горизонты!<br><br>И да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!<br>Носи его как подобает величайшему из пиратов братства."
        },
        {
            "#": "124",
            "String": "Отличная работа, рейнджер <Player>.<br><br>Клан обезглавлен, а Алакай больше не представляет угрозы. Мы охотились за ним долгие годы, но по иронии судьбы с персоной non grata было суждено разобраться именно пирату. Ну же, не надо на меня так смотреть: вы хорошо вжились в роль - особенно когда штурмовали логово продажного Дурдыма - прямо настоящий головорез... Ладно, ладно, вернёмся к нашим пакрякам. Далани Алакай, безумный гений, получивший в две своих хилых ручонки невероятную власть как плод применения на практике результатов десятилетий размышлений - и стоило ли ему давать возможность просто уйти? Я понимаю ваши чувства, <Player>, но у аналитиков нашего спецотдела по борьбе с пиратством очень большие опасения, что это решение вернётся Галактике горькими слезами.<br><br>Конечно,начальство прямо противоположного мнения, и вас уже ждут на банкете, где вы получите свою награду лично от Галактического Совета - внушительных объёмов сумму и особняк на одной из лучших планет-курортов Галактики. Да-да, вы не ослышались, Совет наконец по-достоинству оценил рейнджерское рвение! Хотя, согласно новостям, захват секретного сектора пиратов был заслугой Вооружённых Сил Коалиции, но, что ж - очень часто настоящим труженникам приходится оставаться в тени. Иногда и ради общего блага.<br><br>Впрочем... прошу за мной, <Player>."
        },
        {
            "#": "126",
            "String": "Именно так, <Player>, именно так. Только прежде чем сдаться, этот предатель каким-то образом заблокировал управление нанитам и активировал систему самоуничтожения станции. Теперь Махпелла вышла из-под контроля и заняла статичную позицию, уничтожая всё, что попадается в зону действия её орудий.<br><br>Командование дало \"зелёный свет\", и мы достали все, даже самые ужасающие орудия для того, чтобы вытащить из безумца сведения о том, как остановить клисан, но у них создаётся впечатление, что от этого он лишь сильнее впадает в безумие и слабее реагирует на наши нападки. Последняя надежда - на разрешение Конвента применить силы Мастеров Разума... Или на рейнджеров."
        },
        {
            "#": "127",
            "String": "<0>"
        },
        {
            "#": "128",
            "String": "Эх-хэ, <Player>, не так давно мы еще сражались плечом к плечу против Коалиции и доминаторов, а сейчас все это уже часть истории. Тысяча мутят! Даже обидно, что ни одного врага уже не осталось - дула корабельных пушек паутиной зарастают. Молодежь треплет мирные корабли, а нам как-то уже стыдно такой ерундой заниматься. Особенно тебе: ты же Верхновный барон, как-никак... Так что я полностью понимаю и поддерживаю твое решение."
        },
        {
            "#": "129",
            "String": "Укажите систему, которую необходимо очистить от клисан."
        },
        {
            "#": "130",
            "String": "Запрос ретранслирован на <clr>Хандлер<clrEnd>. Ответ положительный. Все клисаны в системе будут уничтожены."
        },
        {
            "#": "136",
            "String": "В этот день, <Player>, нам окончательно удалось возродить утраченную технологию <clr>Ментального Коммуникатора!<clrEnd> С гордостью сообщаем, что устройство, изначально планировавшееся только как средство связи, позволяет еще и <clr>сканировать клисан!<clrEnd> <br><br>Первый образец Коммуникатора уже подключен к вашему бортовому компьютеру. Помните, рейнджер, что с его помощью Галактика уже была спасена однажды, и используйте же эту вещь с умом."
        },
        {
            "#": "137",
            "String": "Сегодня, <Player>, мы смогли восстановить и доработать <clr>Z-трансмиттер!<clrEnd> Спустя множество неудачных попыток, наши эксперты наконец откалибровали агрегат таким образом, чтобы на его сигнал, как и триста лет назад, слетался клисанский рой.<br><br>Устройство уже загружено в ваш трюм. Мы надеемся, что вы сможете правильно оценить его силу и направите разрушительную силу клисан против наших общих врагов - доминаторов и пиратов."
        },
        {
            "#": "141",
            "String": ""
        },
        {
            "#": "143",
            "String": "Рейнджер <0> - да-да, именно так вас надо называть, а не какой-то там барон, хотя, как нам только что стало известно, пираты недавно присвоили вам этот титул официально. Но это уже не имеет никакого - ни малейшего - значения.<br>Поздравляю вас с победой! Одним ударом вы расправились с лидером пиратов, бароном Чушкачем, продажным адмиралом Дурдымом и безумным ученым Алакаем. Это просто невероятно! Если бы я не знал, что вы рейнджер, то подумал, что это какая-то нелепая случайность. Но нет, вы просто подтвердили свой высочайший класс.<br>Втереться в доверие ко всему пиратскому сообществу, убедить всю Коалицию в том, что вы окончательно свернули на путь разбоя, а потом явить свое истинное лицо именно в тот момент, когда ваши действия могут спасти всю галактику. Деяние, достойное самого Аарона Кинга, Рихардо Зорро и Кима Филсби вместе взятых!<br><br>Что-то я увлекся с вашим восхвалением, простите - вижу, вам не по себе, но произошедшее настолько невероятно, насколько действительно. <1>, сегодня я, а, следовательно, и вся Коалиция, не предлагает никаких подарков за ваши действия, потому что если я даже подарю вам, например, миллиард кредитов - этого все равно будет мало, чтобы адекватно оценить ваши действия, ведь окончание гражданской войны в галактике бесценно. Поэтому я делаю вам уникальное предложение.<br><br>Вы можете оставить свою рейнджерскую службу и уйти на покой. Мы обеспечим вас новыми документами, достойной пенсией и домиком где-нибудь в тихом живописном месте, а с наведением порядка в Галактике справимся сами. Теперь, когда пираты психологически надломлены и находятся в растерянности, они уже не смеют захватывать системы Коалиции. Мы определенно взяли над ними верх, и теперь осталось только выловить и добить тех злостных бандитских индивидуумов, которые еще живы и пытаются самостоятельно восстановить жизнеспособность пиратских орд. Притворяться пиратом нужды больше нет. Забудьте про нападения на мирные корабли и захват звездных систем в пользу разбойников. Вы свое дело сделали и сделали его великолепно."
        },
        {
            "#": "144",
            "String": "Да, в этом больше нет необходимости и даже более того - это совершенно исключено. Мы прекрасно понимаем, каким психологическим испытанием были для вас сражения со своими собратьями - рейнджерами и мирными кораблями, которых вам приходилось уничтожать, чтобы не разрушить свое прикрытие. Если вы хотите, то мы даже можем заказать вам курс у малокских специалистов. Говорят, что они творят чудеса. После их мануальной терапии вы даже и не вспомните о пережитых ранее потрясениях.<br><br>Вдохновленные вашими подвигами, добровольцы так и ломятся на призывные участки, так что пилотов, чтобы справиться с доминаторами у нас точно хватит. Или же вы можете вернуться на фронт и там доказать, что вы и в деле уничтожения машин-убийц лучше всех. Решайте, <0>."
        },
        {
            "#": "145",
            "String": "Прекрасно, <0>! Вы сделали выбор, достойный настоящего рейнджера! Действительно, как можно остаться в стороне, если есть возможность хоть на день приблизить победу над бездушными машинами? А потом уже и про пенсию с домиком можно будет подумать."
        },
        {
            "#": "146",
            "String": "Прекрасно, <0>! Вы сделали выбор, достойный настоящего рейнджера! Действительно, как можно остаться в стороне, если есть возможность хоть на день приблизить победу над бездушными машинами? А генералы подождут."
        },
        {
            "#": "147",
            "String": "Рейнджер <0>, это вы, наконец-то! Мы уже заждались вас! Позвольте мне от лица всей сети Центров Рейнджеров поздравить вас с полной победой над пиратским кланом! Вы прекрасно справились с возложенной на вас задачей!<br>К сожалению, пока вы отважно сражались с бесчисленными ватагами пиратов, адмирал Дурдым успел уничтожить барона Чушкаша, и тем самым положил конец этому гнусному пиратскому клану, а на проведенной вскоре после этого пресс-конференции, выступая журналистами, которые \"случайно\" оказались поблизости, адмирал заявил, что это всё благодаря его \"гениальному\" руководству и \"несравненной\" храбрости, а ваше имя и заслуги в бою даже не упомянул. Какая низость! Возможно, если бы вы не были так заняты боем с превосходящими силами пиратов и поспешили бы на станцию, все было бы иначе и именно ваше имя было бы внесено в учебники истории... Как имена двух полководцев с планеты Земля, которые так увлеклись спором о том, кто из них с триумфом войдёт со знамёнами поверженного противника, что совсем упустили из вида, что враг их уже почти окружил и вскоре разбил, да так, что о победе больше и речи не шло.<br><br>Ну, что было - того не вернешь, как гласит людская поговорка. Но, не переживайте: мы-то знаем, кто настоящий герой этой операции! Ваше искусство боя, <1>, поразило многих уважаемых генералов, и они жаждут как можно скорее прочесть ваш рапорт о стратегии ведения боя с противником, чье численное преимущество сложно даже вообразить. Потери пиратов исчислялись сотнями! Если вы пожелаете отойти от рейнджерской деятельности и осесть где-нибудь вдали от всей этой суеты, Командование Вооружённых Сил Межзвёздной Коалиции готово помочь вам материально и обеспечить безбедное будущее в обмен на ваши советы и знания по тактике ведения боя. Впрочем, если вы пожелаете продолжить свою деятельность, то мы не в праве вас останавливать, однако у вас не будет времени раздавать советы. Так что скажете?"
        },
        {
            "#": "148",
            "String": "Прими мои поздравления, <0>! Отныне ты - настоящий пиратский барон. Носи этот почетный титул с честью пирата новой формации! <br>Сегодня великий день. Как жаль, что он омрачен скорбным событием, весть о котором добралась сюда лишь час назад. В бою погиб Верховный барон Чушкач, наш лидер и идейный вдохновитель. Если бы не он, то мы бы до сих пор шатались по космосу разрозненными кучками и радовались тем крохам, которые позволяла нам урвать Коалиция. Именно он сплотил нас всех, помирил между собой враждующие кланы и указал нам цель, которой мы почти достигли. Более того, он навел мосты сотрудничества между пиратами и официальными властями многих звездных систем галактики. Если раньше мы крали и убегали, спасаясь от заслуженного возмездия властей, то теперь планетарные правители сами делятся с нами долей от своих прибылей, за услуги, которые мы им предоставляем. Это новая ступень эволюции пиратского сообщества, не меньше - попомни мои слова.<br><br>Верховный барон Чушкач погиб, но ты, <1>, жив. И ты доказал, что можешь стать его достойным преемником и продолжить его великое дело. Твои действия в сегодняшнем бою подтвердили это, и жалкие выкрики завистников, которые пытаются очернить твое великое имя, не могут повлиять на наше решение. Пускай они разносят по темным углам сплетни, будто это ты убил Чушкача - мы знаем, что это черная ложь, а потому предлагаем тебе, барон, стать нашим новым лидером. Имей в виду, что такое предложение делается лишь раз в жизни.<br><br>Или же ты можешь совершить самую большую ошибку в своей жизни и вернуться к своим жалким обязанностям по уничтожению доминаторов.<br><br>Выбирай.<br><br>И да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!<br>Носи его как подобает величайшему из пиратов братства."
        },
        {
            "#": "149",
            "String": "М-да... Вот такого мы от тебя, <0>, не ожидали. Парни уже праздновать приготовились, а ты взял и отказался. Ну и лети тогда к своим ржавым жестянкам, раз они тебе больше по нраву. Глаза бы мои тебя не видели..."
        },
        {
            "#": "150",
            "String": "<0>, позволь пожать тебе руку. Отныне ты - настоящий пиратский барон. Носи этот почетный титул с честью! Ты не только помог нам отбить атаку военных сил Коалиции, но и расправился с Верховным бароном Чушкачом. Безусловно, он был нашим лидером, но тот путь, по которому он вел нас, с каждой минутой приближал нас к пропасти. Ложные успехи на ниве сотрудничества с правителями планет Коалиции вскружили ему голову, и он стал превращать нас всех из пиратов в бизнесменов. Он думал, что это новая ступень развития пиратского сообщества, но на самом деле мы, пираты, вольные птицы, должны делать то, что нам нравится, а не то, что навязывают нам контракты с продажными правителями! Мы должны грабить, убивать, веселиться до упаду и не соблюдать никаких законов! Вот наш истинный путь и сегодня ты напомнил нам о том, какие мы на самом деле!<br><br>Именно поэтому, барон <1>, мы хотим предложить тебе стать нашим новым лидером! Соглашайся! Йо-хо-хо и бутылка втыкиллы, и все такое! Голос крови! Я имею в виду, после того, что мы тебе предложили, ты действительно готов вернуться к своим опасным и скучным сражениям с доминаторами?<br><br>И да, мы тут посовещались, и решили, что твои наикрутейшие финты - это просто нечто!.. Да и вообще, ты смёл козни врагов простого пиратства своим нежданным появлением, и занял по праву достоинства своё место, ввиду чего ты заслуживаешь нашей высочайшей награды - <clr>Ордена Белого Знамени<clrEnd>!<br>Носи его как подобает величайшему из пиратов братства."
        },
        {
            "#": "153",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br><br>Мы полностью контролируем наш рукав галактики и практически уже празднуем победу. Все враги, по нашим сведениям, повержены, рейнджер <Player>."
        },
        {
            "#": "154",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br><br>На текущий момент мы контролируем около девяти десятых обжитых миров. Враги не представляют особой угрозы, и мы планируем уже в следующем году полностью освободить все захваченные ими системы. Пора, <Player>, перейти к финальному наступлению!"
        },
        {
            "#": "155",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br><br>Дела обстоят хорошо. Рейнджеры вкупе с вооруженными силами медленно вытесняют силы противника с захваченных территорий. Наши технологии на данный момент успешно могут поспорить с вражескими, и наше оружие эффективно поражает их корабли. Так что верь, <Player>, в нашу победу! Сейчас мы как раз планируем освобождение системы <3> в секторе <4>."
        },
        {
            "#": "156",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br><br>В последнее время инициатива переходит от одной стороны к другой. Враги никак не желают сдавать своих позиций, но развязка близка. Одна из сторон рано или поздно одержит верх, и мы надеемся, что победа останется за Коалицией.<br>Ты, <Player>, можешь оказать нам посильную помощь, если освободишь систему <3> в секторе <4>."
        },
        {
            "#": "157",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br><br>На текущий момент нам принадлежит всего лишь небольшая доля освоенных систем. Это плачевный факт, равно как и то, что мы безнадежно проигрываем.<br>Стратегически важной точкой для нас является система <3> (сектор <4>). Ты должен полететь туда, <Player>, и принять участие в боевых действиях."
        },
        {
            "#": "158",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br><br>В данный момент ситуация на фронтах ужасна. Силы противника захватывают систему за системой. <br>Сейчас мы собираемся отбить систему <3>. Если ты, <Player>, хочешь принять участие в этой операции, то поспеши, так как уже несколько рейнджеров вызвались участвовать в освобождении."
        },
        {
            "#": "159",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br><br>В данный момент ситуация на фронтах ужасна. Силы противника захватили уже почти весь наш рукав галактики. Оставшиеся в живых рейнджеры планируют начать операцию по освобождению системы <3>. На таких как ты, <Player>, и остались все наши надежды."
        },
        {
            "#": "160",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br>Клисаны - <3>%<br><br>Мы полностью контролируем наш рукав галактики и практически уже празднуем победу. Все враги, по нашим сведениям, повержены, рейнджер <Player>."
        },
        {
            "#": "161",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br>Клисаны - <3>%<br><br>На текущий момент мы контролируем около девяти десятых обжитых миров. Враги не представляют особой угрозы, и мы планируем уже в следующем году полностью освободить все захваченные ими системы. Пора, <Player>, перейти к финальному наступлению!"
        },
        {
            "#": "162",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br>Клисаны - <3>%<br><br>Дела обстоят хорошо. Рейнджеры вкупе с вооруженными силами медленно вытесняют силы противника с захваченных территорий. Наши технологии на данный момент успешно могут поспорить с вражескими, и наше оружие эффективно поражает их корабли. Так что верь, <Player>, в нашу победу! Сейчас мы как раз планируем освобождение системы <4> в секторе <5>."
        },
        {
            "#": "163",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br>Клисаны - <3>%<br><br>В последнее время инициатива переходит от одной стороны к другой. Враги никак не желают сдавать своих позиций, но развязка близка. Одна из сторон рано или поздно одержит верх, и мы надеемся, что победа останется за Коалицией.<br>Ты, <Player>, можешь оказать нам посильную помощь, если освободишь систему <4> в секторе <5>."
        },
        {
            "#": "164",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br>Клисаны - <3>%<br><br>На текущий момент нам принадлежит всего лишь небольшая доля освоенных систем. Это плачевный факт, равно как и то, что мы безнадежно проигрываем.<br>Стратегически важной точкой для нас является система <4> (сектор <5>). Ты должен полететь туда, <Player>, и принять участие в боевых действиях."
        },
        {
            "#": "165",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br>Клисаны - <3>%<br><br>В данный момент ситуация на фронтах ужасна. Силы противника захватывают систему за системой. <br>Сейчас мы собираемся отбить систему <4>. Если ты, <Player>, хочешь принять участие в этой операции, то поспеши, так как уже несколько рейнджеров вызвались участвовать в освобождении."
        },
        {
            "#": "166",
            "String": "Информацию о боевых действиях разглашать не принято. Но для рейнджеров мы делаем исключения. <br>Текущий расклад сил в Галактике:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br>Клисаны - <3>%<br><br>В данный момент ситуация на фронтах ужасна. Силы противника захватили уже почти весь наш рукав галактики. Оставшиеся в живых рейнджеры планируют начать операцию по освобождению системы <4>. На таких как ты, <Player>, и остались все наши надежды."
        },
        {
            "#": "171",
            "String": "Назад"
        },
        {
            "#": "180",
            "String": "Постой, далани? Значит, до этого ты был на службе у Коалиции?"
        },
        {
            "#": "181",
            "String": "Дружище, возможно, ты ещё не в курсе, но <clr>Чушкача<clrEnd> больше нет. Власть опять поменялась, и теперь законы устанавливаю <clr>я<clrEnd>"
        },
        {
            "#": "182",
            "String": "Сложно сказать, под конец войны враги всё же начали догадываться, откуда могли взяться клисане и как их правильно готовить. Но, постой, далани? Значит, до этого ты был на службе у Коалиции?"
        },
        {
            "#": "184",
            "String": "А тебе-то что с этого всего, <clr>Алакай<clrEnd>? Ты бы не стал обеспечивать такую услугу Клану без личного интереса, даже с учётом того, что те спасли тебя от виселицы. Зная фэянских учёных, они не станут посвящать всю свою жизнь глупой мести. Учитывая то, что ты явно не брезгуешь некоторым числом... Кхм-м, случайных жертв, имеющих место быть при каждой опустошительной клисанской атаке."
        },
        {
            "#": "185",
            "String": "Хорошо, <clr>Алакай<clrEnd>, мне нравится твой подход. Как новый Верховный Барон, я позволяю тебе продолжить твои эксперименты. Но тебе придётся попридержать клисан - врагов у нас больше не осталось, поэтому оставайся здесь, и стреляй по тарелочкам. Если тебя устраивают данные условия, то мы определённо подружимся. Но, на всякий случай, имей ввиду, что если я прикажу что-то атаковать - ты должен будешь тут же взять под козырёк и обеспечить мне достойное подкрепление. Без обсуждений."
        },
        {
            "#": "186",
            "String": "Хорошо, <clr>Алакай<clrEnd>, мне нравится твой подход. Как новый Верховный Барон, я позволяю тебе продолжить твои эксперименты. Но с этого момента ты будешь атаковать только те системы, которые прикажу я лично. Сам понимаешь, субординация в этом сборище маньяков и иного рода негодяев и недоумков превыше всего."
        },
        {
            "#": "187",
            "String": "Ты, кажется, всё ещё не понял. Здесь, в Клане, теперь воцарится новый порядок. Я, <Player>, не желаю видеть следов глупых и поспешных решений прошлого барона, которые привели его к скоропостижной гибели. Извини, но я видел, на что способны эти твои питомцы. Твой проект слишком опасен, <clr>Алакай<clrEnd>. Ты не думал, что произойдёт, если клисане выработают иммунитет к нанитам? Да с теми апгрейдами, что вы им тут понасовали, они весь Клан положат. Прости, но тебе придётся свернуть своё занятие. Наши элитные команды немедленно займутся демонтажем станции и зачисткой клисанских остатков."
        },
        {
            "#": "189",
            "String": "Далани? Значит, до этого ты был на службе у Коалиции?"
        },
        {
            "#": "190",
            "String": "Действительно, <clr>Чушкач<clrEnd> провалился даже с таким козырем в рукаве. На свободу он теперь нескоро выползет, если выползет вообще."
        },
        {
            "#": "191",
            "String": "Доминаторская угроза действительно всё ещё никуда окончательно не исчезла, и мало кто хотел бы, чтобы на эту войну ушло ещё больше бессмысленных смертей. Я позволю тебе сохранить свою лабораторию до момента полной ликвидации доминаторов, <clr>Алакай<clrEnd>, но имей ввиду, что как только с машинами будет покончено - тебе придётся свернуть проект."
        },
        {
            "#": "192",
            "String": "Ты слишком наивен, <clr>Алакай<clrEnd>. Ты действительно думал, что после всего содеянного, я позволю тебе остаться на насиженном месте? Знаешь, сколько невинных душ положили твои эксперименты, негодяй? Ты не считался ни с кем - ни с военными, ни с гражданскими, уничтожал даже своих, если тот попадался под руку. Так, спрашивается, какого пакряка я должен позволить тебе выйти сухим из воды? Даже согласившись на твои условия, нет никакой гарантии, что ты не захочешь уйти красиво, стерев жизнь с нескольких столичных планет Рукава посредством их обстрела клисанской армадой - над которой остаётся твоя неограниченная власть. Нет, \"дружище\", ты заплатишь за всё - здесь. И сейчас."
        },
        {
            "#": "193",
            "String": "Может и так, может и нет. Но, знаешь, <clr>Алакай<clrEnd>, если я тебя прикончу, то окажусь ничем не лучше тебя самого. Забирай своих питомцев и проваливай с нашего рукава к чёртовой матери. Мне плевать, что с тобой произойдёт, но с этого момента ты - изгой, которому нет места в восстановленном единстве пяти рас. У тебя есть две недели, чтобы убраться отсюда, иначе с тобой уже заговорят иначе."
        },
        {
            "#": "194",
            "String": "Бывай, <clr>Алакай<clrEnd>, и помни - я слежу за тобой. Вздумаешь пойти на какой-нибудь искромётный фокус, и твою базу разнесут куда быстрее, чем ты успеешь открыть очередной портал."
        },
        {
            "#": "195",
            "String": "Ладно, меньше слов - больше дела! Но чтобы по прилёту меня ждал ящик \"Махпеллы Дарк\" и свеженький номерок \"Плэй-пеленг\"!"
        },
        {
            "#": "196",
            "String": "Начать атаку"
        },
        {
            "#": "197",
            "String": "Закончить"
        },
        {
            "#": "200",
            "String": "На моем корабле нет материала для сдачи"
        },
        {
            "#": "201",
            "String": "Вам действительно это удалось? Алакай схвачен?"
        },
        {
            "#": "202",
            "String": "Итак, моя боевая задача теперь - любой ценой уничтожить... Махпеллу?"
        },
        {
            "#": "208",
            "String": "Собственно, я всего лишь делал свою работу, как и десятки рейнджеров до меня"
        },
        {
            "#": "209",
            "String": "Вы, должно быть, шутите. Пройти через всё это только ради того, чтобы бежать с поля боя? Ну уж нет, я не смогу спать спокойно, зная, что домики продолжают вырезать наших пачками. Об отставке не может быть и речи. Рейнджер <Player> немедленно возвращается на фронт!"
        },
        {
            "#": "210",
            "String": "Благодарю, не имею права отказаться. Показывайте, что вы там для меня припасли."
        },
        {
            "#": "211",
            "String": "Жаль было её убивать, на самом деле. Махпелла была подчинена чужой воле... Кто знает, о чём она думала на самом деле? Кто знает, как на это могут отреагировать её сородичи? Была бы возможность изучить эти проклятые наниты..."
        },
        {
            "#": "212",
            "String": "Надеюсь, вы правы... что ж, не будем терять времени зря."
        },
        {
            "#": "213",
            "String": "Уйти в отставку! Ха! Да я с рейдов одиноких пиратов на линкоры, усеянных зенитками по самые дюзы смеялся больше, чем с этого вашего странноватого юмора. Не для того я прожёг все эти годы, чтобы просто взять и сбежать с поля боя. И не в моих правилах оставлять дело завершённым наполовину. Счастливо оставаться!"
        },
        {
            "#": "214",
            "String": "Вы правы, я уже достаточно навоевался. Все эти бесконечные сражения не проходят бесследно. Мне не дано знать, что ожидает всех нас на горизонте, но я уже успел сыграть свою роль во всём этом спектакле. Несите свои бланки."
        },
        {
            "#": "215",
            "String": "Это было слишком просто. Без толкового командования большинство пиратов превратились в простых маньяков за панелями с большими красными кнопками. Сильные, вооружённые до зубов, но тупые, прямолинейные и чертовски наивные. Теперь наша цель - сохранить этот добытый слезами, кровью и потом мир для будущих поколений, не так ли?"
        },
        {
            "#": "216",
            "String": "А то! Недоноски получили по заслугам. Все, до единого. Немного жаль расставаться с войной, но, думаю, мы ещё найдём себе конкурентов. А сейчас веди, дружище, проведём время на должном качественном уровне! Никто не устоит перед мощью Пиратского Братства!"
        },
        {
            "#": "218",
            "String": "Я не могу безмятежно отдыхать на курортах, пока братья-рейнджеры погибают. Я возвращаюсь на фронт."
        },
        {
            "#": "219",
            "String": "Знаете, вы правы. Я устал ото всех этих космических сражений. Я оставляю это дело своим космическим коллегам. Следуя примеру наших войск, они обязательно расправятся с доминаторами."
        },
        {
            "#": "220",
            "String": "Согласен. Мне уж надоело бороздить космические просторы, хочу уйти на покой!"
        },
        {
            "#": "221",
            "String": "Ни за что. Нашему единству всё ещё угрожает слишком много внешних врагов, друг мой. Кто я, по-твоему, Верховный Барон, или какая-то тыловая крыса? То-то же. Бывайте, я возвращаюсь на фронт. Не успеете и очередной склад втыкиллы опустошить, как я им всем дюзы-то начищу - уж помяни моё слово."
        },
        {
            "#": "222",
            "String": "Ну, что у вас там для меня?"
        },
        {
            "#": "223",
            "String": "Куда уж точнее"
        },
        {
            "#": "225",
            "String": "Отдать нуль-приказ"
        },
        {
            "#": "230",
            "String": "Был рад помочь"
        },
        {
            "#": "234",
            "String": "То есть, мне больше не нужно захватывать системы Коалиции?"
        },
        {
            "#": "235",
            "String": "Да, я согласен. Всегда предпочитал убийству доминаторов рыбалку."
        },
        {
            "#": "236",
            "String": "Нет, я не смогу жить спокойно, пока доминаторы уничтожают мирных жителей. Я возвращаюсь на фронт."
        },
        {
            "#": "237",
            "String": "Верно."
        },
        {
            "#": "238",
            "String": "Конечно же, я согласен стать новым лидером!"
        },
        {
            "#": "239",
            "String": "Я предпочту сосредоточить свои усилия на уничтожении доминаторов."
        },
        {
            "#": "240",
            "String": "Пока."
        },
        {
            "#": "241",
            "String": "Конечно, я согласен! Наливай!"
        },
        {
            "#": "242",
            "String": "Доминаторы - слишком серьезная угроза, чтобы просто отмахнуться от нее и забыть. Я должен выполнить свой долг."
        },
        {
            "#": "243",
            "String": "Вас понял"
        },
        {
            "#": "244",
            "String": "Понял-принял"
        },
        {
            "#": "290",
            "String": "Внимание всем пилотам! <br>В системе <0> обнаружены враждебно настроенные корабли клисан! Патрульные корабли уже вступили в бой. Всем грузовым судам, идущим транзитом через эту систему, настоятельно рекомендуется изменить маршрут."
        },
        {
            "#": "299",
            "String": "Секретный объект Хандлер и Махпелла подлежат немедленному уничтожению."
        },
        {
            "#": "300",
            "String": "Махпелла успешно ликвидирована. Вы можете покинуть секретный сектор."
        },
        {
            "#": "315",
            "String": "Поработить Галактику."
        },
        {
            "#": "316",
            "String": "Срочно прибыть в ближайший Центр рейнджеров."
        },
        {
            "#": "321",
            "String": "Вы приняли решение уничтожить Алакая, сочтя его слишком опасным. Остальные пираты поддержали ваше решение, тем самым лишь укрепив авторитет нового Верховного Барона - ведь Пиратский Клан лучше всего говорит на языке силы, которую вы сумели продемонстрировать абсолютно беспрецедентно."
        },
        {
            "#": "324",
            "String": "Внимание, граждане Галактики! Под каким бы флагом вы ни летали, под чьим бы началом ни служили, прошу, выслушайте нас, персонал станции <clr>Хандлер<clrEnd>, все это время порождавшей орды клисан! <br> С нас хватит! Мы устали, устали от этих безумных экспериментов, от последствий, создаваемых одержимой собственными амбициями верховной власти! Все это - сплошное безумие, и было им с самого начала. <br> Наш лидер, <clr>Алакай<clrEnd>, стремился к своей детской мечте. Мораль у него была такой же... детской. Мы не задумывались, для всех нас это было просто игрой... очередной тайной, которую мы стремились любой ценой разгадать. Только вот, в действительности, ради чего?.. <br> Мы чувствовали, что все так и обернётся, но были слишком слабы, чтобы противостоять. Все несогласные тут же уничтожались. Но больше мы не боимся. Мы искупим свою вину перед миллионами пострадавших, и перед теми, кого пытались подчинить. <br> Внимайте, наше время подходит к концу! Мы уничтожили безумца, но он успел активировать систему самоуничтожения станции. Нам не сбежать - при конструировании секретного объекта спасательные капсулы предусмотрены не были. Поэтому мы унесем последнее упоминание о возможности контроля над клисанами с собой в могилу. Это оружие, которое не должно существовать, и мы покончим с ним здесь, и сейчас. <br> Прощайте."
        },
        {
            "#": "329",
            "String": "Немедленно посетить ближайшую пиратскую базу."
        },
        {
            "#": "331",
            "String": "<Player>! <br> Мы знаем, кому вы симпатизируете и к чему стремитесь, но нашим разведчикам недавно удалось найти очередное косвенное подтверждение связи клисанского вторжения с пиратами: некоторые технологии, используемые в клисанском оборудовании, имеют ряд концептуальных сходств с разработками, попавшими в руки к Клану. Сейчас еще рано что-то утверждать наверняка, но мы настоятельно рекомендуем вам приложить максимальные усилия в предварительном изучении угрозы, с которой собираетесь столкнуться. Если наши предположения хотя бы частично верны, сталкиваться с двойной угрозой неподготовленными - самоубийство. Возможно, наши исследовательские команды сети научных баз сумеют помочь вам в этом нелёгком вопросе."
        },
        {
            "#": "361",
            "String": "Истребить остатки доминаторов."
        },
        {
            "#": "362",
            "String": "Ликвидировать махпеллу."
        },
        {
            "#": "363",
            "String": "Управление клисанами"
        },
        {
            "#": "364",
            "String": "Дайте детальную информацию о ситуации на фронтах"
        },
        {
            "#": "365",
            "String": "Расскажите мне о ходе военных действий"
        },
        {
            "#": "367",
            "String": "Исследование клисан"
        },
        {
            "#": "369",
            "String": "Благодарим за проявленный героизм, рейнджер! Сегодня, благодаря гениальности наших ученых и вашей доблести, мы закончили Третью клисанскую войну и одержали убедительную победу над пиратскими интервентами. Выжившие корсары обезглавлены и деморализованы, и теперь окончательная зачистка всех систем от их присутствия - всего лишь вопрос времени. Все граждане Коалиции сегодня салютуют вам! Отправляйтесь в ближайший центр рейнджеров за заслуженной наградой."
        },
        {
            "#": "370",
            "String": "Конец связи"
        },
        {
            "#": "371",
            "String": "Секретный объект Хандлер подлежит немедленному уничтожению."
        },
        {
            "#": "372",
            "String": "Махпелла подлежит немедленному уничтожению."
        },
        {
            "#": "373",
            "String": "Наши спецы проанализировали принадлежность систем и наанализировали следующее:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%<br>Клисаны - <3>%"
        },
        {
            "#": "374",
            "String": "Наши спецы проанализировали принадлежность систем и наанализировали следующее:<br><br>Коалиция - <0>%<br>Доминаторы - <1>%<br>Пираты - <2>%"
        },
        {
            "#": "376",
            "String": "[Передача сигнала кораблю <0>... ошибка 137<br>Повторение попытки... ошибка 137<br>Повторение попытки... ОК<br>Передача сигнала кораблю <clr>Махпелла<clrEnd>... ошибка 508<br>Повторение попытки... ошибка 508<br>Повторение попытки... ошибка 508<br>Повторение попытки... ошибка 508<br>Вероятная причина ошибки - <clr>сигнал заблокирован с другого конца<clrEnd>]"
        },
        {
            "#": "377",
            "String": "<br>"
        },
        {
            "#": "379",
            "String": "Все системы! Очистите всё!"
        },
        {
            "#": "380",
            "String": "Призвать Махпеллу"
        },
        {
            "#": "383",
            "String": "Хандлер и махпелла успешно ликвидированы. Коалиция спасена!"
        },
        {
            "#": "384",
            "String": "Служу Коалиции!"
        },
        {
            "#": "385",
            "String": "Так точно!"
        },
        {
            "#": "386",
            "String": "Вас понял!"
        },
        {
            "#": "387",
            "String": "[Передача сигнала кораблю <clr>Махпелла<clrEnd>... ошибка 508<br>Повторение попытки... ошибка 508<br>Повторение попытки... ошибка 508<br>Повторение попытки... ошибка 508<br>Вероятная причина ошибки - <clr>сигнал заблокирован с другого конца<clrEnd>]<br>"
        },
        {
            "#": "388",
            "String": "Призвать Махпеллу (Махпелла занята организацией атаки)"
        },
        {
            "#": "389",
            "String": "Призвать Махпеллу (<0> дней)"
        },
        {
            "#": "396",
            "String": "Так держать, <Player>! Уничтожением клисанского мозгового центра вы официально положили конец вторжению клисан в наш рукав Галактики. Безусловно, этот день войдет в историю!<br>Следующая цель - объект под кодовым наименованием <clr>Хандлер<clrEnd>. Добьем врага до конца!"
        },
        {
            "#": "397",
            "String": "Рейнджер <Player>, вражеский научный объект <clr>Хандлер<clrEnd> уходит у нас из-под носа! Немедленно взорвите объект, кого возможно - возьмите в плен."
        },
        {
            "#": "398",
            "String": "Ну что вы, пиратские законы не ограничивают наши давние заслуги - даже наоборот - поощряют куда достойнее, чем эти ваши скупердяи из Галактического Совета. Когда я разработал механизм заманивания одной из <clr>Махпелл<clrEnd> в ловушку, мне грозило немедленное пожизненное заключение, а малокское правительство так и вовсе выступало за расстрел без суда и следствия. Куда, думаете, было податься учёному в такой безвыходной ситуации? Естественно, я связался с пиратским кланом, и, ознакомившись с технической документацией моего скромного проекта, коллектив ханов тотчас же загорелся энтузиазмом. Что может быть лучше потенциально неограниченного в размерах клисанского флота, подчинённого специально разработанными нанитами и готового обеспечить своему хозяину неоспоримое доминирование в космосе? Эта информация быстро дошла до барона <clr>Чушкача<clrEnd>, и тот просто не мог упустить такую возможность."
        },
        {
            "#": "399",
            "String": "Благодарю вас за неоценимую моральную поддержку, барон. Я предвидел ваше решение и заранее приготовил передатчик, которым вы сможете маркировать систему для следующей атаки - вам достаточно отправить сигнал, и в целевой системе вскоре откроется червоточина. Использовать устройство вы сможете с мостика корабля. К сожалению, некоторые технические ограничения не позволят запускать больше одного нейролинка за раз, но, поверьте, - с мощью и эволюционным потенциалом клисанской армады вам этого хватит с головой."
        },
        {
            "#": "400",
            "String": "Я признаю, что в этот раз поставил на тёмную лошадку, <Player>, и я готов искупить свои грехи перед Коалицией. Мой проект далеко ушёл с момента своего старта, и, вопреки опасениям ополчившегося на меня Совета, - оказался более, чем успешен. Даже, каким-то образом выйдя из-под контроля, <clr>Махпелла<clrEnd> долго не проживёт, так как система самоуничтожения, встроенная в наниты, в течении трёх месяцев не получая контрольного сигнала с моей стороны, сработает автоматически. Бог из машины погибнет, не попав никому в руки."
        },
        {
            "#": "401",
            "String": "Бывай, <clr>Алакай<clrEnd>, и помни - если тебе в голову придёт даже мыслишка о том, чтобы повернуть этих твоих питомцев против Клана, ответная реакция не заставит себя долго ждать. Может, нам придётся выдержать жесточайший штурм клисан, но управляющий центр <clr>\"Хандлер\"<clrEnd> успеет отправиться к праотцам."
        },
        {
            "#": "403",
            "String": "Окончательно расправиться с пиратской угрозой."
        },
        {
            "#": "405",
            "String": "Согласен. Надоело уж мне бороздить космические просторы, хочу уйти на покой!"
        },
        {
            "#": "410",
            "String": "Наше дело правое. Победа будет за нами."
        },
        {
            "#": "411",
            "String": "Сегодня наши бравые соколики были атакованы неизвестными кораблями. Всё говорит о том, что мы вновь столкнулись с клисанами, и началась Третья Клисанская Война. Всем пилотам надлежит беспощадно вести боевые действия против новых захватчиков. Все мы должны ещё теснее сплотиться вокруг наших идеалов."
        },
        {
            "#": "412",
            "String": "Храбрые бойцы нашего великого Братства!"
        },
        {
            "#": "413",
            "String": "Галактический Совет поручил мне выступить со следующим заявлением: сегодня космическое пространство одной из наших систем пересекли неизвестные корабли. Они атаковали наши регулярные части и гражданские суда. Сведения штатных радиолокационных систем говорят о том, что мы вновь столкнулись с клисанской угрозой. Галактический Совет объявил об ужесточении чрезвычайного положения и объявлении Третьей Клисанской войны. Всем пилотам надлежит беспощадно вести боевые действия против новых захватчиков. Все мы должны ещё теснее сплотиться вокруг наших идеалов."
        },
        {
            "#": "414",
            "String": "Граждане и гражданки Коалиции Разумных Рас!"
        },
        {
            "#": "416",
            "String": ".<br>Рейнджер <PlayerFull>, вам следует немедленно прибыть в ближайший центр рейнджеров.<br>Форма одежды - парадная!"
        },
        {
            "#": "417",
            "String": "Срочное сообщение от"
        },
        {
            "#": "419",
            "String": "Отдел исследований Z-трансмиттера"
        },
        {
            "#": "420",
            "String": "Отдел исследований Ментального коммуникатора"
        },
        {
            "#": "421",
            "String": "Основной отдел исследований"
        },
        {
            "#": "422",
            "String": "За прошедшие две сотни лет с момента последней войны развитие клисан не стояло на месте - может, внешне их корабли и фактически идентичны тем данным, что хранятся в наших архивах, однако нам уже довелось убедиться на собственной шкуре, что эта волна клисан значительно отличается от ветви, встреченной Коалицией три века тому назад. Их устройство более совершенно, а технологии во многом превосходят все то, с чем нам вообще доводилось сталкиваться раньше. Что важнее всего - структура этой расы имеет кристаллическую, а не белковую основу, что рушит практически все наши представления о них как об органических существах. Даже самые простейшие процессы, протекающие в их телах, для нас абсолютно чужды и непонятны, и мы можем лишь попытаться описать их, подбирая аналогичные или схожие термины из нашего языка. Принцип работы клисанского оборудования и вовсе остается для нас тайной из тайн."
        },
        {
            "#": "423",
            "String": "Именно так, рейнджер.<br>Тем не менее, во времена прошлой войны нам удавалось подключать биологическое оборудование клисан к ситемам наших кораблей. Несмотря на общее чужеродное строение тела клисан, отдельные их органы устроены достаточно просто и могут быть исследованы и адаптированы для применения на наших кораблях. Впрочем, мы не можем быть уверены, функционируют ли эти органы на наших звездолетах в полную силу, или же у клисан они работают еще и как-то иначе, но по крайней мере мы можем добиться рабочего симбиоза.<br>Собственно, ваша задача остается прежней - стараться сбить как можно больше врагов и привезти нам как можно больше ошмётков для изучения. Нам пригодится абсолютно всё, что вы сможете добыть: какие-то части клисан нам уже знакомы и вы можете попробовать поставить их на свой звездолет, но неизученные фрагменты представляют для нас особую ценность."
        },
        {
            "#": "425",
            "String": "Звучит отнюдь не оптимистично"
        },
        {
            "#": "426",
            "String": "Сделаю всё, что смогу!"
        },
        {
            "#": "427",
            "String": "Покинуть Отдел"
        },
        {
            "#": "428",
            "String": "Я хочу получить информацию Отдела"
        },
        {
            "#": "429",
            "String": "произошло столкновение с новым представителем клисанской формы жизни. Всем свободным пилотам срочно прибыть в систему для подавления инородных форм жизни!"
        },
        {
            "#": "430",
            "String": "В системе"
        },
        {
            "#": "431",
            "String": "Внимание всем рейнджерам!"
        },
        {
            "#": "432",
            "String": "Махпелла успешно ликвидирована. Вы можете покинуть пиратский сектор."
        },
        {
            "#": "433",
            "String": "Координаты системы <0> отправлены КВСМК. Бортовой компьютер почти сразу же сообщил о получении ответа: <br>\"Говорит капитан военной базы <clr>Реконкиста<clrEnd>. Ликвидируйте максимально возможное число боевых единиц противника. Держитесь до прибытия подкрепления.\""
        },
        {
            "#": "434",
            "String": "Генератор автоматически отправил координаты системы <0> по секретному каналу связи КВСМК. Мысленно проклянув устройство, вы продолжили пилотирование, как вдруг получили ответное сообщение по тому же каналу: <br>\"На связи капитан засекреченной военной базы <clr>Реконкиста<clrEnd>. Мы в вас не сомневались. Ликвидируйте максимально возможное число боевых единиц противника. Продержитесь до прибытия подкрепления.\""
        },
        {
            "#": "435",
            "String": "замечен новый представитель клисанской формы жизни. Объявлена тревога! Всем рейнджерам прибыть в зону оцепления."
        },
        {
            "#": "436",
            "String": "Секретный объект Хандлер и Махпелла подлежат немедленному уничтожению. Подлежали. Но наш союз с клисанами требует немного иных действий... И у нас кое-что есть в запасе. Займитесь объектом Хандлер, а мы займёмся всем остальным."
        },
        {
            "#": "437",
            "String": "Граждане Коалиции Разумных Рас!<br><clr><clrEnd><br>Наступил великий день<br>В ходе невероятно авантюрной операции адмирала Дурдыма штурмовое подразделение Космических Сил Межзвёздной Коалиции смогло вычислить координаты центра управления действиями мятежников, называвших себя Анархистским Братством, более известным как Пиратский Клан, и, сходу вступив в бой с превосходящими силами врага, наголову разгромить их и обнаружить, что в руках мятежника оказался сумасшедший гений, сумевший подчинить своей воле клисан и использовавший клисан на пользу разбойникам.<br><clr><clrEnd><br>Это не остановило наших бравых защитников, разгромивших научный комплекс безумного учёного и запустивших процесс самоликвидации клисан. А это значит, что наступил великий день - день окончания Третьей Клисанской войны, и конец анархистскому мятежу. Отныне над Галактикой будет развеваться великое знамя Коалиции - знамя свободы рас и мира между расами. Виват!"
        },
        {
            "#": "438",
            "String": "Исследование клисан? Рейнджер, вы в своём уме?<br><br>Прямо сейчас - вот именно в этот момент - клисане находятся прямо перед нашим исследовательским комплексом в системе <0>!<br><br>Если так хотите поизучать клисан - немедленно бросайте всё и летите в эту систему!"
        },
        {
            "#": "439",
            "String": "Рейнджер, вы ещё здесь? Прямо около нашей базы находится <clr>Махпелла<clrEnd>, а вы всё ещё пытаетесь что-то нам рассказать об исследованиях клисан?! Вы сейчас шутите, я надеюсь?"
        },
        {
            "#": "440",
            "String": "Судя по данным наших радиосенсоров, мы столкнулись с <clr>ещё одним<clrEnd> представителем клисанской формы жизни.<br><br>Внушает оптимизм то, что, несмотря на нахождение в этой системе, эта махпелла не пытается атаковать наши корабли.<br><br>Мы улавливаем сигналы, исходящие от махпеллы, но, увы, специалисты из <clr>коммуникационного<clrEnd> отдела нашей базы недавно отбыли на научный симпозиум, ввиду чего мы не можем как-либо связаться с ней.<br><br>Тем временем, у вас, рейнджер, это устройство имеется, и мы надеемся, что вы используете его для благой цели налаживания контакта."
        },
        {
            "#": "441",
            "String": "[На экран бортового компьютера вывело очень много разнообразных уведомлений. Нельзя было сказать, что вам было много что из них понятно, кроме того, что, кажется, почти все алгоритмы расшифровки <clr>Ментального Коммуникатора<clrEnd> дали сбой, однако, устаревшие программы с изначальными настройками каким-то чудом уцелели, и точь-в-точь подошли для перевода]<br><br>Контактирование..."
        },
        {
            "#": "442",
            "String": "Надежду выражаю, что это является правдой. Трудность исследования материала из чужого повествование неоспоримость."
        },
        {
            "#": "443",
            "String": "Имею такой же вопрос в направление вас."
        },
        {
            "#": "444",
            "String": "Группы моей сородич уже находится в этот рукав. Поэтому не видеть ничего странного в моём присутствие."
        },
        {
            "#": "445",
            "String": "Именно так. Я прибыла с миссия установить, по каковой причина мой сородич удерживается вами.<br><br>В случае сопротивления или неполучение ответ я планирую разобраться с этим ситуация самостоятельно, без разговоров."
        },
        {
            "#": "446",
            "String": "Термин \"гражданская война\" мне непонятен. Прошу помощь в идентификации."
        },
        {
            "#": "447",
            "String": "Какое варварство. Впрочем, исходя из рассказы о вас, и том, как вас много и на каком пространство вы ютитесь, это неудивительный.<br><br>Так или иначе, я и мои сородичи хотят одного: возвращения одной из нас. Мы уловили её сигналы о помощи, и обнаружили след гиперпространственный прокол, ведущий в ваш рукав.<br><br>Мы собрались и долго спорили, но решили, что лучше будет прийти сюда и дать вам возможность объяснить происходящий."
        },
        {
            "#": "448",
            "String": "Очень неразумно. Что же, если вы хотите войны, то я вынуждена защищаться"
        },
        {
            "#": "449",
            "String": "Хорошо. Что ты предлагаешь?"
        },
        {
            "#": "450",
            "String": "Ничего из этого не поможет поискам. Поэтому ты предлагаешь помочь вам справиться с вашими врагами?"
        },
        {
            "#": "451",
            "String": "Интересные мысли. Впрочем, кажется, у меня нет выбора. В противном случае мне придётся действовать в одиночку, возможно, участвуя в сражениях с вашими же врагами.<br><br>Тогда, будем считать, что мы союзники."
        },
        {
            "#": "452",
            "String": "Твой вид подлежит уничтожению за неразумную агрессивность, <Player>. Ты сам избрал такой путь."
        },
        {
            "#": "453",
            "String": "Улавливаю попытку контакта от <Player>...<br><br>Что тебе интересно, органическая особь?"
        },
        {
            "#": "454",
            "String": "То, что ты подразумеваешь под \"женским родом\", кажется мне более сответствующим моей личности, поэтому я избрала такую форму общения. Кто-то из моих сородичей ввиду своего характера предпочёл бы другие формы. Включая, например, те, которые ты бы охарактеризовали как \"мужской\".<br><br>Наше мировосприятие отличается от вашего, ведь оно куда меньше связано с созданием себе подобных.<br><br>Если тебе мешает, я могу сменить форму общения."
        },
        {
            "#": "455",
            "String": "Хочешь узнать что-то ещё от меня, межзвёздный странник?"
        },
        {
            "#": "456",
            "String": "Для моего вида естественнен так называемый \"тёмно-зелёный\", а, точнее, отражение поверхностью наших тел специфического спектра лучей.<br><br>Однако, на одном планетоиде мне и двум другим... Махпеллам удалось получить особый вид микроорганизмов. Мы научили их существовать с нами в симбиозе, и они <clr>помогают мне восстанавливаться после повреждений<clrEnd>. Взамен я подкармливаю их энергией и остатками своих повреждённых частиц."
        },
        {
            "#": "457",
            "String": "В вашем языке я не нашла термина, который бы достаточно описал это понятие.<br><br>Однажды в наш рукав вторглись очень мерзкие твари, такие же органические, как вы, но он создавали из своих тел корабли и летали от звезды к звезде, поглощая всё на своём пути. Никто бы их не заметил, если бы от них не погиб один из наших сородичей, и, пока последние его части пожирались этими созданиями, он не издал леденящий сознание крик помощи.<br><br>Все мы, участники налёта на этот корабль, впредь решили держаться ближе и постоянно встречаться. Кроме всего прочего, это очень полезно для обмена опытом, пусть и стесняет нас, ведь мы непривычны к тому, чтобы тратить много времени на друг друга..."
        },
        {
            "#": "458",
            "String": "Извини, рейнджер, но мне нет смысла объяснять это.<br><br>Это... И слишком лично, и нет. И слишком одухотворено, и слишком низменно. Нет, я не смогу рассказать тебе."
        },
        {
            "#": "459",
            "String": "О, это весьма интересно!<br><br>Ваша цивилизация очень развита для своих лет. Хотя в вас нет единства, вы, всё же, смогли пойти на множество уступок для совместной деятельности. Это заслуживает похвалы.<br><br>С другой стороны, мы имеем куда большую свободу и возможности для экспериментов и познания. Но и опыт исследований на планетах, а также знания о них бесценны для меня."
        },
        {
            "#": "460",
            "String": "Не страннее, чем небольшим слизистым существом с несколькими отростками, вынужденным перемещаться меж звёзд посредством огромных по сравнению с ними машин. Так сильно зависеть от исправности техники - это просто ужасно!<br><br>А наши органы позволяют нам получить невероятную свободу и невероятные возможности. Мне очень жаль, что вам если и суждено будет познать подобные чувства, то с очень большим трудом."
        },
        {
            "#": "461",
            "String": "О, ничего сложного, <Player>. Звёздные системы полны разнообразных планетоидов, пыли и рассеянных газов. Гравитационные аномалии помогают мне собирать и перерабатывать этот материал. Это настолько естественно для меня, что происходит на автоматизме."
        },
        {
            "#": "462",
            "String": "Всё в порядке, <Player>. Я уже озаботилась этим, и ваши вирусологи и бактериологи передали мне все свои разработки. Пришлось потрудиться над синтезом нужных соединений, но зато теперь я могу побороть любой известный вам вирус. Кроме того, если мне встретится какой-либо ещё, я смогу использовать ваши стратегии для создания нового противоядия."
        },
        {
            "#": "463",
            "String": "Время для разговоров будет после, мой друг"
        },
        {
            "#": "464",
            "String": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, <Player>. Первым делом вы наверняка захотите выхватить бластер, но, поверьте, вы ничего не потеряете, если позволите мне объясниться. Как вы уже, наверное, догадались, к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов..."
        },
        {
            "#": "465",
            "String": "Так-так, спокойнее, <Player>... Да, кажется, в этот раз я прогадал, и поставил на тёмную лошадку. Некомпетентность лидеров Клана не знает границ.<br><br>Выходит, теперь мы должны договориться, да?"
        },
        {
            "#": "466",
            "String": "Итак, рейнджер, мы нашли моего сородича. Отпусти его."
        },
        {
            "#": "467",
            "String": "Значит, мне придётся применить силу... Очень, очень жаль."
        },
        {
            "#": "468",
            "String": "Это было не самым лёгким испытаний, но вы успешно справились с задачей, рейнджер! Клисанское логово полностью уничтожено, а Пиратский Клан, замешанный в жуткой истории с попыткой приручения Махпеллы, обезврежен и обезглавлен. Мы уже выяснили, кто был основной причиной всего этого беспредела - <clr>Далани Алакай<clrEnd>, который рассматривался в рамках задачи \"найти и уничтожить\" спецподразделениями Коалиции. Явно потерявший рассудок учёный ещё очень давно пытался продвинуть свою идею контроля над клисанами, за что и был арестован, и из-под ареста же при поддержке неизвестных - едва уловимой нитью там просматривался след очередной группы коррумпированных чиновников и лидеров Клана - бежал. Спецслужбы искали его долгие годы, и вот выяснилось, что именно отступники под предводительством своего нового Барона укрыли безумца. Вы прекрасно понимаете, почему мы не могли допустить существования данной технологии. Это необходимо было сделать, <Player>, и мы благодарны вам за ликвидацию последствий, допущенных, пожалуй, наиболее страшным из наших провалов. Ваше имя, как и всех, кто участвовал в штурме секретной пиратской базы, навсегда войдёт в историю Коалиции.<br><br>Кроме того, именно вы, рейнджер, стали важнейшим элементом наших взаимоотношений с появившейся после Махпеллой из другого рукава. Вы смогли наладить контакт, и благодаря вам наши учёные сейчас занимаются выводом наноботов из тела Махпеллы. Полномасштабное сотрудничество, союзничество и обмен опытом - то, о чём триста лет назад никто и не подумал бы! Фантастика! Все разумные существа Галактики в неотплатном долгу перед вами, рейнджер."
        },
        {
            "#": "469",
            "String": "Ну, допустим, за виллу на отдалённой курортной планете, где я смогу заниматься любыми изысканиями..."
        },
        {
            "#": "470",
            "String": "Ладно, ладно, сейчас начнём. Только учтите - процесс небыстрый, займёт несколько месяцев, ведь нужно вывести наноботов из всех её органов. Кроме того, Махпелле явно потребуется реабилитация..."
        },
        {
            "#": "471",
            "String": "Ладно, ладно, скоро полечу..."
        },
        {
            "#": "472",
            "String": "Нет, потому что, прежде чем разбираться с Махпеллой, нужно испросить совета у тех, кто разбирается получше моего. Что это за Махпелла?"
        },
        {
            "#": "473",
            "String": "И я тоже. Ладно, пора брать ситуацию в свои руки."
        },
        {
            "#": "474",
            "String": "Ну... Привет, Махпелла! Ты понимаешь меня?"
        },
        {
            "#": "475",
            "String": "Отрадно видеть клисан, которые ещё отвечают на вопросы. Собственно, несмотря на любопытство, задам сам важный вопрос - чем обязаны твоему визиту?"
        },
        {
            "#": "476",
            "String": "Постой, но ведь это ты, здесь, в нашем Рукаве, несмотря на договорённость наших видов три сотни лет назад..."
        },
        {
            "#": "477",
            "String": "Хочешь сказать, что та Махпелла, с деятельностью чьих органов борются наши регулярные части, из твоего..."
        },
        {
            "#": "478",
            "String": "Увы, мы сами этого не знаем. Наше сообщество разделено гражданской войной, и мы не можем быть до конца уверены, что виной всему этому не являются раскольники."
        },
        {
            "#": "479",
            "String": "Увы, мы сами этого не знаем. Наше сообщество разделено гражданской войной, и мы не можем быть до конца уверены, что виной всему этому не являются раскольники. Кроме того, наши силы заняты борьбой с доминаторами, что не позволяет нам сконцентрироваться на подавлении пиратских восстаний."
        },
        {
            "#": "480",
            "String": "Когда противоречия между группами индивидов становятся настолько остры, что для навязывания реализации своих взглядов они берутся за оружие."
        },
        {
            "#": "481",
            "String": "Мне кажется, что у нас есть возможность помочь друг другу. Тем более, что мы уже договорились - мы будем общаться <clr>на равных<clrEnd>"
        },
        {
            "#": "482",
            "String": "Не знаю, что тебе нужно объяснять, летучий булыжник. Лучше пусть за меня поговорят мои пушки!"
        },
        {
            "#": "483",
            "String": "Огонь!"
        },
        {
            "#": "484",
            "String": "Перед Коалицией Разумных Рас стоят проблемы. Если бы мы сейчас бросили все силы на помощь вам, то, во-первых, не факт, что вторженцы не помешали бы нам добраться до вашего сородича, и, во-вторых, вполне вероятно, что это бы позволило нашим врагам нанести нам смертельный удар."
        },
        {
            "#": "485",
            "String": "Именно. В ответ Коалиция гарантирует, что поможет с розыском другой Махпеллы, и, если потребуется, освобождением. К тому же, это хороший повод, чтобы... Обменяться сведениями друг о друге. Может, и вы заходите подать заявку на членство в Коалиции."
        },
        {
            "#": "486",
            "String": "Превосходно! Я сообщу всем остальным. Бортовой компьютер, передать сообщение!"
        },
        {
            "#": "487",
            "String": "Коалиции Разумных Рас удалось выйти на связь с новоприбывшей Махпеллой. Как оказалось, она сама разыскивает одного из сородичей, который подавал сигналы о помощи из нашего Рукава. Межзвёздная Коалиция не может оставить существ, какой расы бы они ни были, в беде, и протянула руку помощи клисанам. Этот день - великий день, ведь с этого дня мы с гордостью говорим о союзе Коалиции и клисан, существ из двух разных рукавов - Ориона и Персея!"
        },
        {
            "#": "488",
            "String": "Благодаря отваге и смекалке рейнджера"
        },
        {
            "#": "489",
            "String": "Внимание всем!"
        },
        {
            "#": "490",
            "String": "Это наш космос! Смерть захватчикам!"
        },
        {
            "#": "491",
            "String": "А почему ты говоришь о себе в женском роде?"
        },
        {
            "#": "492",
            "String": "О нет, спасибо. И спасибо за ответ."
        },
        {
            "#": "493",
            "String": "Прощай, Махпелла"
        },
        {
            "#": "494",
            "String": "А почему ты имеешь такой оттенок? Все ранее встреченные нами представители твоего вида имели тёмно-зелёные оттенки... внешних покровов."
        },
        {
            "#": "495",
            "String": "Ничего себе..."
        },
        {
            "#": "496",
            "String": "Ты что-то говорила про... \"группу\""
        },
        {
            "#": "497",
            "String": "Очень любопытно! Спасибо за рассказ."
        },
        {
            "#": "498",
            "String": "А как появляются новые Махпеллы?"
        },
        {
            "#": "499",
            "String": "Ну ладно"
        },
        {
            "#": "500",
            "String": "А как проходит твой диалог с учёными Коалиции?"
        },
        {
            "#": "501",
            "String": "Рад слышать"
        },
        {
            "#": "502",
            "String": "Наверное, это очень странно - ощущать себя одновременно десятками, а то и сотнями кусочков, разбросанных по всей галактике."
        },
        {
            "#": "503",
            "String": "И в этом есть доля правды..."
        },
        {
            "#": "504",
            "String": "Очень любопытно, а как ты управляешься с такой армадой? Не с точки зрения логистики, управления, а с точки зрения... Ну, так сказать, экономической? Ведь твои органы повреждаются и гибнут!"
        },
        {
            "#": "505",
            "String": "Тогда ясно, как Махпелле триста лет назад удалось почти разгромить Коалицию. Спасибо."
        },
        {
            "#": "506",
            "String": "Кстати, а ты не боишься \"подцепить\" от нас бактерии и вирусы? Ведь ты так близко контактируешь с нами!"
        },
        {
            "#": "507",
            "String": "Ого. Это очень хорошо!"
        },
        {
            "#": "508",
            "String": "Ну, ладно"
        },
        {
            "#": "509",
            "String": "Мне глубоко плевать, какие у вас успехи. Моего приказа ждёт группа спецназа, а сапёры уже режут провода к пультам управлениям реактором и заложенным в базу бомбам - мы не дураки, далани, и прекрасно знаем, что такие дела обязательно \"закрываются на ключ\"."
        },
        {
            "#": "510",
            "String": "Пожалуй, с удовольствием бы поднял здесь всё на воздух. Но, к сожалению, нам нужна Махпелла. Живая, дееспособная и, главное - самостоятельная. Без твоих гадских наноботов!"
        },
        {
            "#": "511",
            "String": "Знаешь, я тут с братвой мозгами пораскинул, мыслишками помысливал, и знаешь, что намыслил? Что пора бы тебе катиться отсюда! Это наша Махпелла, и она станет орудием нашего нового порядка!"
        },
        {
            "#": "512",
            "String": "А моим парням - ни капельки! Огонь!"
        },
        {
            "#": "513",
            "String": "Да хоть остров в океане, будешь персоной нон-гранта... Ой, в общем, будет тебе домик и библиотека, только отдай нам Махпеллу!"
        },
        {
            "#": "514",
            "String": "Делаей то, что надо. Я своё слово сказал, и, будь уверен, моё слово - слово Совета Коалиции, или не быть мне рейнджером! А сейчас меня ждут дела на орбите. Пока."
        },
        {
            "#": "71",
            "String": "Господин верховный барон, убедительно прошу вас в самые кратчайшие сроки прибыть на объект <clr>Хандлер<clrEnd>. Есть вопрос, требующий вашего вмешательства. Все подробности на месте."
        },
        {
            "#": "72",
            "String": "Ну что вы, пиратские законы славятся тем, что их можно изменить как угодно и когда угодно. Они не стали вынуждать меня отказаться от старого звания и наоборот, поощряли его куда достойнее, чем Галактический Совет. Когда я разработал механизм заманивания одной из <clr>Махпелл<clrEnd> в ловушку, мне грозило немедленное пожизненное заключение, а малокское правительство так и вовсе выступало за расстрел без суда и следствия. Куда, думаете, было податься учёному в такой безвыходной ситуации? Естественно, я связался с пиратским кланом, и, ознакомившись с технической документацией моего скромного проекта, коллектив ханов тотчас же загорелся энтузиазмом. Что может быть лучше потенциально неограниченного в размерах клисанского флота, подчинённого специально разработанными нанитами и готового обеспечить своему хозяину неоспоримое доминирование в космосе? Эта информация быстро дошла до барона <clr>Чушкача<clrEnd>, и тот просто не мог упустить такую возможность."
        },
        {
            "#": "73",
            "String": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, <Player>. Первым делом вы наверняка захотите выхватить бластер, но, поверьте, вы ничего не потеряете, если позволите мне объясниться. Как вы уже, наверное, догадались, к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов - запустив легенду о некоем устройстве, основанном на принципе работы Z-трансмиттера, мы успешно пустили пыль в глаза целому Рукаву, вынудив Коалицию долгое время гнаться за ложной тенью. Не без помощи клисанского вмешательства моему новому начальству удалось продержаться столь долгое время. Но, к сожалению, от собственной некомпетентности их это так и не спасло."
        },
        {
            "#": "74",
            "String": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, барон. Как вы уже, наверное, догадались - к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов - запустив легенду о некоем устройстве, основанном на принципе работы Z-трансмиттера, мы успешно пустили пыль в глаза целому Рукаву, вынудив коалиционных ищеек гнаться за ложной тенью. Сложно отрицать эффективность проекта в нашем деле - сейчас в Галактике преимущество остаётся только за одной стороной. Ни один из врагов Клана так и не сумел противостоять нам: ни безжалостные машины, ни прогнившая Коалиция, примерившая на себя личину благодетеля - никто. Всё это было бы невозможно в столь кратчайшие сроки без… стороннего вмешательства. И сегодня Клан, бесспорно, царит в этом Рукаве."
        },
        {
            "#": "75",
            "String": "Приветствую вас на борту секретного объекта <clr>Хандлер<clrEnd>, барон. Как вы уже, наверное, догадались - к появлению клисан в нашей Галактике действительно причастен пиратский клан. Точнее, лично я - далани <clr>Алакай<clrEnd>, главный директор и идейный вдохновитель данного проекта. И, как видите, мы действительно добились немалых успехов - запустив легенду о некоем устройстве, основанном на принципе работы Z-трансмиттера, мы успешно пустили пыль в глаза целому Рукаву, вынудив коалиционных ищеек гнаться за ложной тенью. Благодаря клисанскому вмешательству Клан всё ещё сохраняет неоспоримое преимущество в этой войне - даже если нас прижмут к стенке, легавым никогда не вычислить координаты <clr>Тортугаца<clrEnd>, и мы всегда сумеем подготовить сокрушительный ответный удар."
        },
        {
            "#": "76",
            "String": "Ну что вы, пиратские законы не ограничивают наши давние заслуги: даже наоборот - поощряют куда достойнее, чем эти ваши скупердяи из Галактического Совета. Когда я разработал механизм заманивания одной из <clr>Махпелл<clrEnd> в ловушку, мне грозило немедленное пожизненное заключение, а малокское правительство так и вовсе выступало за расстрел без суда и следствия. Куда, думаете, было податься учёному в такой безвыходной ситуации? Естественно, я связался с пиратским кланом, и, ознакомившись с технической документацией моего скромного проекта, коллектив ханов тотчас же загорелся энтузиазмом. Что может быть лучше потенциально неограниченного в размерах клисанского флота, подчинённого специально разработанными нанитами и готового обеспечить своему хозяину неоспоримое доминирование в космосе? Эта информация быстро дошла до барона <clr>Чушкача<clrEnd>, и тот просто не мог упустить такую возможность."
        },
        {
            "#": "77",
            "String": "Да, конечно, барон. Я лишь надеюсь, что мы сможем достичь взаимопонимания. В Галактике всё ещё сохраняется зловонное присутствие врагов нашей Свободы, и поддержка клисан - козырь, который гарантированно положит конец угрозе благополучию и процветанию Клана сегодня. Враги, так до конца и не определившие, откуда клисане вообще взялись - даже не поймут, что это было."
        },
        {
            "#": "78",
            "String": "Да, конечно, барон. Я лишь надеюсь, что мы сможем достичь взаимопонимания. Нельзя не признать заслуг проекта, ведь мы всё-таки теперь герои и освободители угнетённого народа, разве не так? И, поверьте - это только начало. Если я сумею реализовать вторую стадию проекта, Клан сможет реализовать давнюю мечту ни на что не способной Коалиции и расширить свои владения за пределы родного Рукава"
        },
        {
            "#": "79",
            "String": "Вы слишком плохого обо мне мнения, барон. Как истинный представитель научного контингента Пиратского Клана, я не гонюсь ни за чем, кроме науки. Случайные жертвы? Побочный урон? Признайте, вас они тоже редко когда интересовали на пути к власти. Так что, смею предположить, что мы с вами в этом вопросе имеем определённую солидарность."
        },
        {
            "#": "81",
            "String": "Благодарю вас за неоценимую моральную поддержку, барон. Я предвидел ваше решение и заранее приготовил передатчик, которым вы сможете маркировать систему для следующей атаки - вам достаточно отправить сигнал, и в целевой системе вскоре откроется червоточина. Использовать устройство вы сможете с мостика корабля. К сожалению, некоторые технические ограничения не позволят запускать больше одного нейролинка за раз, но, поверьте, с мощью и эволюционным потенциалом клисанской армады, вам этого хватит с головой."
        },
        {
            "#": "82",
            "String": "Я признаю, что в этот раз поставил на тёмную лошадку, <Player>, и я готов искупить свои грехи перед Коалицией. Мой проект далеко ушёл с момента своего старта, и, вопреки опасениям ополчившегося на меня Совета, - оказался более, чем успешен. Даже, каким-то образом, выйдя из-под контроля, <clr>Махпелла<clrEnd> долго не проживёт, так как система самоуничтожения, встроенная в наниты, в течении трёх месяцев не получая контрольного сигнала с моей стороны, сработает автоматически. Бог из машины погибнет, не попав никому в руки."
        },
        {
            "#": "83",
            "String": "Что бы вы обо мне ни думали, я не гонюсь ни за славой, ни за властью, ни даже за материальным вознаграждением. Меня интересует только наука и только результат. Думаю, прорываясь к верхушке Клана, вы давно осознали, что порой приходится жертвовать малым во имя великого. В Галактике больше не осталось врагов Коалиции, но даже в лабораторных условиях я ещё могу многого достичь. Уверяю вас, <Player>, горизонты, открывающиеся перед нами сегодня, ещё не раз помогут в технологическом развитии Коалиции - я молчу о понимании природы клисан в частности."
        },
        {
            "#": "84",
            "String": "Что бы вы обо мне ни думали, я не гонюсь ни за славой, ни за властью, ни даже за материальным вознаграждением. Меня интересует только наука и только результат. Думаю, прорываясь к верхушке Клана, вы давно осознали, что порой приходится жертвовать малым во имя великого. В Галактике до сих пор сохраняется присутствие доминаторов, и, если вы позволите мне продолжить мои исследования, я готов немедленно перенаправить все имеющиеся мощности проекта на помощь Коалиции в борьбе с бесконечно реплицирующимися машинами. Прошу, позвольте мне использовать свой последний шанс."
        },
        {
            "#": "85",
            "String": "Даже не знаю, как вас отблагодарить, рейнджер. Вот увидите, я ещё докажу, что моя работа заслуживает жизни. Специально для такого случая, я приготовил передатчик, которым вы сможете маркировать систему для следующей атаки - вам достаточно отправить сигнал, и в целевой системе вскоре откроется червоточина. Использовать устройство вы сможете с мостика корабля. К сожалению, некоторые технические ограничения не позволят запускать больше одного нейролинка за раз, но поверьте - с мощью и эволюционным потенциалом клисанской армады, вам этого хватит с головой."
        },
        {
            "#": "86",
            "String": "Рейнджер <Player>, убедительно прошу вас в самые кратчайшие сроки прибыть на объект <clr>Хандлер<clrEnd>. К вам, как к новому Верховному Барону, у меня есть один разговор."
        },
        {
            "#": "87",
            "String": "Приветствуем вас, <Player>, на борту центра рейнджеров <0>. И у нас для вас есть отличные новости - план удался! Именно сегодняшняя дата будет значится официальным днем победы над возвращением клисанской угрозы, а ваше имя, рейнджер, останется в истории навеки. После того, как вы, убедив Алакая, что ему ничего не угрожает, грамотно применили плоды его неэтичных экспериментов в борьбе с последними врагами Коалиции, а наши военные разработали и реализовали план с захватом ученого, который был только что блистательно исполнен."
        },
        {
            "#": "89",
            "String": "Укажите систему для атаки."
        },
        {
            "#": "90",
            "String": "Запрос ретранслирован на <clr>Хандлер<clrEnd>. Ответ положительный. Флот клисан отправлен в указанную систему."
        },
        {
            "#": "92",
            "String": "Так держать, <Player>! Уничтожением секретного объекта вы положили конец жизням множества гнусных предателей, натравивших для нас клисан ради собственных интересов. Безусловно, этот день войдет в историю!<br>Следующая цель - <clr>Махпелла<clrEnd>. Добьем врага до конца!"
        },
        {
            "#": "97",
            "String": "Именно так, рейнджер. Клисанские орды атакуют галактику, и это нужно остановить как можно скорее.<br><br>Военные передали в наше управление небольшой генератор, при помощи которого мы перебросим вас к текущему местоположению Махпеллы."
        },
        {
            "#": "98",
            "String": "Отличная работа, <Player>, мы забираем протоплазму и увеличиваем ваш личный нод-счет. Величина счета <0> нодов.<br>Кроме того, вы выросли в нашем рейтинге. Продолжайте и впредь пополнять наши запасы нодов и протоплазмы."
        }
    ]
}