{
    "FileID": 573785173,
    "FileVersion": 8,
    "ViewPos.x": -429,
    "ViewPos.y": -254,
    "ScriptName": "Mod_ExpRC",
    "ScriptFileOut": "C:\\Users\\DmitB\\Documents\\Фиксы\\Universe Redux Fixes\\Mods\\Expansion\\ExpRC\\DATA\\Script\\Mod_ExpRC.scr",
    "ScriptTextOut": "C:\\Users\\DmitB\\Documents\\Фиксы\\Universe Redux Fixes\\Mods\\Expansion\\ExpRC\\DATA\\Script\\Mod_ExpRC.txt",
    "LangDatIn": "",
    "LangDatOut": "C:\\Users\\DmitB\\Фиксы\\Universe Redux Fixes\\Mods\\Expansion\\ExpRC\\CFG\\Rus\\Lang.dat",
    "MainDatIn": "",
    "MainDatOut": "",
    "CacheDatIn": "",
    "CacheDatOut": "",
    "ExportLangTxt": false,
    "ExportLangDat": false,
    "Visual.Objects": 
    [
        {
            "DialogAnswers": 
            [
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 220,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 17,
                    "Msg": "Положить микромодуль в хранилище",
                    "AMsg.Num": "0"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 220,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 21,
                    "Msg": "Забрать микромодуль из хранилища",
                    "AMsg.Num": "1"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 220,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 24,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "2"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 520,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 38,
                    "Msg": "<str3>",
                    "AMsg.Num": "3"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 480,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 41,
                    "Msg": "<str2>",
                    "AMsg.Num": "4"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 460,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 43,
                    "Msg": "<str1>",
                    "AMsg.Num": "5"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 370,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 53,
                    "Msg": "<str1>",
                    "AMsg.Num": "6"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 370,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 54,
                    "Msg": "<str3>",
                    "AMsg.Num": "7"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 430,
                    "Pos.y": -10,
                    "Parent": -1,
                    "#": 56,
                    "Msg": "Большое спасибо",
                    "AMsg.Num": "8"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 540,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 66,
                    "Msg": "<str4>",
                    "AMsg.Num": "9"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 320,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 75,
                    "Msg": "Назад",
                    "AMsg.Num": "10"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 128,
                    "#": 77,
                    "Msg": "<str0>",
                    "AMsg.Num": "11"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 78,
                    "#": 82,
                    "Msg": "<str1>",
                    "AMsg.Num": "12"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 79,
                    "#": 83,
                    "Msg": "<str1>",
                    "AMsg.Num": "13"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 220,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 90,
                    "Msg": "<tstr1>",
                    "AMsg.Num": "14"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 150,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 92,
                    "Msg": "Спасибо, в другой раз",
                    "AMsg.Num": "15"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 106,
                    "#": 102,
                    "Msg": "<str1>",
                    "AMsg.Num": "16"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 107,
                    "#": 103,
                    "Msg": "<str2>",
                    "AMsg.Num": "17"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 108,
                    "#": 104,
                    "Msg": "<str3>",
                    "AMsg.Num": "18"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 109,
                    "#": 113,
                    "Msg": "<str1>",
                    "AMsg.Num": "19"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 110,
                    "#": 114,
                    "Msg": "<str2>",
                    "AMsg.Num": "20"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 111,
                    "#": 115,
                    "Msg": "<str3>",
                    "AMsg.Num": "21"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 112,
                    "#": 116,
                    "Msg": "<str4>",
                    "AMsg.Num": "22"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 121,
                    "#": 126,
                    "Msg": "",
                    "AMsg.Num": "23"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 118,
                    "#": 127,
                    "Msg": "",
                    "AMsg.Num": "24"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 0,
                    "Parent": 136,
                    "#": 137,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "25"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 139,
                    "#": 140,
                    "Msg": "",
                    "AMsg.Num": "26"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 570,
                    "Pos.y": 420,
                    "Parent": -1,
                    "#": 148,
                    "Msg": "",
                    "AMsg.Num": "27"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": -20,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 151,
                    "Msg": "В другой раз",
                    "AMsg.Num": "28"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": -60,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 158,
                    "Msg": "<str4>",
                    "AMsg.Num": "29"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": -150,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 170,
                    "Msg": "<tstr1>",
                    "AMsg.Num": "30"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": -120,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 171,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "31"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 175,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "32"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 176,
                    "Msg": "<tstr1>",
                    "AMsg.Num": "33"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 179,
                    "Msg": "<tstr3>",
                    "AMsg.Num": "34"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": -60,
                    "Pos.y": 450,
                    "Parent": -1,
                    "#": 186,
                    "Msg": "",
                    "AMsg.Num": "35"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 110,
                    "Pos.y": 510,
                    "Parent": -1,
                    "#": 189,
                    "Msg": "Пожалуй, мне нужно кое-что другое",
                    "AMsg.Num": "36"
                }
            ],
            "DialogMessages": 
            [
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 410,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 11,
                    "Msg": "<str0> перемещён с вашего корабля в хранилище. Забрать его вы сможете в любое удобное для вас время на любом Центре Рейнджеров.",
                    "DMsg.Num": "0"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 410,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 13,
                    "Msg": "<str0> уже доставлен на ваш корабль.",
                    "DMsg.Num": "1"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 150,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 14,
                    "Msg": "За каждым рейнджером закреплено отдельное хранилище микромодулей. Это позволяет получить необходимый модуль в любом из наших центров, а ненужные вам модули мы распределяем по своему усмотрению, но лишь до того момента, когда они вам понадобятся.\r\nЖелаете получить или положить микромодули в хранилище?",
                    "DMsg.Num": "2"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 260,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 18,
                    "Msg": "Выберите микромодуль, имеющийся на вашем корабле.",
                    "DMsg.Num": "3"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 260,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 22,
                    "Msg": "Выберите микромодуль, имеющийся в хранилище.",
                    "DMsg.Num": "4"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 470,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 37,
                    "Msg": "Чтобы вы хотели узнать?",
                    "DMsg.Num": "5"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 520,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 39,
                    "Msg": "<str1>",
                    "DMsg.Num": "6"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 540,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 40,
                    "Msg": "<str1>",
                    "DMsg.Num": "7"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 480,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 42,
                    "Msg": "<str1>",
                    "DMsg.Num": "8"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 460,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 44,
                    "Msg": "<str1>",
                    "DMsg.Num": "9"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 340,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 52,
                    "Msg": "<str1>",
                    "DMsg.Num": "10"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 430,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 55,
                    "Msg": "Замечательно, <Player>! Мы начислили на ваш счёт <int0*UnknownMMReward> нод.<str0>",
                    "DMsg.Num": "11"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 77,
                    "#": 78,
                    "Msg": "<str2>",
                    "DMsg.Num": "12"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 82,
                    "#": 79,
                    "Msg": "<str3>",
                    "DMsg.Num": "13"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -30,
                    "Pos.y": 0,
                    "Parent": 83,
                    "#": 80,
                    "Msg": "<str4>",
                    "DMsg.Num": "14"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 300,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 93,
                    "Msg": "Все микромодули из хранилища были успешно перемещены на ваш корабль.\r\nЖелаете сделать что-то ещё?",
                    "DMsg.Num": "15"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 94,
                    "Msg": "Все микромодули из вашего трюма были успешно перемещены в хранилище.\r\nЖелаете сделать что-то ещё?",
                    "DMsg.Num": "16"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 117,
                    "#": 101,
                    "Msg": "<str0>",
                    "DMsg.Num": "17"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 119,
                    "#": 118,
                    "Msg": "<str0>",
                    "DMsg.Num": "18"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 123,
                    "#": 121,
                    "Msg": "<str0>",
                    "DMsg.Num": "19"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 130,
                    "#": 131,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "20"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 0,
                    "Parent": 137,
                    "#": 139,
                    "Msg": "<tstr3>",
                    "DMsg.Num": "21"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 390,
                    "Parent": -1,
                    "#": 147,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "22"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -60,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 150,
                    "Msg": "Что, хочешь забрать свои кровные модули из лап фараонов?\r\n\r\nПохвальное желание. Но, уж извини, дружок, за это надо платить.\r\n\r\nЗа один модуль мы спишем с твоего счёта <GalaxyMoney(2)> cr. За эти деньги будут оснащены новые рейды на Центры Рейнджеров - а ты думал, откуда мы берём столько микромодулей?",
                    "DMsg.Num": "23"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -90,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 157,
                    "Msg": "<str0>",
                    "DMsg.Num": "24"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -60,
                    "Pos.y": 420,
                    "Parent": -1,
                    "#": 160,
                    "Msg": "<str0>",
                    "DMsg.Num": "25"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 169,
                    "Msg": "<str0>",
                    "DMsg.Num": "26"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 174,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "27"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 80,
                    "Pos.y": 510,
                    "Parent": -1,
                    "#": 188,
                    "Msg": "Итак, что именно вам нужно?",
                    "DMsg.Num": "28"
                }
            ],
            "Dialogs": 
            [
                {
                    "Type": "TDialog",
                    "Name": "put_mm",
                    "Pos.x": 340,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 7
                },
                {
                    "Type": "TDialog",
                    "Name": "take_mm",
                    "Pos.x": 340,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 8
                },
                {
                    "Type": "TDialog",
                    "Name": "MM_storage",
                    "Pos.x": 150,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 9
                },
                {
                    "Type": "TDialog",
                    "Name": "Info",
                    "Pos.x": 470,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 36
                },
                {
                    "Type": "TDialog",
                    "Name": "UniMM",
                    "Pos.x": 300,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 50
                },
                {
                    "Type": "TDialog",
                    "Name": "BuyNewMM",
                    "Pos.x": 350,
                    "Pos.y": 290,
                    "Parent": -1,
                    "#": 100
                },
                {
                    "Type": "TDialog",
                    "Name": "SellMM",
                    "Pos.x": 440,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 129
                },
                {
                    "Type": "TDialog",
                    "Name": "SellMMDone",
                    "Pos.x": 0,
                    "Pos.y": -20,
                    "Parent": 142,
                    "#": 141
                },
                {
                    "Type": "TDialog",
                    "Name": "SellNodes",
                    "Pos.x": 570,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 145
                },
                {
                    "Type": "TDialog",
                    "Name": "MM_storage2",
                    "Pos.x": -60,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 149
                },
                {
                    "Type": "TDialog",
                    "Name": "take_mm2",
                    "Pos.x": -100,
                    "Pos.y": 220,
                    "Parent": -1,
                    "#": 153
                },
                {
                    "Type": "TDialog",
                    "Name": "BuyNewMMAlt",
                    "Pos.x": -90,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 155
                },
                {
                    "Type": "TDialog",
                    "Name": "RecieveMM",
                    "Pos.x": -150,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 161
                },
                {
                    "Type": "TDialog",
                    "Name": "DialogMM",
                    "Pos.x": 80,
                    "Pos.y": 480,
                    "Parent": -1,
                    "#": 187
                }
            ],
            "Groups": 
            [
                {
                    "Type": "TGroup",
                    "Name": "PlayerGroup",
                    "Pos.x": 50,
                    "Pos.y": 40,
                    "Parent": -1,
                    "#": 3,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 1,
                    "CntShipMax": 1,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": true,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                }
            ],
            "Operations": 
            [
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -60,
                    "Pos.y": 0,
                    "Parent": 28,
                    "#": 5,
                    "Code.Type": "Global",
                    "Code": 
                    [
                        "GRun();"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -40,
                    "Pos.y": 0,
                    "Parent": 28,
                    "#": 6,
                    "Code.Type": "Init",
                    "Code": 
                    [
                        "array0 = newarray(1);",
                        "array1 = newarray(1);",
                        "mm_storage = newarray(1);",
                        "mm_storage_name = newarray(1);",
                        "mmTake = 0;",
                        "BonMMRand1 = -1;",
                        "BonMMRand1 = -1;",
                        "FreeNodes = 300 + (520 - GalaxyDiffLevels(7)) * 5  + Rnd(10,50);",
                        "if(CT('ExpRC.ExpRCRebootMMChain')) ExpRCRebootMMChainInit = 1;  //Флаг выдачи ММ без повторов",
                        "if(CT('ExpRC.ExpRCAltMMShop')) ExpRCAltMMShopInit = 1;  //Флаг на пул в 9 ММ",
                        "//Раздаём доминаторам неизвестные ММ, а также вешаем спец. инфошки на ЦР на старте скрипта",
                        "//Ищем все корабли в Галактике, после чего начинаем их подробный перебор",
                        "int2 = BuildListOfNewShips(array0, lastShipId, 1, 32, 1, '');",
                        "if(int2)",
                        "{",
                        "    int3 = 3 + PortionInDiapason(GalaxyDiffLevels(7), 50, 500, 6, 0); //Шанс на то, что доминатор при смерти дропнет неизвестный микромодуль",
                        "    for(i = 0; i < int2; i = i + 1)",
                        "    {",
                        "        dwd1 = array0[i];",
                        "",
                        "        if(ShipInScript(dwd1, 0)) continue; //Исключаем скриптовые корабли",
                        "",
                        "        j = ShipSubType(dwd1);",
                        "        if(j == 7) continue; //Исключаем клигов",
                        "        if(!j) continue; //Исключаем боссов",
                        "",
                        "        if(RndObject(1, 100, dwd1) > int3) continue;",
                        "",
                        "        dwd2 = CreateCustomCountableItem('Mod_ExpRC_UnknownMM', 1, 1);",
                        "        ItemOwner(dwd2, None);",
                        "        //ItemSubrace(dwd2, ShipSubrace(dwd1, -1));",
                        "        ItemCost(dwd2, 1000);",
                        "        ShipAddDropItem(dwd1, dwd2);",
                        "    }",
                        "}",
                        "lastShipId = GalaxyShipId();",
                        "",
                        "//Функция для вывода и обновления уведомлений с хранилищем микромодулей",
                        "function MMStorageEther()",
                        "{",
                        "    if(ArrayDim(mm_storage) >= 2)",
                        "    {",
                        "        //Проверка на количество ММ, если больше 38 - запускаем счётчик страниц уведомлений",
                        "        if(ArrayDim(mm_storage) <= 39)",
                        "        {",
                        "            for(k = 1; k <= CountMMStor; k = k + 1)",
                        "            {",
                        "                EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + k);",
                        "                EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + k);",
                        "                CountMMStorBac = -1;",
                        "            }",
                        "            //^ выше происходит удаление всех номерных уведомлений (если они были)",
                        "            LStorageMsg = \"<color=0,255,0>Собственность вне корабля</color>\" + CT('FormInfo.td_otstup_price') + \"<color=255,240,100>Стоимость</color>\";",
                        "            LStorageMsg = LStorageMsg + CT('FormInfo.br') + '<color=127,127,127>--------------------------------------------------------------------------------------------------</color>';",
                        "            LStorageMsg = LStorageMsg + CT('FormInfo.br') + CT('FormInfo.td_margin_center') + \"<color=255,240,100>Персональное хранилище микромодулей</color>\" + CT('FormInfo.br');",
                        "            LStorageMsg = LStorageMsg + '<color=127,127,127>--------------------------------------------------------------------------------------------------</color>';",
                        "            for(j = 1; j < ArrayDim(mm_storage); j = j + 1)",
                        "            {",
                        "                LStorageMsg = LStorageMsg + CT('FormInfo.br') + '- ' + mm_storage_name[j];",
                        "                int1 = ItemCost(IdToItem(substr(mm_storage[j], 7)));",
                        "                if(int1 <= 9) str3 = 'td_margin_cost_0';",
                        "                else if(int1 > 9 && int1 < 100) str3 = 'td_margin_cost_00';",
                        "                else if(int1 > 99 && int1 < 1000) str3 = 'td_margin_cost_000';",
                        "                else if(int1 > 999 && int1 < 10000) str3 = 'td_margin_cost_0000';",
                        "                else if(int1 > 9999 && int1 < 100000) str3 = 'td_margin_cost_00000';",
                        "                else if(int1 > 99999 && int1 < 1000000) str3 = 'td_margin_cost_000000';",
                        "                else if(int1 > 999999 && int1 < 10000000) str3 = 'td_margin_cost_0000000';",
                        "                else if(int1 > 9999999 && int1 < 100000000) str3 = 'td_margin_cost_00000000';",
                        "                else if(int1 > 99999999 && int1 < 1000000000) str3 = 'td_margin_cost_000000000';",
                        "                LStorageMsg = LStorageMsg + CT('FormInfo.' + str3) + '<color=0,255,255>' + int1 + '</color>';",
                        "            }",
                        "            LStorageMsg = LStorageMsg + CT('FormInfo.br');",
                        "            //Не считая последней цифры в конце - весь этот сложный ID является SHiFT кодом... пасхалочка",
                        "            CustomEther('MMStorage', 9, 'WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0', LStorageMsg);",
                        "        }",
                        "        //Обработчик добавления номерных уведомлений, если количество ММ в хранилище превышает 38",
                        "        if(ArrayDim(mm_storage) > 39)",
                        "        {",
                        "            EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "            EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "            //^ выше происходит удаление предыдущего не номерного (0) уведомления",
                        "            int3 = int(ArrayDim(mm_storage) / 38);",
                        "            int3 = (38 * (int3 + 1)) + 1;",
                        "            CountMMStor = 1;",
                        "            for(k = 39; k <= int3; k = k + 38)",
                        "            {",
                        "                if(k > ArrayDim(mm_storage)) int2 = ArrayDim(mm_storage);",
                        "                if(k <= ArrayDim(mm_storage)) int2 = k;",
                        "                LStorageMsg = \"<color=0,255,0>Собственность вне корабля (Страница </color><color=255,0,255>\" + CountMMStor + '</color><color=0,255,0>)</color>' + CT('FormInfo.td_otstup_price') + \"<color=255,240,100>Стоимость</color>\";",
                        "                LStorageMsg = LStorageMsg + CT('FormInfo.br')+'<color=127,127,127>--------------------------------------------------------------------------------------------------</color>';",
                        "                LStorageMsg = LStorageMsg + CT('FormInfo.br') + CT('FormInfo.td_margin_center') + \"<color=255,240,100>Персональное хранилище микромодулей</color>\" + CT('FormInfo.br');",
                        "                LStorageMsg = LStorageMsg + '<color=127,127,127>--------------------------------------------------------------------------------------------------</color>';",
                        "                for(j = k - 38; j < int2; j = j + 1)",
                        "                {",
                        "                    LStorageMsg = LStorageMsg + CT('FormInfo.br') + '- ' + mm_storage_name[j];",
                        "                    int1 = ItemCost(IdToItem(substr(mm_storage[j], 7)));",
                        "                    if(int1 <= 9) str3 = 'td_margin_cost_0';",
                        "                    else if(int1 > 9 && int1 < 100) str3 = 'td_margin_cost_00';",
                        "                    else if(int1 > 99 && int1 < 1000) str3 = 'td_margin_cost_000';",
                        "                    else if(int1 > 999 && int1 < 10000) str3 = 'td_margin_cost_0000';",
                        "                    else if(int1 > 9999 && int1 < 100000) str3 = 'td_margin_cost_00000';",
                        "                    else if(int1 > 99999 && int1 < 1000000) str3 = 'td_margin_cost_000000';",
                        "                    else if(int1 > 999999 && int1 < 10000000) str3 = 'td_margin_cost_0000000';",
                        "                    else if(int1 > 9999999 && int1 < 100000000) str3 = 'td_margin_cost_00000000';",
                        "                    else if(int1 > 99999999 && int1 < 1000000000) str3 = 'td_margin_cost_000000000';",
                        "                    LStorageMsg = LStorageMsg + CT('FormInfo.' + str3) + '<color=0,255,255>' + int1 + '</color>';",
                        "                }",
                        "",
                        "                LStorageMsg = LStorageMsg + CT('FormInfo.br');",
                        "                CustomEther('MMStorage', 9, 'WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + CountMMStor, LStorageMsg);",
                        "                CountMMStor = CountMMStor + 1;",
                        "            }",
                        "",
                        "            //Проверка на наличие лишнего (пустого) номерного уведомления и его удаление",
                        "            //Если CountMMStorBac равна -1, значит на панели вообще нет номерных уведомлений",
                        "            if(CountMMStorBac != -1)",
                        "            {",
                        "                if(int((ArrayDim(mm_storage) - 2) / 38) + 1 < CountMMStorBac) {",
                        "                    EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + (CountMMStor - 1));",
                        "                    EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + (CountMMStor - 1));",
                        "                }",
                        "            }",
                        "            CountMMStorBac = CountMMStor - 1;",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 410,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 10,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "int0 = GAnswerData;",
                        "dwd0 = GetItemFromShip(Player(), int0);",
                        "int3 = EqModule(dwd0);",
                        "str4 = ItemFullName(dwd0);",
                        "",
                        "str0 = 'Exp_RC_' + Id(dwd0);",
                        "ArrayAdd(mm_storage, str0);",
                        "ArrayAdd(mm_storage_name, str4);",
                        "PutItemInVault(str0, dwd0);",
                        "str0 = '</color>' + str4;",
                        "MMStorageEther();",
                        "Sound('Sound.DelMsg');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 410,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 12,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "dwd0 = GetItemFromVault(mm_storage[GAnswerData]);",
                        "int3 = EqModule(dwd0);",
                        "str4 = ItemFullName(dwd0);",
                        "",
                        "str0 = '</color>' + str4;",
                        "AddItemToShip(Player(), dwd0);",
                        "ArrayDelete(mm_storage, GAnswerData);",
                        "ArrayDelete(mm_storage_name, GAnswerData);",
                        "MMStorageEther();",
                        "if(ArrayDim(mm_storage) < 2)",
                        "{",
                        "    EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "    EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "}",
                        "Sound('Sound.DelMsg');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 170,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 15,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayClear(array0);",
                        "ArrayClear(array1);",
                        "for(i = 1; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    dwd0 = ShipItems(Player(), i);",
                        "    if(ItemType(dwd0) != t_MicroModule) continue;",
                        "    ArrayAdd(array0, i);",
                        "    ArrayAdd(array1, ShipItems(Player(), i));",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 300,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 19,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(i = 1; i < ArrayDim(array0); i = i + 1)",
                        "{",
                        "    int3 = EqModule(array1[i]);",
                        "    str4 = ItemFullName(array1[i]);",
                        "",
                        "    InjectAnswer('put_mm', str4, array0[i]);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 300,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 25,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(j = 1; j < ArrayDim(mm_storage); j = j + 1)",
                        "{",
                        "    if(mm_storage[j] < 1) continue;",
                        "    AddItemToShip(Player(), GetItemFromVault(mm_storage[j]));",
                        "}",
                        "ArrayClear(mm_storage);",
                        "ArrayClear(mm_storage_name);",
                        "EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "",
                        "for(k = 1; k <= CountMMStor; k = k + 1)",
                        "{",
                        "    EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + k);",
                        "    EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + k);",
                        "    CountMMStorBac = -1;",
                        "}",
                        "Sound('Sound.PlanetGet');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 300,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 26,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(i = 1; i < ArrayDim(mm_storage); i = i + 1) InjectAnswer('take_mm', '</color>' + mm_storage_name[i], i);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 210,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 28,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(!ExpRCRebootMMChainInit) //Флаг выдачи ММ без повторов",
                        "{",
                        "    if(CT('ExpRC.ExpRCRebootMMChain')) ExpRCRebootMMChainInit = 1;",
                        "}",
                        "if(!ExpRCAltMMShopInit) //Флаг на пул из 9 ММ",
                        "{",
                        "    if(CT('ExpRC.ExpRCAltMMShop')) ExpRCAltMMShopInit = 1;",
                        "}",
                        "else {",
                        "    if(!CT('ExpRC.ExpRCAltMMShop')) ExpRCAltMMShopInit = 0;",
                        "}",
                        "//Проверяем, что текущий тёрн не сработал второй раз за ход",
                        "if(CurTurn() != lastRun)",
                        "{",
                        "    lastRun = CurTurn();",
                        "",
                        "    for(i = GalaxyEvents() - 1; i > -1; i = i - 1)",
                        "    {",
                        "        if(GalaxyEventDate(i) < CurTurn()) break;",
                        "",
                        "        //Была уничтожена станция, проверяем, что это не ЦР",
                        "        if(GalaxyEventType(i) == 'RuinsDestroyed')",
                        "        {",
                        "            if(ArrayDim(mm_storage) < 2) continue;",
                        "",
                        "            for(j = 0; j < GalaxyStars(); j = j + 1)",
                        "            {",
                        "               int0 = StarRuins(GalaxyStar(j), 'RC');",
                        "               if(int0) break;",
                        "            }",
                        "",
                        "            if(!int0)",
                        "            {",
                        "                for(j = 1; j < ArrayDim(mm_storage); j = j + 1) FreeItem(GetItemFromVault(mm_storage[j]));",
                        "",
                        "                ArrayClear(mm_storage);",
                        "                ArrayClear(mm_storage_name);",
                        "                EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "                EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "                for(k = 1; k <= CountMMStor; k = k + 1)",
                        "                {",
                        "                    EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + k);",
                        "                    EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-' + k);",
                        "                    CountMMStorBac = -1;",
                        "                }",
                        "                if(!RangerBaseNodes(Player())) NewsAdd(\"Уважаемый <Player>! Все центры рейнджеров уничтожены.<br>Ваше личное хранилище микромодулей потеряно.\");",
                        "            }",
                        "",
                        "            int0 = 0;",
                        "        }",
                        "        //Игрок получил ММ на новый год, помещаем его в хранилище",
                        "        else if(GalaxyEventType(i) == 'PlayerReceivesMMOnNewYear')",
                        "        {",
                        "            dwd0 = IdToItem(GalaxyEventData(i, 0));",
                        "            //Если модуль ещё существует (иногда он может пропасть или быть перенесён в хранилище раньше)",
                        "            if(dwd0)",
                        "            {",
                        "                str0 = 'Exp_RC_' + Id(dwd0);",
                        "                ArrayAdd(mm_storage, str0);",
                        "                ArrayAdd(mm_storage_name, ItemFullName(dwd0));",
                        "                PutItemInVault(str0, GetItemFromStorage(FindItemInStorage(dwd0)));",
                        "                MMStorageEther();",
                        "            }",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "//Раздаём доминаторам неизвестные ММ при рождении новых кораблей",
                        "if(GalaxyShipId() > lastShipId)",
                        "{",
                        "    //Ищем все новорождённые корабли в Галактике, после чего начинаем их подробный перебор",
                        "    int2 = BuildListOfNewShips(array0, lastShipId, 1, 32, 1, '');",
                        "    if(int2)",
                        "    {",
                        "        int3 = 3 + PortionInDiapason(GalaxyDiffLevels(7), 50, 500, 6, 0); //Шанс на то, что доминатор при смерти дропнет неизвестный микромодуль",
                        "        for(i = 0; i < int2; i = i + 1)",
                        "        {",
                        "            dwd1 = array0[i];",
                        "",
                        "            if(ShipInScript(dwd1, 0)) continue; //Исключаем скриптовые корабли",
                        "",
                        "            j = ShipSubType(dwd1);",
                        "            if(j == 7) continue; //Исключаем клигов",
                        "            if(!j) continue; //Исключаем боссов",
                        "",
                        "            if(RndObject(1, 100, dwd1) > int3) continue;",
                        "",
                        "            dwd2 = CreateCustomCountableItem('Mod_ExpRC_UnknownMM', 1, 1);",
                        "            ItemOwner(dwd2, None);",
                        "            //ItemSubrace(dwd2, ShipSubrace(dwd1, -1));",
                        "            ItemCost(dwd2, 1000);",
                        "            ShipAddDropItem(dwd1, dwd2);",
                        "        }",
                        "    }",
                        "",
                        "    lastShipId = GalaxyShipId();",
                        "}",
                        "",
                        "if(DomiksDefeated()) {",
                        "    if(DaysAfterVictory < 3650) DaysAfterVictory = DaysAfterVictory + 1;",
                        "}",
                        "",
                        "if(DaysAfterVictory < 3650) {",
                        "    if(CurTurn() % 183) {",
                        "        if(ControlledSystems(0) < 5) {",
                        "            FreeNodes = FreeNodes + 30;",
                        "        }",
                        "        else if(ControlledSystems(0) < 15) {",
                        "            FreeNodes = FreeNodes + 75;",
                        "        }",
                        "        else if(ControlledSystems(0) < 25) {",
                        "            FreeNodes = FreeNodes + 135;",
                        "        }",
                        "        else if(ControlledSystems(0) < 45) {",
                        "            FreeNodes = FreeNodes + 225;",
                        "        }",
                        "        else {",
                        "            if(ControlledSystems(1) < 5) {",
                        "            FreeNodes = FreeNodes + 75;",
                        "            }",
                        "            else if(ControlledSystems(1) < 15) {",
                        "                FreeNodes = FreeNodes + 135;",
                        "            }",
                        "            else if(ControlledSystems(1) < 25) {",
                        "                FreeNodes = FreeNodes + 225;",
                        "            }",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 0,
                    "Parent": 28,
                    "#": 35,
                    "Code.Type": "DialogBegin",
                    "Code": 
                    [
                        "cur_ruin = GetShipRuins(Player());",
                        "if(cur_ruin)",
                        "{",
                        "    if(ShipType(cur_ruin) == 'RC')",
                        "    {",
                        "        if(GetGameOptions('FontDialog') == '0') DefSplt = '</color>-------------------------------------------------------------';",
                        "        else if(GetGameOptions('FontDialog') == '1') DefSplt = '</color>------------------------------------------';",
                        "        else if(GetGameOptions('FontDialog') == '2') DefSplt = '</color>-----------------------------------------';",
                        "        else /*if(GetGameOptions('FontDialog') == '3')*/ DefSplt = '</color>-------------------------------------';",
                        "",
                        "        AddDialogBlock(CT('FormRuins.RC.AboutNod.PlayerSend'), 2);",
                        "        AddDialogBlock(CT('FormRuins.RC.PirateClan.PlayerSend'), 2);",
                        "        AddDialogBlock(CT('FormRuins.RC.Rating.PlayerSend'), 2);",
                        "        AddDialogBlock(CT('FormRuins.RC.BestRanger.PlayerSend'), 2);",
                        "        AddDialogBlock('NodeStateInfoPosCorrection', 2);",
                        "        AddDialogInject('Info','', CT('FormRuins.RC.Questions.PlayerSend'),1);",
                        "        if(IsScriptActive('ShuKlissan')) AddDialogBlock(CT('Script.Mod_ShuKlissan.KlissanInfoRC.PlayerAsk'), 2);",
                        "        AddDialogInject('X', Format(CT('FormRuins.RC.GreetingAddMod'), '#BaseNod#', RangerBaseNodes(Player())), 'NodeStateInfoPosCorrection', 0);",
                        "",
                        "        //Добавляем подмену оригинальных диалогов для приобретения и сдачи ММ",
                        "        if(ExpRCRebootMMChainInit) {",
                        "            //Так сказал Маршалтустра",
                        "            AddDialogBlock(CT('FormRuins.RC.TakeNod.PlayerSend'), 2);",
                        "        }",
                        "        if(ExpRCAltMMShopInit) {",
                        "            //Так сказал Маршалтустра",
                        "            AddDialogBlock(CT('FormRuins.RC.TakeNod.PlayerSend'), 2);",
                        "        }",
                        "",
                        "        AddDialogBlock(CT('FormRuins.RC.GiveNod.PlayerSend'), 2);",
                        "",
                        "        if(GetNodesFromShip(Player())) {",
                        "            AddDialogBlock(CT('FormRuins.RC.SaleNod.PlayerSend'), 2);",
                        "        }",
                        "",
                        "        //Общий диалог под ММ и ноды",
                        "        AddDialogInject('DialogMM','',CT('FormRuins.RC.PlayerSend'),20);",
                        "    }",
                        "    else if(ShipType(cur_ruin) == 'CB')",
                        "    {",
                        "        if(!CurrentMods('Expansion\\ExpCB')) {",
                        "            if(ArrayDim(mm_storage) > 1) AddDialogInject('MM_storage2', '', \"Я хотел бы забрать модули из своего хранилища на Центре Рейнджеров\", 1);",
                        "        }",
                        "    }",
                        "    else if(ShipType(cur_ruin) == 'SB')",
                        "    {",
                        "        AddDialogBlock(CT('FormRuinsSB.History.PlayerOk'),2);",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 300,
                    "Pos.y": 50,
                    "Parent": -1,
                    "#": 51,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "int0 = 0;",
                        "for(i = 1; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    dwd0 = ShipItems(Player(), i);",
                        "    if(ItemType(dwd0) != t_UselessCountableItem) continue;",
                        "    if(EquipmentImageName(dwd0) != 'Mod_ExpRC_UnknownMM') continue;",
                        "    int0 = int0 + ItemSize(dwd0);",
                        "}",
                        "",
                        "if(int0 == 1) str1 = '</color>' + \"Сдать <int0> неизвестный микромодуль за <int0 * UnknownMMReward> нд.\";",
                        "else if(int0 >= 2 && int0 <= 4) str1 = '</color>' + \"Сдать <int0> неизвестных микромодуля за <int0 * UnknownMMReward> нд.\";",
                        "else str1 = '</color>' + \"Сдать <int0> неизвестных микромодулей за <int0 * UnknownMMReward> нд.\";",
                        "",
                        "str2 = '</color>' + Format(CT('FormRuins.RC.UnknownMM.RCAnswer'),'reward',UnknownMMReward);",
                        "str3 = '</color>' + CT('FormRuins.RC.UnknownMM.PlayerNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 400,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 57,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Считаем сколько неизвестных ММ сдал игрок (и удаляем их из трюма)",
                        "int0 = 0;",
                        "for(i = ShipItems(Player()) - 1; i > 0; i = i - 1)",
                        "{",
                        "    dwd0 = ShipItems(Player(), i);",
                        "    if(ItemType(dwd0) != t_UselessCountableItem) continue;",
                        "    if(EquipmentImageName(dwd0) != 'Mod_ExpRC_UnknownMM') continue;",
                        "    int0 = int0 + ItemSize(dwd0);",
                        "    FreeItem(GetItemFromShip(Player(), i));",
                        "}",
                        "",
                        "//Переходим к выдаче уникальных наградных ММ",
                        "if(mmTake > -1) mmTake = mmTake + int0;",
                        "//mmTake = mmTake + int0; //Для продолжения выдачи уникальных ММ по второму кругу после получения 5-го модуля",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) + (int0 * UnknownMMReward));",
                        "Sound('Sound.Sell');",
                        "str0 = '';",
                        "",
                        "if(mmTake > 24)",
                        "{",
                        "    k = int(mmTake / 25);",
                        "    mmTake = mmTake - (25 * k);",
                        "    str3 = '';",
                        "    for(k = k; k > 0; k = k - 1)",
                        "    {",
                        "        if(BonMMRand4 == -1 || BonMMRand3 == -1 || BonMMRand2 == -1 || BonMMRand1 == -1)",
                        "        {",
                        "            i = RndObject(0, 3, cur_ruin);",
                        "            //Бросаем \"кости\" до тех пор, пока не выпадет ещё не выдававшийся ММ",
                        "            while(i == BonMMRand1 || i == BonMMRand2 || i == BonMMRand3) i = RndObject(0, 3, cur_ruin);",
                        "            dwd0 = CreateMM(FindBonusByCustomTag('Mod_ExpRC' + i));",
                        "            BonMMRand4 = BonMMRand3;",
                        "            BonMMRand3 = BonMMRand2;",
                        "            BonMMRand2 = BonMMRand1;",
                        "            BonMMRand1 = i;",
                        "            ItemOwner(dwd0, ShipOwner(GetShipRuins(Player())));",
                        "            AddItemToShip(Player(), dwd0);",
                        "            str1 = BonusName(FindBonusByCustomTag('Mod_ExpRC' + i));",
                        "            str2 = BonusText(FindBonusByCustomTag('Mod_ExpRC' + i));",
                        "            str3 = str3 + \"<br>\" + DefSplt + \"<br>Микромодуль <clr>\" + str1 + '<clrEnd>' + \"<br>\" + str2;",
                        "        }",
                        "        else if(mmTake > -1)",
                        "        {",
                        "            dwd0 = CreateMM(FindBonusByCustomTag('Mod_ExpRC4'));",
                        "            ItemOwner(dwd0, ShipOwner(GetShipRuins(Player())));",
                        "            AddItemToShip(Player(), dwd0);",
                        "            str1 = BonusName(FindBonusByCustomTag('Mod_ExpRC4'));",
                        "            str2 = BonusText(FindBonusByCustomTag('Mod_ExpRC4'));",
                        "            str3 = str3 + \"<br>\" + DefSplt + \"<br>Микромодуль <clr>\" + str1 + '<clrEnd>' + \"<br>\" + str2;",
                        "            BonMMRand4 = -1;",
                        "            BonMMRand3 = -1;",
                        "            BonMMRand2 = -1;",
                        "            BonMMRand1 = -1;",
                        "            //Блокируем дальнейшую выдачу уникальных ММ",
                        "            mmTake = -1;",
                        "        }",
                        "    }",
                        "",
                        "    str0 = '</color>' + \"<br>Однако это ещё не всё. Благодаря вашему выдающемуся вкладу в развитие знаний о микромодулях, наш исследовательский отдел смог совершить ряд серьёзных открытий.<br>От лица всех учёных и специалистов позвольте вручить вам экспериментальный микромодуль, созданный при вашей деятельной поддержке:\" + str3;",
                        "    str1 = '';",
                        "    str2 = '';",
                        "    str3 = '';",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 500,
                    "Pos.y": 110,
                    "Parent": -1,
                    "#": 67,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//str0 = \"<br>\" + '</color>' + \"<br>\" + \"Желаете узнать что-нибудь ещё?\";",
                        "str0 = '</color>' + \"Желаете узнать что-нибудь ещё?\";",
                        "",
                        "int0 = 0;",
                        "if(CurrentMods('Tweaks\\BlockPirates')) int0 = 0;",
                        "else if(CurrentMods('Tweaks\\RevolutionDelayed'))",
                        "{",
                        "    if(GetValueFromScript('Mod_RevolutionDelayed', 'pirates_captured_first_star')) int0 = 1;",
                        "}",
                        "else if(PirateWin()) int0 = 1;",
                        "else int0 = 1;",
                        "",
                        "AddDialogInject('Info','',\"Спасибо, я узнал всё, что мне нужно\",-1,'',0,GotoGov(1));",
                        "",
                        "i=0;",
                        "tstr1 = '</color>' + CT('FormRuins.RC.History.PlayerOk');",
                        "",
                        "str1 = '</color>' + CT('FormRuins.RC.Questions.Question1');",
                        "str2 = '</color>' + CT('FormRuins.RC.Questions.Question2');",
                        "str3 = '</color>' + CT('FormRuins.RC.Questions.Question3');",
                        "str4 = '</color>' + CT('FormRuins.RC.Questions.Question4');",
                        "",
                        "if(CurrentMods('ShusRangers\\ShuKlissan')) {",
                        "    if(CurTurn() >= KlissanInvasion['StartDay']) {",
                        "        //Информационный диалог на ЦР в ключе, \"Как я могу помочь Коалиции в борьбе с клиcанами?\"",
                        "        AddDialogInject('Mod_ShuKlissan:KlissanInfoRC', '', CT('Script.Mod_ShuKlissan.KlissanInfoRC.PlayerAsk'), 1);",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 150,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 69,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str0 = '';",
                        "dwd2 = 0;",
                        "for(i = 1; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    dwd0 = ShipItems(Player(), i);",
                        "    if(ItemType(dwd0) != t_MicroModule) continue;",
                        "    dwd2 = dwd2 + 1;",
                        "    if(dwd2 >= 2) break;",
                        "}",
                        "",
                        "tstr1 = '</color>' + CT('FormRuins.RC.MMStorage.PutAll');",
                        "tstr2 = '</color>' + CT('FormRuins.RC.MMStorage.TakeAll');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 91,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(i = 1; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    while(ItemType(ShipItems(Player(), i)) == t_MicroModule)",
                        "    {",
                        "        dwd0 = ShipItems(Player(), i);",
                        "        int3 = EqModule(dwd0);",
                        "        str4 = ItemFullName(dwd0);",
                        "",
                        "        GetItemFromShip(Player(), i);",
                        "        ArrayAdd(mm_storage, 'Exp_RC_' + Id(dwd0));",
                        "        ArrayAdd(mm_storage_name, str4);",
                        "        PutItemInVault('Exp_RC_' + Id(dwd0), dwd0);",
                        "    }",
                        "}",
                        "MMStorageEther();",
                        "Sound('Sound.Drop');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 100,
                    "#": 117,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Записываем на ЦР инфошку с информацией о приобретённых на станции ММ",
                        "if(ShipFindCustomShipInfoByType(cur_ruin, 'RCSoldMMChainInfos') == -1) ShipAddCustomShipInfo(cur_ruin, 'RCSoldMMChainInfos', 'NoShow', 0, 0, 0);",
                        "",
                        "//Делаем перебор цепочки ММ для всех трёх уровней",
                        "//Формируем текст для подстановки в реплику собеседника, а также рассчитываем цены ММ",
                        "//1 - ММ первого уровня",
                        "//2 - ММ второго уровня",
                        "//3 - ММ третьего уровня",
                        "str0 = '';",
                        "ArrayClear(array0);",
                        "for(i = 1; i <= 3; i = i + 1)",
                        "{",
                        "    if(i == 1) int0 = 2;",
                        "    else if(i == 2) int0 = 1;",
                        "    else int0 = 0;",
                        "",
                        "    //Если ещё не наступил день выдачи ММ из альтернативной цепочки",
                        "    if(CurTurn() % 33) int0 = RuinsMicromoduleChain(cur_ruin, int0, ShipCustomShipInfoData(cur_ruin, 'RCSoldMMChainInfos', i));",
                        "    //Если сегодня как раз такой день",
                        "    else int0 = RuinsMicromoduleChain(cur_ruin, int0, ShipCustomShipInfoData(cur_ruin, 'RCSoldMMChainInfos', i), 1);",
                        "",
                        "    ArrayAdd(array0, int0);",
                        "",
                        "    //Рассчитываем стоимость очередного ММ (по умолчанию как для первого уровня) в нодах (использованы оригинальные формулы)",
                        "    k = round(PortionInDiapason(BonusPriority(int0), 100, 0, 100, 2000));",
                        "    k = Rnd(round(0.8 * k), round(1.2 * k), k + Id(cur_ruin));",
                        "",
                        "    //Выполняем необходимые округления",
                        "    if(i < 3) k = RoundTo(1.0 * k / 1.5, 100, -1);",
                        "    else k = RoundTo(1.0 * k / 1.5, 10, -1);",
                        "",
                        "    //Записываем все полученные стоимости в соответствующие переменные и определяем снижение цены для микромодулей предыдущих уровней",
                        "    if(i == 1) int1 = k;",
                        "    //Стоимость ММ второго и третьего уровня не должна превышать половину стоимости ММ предыдущего уровня",
                        "    else if(i == 2)",
                        "    {",
                        "        if(k > int1 / 2) k = int1 / 2;",
                        "        int2 = k;",
                        "    }",
                        "    else",
                        "    {",
                        "        if(k > int2 / 2) k = int2 / 2;",
                        "        int3 = k;",
                        "    }",
                        "",
                        "    //Производим проверку на ММ 2-го уровня, у них используется clr, который становится синим",
                        "    tstr1 = BonusName(int0);",
                        "    if(CT('MicroModuls.'+BonusNumInCfg(int0)+'.Color') == '') {",
                        "        if(BonusPriority(int0) < 70) {",
                        "            if(BonusPriority(int0) > 30) {",
                        "                tstr1 = '<color=255,165,0>'+DeleteTags(tstr1)+'</color>';",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Добавляем в текст название, описанием и стоимость в нодах очередного ММ",
                        "    str0 = str0 + Format('<br>') + DefSplt;",
                        "    str0 = str0 + Format('<br>') + i + Format(CT('FormRuins.RC.TakeNod.RCAnswerMM'), '<Name'+'>', tstr1) + Format('<br>') + BonusText(int0);",
                        "    str0 = str0 + Format('<br>') + Format('<clr><clrEnd><br>') + Format(CT('FormRuins.RC.TakeNod.RCAnswerMMCost'), '<Count'+'>', k);",
                        "",
                        "    //Запоминаем текст ответов игрока для выбора приобретаемого ММ",
                        "    if(i == 1) str1 = '</color>' + Format(CT('FormRuins.RC.TakeNod.PlayerOk'), '<Count'+'>', k, '<Name'+'>', tstr1);",
                        "    else if(i == 2) str2 = '</color>' + Format(CT('FormRuins.RC.TakeNod.PlayerOk'), '<Count'+'>', k, '<Name'+'>', tstr1);",
                        "    else str3 = '</color>' + Format(CT('FormRuins.RC.TakeNod.PlayerOk'), '<Count'+'>', k, '<Name'+'>', tstr1);",
                        "}",
                        "",
                        "//Собираем строчки для подстановки",
                        "str0 = '</color>' + Format(CT('FormRuins.RC.TakeNod.RCAnswerStart'), '<Text'+'>', str0, '') + Format('<br>') + DefSplt + Format('<br>') + Format(CT('FormRuins.RC.TakeNod.RCAnswerEnd'), '<BaseNod'+'>', RangerBaseNodes(Player()));",
                        "str4 = '</color>' + CT('FormRuins.RC.TakeNod.PlayerNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 116,
                    "#": 119,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str0 = '</color>' + CT('FormRuins.RC.TakeNod.RCAfterPlayerNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 102,
                    "#": 122,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Добавляем приобретённый ММ в трюм игрока",
                        "AddItemToShip(Player(), CreateMM(array0[1]));",
                        "//Запоминаем, какой номер ММ из цепочки был продан игроку",
                        "int0 = ShipCustomShipInfoData(cur_ruin, 'RCSoldMMChainInfos', 1) + 1;",
                        "if(int0 > 50) int0 = 0;",
                        "ShipCustomShipInfoData(cur_ruin, 'RCSoldMMChainInfos', 1, int0);",
                        "//Вычитаем ноды со счёта игрока и выводим сообщение об успешной покупке",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) - int1);",
                        "Sound('Sound.Sell');",
                        "FreeNodes = FreeNodes - 150;",
                        "",
                        "str0 = '</color>' + Format(CT('FormRuins.RC.TakeNod.RCAfterPlayerOk'), '<NodCnt' + '>', int1, '<Name' + '>', BonusName(array0[1]));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 103,
                    "#": 123,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Добавляем приобретённый ММ в трюм игрока",
                        "AddItemToShip(Player(), CreateMM(array0[2]));",
                        "//Запоминаем, какой номер ММ из цепочки был продан игроку",
                        "int0 = ShipCustomShipInfoData(cur_ruin, 'RCSoldMMChainInfos', 2) + 1;",
                        "if(int0 > 50) int0 = 0;",
                        "ShipCustomShipInfoData(cur_ruin, 'RCSoldMMChainInfos', 2, int0);",
                        "//Вычитаем ноды со счёта игрока и выводим сообщение об успешной покупке",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) - int2);",
                        "Sound('Sound.Sell');",
                        "FreeNodes = FreeNodes - 70;",
                        "",
                        "str0 = '</color>' + Format(CT('FormRuins.RC.TakeNod.RCAfterPlayerOk'), '<NodCnt' + '>', int2, '<Name' + '>', BonusName(array0[2]));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 104,
                    "#": 124,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Добавляем приобретённый ММ в трюм игрока",
                        "AddItemToShip(Player(), CreateMM(array0[3]));",
                        "//Запоминаем, какой номер ММ из цепочки был продан игроку",
                        "int0 = ShipCustomShipInfoData(cur_ruin, 'RCSoldMMChainInfos', 3) + 1;",
                        "if(int0 > 50) int0 = 0;",
                        "ShipCustomShipInfoData(cur_ruin, 'RCSoldMMChainInfos', 3, int0);",
                        "//Вычитаем ноды со счёта игрока и выводим сообщение об успешной покупке",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) - int3);",
                        "Sound('Sound.Sell');",
                        "FreeNodes = FreeNodes - 30;",
                        "",
                        "str0 = '</color>' + Format(CT('FormRuins.RC.TakeNod.RCAfterPlayerOk'), '<NodCnt' + '>', int3, '<Name' + '>', BonusName(array0[3]));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 88,
                    "#": 128,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Потому что тупой дабокод не позволяет добавлять в диалог два ответа с идентичным текстом, даже если один из них заблокирован и скрыт",
                        "//Меняем русские С на латинские и наоборот",
                        "str0 = '</color>' + Format(CT('Script.Mod_ShuKlissan.KlissanInfoRC.PlayerAsk'), 'с', 'c', 'c', 'с', '');",
                        "str1 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.PlayerNext');",
                        "",
                        "str2 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.KlissanInfo1');",
                        "str3 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.KlissanInfo2');",
                        "str4 = '</color>' + CT('Script.Mod_ShuKlissan.KlissanInfoRC.KlissanInfo3');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 143,
                    "#": 130,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str MMList = '';",
                        "if(ArrayDim(tarr1))",
                        "{",
                        "    ArraySort(tarr1['Cost'], tarr1['Item']);",
                        "    MMList = DefSplt;",
                        "",
                        "    for(i = 0; i < ArrayDim(tarr1['Item']); i = i + 1)",
                        "    {",
                        "        str name = '<' + GetParFromString(ItemFullName(tarr1['Item', i]), '<', 1, 0) + '</color>';",
                        "        MMList = MMList + Format('<br>') + Format(CT('FormRuins.RC.GiveNod.Nod'), '<Name'+'>', name, '<Count'+'>', '<color=0,50,200>' + tarr1['Cost', i] + '</color>', '');",
                        "    }",
                        "",
                        "    MMList = MMList + Format('<br>') + DefSplt + Format('<br>') + Format(CT('FormRuins.RC.GiveNod.Sum'), '<BaseNod'+'>', RangerBaseNodes(Player()));",
                        "}",
                        "else MMList = DefSplt + Format('<br>') + CT('FormRuins.RC.GiveNod.Nothing');",
                        "",
                        "tstr1 = '</color>' + Format(CT('FormRuins.RC.GiveNod.Answer'), '<MMList'+'>', MMList, '');",
                        "tstr2 = '</color>' + CT('FormRuins.RC.GiveNod.PlayerNo');",
                        "tstr3 = '</color>' + CT('FormRuins.RC.GiveNod.AfterNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 131,
                    "#": 135,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//У игрока в трюме нашлись какие-то ММ для сдачи",
                        "if(ArrayDim(tarr1))",
                        "{",
                        "    first = 0;",
                        "    second = 0;",
                        "    third = 0;",
                        "    ArraySort(tarr1['Cost'], tarr1['Item'],tarr1['Unique'],tarr1['Priority']);",
                        "    for(i = 0; i < ArrayDim(tarr1['Item']); i = i + 1)",
                        "    {",
                        "        if(tarr1['Priority', i] > 69 && !tarr1['Unique',i]) third = third + 1;",
                        "        else if(tarr1['Priority', i] > 30 && !tarr1['Unique',i]) second = second + 1;",
                        "        else if(!tarr1['Unique',i]) first = first + 1;",
                        "",
                        "        str name = '<' + GetParFromString(ItemFullName(tarr1['Item', i]), '<', 1, 0) + '</color>';",
                        "        InjectAnswer('SellMMDone', Format(CT('FormRuins.RC.GiveNod.PlayerOk'), '<Name'+'>', name, '<Count'+'>', '<color=0,50,200>' + tarr1['Cost', i] + '</color>', ''), i);",
                        "    }",
                        "",
                        "    if(first > 1) InjectAnswer('SellMMDone', CT('FormRuins.RC.GiveNod.PlayerOkFirst'), 10001);",
                        "    if(second > 1) InjectAnswer('SellMMDone', CT('FormRuins.RC.GiveNod.PlayerOkSecond'), 10002);",
                        "    if(third > 1) InjectAnswer('SellMMDone', CT('FormRuins.RC.GiveNod.PlayerOkThird'), 10003);",
                        "}",
                        "else ArrayAdd(tarr1, 0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": 0,
                    "Parent": 130,
                    "#": 142,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(GAnswerData < 10000) {",
                        "    RangerBaseNodes(Player(), RangerBaseNodes(Player()) + tarr1['Cost', GAnswerData]);",
                        "    FreeItem(GetItemFromShip(Player(), tarr1['Item', GAnswerData]));",
                        "    FreeNodes = FreeNodes + tarr1['Cost', GAnswerData];",
                        "    ArrayDelete(tarr1['Item'], GAnswerData);",
                        "    ArrayDelete(tarr1['Cost'], GAnswerData);",
                        "    ArrayDelete(tarr1['Unique'], GAnswerData);",
                        "    ArrayDelete(tarr1['Priority'], GAnswerData);",
                        "}",
                        "else {",
                        "    int mink = 0;",
                        "    int maxk = 0;",
                        "",
                        "    if(GAnswerData == 10003) {",
                        "        mink = 70;",
                        "        maxk = 100;",
                        "    }",
                        "    else if(GAnswerData == 10002) {",
                        "        mink = 31;",
                        "        maxk = 69;",
                        "    }",
                        "    else {",
                        "        mink = 0;",
                        "        maxk = 30;",
                        "    }",
                        "",
                        "    for(i = (ArrayDim(tarr1['Item'])-1); i >= 0; i = i - 1)",
                        "    {",
                        "        if(tarr1['Unique',i]) continue;",
                        "        if(tarr1['Priority',i] >= mink && tarr1['Priority',i] <= maxk) {",
                        "            FreeNodes = FreeNodes + tarr1['Cost', i];",
                        "            RangerBaseNodes(Player(), RangerBaseNodes(Player()) + tarr1['Cost', i]);",
                        "            FreeItem(GetItemFromShip(Player(), tarr1['Item', i]));",
                        "            ArrayDelete(tarr1['Item'], i);",
                        "            ArrayDelete(tarr1['Cost'], i);",
                        "            ArrayDelete(tarr1['Unique'], i);",
                        "            ArrayDelete(tarr1['Priority'], i);",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "Sound('Sound.Sell');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 129,
                    "#": 143,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayClear(tarr1);",
                        "ArrayDelete(tarr1, 0);",
                        "",
                        "if(GetGameOptions('FontDialog') == '0') DefSplt = '-------------------------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '1') DefSplt = '------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '2') DefSplt = '-----------------------------------------';",
                        "else /*if(GetGameOptions('FontDialog') == '3')*/ DefSplt = '-------------------------------------';",
                        "",
                        "for(int i = 1; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    dword item = ShipItems(Player(), i);",
                        "    if(ItemType(item) != t_MicroModule) continue;",
                        "    int bon_num = EqModule(item);",
                        "    if(CT('MicroModuls.' + BonusNumInCfg(bon_num) + '.NamePrefix') != '') continue; //Пропускаем клисанские споры и прочий \"нестандарт\"",
                        "",
                        "    int cost = round(PortionInDiapason(BonusPriority(bon_num), 100, 0, 100, 2000));",
                        "    cost = Rnd(round(0.8 * cost), round(1.2 * cost), cost + Id(cur_ruin));",
                        "",
                        "    //Модификатор для повышения стоимости сдачи особых ММ",
                        "    int unique = CT('MicroModuls.' + BonusNumInCfg(bon_num) + '.UniqueMM');",
                        "    if(unique == 1) cost = 3.5 * cost; //Цена сдачи уникальных ММ (тех, что могут быть получены лишь раз за игру)",
                        "    else if(unique == 2) cost = 1.5 * cost; //Цена сдачи условно уникальных (редких) ММ",
                        "",
                        "    if(BonusPriority(bon_num) <= 69) cost = RoundTo(1.0 * cost / 1.5, 100, -1);",
                        "    else cost = RoundTo(1.0 * cost / 1.5, 10, -1);",
                        "    cost = max(5, round(0.3 * cost));",
                        "",
                        "    if(!ArrayDim(tarr1))",
                        "    {",
                        "        ArrayAdd(tarr1, newarray(1), 'Item');",
                        "        ArrayAdd(tarr1, newarray(1), 'Cost');",
                        "        ArrayAdd(tarr1, newarray(1), 'Unique');",
                        "        ArrayAdd(tarr1, newarray(1), 'Priority');",
                        "        ArrayDelete(tarr1['Item'], 0);",
                        "        ArrayDelete(tarr1['Cost'], 0);",
                        "        ArrayDelete(tarr1['Unique'], 0);",
                        "        ArrayDelete(tarr1['Priority'], 0);",
                        "    }",
                        "",
                        "    ArrayAdd(tarr1['Item'], item);",
                        "    ArrayAdd(tarr1['Cost'], cost);",
                        "    ArrayAdd(tarr1['Unique'], unique);",
                        "    ArrayAdd(tarr1['Priority'], BonusPriority(bon_num));",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 146,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "dwd0=GetNodesFromShip(Player());",
                        "GetNodesFromShip(Player(),dwd0);",
                        "RangerBaseNodes(Player(),RangerBaseNodes(Player()) + (dwd0*3));",
                        "ShipFreeExp(Player(),ShipFreeExp(Player()) + (dwd0*5));",
                        "Sound('Sound.Buy');",
                        "FreeNodes = FreeNodes + dwd0;",
                        "",
                        "tstr1 = '</color>' +  Format(CT('FormRuins.RC.SaleNod.NodsTaken'),'nodes',FreeNodes,'nods',RangerBaseNodes(Player()));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -60,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 152,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(ShipMoney(Player()) >= GalaxyMoney(2)) {",
                        "    for(i = 1; i < ArrayDim(mm_storage); i = i + 1) InjectAnswer('take_mm2', '</color>' + mm_storage_name[i], i);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -100,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 154,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "dwd0 = GetItemFromVault(mm_storage[GAnswerData]);",
                        "int3 = EqModule(dwd0);",
                        "str4 = ItemFullName(dwd0);",
                        "ShipMoney(Player(),ShipMoney(Player()) - GalaxyMoney(2));",
                        "",
                        "str0 = '</color>' + str4;",
                        "AddItemToShip(Player(), dwd0);",
                        "ArrayDelete(mm_storage, GAnswerData);",
                        "ArrayDelete(mm_storage_name, GAnswerData);",
                        "MMStorageEther();",
                        "if(ArrayDim(mm_storage) < 2)",
                        "{",
                        "    EtherIdDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "    EtherDelete('WJ5TB-BJSZJ-TFB6W-JTJJJ-3Z3CB-0');",
                        "}",
                        "Sound('Sound.DelMsg');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -90,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 156,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Делаем перебор цепочки ММ для всех трёх уровней",
                        "//Формируем текст для подстановки в реплику собеседника, а также рассчитываем цены ММ",
                        "//1 - ММ первого уровня",
                        "//2 - ММ второго уровня",
                        "//3 - ММ третьего уровня",
                        "str0 = '';",
                        "ArrayClear(array0);",
                        "for(i = 1; i <= 9; i = i + 1)",
                        "{",
                        "    if(i < 4) int0 = 2;",
                        "    else if(i < 7) int0 = 1;",
                        "    else int0 = 0;",
                        "",
                        "    //Если ещё не наступил день выдачи ММ из альтернативной цепочки",
                        "    if(CurTurn() % 33) int0 = RuinsMicromoduleChain(cur_ruin, int0, i - int0*3);",
                        "    //Если сегодня как раз такой день",
                        "    else int0 = RuinsMicromoduleChain(cur_ruin, int0, i - int0*3, 1);",
                        "",
                        "    ArrayAdd(array0, int0);",
                        "",
                        "    //Рассчитываем стоимость очередного ММ (по умолчанию как для первого уровня) в нодах (использованы оригинальные формулы)",
                        "    k = round(PortionInDiapason(BonusPriority(int0), 100, 0, 100, 2000));",
                        "    k = Rnd(round(0.8 * k), round(1.2 * k), k + Id(cur_ruin));",
                        "",
                        "    //Выполняем необходимые округления",
                        "    if(i < 3) k = RoundTo(1.0 * k / 1.5, 100, -1);",
                        "    else k = RoundTo(1.0 * k / 1.5, 10, -1);",
                        "",
                        "    //Записываем все полученные стоимости в соответствующие переменные и определяем снижение цены для микромодулей предыдущих уровней",
                        "    if(i == 1) int1 = k;",
                        "    else if(i == 2) int2 = k;",
                        "    else if(i == 3) int3 = k;",
                        "    //Стоимость ММ второго и третьего уровня не должна превышать половину стоимости ММ предыдущего уровня",
                        "    else if(i == 4)",
                        "    {",
                        "        if(k > int1 / 2) k = int1 / 2;",
                        "        int4 = k;",
                        "    }",
                        "    else if(i == 5)",
                        "    {",
                        "        if(k > int1 / 2) k = int1 / 2;",
                        "        int5 = k;",
                        "    }",
                        "    else if(i == 6)",
                        "    {",
                        "        if(k > int1 / 2) k = int1 / 2;",
                        "        int6 = k;",
                        "    }",
                        "    else if(i == 7)",
                        "    {",
                        "        if(k > int2 / 2) k = int2 / 2;",
                        "        int7 = k;",
                        "    }",
                        "    else if(i == 8)",
                        "    {",
                        "        if(k > int2 / 2) k = int2 / 2;",
                        "        int8 = k;",
                        "    }",
                        "    else",
                        "    {",
                        "        if(k > int2 / 2) k = int2 / 2;",
                        "        int9 = k;",
                        "    }",
                        "",
                        "    //Производим проверку на ММ 2-го уровня, у них используется clr, который становится синим. А заодно",
                        "    //и всё сразу покрасим",
                        "    tstr1 = BonusName(int0);",
                        "    if(BonusPriority(int0) < 70) {",
                        "        if(BonusPriority(int0) > 30) {",
                        "            tstr1 = '<color=255,165,0>'+DeleteTags(tstr1)+'</color>';",
                        "        }",
                        "        else tstr1 = '<color=220,20,0>'+DeleteTags(tstr1)+'</color>';",
                        "    }",
                        "    else tstr1 = '<color=0,255,255>'+DeleteTags(tstr1)+'</color>';",
                        "",
                        "    //Добавляем в текст название, описанием и стоимость в нодах очередного ММ",
                        "    str0 = str0 + Format('<br>') + DefSplt;",
                        "    str0 = str0 + Format('<br>') + i + Format(CT('FormRuins.RC.TakeNod.RCAnswerMM'), '<Name'+'>', tstr1) + Format('<br>') + BonusText(int0);",
                        "    str0 = str0 + Format('<br>') + Format('<clr><clrEnd><br>') + Format(CT('FormRuins.RC.TakeNod.RCAnswerMMCost'), '<Count'+'>', k);",
                        "",
                        "",
                        "    //Собираем текст ответа игрока для выбора приобретаемого ММ",
                        "    str1 = '</color>' + Format(CT('FormRuins.RC.TakeNod.PlayerOk'), '<Count'+'>', k, '<Name'+'>', tstr1);",
                        "",
                        "    //InjectAnswer('RecieveMM',str1,i);",
                        "",
                        "    if(RangerBaseNodes(Player()) >= k && RangerBaseNodes(Player()) > 1 && FreeNodes >= (k/10)) InjectAnswer('RecieveMM',str1,i);",
                        "}",
                        "",
                        "//Собираем строчки для подстановки",
                        "str0 = '</color>' + Format(CT('FormRuins.RC.TakeNod.RCAnswerStart'), '<Text'+'>', str0, '') + Format('<br>') + DefSplt + Format('<br>') + Format(CT('FormRuins.RC.TakeNod.RCAnswerEnd'),'nodes',FreeNodes, '<BaseNod'+'>', RangerBaseNodes(Player()));",
                        "str4 = '</color>' + CT('FormRuins.RC.TakeNod.PlayerNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -60,
                    "Pos.y": 390,
                    "Parent": -1,
                    "#": 159,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str0 = '</color>' + CT('FormRuins.RC.TakeNod.RCAfterPlayerNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 168,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "i = GAnswerData;",
                        "//Добавляем приобретённый ММ в трюм игрока",
                        "AddItemToShip(Player(), CreateMM(array0[i]));",
                        "//Вычитаем ноды со счёта игрока и выводим сообщение об успешной покупке",
                        "if(i == 1) j = int1;",
                        "if(i == 2) j = int2;",
                        "if(i == 3) j = int3;",
                        "if(i == 4) j = int4;",
                        "if(i == 5) j = int5;",
                        "if(i == 6) j = int6;",
                        "if(i == 7) j = int7;",
                        "if(i == 8) j = int8;",
                        "if(i == 9) j = int9;",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) - j);",
                        "Sound('Sound.Sell');",
                        "FreeNodes = FreeNodes - (j/10);",
                        "",
                        "str0 = '</color>' + Format(CT('FormRuins.RC.TakeNod.RCAfterPlayerOk'), '<NodCnt' + '>', j, '<Name' + '>', BonusName(array0[i]));",
                        "tstr1 = '</color>' + CT('FormRuins.RC.TakeNod.PlayerEnd');",
                        "tstr2 = '</color>' + CT('FormRuins.RC.TakeNod.PlayerYetAnother');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 173,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "i = i + 1;",
                        "tstr1 = '</color>' + CT('FormRuins.RC.History.SBOk'+i);",
                        "tstr2 = '</color>' + CT('FormRuins.RC.History.Continue');",
                        "tstr3 = '</color>' + CT('FormRuins.RC.History.End');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 460,
                    "Pos.y": 200,
                    "Parent": -1,
                    "#": 180,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str1 = '</color>' +  CT('FormRuins.RC.Questions.Answer1');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 480,
                    "Pos.y": 200,
                    "Parent": -1,
                    "#": 181,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str1 = '</color>' +  CT('FormRuins.RC.Questions.Answer2');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 520,
                    "Pos.y": 200,
                    "Parent": -1,
                    "#": 183,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str1 = '</color>' +  CT('FormRuins.RC.Questions.Answer3');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 540,
                    "Pos.y": 200,
                    "Parent": -1,
                    "#": 185,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str1 = '</color>' +  CT('FormRuins.RC.Questions.Answer4');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 80,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 190,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(GetGameOptions('FontDialog') == '0') DefSplt = '</color>-------------------------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '1') DefSplt = '</color>------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '2') DefSplt = '</color>-----------------------------------------';",
                        "else /*if(GetGameOptions('FontDialog') == '3')*/ DefSplt = '</color>-------------------------------------';",
                        "",
                        "if(IsScriptActive('ShuKlissan')) AddDialogBlock(CT('Script.Mod_ShuKlissan.KlissanInfoRC.PlayerAsk'), 2);",
                        "InjectAnswer('MM_storage', CT('FormRuins.RC.MMStorage.PlayerSend'), 1);",
                        "",
                        "int0 = 0;",
                        "for(i = 1; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    dwd0 = ShipItems(Player(), i);",
                        "    if(ItemType(dwd0) != t_UselessCountableItem) continue;",
                        "    if(EquipmentImageName(dwd0) != 'Mod_ExpRC_UnknownMM') continue;",
                        "    int0 = 1;",
                        "    break;",
                        "}",
                        "",
                        "if(int0 == 1) InjectAnswer('UniMM', CT('FormRuins.RC.UnknownMM.PlayerSend'), 0);",
                        "//InjectAnswer('X', Format(CT('FormRuins.RC.GreetingAddMod'), '#BaseNod#', RangerBaseNodes(Player())), 'NodeStateInfoPosCorrection', 0);",
                        "",
                        "//Добавляем подмену оригинальных диалогов для приобретения и сдачи ММ",
                        "if(ExpRCRebootMMChainInit) {",
                        "    //Так сказал Маршалтустра",
                        "    InjectAnswer('BuyNewMM', CT('FormRuins.RC.TakeNod.PlayerSendMod'), 0);",
                        "}",
                        "if(ExpRCAltMMShopInit) {",
                        "    //Так сказал Маршалтустра",
                        "    InjectAnswer('BuyNewMMAlt', CT('FormRuins.RC.TakeNod.PlayerSendMod'), 0);",
                        "}",
                        "",
                        "InjectAnswer('SellMM', CT('FormRuins.RC.GiveNod.PlayerSendMod'), 0);",
                        "",
                        "if(GetNodesFromShip(Player())) {",
                        "    InjectAnswer('SellNodes', Format(CT('FormRuins.RC.SaleNod.PlayerSendMod'),'Count',GetNodesFromShip(Player())), 0);",
                        "}"
                    ]
                }
            ],
            "Planets": 
            [
                {
                    "Type": "TPlanet",
                    "Name": "PlanetNew",
                    "Pos.x": 50,
                    "Pos.y": 20,
                    "Parent": -1,
                    "#": 2,
                    "Race": 62,
                    "Owner": 62,
                    "Economy": 14,
                    "Goverment": 62,
                    "RangeMin": 0,
                    "RangeMax": 100,
                    "Dialog": -1
                }
            ],
            "Ships": 
            [
                {
                    "Type": "TStarShip",
                    "Name": "",
                    "Pos.x": 50,
                    "Pos.y": -20,
                    "Parent": -1,
                    "#": 0,
                    "Count": 1,
                    "Owner": 62,
                    "Ship.Type": 126,
                    "Player": true,
                    "SpeedMin": 0,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                }
            ],
            "Stars": 
            [
                {
                    "Type": "TStar",
                    "Name": "StarNew",
                    "Pos.x": 50,
                    "Pos.y": 0,
                    "Parent": -1,
                    "#": 1,
                    "Constellation": 0,
                    "Priority": 0,
                    "NoKling": false,
                    "NoComeKling": false
                }
            ],
            "Statements": 
            [
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 200,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 16,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayDim(array0) > 1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 200,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 20,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayDim(mm_storage) > 1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 200,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 23,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayDim(mm_storage) > 2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": -20,
                    "Parent": 28,
                    "#": 27,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!ShipIsTakeoff(Player())"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 570,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 81,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "IsScriptActive('ShuKlissan')"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 460,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 84,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 480,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 85,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 520,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 86,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 540,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 87,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "int0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 81,
                    "#": 88,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "KlissanInvasion['DaysPassedAfterStart'] > 4 && !KlissanInvasion['PlotDone']"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 200,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 89,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "dwd2 >= 2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 500,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 99,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -200,
                    "Pos.y": 0,
                    "Parent": 101,
                    "#": 106,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) >= int1 && FreeNodes >= (int1/10)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -150,
                    "Pos.y": 0,
                    "Parent": 101,
                    "#": 107,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) >= int2 && FreeNodes >= (int2/10)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -100,
                    "Pos.y": 0,
                    "Parent": 101,
                    "#": 108,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) >= int3 && FreeNodes >= (int3/10)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -180,
                    "Pos.y": 0,
                    "Parent": 101,
                    "#": 109,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) < int1 || FreeNodes < (int1/10)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -130,
                    "Pos.y": 0,
                    "Parent": 101,
                    "#": 110,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) < int2 || FreeNodes < (int2/10)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -80,
                    "Pos.y": 0,
                    "Parent": 101,
                    "#": 111,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) < int3 || FreeNodes < (int3/10)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -30,
                    "Pos.y": 0,
                    "Parent": 101,
                    "#": 112,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": -20,
                    "Pos.y": 0,
                    "Parent": 131,
                    "#": 136,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 177,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "i >= int(CT('FormRuins.RC.History.Count'))"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 630,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 178,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "i < int(CT('FormRuins.RC.History.Count'))"
                    ]
                }
            ],
            "States": 
            [
                {
                    "Type": "TState",
                    "Name": "PlayerState",
                    "Pos.x": 50,
                    "Pos.y": 60,
                    "Parent": -1,
                    "#": 4,
                    "Move": 0,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                }
            ],
            "Variables": 
            [
                {
                    "Type": "TVar",
                    "Name": "i",
                    "Pos.x": 750,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 29,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "dwd0",
                    "Pos.x": 670,
                    "Pos.y": 290,
                    "Parent": -1,
                    "#": 30,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "mm_storage",
                    "Pos.x": 790,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 31,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "array0",
                    "Pos.x": 890,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 32,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int0",
                    "Pos.x": 750,
                    "Pos.y": 310,
                    "Parent": -1,
                    "#": 33,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "str0",
                    "Pos.x": 820,
                    "Pos.y": 290,
                    "Parent": -1,
                    "#": 34,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "dwd1",
                    "Pos.x": 670,
                    "Pos.y": 310,
                    "Parent": -1,
                    "#": 45,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "dwd2",
                    "Pos.x": 670,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 46,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "j",
                    "Pos.x": 780,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 47,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "mm_storage_name",
                    "Pos.x": 670,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 48,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "lastShipId",
                    "Pos.x": 670,
                    "Pos.y": 130,
                    "Parent": -1,
                    "#": 49,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "mmTake",
                    "Pos.x": 670,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 58,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BonMMRand1",
                    "Pos.x": 670,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 59,
                    "Var.Type": "Int",
                    "Init": "-1",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "UnknownMMReward",
                    "Pos.x": 670,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 60,
                    "Var.Type": "Int",
                    "Init": "150",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "k",
                    "Pos.x": 750,
                    "Pos.y": 290,
                    "Parent": -1,
                    "#": 61,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "str1",
                    "Pos.x": 820,
                    "Pos.y": 310,
                    "Parent": -1,
                    "#": 62,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "str2",
                    "Pos.x": 820,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 63,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BonMMRand2",
                    "Pos.x": 770,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 64,
                    "Var.Type": "Int",
                    "Init": "-1",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "str3",
                    "Pos.x": 820,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 65,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "array1",
                    "Pos.x": 890,
                    "Pos.y": 290,
                    "Parent": -1,
                    "#": 68,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "LStorageMsg",
                    "Pos.x": 780,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 70,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int1",
                    "Pos.x": 750,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 71,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "CountMMStor",
                    "Pos.x": 880,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 72,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int2",
                    "Pos.x": 750,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 73,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int3",
                    "Pos.x": 750,
                    "Pos.y": 370,
                    "Parent": -1,
                    "#": 74,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "CountMMStorBac",
                    "Pos.x": 670,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 76,
                    "Var.Type": "Int",
                    "Init": "-1",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "DefSplt",
                    "Pos.x": 820,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 95,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BonMMRand3",
                    "Pos.x": 670,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 96,
                    "Var.Type": "Int",
                    "Init": "-1",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BonMMRand4",
                    "Pos.x": 770,
                    "Pos.y": 230,
                    "Parent": -1,
                    "#": 97,
                    "Var.Type": "Int",
                    "Init": "-1",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "lastRun",
                    "Pos.x": 880,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 98,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_ruin",
                    "Pos.x": 670,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 105,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "str4",
                    "Pos.x": 820,
                    "Pos.y": 370,
                    "Parent": -1,
                    "#": 120,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tflt1",
                    "Pos.x": 750,
                    "Pos.y": 390,
                    "Parent": -1,
                    "#": 125,
                    "Var.Type": "Float",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr1",
                    "Pos.x": 820,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 132,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr2",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 132,
                    "#": 133,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tarr1",
                    "Pos.x": 890,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 134,
                    "Var.Type": "Array",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr3",
                    "Pos.x": 820,
                    "Pos.y": 450,
                    "Parent": -1,
                    "#": 138,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ExpRCRebootMMChainInit",
                    "Pos.x": 670,
                    "Pos.y": 60,
                    "Parent": -1,
                    "#": 144,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int4",
                    "Pos.x": 670,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 162,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int5",
                    "Pos.x": 670,
                    "Pos.y": 420,
                    "Parent": -1,
                    "#": 163,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int6",
                    "Pos.x": 670,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 164,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int7",
                    "Pos.x": 670,
                    "Pos.y": 460,
                    "Parent": -1,
                    "#": 165,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int8",
                    "Pos.x": 670,
                    "Pos.y": 480,
                    "Parent": -1,
                    "#": 166,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "int9",
                    "Pos.x": 670,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 167,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ExpRCAltMMShopInit",
                    "Pos.x": 670,
                    "Pos.y": 40,
                    "Parent": -1,
                    "#": 172,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "FreeNodes",
                    "Pos.x": 880,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 182,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "DaysAfterVictory",
                    "Pos.x": 880,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 184,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "first",
                    "Pos.x": 460,
                    "Pos.y": 520,
                    "Parent": -1,
                    "#": 191,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "second",
                    "Pos.x": 460,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 192,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "third",
                    "Pos.x": 460,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 193,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                }
            ]
        }
    ],
    "Visual.Links": 
    [
        {
            "Type": "TGraphLink",
            "Begin": 3,
            "End": 4,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 3,
            "End": 2,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 2,
            "End": 1,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 0,
            "End": 1,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 7,
            "End": 10,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 10,
            "End": 11,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 8,
            "End": 12,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 12,
            "End": 13,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 9,
            "End": 14,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 15,
            "End": 16,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 16,
            "End": 17,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 17,
            "End": 18,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 18,
            "End": 19,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 20,
            "End": 21,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 21,
            "End": 22,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 23,
            "End": 24,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 24,
            "End": 25,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 22,
            "End": 26,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 27,
            "End": 28,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 36,
            "End": 37,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 50,
            "End": 51,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 51,
            "End": 52,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 52,
            "End": 54,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 55,
            "End": 56,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 52,
            "End": 53,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 53,
            "End": 57,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 57,
            "End": 55,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 37,
            "End": 67,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 69,
            "End": 23,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 69,
            "End": 20,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 69,
            "End": 15,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 14,
            "End": 69,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 11,
            "End": 69,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 13,
            "End": 69,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 19,
            "End": 75,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 26,
            "End": 75,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 75,
            "End": 14,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 67,
            "End": 81,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 77,
            "End": 78,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 78,
            "End": 82,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 82,
            "End": 79,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 79,
            "End": 83,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 83,
            "End": 80,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 67,
            "End": 84,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 84,
            "End": 43,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 67,
            "End": 85,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 67,
            "End": 86,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 67,
            "End": 87,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 85,
            "End": 41,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 86,
            "End": 38,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 87,
            "End": 66,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 81,
            "End": 88,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 69,
            "End": 89,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 89,
            "End": 90,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 90,
            "End": 91,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 69,
            "End": 92,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 91,
            "End": 94,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 94,
            "End": 69,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 25,
            "End": 93,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 93,
            "End": 69,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 80,
            "End": 99,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 99,
            "End": 67,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 42,
            "End": 99,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 39,
            "End": 99,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 40,
            "End": 99,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 44,
            "End": 99,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 106,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 107,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 108,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 109,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 110,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 111,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 112,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 109,
            "End": 113,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 110,
            "End": 114,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 111,
            "End": 115,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 112,
            "End": 116,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 106,
            "End": 102,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 107,
            "End": 103,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 108,
            "End": 104,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 100,
            "End": 117,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 117,
            "End": 101,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 116,
            "End": 119,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 119,
            "End": 118,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 102,
            "End": 122,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 103,
            "End": 123,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 104,
            "End": 124,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 122,
            "End": 121,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 123,
            "End": 121,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 124,
            "End": 121,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 118,
            "End": 127,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 121,
            "End": 126,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 88,
            "End": 128,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 128,
            "End": 77,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 130,
            "End": 131,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 131,
            "End": 135,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 131,
            "End": 136,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 136,
            "End": 137,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 137,
            "End": 139,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 139,
            "End": 140,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 141,
            "End": 142,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 142,
            "End": 130,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 129,
            "End": 143,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 143,
            "End": 130,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 145,
            "End": 146,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 146,
            "End": 147,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 147,
            "End": 148,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 149,
            "End": 150,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 150,
            "End": 151,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 150,
            "End": 152,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 153,
            "End": 154,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 154,
            "End": 150,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 155,
            "End": 156,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 156,
            "End": 157,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 157,
            "End": 158,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 158,
            "End": 159,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 159,
            "End": 160,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 169,
            "End": 170,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 171,
            "End": 156,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 161,
            "End": 168,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 168,
            "End": 169,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 67,
            "End": 176,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 176,
            "End": 173,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 173,
            "End": 174,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 174,
            "End": 178,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 174,
            "End": 177,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 177,
            "End": 179,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 178,
            "End": 175,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 179,
            "End": 37,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 175,
            "End": 173,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 41,
            "End": 181,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 181,
            "End": 42,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 43,
            "End": 180,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 180,
            "End": 44,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 169,
            "End": 171,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 38,
            "End": 183,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 183,
            "End": 39,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 66,
            "End": 185,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 185,
            "End": 40,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 160,
            "End": 186,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 187,
            "End": 188,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 188,
            "End": 189,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 188,
            "End": 190,
            "Nom": 0,
            "Arrow": true
        }
    ],
    "Rect.Text": 
    [
        {
            "Type": "TGraphRectText",
            "Rect.Left": 134,
            "Rect.Top": 74,
            "Rect.Right": 449,
            "Rect.Bottom": 254,
            "FStyle": 1,
            "FColor": 10710818,
            "BStyle": 0,
            "BColor": 0,
            "BSize": 1,
            "BCoef": "0.300000011920929",
            "AlignX": 0,
            "AlignY": 1,
            "AlignRect": false,
            "Text": "Хранилище ММ",
            "Color": 0,
            "Font": "Arial",
            "FontSize": 10,
            "fsBold": false,
            "fsItalic": false,
            "fsUnderline": false
        },
        {
            "Type": "TGraphRectText",
            "Rect.Left": 447,
            "Rect.Top": 74,
            "Rect.Right": 653,
            "Rect.Bottom": 298,
            "FStyle": 1,
            "FColor": 10710818,
            "BStyle": 0,
            "BColor": 0,
            "BSize": 1,
            "BCoef": "0.300000011920929",
            "AlignX": -1,
            "AlignY": 1,
            "AlignRect": false,
            "Text": " Блок вопросов",
            "Color": 0,
            "Font": "Arial",
            "FontSize": 10,
            "fsBold": false,
            "fsItalic": false,
            "fsUnderline": false
        },
        {
            "Type": "TGraphRectText",
            "Rect.Left": 268,
            "Rect.Top": -25,
            "Rect.Right": 492,
            "Rect.Bottom": 76,
            "FStyle": 1,
            "FColor": 0,
            "BStyle": 0,
            "BColor": 0,
            "BSize": 1,
            "BCoef": "0.300000011920929",
            "AlignX": 0,
            "AlignY": 1,
            "AlignRect": false,
            "Text": "Сдача неизвестных микромодулей",
            "Color": 0,
            "Font": "Arial",
            "FontSize": 10,
            "fsBold": false,
            "fsItalic": false,
            "fsUnderline": false
        }
    ],
    "BlockPar.EC.Total.Strings": 33,
    "BlockPar.EC": 
    [
        {
            "#": "1",
            "String": "<0> перемещён с вашего корабля в хранилище. Забрать его вы сможете в любое удобное для вас время на любом Центре Рейнджеров."
        },
        {
            "#": "12",
            "String": "Чтобы вы хотели узнать?"
        },
        {
            "#": "2",
            "String": "<0> уже доставлен на ваш корабль."
        },
        {
            "#": "21",
            "String": "<0>"
        },
        {
            "#": "25",
            "String": "За каждым рейнджером закреплено отдельное хранилище микромодулей. Это позволяет получить необходимый модуль в любом из наших центров, а ненужные вам модули мы распределяем по своему усмотрению, но лишь до того момента, когда они вам понадобятся.<br>Желаете получить или положить микромодули в хранилище?"
        },
        {
            "#": "26",
            "String": "Спасибо, в другой раз"
        },
        {
            "#": "4",
            "String": "Выберите микромодуль, имеющийся на вашем корабле."
        },
        {
            "#": "44",
            "String": "Большое спасибо"
        },
        {
            "#": "5",
            "String": "Выберите микромодуль, имеющийся в хранилище."
        },
        {
            "#": "54",
            "String": "Уважаемый <Player>! Все центры рейнджеров уничтожены.<br>Ваше личное хранилище микромодулей потеряно."
        },
        {
            "#": "55",
            "String": "Назад"
        },
        {
            "#": "56",
            "String": "<color=255,240,100>Персональное хранилище микромодулей</color>"
        },
        {
            "#": "57",
            "String": "<color=255,240,100>Стоимость</color>"
        },
        {
            "#": "58",
            "String": "<color=0,255,0>Собственность вне корабля (Страница </color><color=255,0,255>"
        },
        {
            "#": "59",
            "String": "<color=0,255,0>Собственность вне корабля</color>"
        },
        {
            "#": "6",
            "String": "Положить микромодуль в хранилище"
        },
        {
            "#": "7",
            "String": "Забрать микромодуль из хранилища"
        },
        {
            "#": "75",
            "String": "Все микромодули из вашего трюма были успешно перемещены в хранилище.<br>Желаете сделать что-то ещё?"
        },
        {
            "#": "77",
            "String": "Все микромодули из хранилища были успешно перемещены на ваш корабль.<br>Желаете сделать что-то ещё?"
        },
        {
            "#": "79",
            "String": "<br>"
        },
        {
            "#": "80",
            "String": "<br>Микромодуль <clr>"
        },
        {
            "#": "86",
            "String": "<br>Однако это ещё не всё. Благодаря вашему выдающемуся вкладу в развитие знаний о микромодулях, наш исследовательский отдел смог совершить ряд серьёзных открытий.<br>От лица всех учёных и специалистов позвольте вручить вам экспериментальный микромодуль, созданный при вашей деятельной поддержке:"
        },
        {
            "#": "87",
            "String": "Сдать <0> неизвестных микромодулей за <1> нд."
        },
        {
            "#": "88",
            "String": "Сдать <0> неизвестных микромодуля за <1> нд."
        },
        {
            "#": "89",
            "String": "Сдать <0> неизвестный микромодуль за <1> нд."
        },
        {
            "#": "90",
            "String": "Замечательно, <Player>! Мы начислили на ваш счёт <0> нод.<1>"
        },
        {
            "#": "92",
            "String": "Желаете узнать что-нибудь ещё?"
        },
        {
            "#": "94",
            "String": "Я хотел бы забрать модули из своего хранилища на Центре Рейнджеров"
        },
        {
            "#": "95",
            "String": "Что, хочешь забрать свои кровные модули из лап фараонов?<br><br>Похвальное желание. Но, уж извини, дружок, за это надо платить.<br><br>За один модуль мы спишем с твоего счёта <0> cr. За эти деньги будут оснащены новые рейды на Центры Рейнджеров - а ты думал, откуда мы берём столько микромодулей?"
        },
        {
            "#": "96",
            "String": "В другой раз"
        },
        {
            "#": "97",
            "String": "Итак, что именно вам нужно?"
        },
        {
            "#": "98",
            "String": "Пожалуй, мне нужно кое-что другое"
        },
        {
            "#": "99",
            "String": "Спасибо, я узнал всё, что мне нужно"
        }
    ]
}