{
    "FileID": 573785173,
    "FileVersion": 8,
    "ViewPos.x": -51,
    "ViewPos.y": 146,
    "ScriptName": "Mod_ExpCB",
    "ScriptFileOut": "C:\\Users\\DmitB\\Documents\\Фиксы\\Universe Redux Fixes\\Mods\\Expansion\\ExpCB\\DATA\\Script\\Mod_ExpCB.scr",
    "ScriptTextOut": "C:\\Users\\DmitB\\Documents\\Фиксы\\Universe Redux Fixes\\Mods\\Expansion\\ExpCB\\DATA\\Script\\Mod_ExpCB.txt",
    "LangDatIn": "",
    "LangDatOut": "",
    "MainDatIn": "",
    "MainDatOut": "",
    "CacheDatIn": "",
    "CacheDatOut": "",
    "ExportLangTxt": false,
    "ExportLangDat": false,
    "Visual.Objects": 
    [
        {
            "DialogAnswers": 
            [
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 8,
                    "Msg": "Я передумал",
                    "AMsg.Num": "0"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 530,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 10,
                    "Msg": "Снять ноды с нод счёта",
                    "AMsg.Num": "1"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 700,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 33,
                    "Msg": "",
                    "AMsg.Num": "2"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 600,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 39,
                    "Msg": "",
                    "AMsg.Num": "3"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 730,
                    "Pos.y": 600,
                    "Parent": -1,
                    "#": 41,
                    "Msg": "<temp_str2>",
                    "AMsg.Num": "4"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 600,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 49,
                    "Msg": "Снять ноды с нод счёта",
                    "AMsg.Num": "5"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 760,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 51,
                    "Msg": "",
                    "AMsg.Num": "6"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 600,
                    "Pos.y": 570,
                    "Parent": -1,
                    "#": 53,
                    "Msg": "",
                    "AMsg.Num": "7"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 0,
                    "Pos.y": 60,
                    "Parent": 81,
                    "#": 57,
                    "Msg": "Назад",
                    "AMsg.Num": "8"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 50,
                    "Pos.y": 0,
                    "Parent": 62,
                    "#": 59,
                    "Msg": "<AnswerRec>",
                    "AMsg.Num": "9"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 30,
                    "Pos.y": 40,
                    "Parent": 44,
                    "#": 77,
                    "Msg": "Назад",
                    "AMsg.Num": "10"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 20,
                    "Pos.y": 20,
                    "Parent": 74,
                    "#": 80,
                    "Msg": "<AnswerRec>",
                    "AMsg.Num": "11"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 70,
                    "Parent": 44,
                    "#": 84,
                    "Msg": "Нет, как-то дороговато",
                    "AMsg.Num": "12"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 30,
                    "Pos.y": 0,
                    "Parent": 83,
                    "#": 85,
                    "Msg": "",
                    "AMsg.Num": "13"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1160,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 112,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "14"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 1220,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 115,
                    "Msg": "",
                    "AMsg.Num": "15"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 600,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 118,
                    "Msg": "Не, не сегодня, отбой",
                    "AMsg.Num": "16"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 480,
                    "Parent": -1,
                    "#": 119,
                    "Msg": "Ну, давай-ка поищем среди рейнджеров кого-нибудь...",
                    "AMsg.Num": "17"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 740,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 125,
                    "Msg": "",
                    "AMsg.Num": "18"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 520,
                    "Pos.y": 480,
                    "Parent": -1,
                    "#": 128,
                    "Msg": "Ну, давай-ка поищем среди рейнджеров кого-нибудь...",
                    "AMsg.Num": "19"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 1400,
                    "Pos.y": 570,
                    "Parent": -1,
                    "#": 132,
                    "Msg": "Нет, пожалуй, в другой раз",
                    "AMsg.Num": "20"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 1160,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 144,
                    "Msg": "Ясно...",
                    "AMsg.Num": "21"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1390,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 148,
                    "Msg": "<tstr2>",
                    "AMsg.Num": "22"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 1390,
                    "Pos.y": 460,
                    "Parent": -1,
                    "#": 152,
                    "Msg": "",
                    "AMsg.Num": "23"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1270,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 156,
                    "Msg": "<tstr3>",
                    "AMsg.Num": "24"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 1210,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 158,
                    "Msg": "",
                    "AMsg.Num": "25"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 1300,
                    "Pos.y": 460,
                    "Parent": -1,
                    "#": 165,
                    "Msg": "",
                    "AMsg.Num": "26"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1410,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 178,
                    "Msg": "Пожалуй, я выберу что-нибудь ещё",
                    "AMsg.Num": "27"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1420,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 179,
                    "Msg": "Отказываюсь платить по таким грабительским расценкам!",
                    "AMsg.Num": "28"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 1450,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 182,
                    "Msg": "Я согласен, валяйте",
                    "AMsg.Num": "29"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "block",
                    "Pos.x": 1480,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 183,
                    "Msg": "Я согласен, валяйте",
                    "AMsg.Num": "30"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1550,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 184,
                    "Msg": "Я согласен, валяйте",
                    "AMsg.Num": "31"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1550,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 185,
                    "Msg": "Я согласен, валяйте",
                    "AMsg.Num": "32"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 1670,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 195,
                    "Msg": "",
                    "AMsg.Num": "33"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1640,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 196,
                    "Msg": "Да, конечно",
                    "AMsg.Num": "34"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1640,
                    "Pos.y": 460,
                    "Parent": -1,
                    "#": 197,
                    "Msg": "Нет уж, хватит с меня",
                    "AMsg.Num": "35"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1320,
                    "Pos.y": 790,
                    "Parent": -1,
                    "#": 200,
                    "Msg": "Дело-то хорошее, чего бы и не помочь?",
                    "AMsg.Num": "36"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 1350,
                    "Pos.y": 760,
                    "Parent": -1,
                    "#": 201,
                    "Msg": "В другой раз",
                    "AMsg.Num": "37"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 1350,
                    "Pos.y": 820,
                    "Parent": -1,
                    "#": 204,
                    "Msg": "Давай в другой раз, ладно?",
                    "AMsg.Num": "38"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1430,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 209,
                    "Msg": "Прекращайте сборку!",
                    "AMsg.Num": "39"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "exit",
                    "Pos.x": 1430,
                    "Pos.y": 940,
                    "Parent": -1,
                    "#": 217,
                    "Msg": "",
                    "AMsg.Num": "40"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1490,
                    "Pos.y": 880,
                    "Parent": -1,
                    "#": 219,
                    "Msg": "",
                    "AMsg.Num": "41"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "restart",
                    "Pos.x": 1490,
                    "Pos.y": 970,
                    "Parent": -1,
                    "#": 222,
                    "Msg": "Отлично",
                    "AMsg.Num": "42"
                },
                {
                    "Type": "TDialogAnswer",
                    "Name": "",
                    "Pos.x": 1430,
                    "Pos.y": 970,
                    "Parent": -1,
                    "#": 223,
                    "Msg": "Я хотел бы подготовить ещё одного пилота",
                    "AMsg.Num": "43"
                }
            ],
            "DialogMessages": 
            [
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 6,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "0"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 16,
                    "Msg": "Операция прошла успешно. Ноды уже погружены в твой трюм.",
                    "DMsg.Num": "1"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 580,
                    "Parent": -1,
                    "#": 24,
                    "Msg": "<temp_str>",
                    "DMsg.Num": "2"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 690,
                    "Parent": -1,
                    "#": 34,
                    "Msg": "<temp_str>",
                    "DMsg.Num": "3"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 40,
                    "Pos.y": 0,
                    "Parent": 43,
                    "#": 44,
                    "Msg": "<ThanksForMoney><SpeechRec>",
                    "DMsg.Num": "4"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 760,
                    "Pos.y": 580,
                    "Parent": -1,
                    "#": 50,
                    "Msg": "<temp_str>",
                    "DMsg.Num": "5"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 52,
                    "Msg": "Ну, не хочешь как хочешь. Желаю удачи в \"обналичивании\" нодов у доминаторов.",
                    "DMsg.Num": "6"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 30,
                    "Pos.y": 0,
                    "Parent": 77,
                    "#": 76,
                    "Msg": "<temp_array[GAnswerData]>",
                    "DMsg.Num": "7"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 30,
                    "Pos.y": 0,
                    "Parent": 84,
                    "#": 83,
                    "Msg": "Не, ну ты уж совсем не борзей, да?! За эти данные многие наши разведчики отдали свои жизни, между прочим! Наверное...",
                    "DMsg.Num": "8"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1160,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 110,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "9"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1190,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 114,
                    "Msg": "<tstr3>",
                    "DMsg.Num": "10"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 117,
                    "Msg": "О, что, кто-то насыпал тебе перцу? Ну, ничего, мы тут можем подсобить.\r\n\r\nИтак, наши ребята могут прорваться в базы Коалиции и \"подправить\" информацию касательно некоторых персон в <clr>Рейнджерском Корпусе<clrEnd>.\r\n\r\nНо, конечно, не забывай, что тебе придётся расщедриться на рюмочку втыкиллы парням - примерно так <GalaxyMoney(3)> cr.",
                    "DMsg.Num": "11"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 480,
                    "Parent": -1,
                    "#": 120,
                    "Msg": "Итак, перед тобой - весь список участников Корпуса рейнджеров.\r\nВыбирай!",
                    "DMsg.Num": "12"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 124,
                    "Msg": "Отлично! Наши молодчики в кратчайшие сроки подредактируют информацию об этом индивидууме.\r\n\r\nНу а пока можешь выпить немного янвелба в нашем баре.",
                    "DMsg.Num": "13"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1370,
                    "Pos.y": 570,
                    "Parent": -1,
                    "#": 131,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "14"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1510,
                    "Pos.y": 570,
                    "Parent": -1,
                    "#": 137,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "15"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1160,
                    "Pos.y": 410,
                    "Parent": -1,
                    "#": 142,
                    "Msg": "Помиловали?\r\n\r\nНе сказать, чтобы за ними кто-то гонялся. Умники, они ведь такие: им неважно, кто над душой стоит, лишь бы возиться со своими штуками можно было. А борьбу с доминаторами, да и прочие разные изыскания бывают очень интересны и полезны. Вот и пригрелись у нас.\r\n\r\nТак что, если тебе оно надо, то можешь залетать к нам: эти ребята тебе окажут полное содействие.",
                    "DMsg.Num": "16"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1300,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 147,
                    "Msg": "<tstr1>",
                    "DMsg.Num": "17"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1390,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 151,
                    "Msg": "<tstr3>",
                    "DMsg.Num": "18"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1240,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 157,
                    "Msg": "<tstr4>",
                    "DMsg.Num": "19"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1300,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 164,
                    "Msg": "Сейчас составим списочек оборудования...\r\n...\r\nВыходит, запросик был, но <tstr1> вещей, подходящих для улучшения. Извиняй.",
                    "DMsg.Num": "20"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1330,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 166,
                    "Msg": "Сейчас составим списочек оборудования, подходящего для улучшения:\r\n<DefSplt>\r\n<input><DefSplt>\r\nНу и что из этого списка будем улучшать?",
                    "DMsg.Num": "21"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1450,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 175,
                    "Msg": "Мы можем задействовать в эксперименте над вашим оборудованием наших лучших специалистов, но их услуги обойдутся недёшево. Если ваши финансы их не потянут, то работать будут обычные специалисты. Ну а за малую сумму возьмутся улучшать только зелёные стажёры.\r\nИсходя из стоимости такой вещи как <DeleteTags(Name(cur_item))> и процентных ставок наших специалистов, получается следующее:\r\n<DefSplt>\r\nЛучшие специалисты - <(cost*12)/10> cr.\r\nОбычные специалисты - <(cost*6)/10> cr.\r\nСтажёры - <(cost*3)/10> cr.\r\n<DefSplt>\r\nКому доверите работу, <Player>?",
                    "DMsg.Num": "22"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1480,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 176,
                    "Msg": "Мы можем задействовать в эксперименте над вашим оборудованием наших лучших специалистов, но их услуги обойдутся недёшево. <TextCorr2> Если ваши финансы их не потянут, то работать будут обычные специалисты. Ну а за малую сумму возьмутся улучшать только зелёные стажёры.\r\nИсходя из стоимости такой вещи как <DeleteTags(Name(cur_item))> и процентных ставок наших специалистов, получается следующее:\r\n<DefSplt>\r\nЛучшие специалисты - <(cost*12)/10> cr. и <round((cost*12)/1000)> <TextCorr3>\r\nОбычные специалисты - <(cost*6)/10> cr. и <round((cost*6)/1000)> <TextCorr3>\r\nСтажёры - <(cost*3)/10> cr. и <round((cost*3)/1000)> <TextCorr3>\r\n<DefSplt>\r\n<TextCorr4>Кому доверите работу, <Player>?",
                    "DMsg.Num": "23"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1610,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 192,
                    "Msg": "<input>",
                    "DMsg.Num": "24"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1550,
                    "Pos.y": 460,
                    "Parent": -1,
                    "#": 198,
                    "Msg": "<tstr2>",
                    "DMsg.Num": "25"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1320,
                    "Pos.y": 760,
                    "Parent": -1,
                    "#": 199,
                    "Msg": "Ого, похвально! Знаешь, сколько моих корешей слоняется по нашей станции без дела? Дать бы им плазмошашку, да корабль, да на линию огня... Ух! В два счёта бы всех победили.\r\n\r\nНо вот со всем, кроме линии огня, у нас туго. Так что если ты возьмёшь на себя материальную часть, всё остальное мы сами предоставим.",
                    "DMsg.Num": "26"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1320,
                    "Pos.y": 820,
                    "Parent": -1,
                    "#": 203,
                    "Msg": "Итак, первым делом выбери <clr>корпус<clrEnd>, на котором будет летать будущий сокол. Учти - кандидатов у нас масса, и чтобы не создавать неразбериху, мы просто подберём пилота под <clr>производителя<clrEnd> выбранного тобой корпуса, лады?",
                    "DMsg.Num": "27"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1430,
                    "Pos.y": 820,
                    "Parent": -1,
                    "#": 208,
                    "Msg": "Хорошо! Теперь осталось совсем немного - оснастить корабль оборудованием.\r\nЧтобы у тебя было понимание порядка цифр, выведем тебе сейчас текущую информацию по оснащаемому кораблю:\r\n==================\r\nКорабль: <tstr2> (<j> ед. структуры)\r\n-------Оборудование-------\r\n<tstr4>\r\n==================\r\nЧто будем делать?",
                    "DMsg.Num": "28"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1430,
                    "Pos.y": 910,
                    "Parent": -1,
                    "#": 216,
                    "Msg": "Ну, как знаешь, дружок. Но если надумаешь - заглядывай, наши ребята куда решительнее тебя.",
                    "DMsg.Num": "29"
                },
                {
                    "Type": "TDialogMsg",
                    "Name": "",
                    "Pos.x": 1490,
                    "Pos.y": 940,
                    "Parent": -1,
                    "#": 221,
                    "Msg": "",
                    "DMsg.Num": "30"
                }
            ],
            "Dialogs": 
            [
                {
                    "Type": "TDialog",
                    "Name": "DDoS",
                    "Pos.x": 560,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 21
                },
                {
                    "Type": "TDialog",
                    "Name": "BuyNewMM",
                    "Pos.x": 700,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 23
                },
                {
                    "Type": "TDialog",
                    "Name": "BuyMMNoCount",
                    "Pos.x": 700,
                    "Pos.y": 630,
                    "Parent": -1,
                    "#": 36
                },
                {
                    "Type": "TDialog",
                    "Name": "coalship_count",
                    "Pos.x": 910,
                    "Pos.y": 530,
                    "Parent": -1,
                    "#": 42
                },
                {
                    "Type": "TDialog",
                    "Name": "AddSysInfo",
                    "Pos.x": 30,
                    "Pos.y": 0,
                    "Parent": 76,
                    "#": 75
                },
                {
                    "Type": "TDialog",
                    "Name": "BuyMMPartCount",
                    "Pos.x": 730,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 87
                },
                {
                    "Type": "TDialog",
                    "Name": "BuyMMFullCount",
                    "Pos.x": 760,
                    "Pos.y": 670,
                    "Parent": -1,
                    "#": 88
                },
                {
                    "Type": "TDialog",
                    "Name": "SellMM",
                    "Pos.x": 1160,
                    "Pos.y": 530,
                    "Parent": -1,
                    "#": 101
                },
                {
                    "Type": "TDialog",
                    "Name": "SellMMDone",
                    "Pos.x": 1190,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 107
                },
                {
                    "Type": "TDialog",
                    "Name": "Betrayal",
                    "Pos.x": 560,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 116
                },
                {
                    "Type": "TDialog",
                    "Name": "Quarrel",
                    "Pos.x": 700,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 122
                },
                {
                    "Type": "TDialog",
                    "Name": "DialogRC",
                    "Pos.x": 1370,
                    "Pos.y": 510,
                    "Parent": -1,
                    "#": 130
                },
                {
                    "Type": "TDialog",
                    "Name": "DialogSB",
                    "Pos.x": 1510,
                    "Pos.y": 510,
                    "Parent": -1,
                    "#": 135
                },
                {
                    "Type": "TDialog",
                    "Name": "DialogBuild",
                    "Pos.x": 1320,
                    "Pos.y": 730,
                    "Parent": -1,
                    "#": 139
                },
                {
                    "Type": "TDialog",
                    "Name": "FirstSB",
                    "Pos.x": 1160,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 141
                },
                {
                    "Type": "TDialog",
                    "Name": "Upgrade",
                    "Pos.x": 1300,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 145
                },
                {
                    "Type": "TDialog",
                    "Name": "Upgrade2",
                    "Pos.x": 1330,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 153
                },
                {
                    "Type": "TDialog",
                    "Name": "Upgrade3",
                    "Pos.x": 1450,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 154
                },
                {
                    "Type": "TDialog",
                    "Name": "DialogBuild2",
                    "Pos.x": 1430,
                    "Pos.y": 730,
                    "Parent": -1,
                    "#": 205
                },
                {
                    "Type": "TDialog",
                    "Name": "All",
                    "Pos.x": 1540,
                    "Pos.y": 730,
                    "Parent": -1,
                    "#": 212
                }
            ],
            "Groups": 
            [
                {
                    "Type": "TGroup",
                    "Name": "PlayerGroup",
                    "Pos.x": 390,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 2,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 1,
                    "CntShipMax": 1,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": true,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "GroupNew",
                    "Pos.x": 280,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 227,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                },
                {
                    "Type": "TGroup",
                    "Name": "GroupForCB",
                    "Pos.x": 130,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 230,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 0,
                    "CntShipMax": 0,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": false,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                }
            ],
            "Operations": 
            [
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 390,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 5,
                    "Code.Type": "Global",
                    "Code": 
                    [
                        "GRun();"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 500,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 7,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(RangerBaseNodes(Player()) > ShipMoney(Player()) / cost) end = ShipMoney(Player()) / cost;",
                        "else end = RangerBaseNodes(Player());",
                        "",
                        "if(end < 1000) temp_str = 'Bm.Items.2Nod0_s';",
                        "else if(end < 2000) temp_str = 'Bm.Items.2Nod1_s';",
                        "else if(end < 4000) temp_str = 'Bm.Items.2Nod2_s';",
                        "else if(end < 8000) temp_str = 'Bm.Items.2Nod3_s';",
                        "else temp_str = 'Bm.Items.2Nod4_s';",
                        "",
                        "get_nods = CountBox(temp_str, \"Сколько нодов снять?\", 1, RangerBaseNodes(Player()), cost, 1, end, RangerBaseNodes(Player()), ShipMoney(Player()));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 15,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "AddItemToShip(Player(), CreateNodes(get_nods, RndObject(0, 2, GetShipRuins(Player()))));",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) - get_nods);",
                        "ShipMoney(Player(), ShipMoney(Player()) - get_nods * cost);",
                        "Sound('Sound.Sell');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 410,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 19,
                    "Code.Type": "Init",
                    "Code": 
                    [
                        "modules = newarray(1);",
                        "NShipInSys = newarray(1);",
                        "temp_array = newarray(1);",
                        "temp_array_2 = newarray(1);",
                        "temp_array_3 = newarray(1);",
                        "temp_array_4 = newarray(1);",
                        "",
                        "//Стартовый перебор с запоминанием числа ВБ и доминионов в Галактике",
                        "for(i = 0; i < GalaxyStars(); i = i + 1)",
                        "{",
                        "    cur_star = GalaxyStar(i);",
                        "",
                        "    if(StarRuins(cur_star, 'SB')) TotalSBCount = TotalSBCount + 1;",
                        "    else if(StarRuins(cur_star, 'WB')) TotalWBCount = TotalWBCount + 1;",
                        "    else if(StarRuins(cur_star, 'CB')) TotalCBCount = TotalCBCount + 1;",
                        "    else if(StarRuins(cur_star, 'PB')) ShipAddCustomShipInfo(StarRuins(cur_star, 'PB'),'PBRaiseRank','NoShow');",
                        "",
                        "    /*for(j=0;StarShips(cur_star)>j;j=j+1) {",
                        "        if(ShipType(StarShips(cur_star,j)) == 'CB') ShipType(StarShips(cur_star,j),'CB_licensed');",
                        "    }*/",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 430,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 22,
                    "Code.Type": "DialogBegin",
                    "Code": 
                    [
                        "if(!CoalitionDefeated())",
                        "{",
                        "    cur_ruin = GetShipRuins(Player());",
                        "    if(cur_ruin)",
                        "    {",
                        "        if(ShipType(cur_ruin) == 'CB')",
                        "        {",
                        "            AddDialogInject('coalship_count', '', \"Предоставьте мне полную информацию о численности коалиционного флота\", 1);",
                        "            AddDialogInject('Betrayal',\"И если кто-то тебе изрядно насолил, то мы можем помочь насолить ему.\",\"Я бы хотел подпортить кому-нибудь жизнь...\",1);",
                        "",
                        "            AddDialogInject('DialogRC', '', CT('FormRuins.CB.DialogRCAsk'), 1);",
                        "            AddDialogInject('DialogSB', '', CT('FormRuins.CB.DialogSBAsk'), 1);",
                        "",
                        "            AddDialogBlock(CT('FormRuins.CB.Improvement.PlayerSend'),2);",
                        "            AddDialogBlock(CT('FormRuins.CB.ConstructPirate.PlayerSend'),2);",
                        "            AddDialogBlock(\"Хочу получить улучшенные артефакты\",2);",
                        "",
                        "            if(ShipInCurScript(cur_ruin)) {",
                        "                AddDialogBlock(CT('FormRuins.CB.WarPlans.PlayerAsk'),2);",
                        "            }",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 25,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(GetGameOptions('FontDialog') == 0) DefSplt = '</color>-------------------------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == 1) DefSplt = '</color>------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == 2) DefSplt = '</color>-----------------------------------------';",
                        "else DefSplt = '</color>-------------------------------------';",
                        "",
                        "//Записываем на ЦР инфошку с информацией о приобретённых на станции ММ",
                        "if(ShipFindCustomShipInfoByType(cur_ruin, 'CBSoldMMChainInfos') == -1) ShipAddCustomShipInfo(cur_ruin, 'CBSoldMMChainInfos', 'NoShow', 0, 0, 0);",
                        "",
                        "//Считаем общее количество \"наличных\" нодов у игрока",
                        "temp_int_1 = GetNodesFromShip(Player()) + GetNodesFromStorage(GetShipRuins(Player()));",
                        "//Ноды игрока, доступные с нод-счёта",
                        "temp_int_2 = RangerBaseNodes(Player());",
                        "",
                        "//Расчёт скидки, как в оригинальной игре, только с делителем 180, вместо 130, что ограничивает максимальную скидку до 55%",
                        "discount_float = round(100.0 * ShipStatus(Player(), 1) / 180) + 1;",
                        "//Ограничиваем верхний предел скидки до 75%",
                        "//if(discount_float > 75) discount_float = 75;",
                        "discount_float = discount_float * 0.01;",
                        "",
                        "//Делаем перебор цепочки ММ для всех трёх уровней",
                        "//Формируем текст для подстановки в реплику собеседника, а также рассчитываем цены ММ",
                        "//1 - ММ первого уровня",
                        "//2 - ММ второго уровня",
                        "//3 - ММ третьего уровня",
                        "temp_str = '';",
                        "free(modules);",
                        "modules = newarray(4, 5);",
                        "//modules[0, 1] - остаток цены в нодах, которые будут сняты со счёта игрока при покупке за \"наличность\" + ноды со счёта для ММ первого уровня",
                        "//modules[0, 2] - остаток цены в нодах, которые будут сняты со счёта игрока при покупке за \"наличность\" + ноды со счёта для ММ второго уровня",
                        "//modules[0, 3] - остаток цены в нодах, которые будут сняты со счёта игрока при покупке за \"наличность\" + ноды со счёта для ММ третьего уровня",
                        "//Вышеописанные ячейки заполняются на этапе формирования ответов игрока ^",
                        "//modules[N, 0] - номер бонуса ММ соответствующего N уровня",
                        "//modules[N, 1] - пиратская стоимость текущего ММ при оплате \"наличкой\" с учётом скидки",
                        "//modules[N, 2] - пиратская стоимость текущего ММ при оплате с нод-счёта с учётом скидки",
                        "//modules[N, 3] - пиратская стоимость текущего ММ при оплате \"наличкой\" без учёта скидки (нужна для расчётов)",
                        "//modules[N, 4] - пиратская стоимость текущего ММ при оплате с нод-счёта без учёта скидки (нужна для расчётов)",
                        "for(i = 1; i <= 3; i = i + 1)",
                        "{",
                        "    if(i == 1) temp_int = 2;",
                        "    else if(i == 2) temp_int = 1;",
                        "    else temp_int = 0;",
                        "",
                        "    //Если ещё не наступил день выдачи ММ из альтернативной цепочки",
                        "    if(CurTurn() % 33) temp_int = RuinsMicromoduleChain(cur_ruin, temp_int, ShipCustomShipInfoData(cur_ruin, 'CBSoldMMChainInfos', i));",
                        "    //Если сегодня как раз такой день",
                        "    else temp_int = RuinsMicromoduleChain(cur_ruin, temp_int, ShipCustomShipInfoData(cur_ruin, 'CBSoldMMChainInfos', i), 1);",
                        "",
                        "    modules[i, 0] = temp_int;",
                        "",
                        "    //Рассчитываем стоимость очередного ММ (по умолчанию как для первого уровня) в нодах (использованы оригинальные формулы)",
                        "    k = round(PortionInDiapason(BonusPriority(temp_int), 100, 0, 100, 2000));",
                        "",
                        "    k = Rnd(round(0.8 * k), round(1.2 * k), k + Id(cur_ruin));",
                        "",
                        "    //Выполняем необходимые округления",
                        "    if(i < 3) k = RoundTo(1.0 * k / 1.5, 100, -1);",
                        "    else k = RoundTo(1.0 * k / 1.5, 10, -1);",
                        "",
                        "    //Записываем все полученные стоимости в соответствующие переменные и определяем снижение цены для микромодулей предыдущих уровней",
                        "    if(i == 1)",
                        "    {",
                        "        //Добавляем общую пиратскую наценку",
                        "        k = round(1.5 * k);",
                        "        //Отдельно запоминаем стоимость ММ до применения скидки",
                        "        modules[i, 3] = k;",
                        "        //Применяем скидку и записываем значение в массив",
                        "        modules[i, 1] = round((1.0 - discount_float) * k);",
                        "        //modules[i, 1] = k;",
                        "",
                        "        //Добавляем пиратскую наценку за покупку модуля с нод-счёта",
                        "        k = round(1.5 * k);",
                        "        //Отдельно запоминаем стоимость ММ при оплате с нод-счёта до применения скидки",
                        "        modules[i, 4] = k;",
                        "        //Применяем скидку и записываем значение в массив",
                        "        modules[i, 2] = round((1.0 - discount_float) * k);",
                        "        //modules[i, 2] = k;",
                        "    }",
                        "    //Стоимость ММ второго и третьего уровня не должна превышать половину стоимости ММ предыдущего уровня",
                        "    else",
                        "    {",
                        "        //Добавляем общую пиратскую наценку",
                        "        k = round(1.5 * k);",
                        "        if(k > modules[i - 1, 3] / 2) k = modules[i - 1, 3] / 2;",
                        "        //Отдельно запоминаем стоимость ММ до применения скидки",
                        "        modules[i, 3] = k;",
                        "        //Применяем скидку и записываем значение в массив",
                        "        modules[i, 1] = round((1.0 - discount_float) * k);",
                        "        //modules[i, 1] = k;",
                        "",
                        "        //Добавляем пиратскую наценку за покупку модуля с нод-счёта",
                        "        k = round(1.5 * k);",
                        "        if(k > modules[i - 1, 4] / 2) k = modules[i - 1, 4] / 2;",
                        "        //Отдельно запоминаем стоимость ММ при оплате с нод-счёта до применения скидки",
                        "        modules[i, 4] = k;",
                        "        //Применяем скидку и записываем значение в массив",
                        "        modules[i, 2] = round((1.0 - discount_float) * k);",
                        "        //modules[i, 2] = k;",
                        "    }",
                        "",
                        "    //Добавляем в текст название, описанием и стоимость в нодах очередного ММ",
                        "    temp_str = temp_str + \"<br>\" + DefSplt;",
                        "    temp_str = temp_str + \"<br>\" + i + Format(CT('FormRuins.CB.TakeNod.CBAnswerMM'), '<Name' + '>', BonusName(temp_int)) + \"<br>\" + BonusText(temp_int);",
                        "    temp_str = temp_str + \"<br>\" + '<clr><clrEnd>' + \"<br>\" + Format(CT('FormRuins.CB.TakeNod.CBAnswerMMCost1'), '<Cost' + '>', modules[i, 1]);",
                        "    temp_str = temp_str + \"<br>\" + Format(CT('FormRuins.CB.TakeNod.CBAnswerMMCost2'), '<Cost' + '>', modules[i, 2]);",
                        "}",
                        "",
                        "//Собираем строчки для подстановки",
                        "temp_str = '</color>' + Format(CT('FormRuins.CB.TakeNod.CBAnswerStart'), '<Text' + '>', temp_str, '') + \"<br>\" + DefSplt + \"<br>\" + Format(CT('FormRuins.CB.TakeNod.CBAnswerEnd'), '<CurNod' + '>', temp_int_1, '<BaseNod' + '>', temp_int_2, '<Discount' + '>', int(discount_float * 100));",
                        "temp_str2 = '</color>' + CT('FormRuins.CB.TakeNod.PlayerNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 35,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Игрок приобрёл ММ только за \"наличные\" ноды (трюм + склад)",
                        "i = GAnswerData;",
                        "if(GetNodesFromShip(Player()) >= modules[i, 1]) GetNodesFromShip(Player(), modules[i, 1]);",
                        "else",
                        "{",
                        "    temp_int = modules[i, 1] - GetNodesFromShip(Player());",
                        "    GetNodesFromShip(Player(), GetNodesFromShip(Player()));",
                        "    GetNodesFromStorage(GetShipRuins(Player()), temp_int);",
                        "}",
                        "//Запоминаем, какой номер ММ из цепочки был продан игроку",
                        "temp_int = ShipCustomShipInfoData(cur_ruin, 'CBSoldMMChainInfos', i) + 1;",
                        "if(temp_int > 50) temp_int = 0;",
                        "ShipCustomShipInfoData(cur_ruin, 'CBSoldMMChainInfos', i, temp_int);",
                        "",
                        "AddItemToShip(Player(), CreateMM(modules[i, 0]));",
                        "Sound('Sound.Sell');",
                        "",
                        "temp_str = '</color>' + Format(CT('FormRuins.CB.TakeNod.CBAfterBuy'), '<Name' + '>', BonusName(modules[i, 0]));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 600,
                    "Parent": -1,
                    "#": 37,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Добавляем ответы игрока для приобретения микромодулей:",
                        "//1 - ММ первого уровня",
                        "//2 - ММ второго уровня",
                        "//3 - ММ третьего уровня",
                        "//temp_int_1 - общее число нодов игрока в \"наличке\" (трюм + склад)",
                        "//temp_int_2 - число нодов игрока на его счету",
                        "//modules[i, 0] - номер бонуса ММ соответствующего N уровня",
                        "//modules[i, 1] - пиратская стоимость текущего ММ при оплате \"наличкой\" с учётом скидки",
                        "//modules[i, 2] - пиратская стоимость текущего ММ при оплате с нод-счёта с учётом скидки",
                        "j = 0;",
                        "for(i = 1; i <= 3; i = i + 1)",
                        "{",
                        "    //Если игрок может купить ММ чисто за \"наличку\", добавляем соответствующий вариант",
                        "    if(temp_int_1 >= modules[i, 1])",
                        "    {",
                        "        temp_str = Format(CT('FormRuins.CB.TakeNod.BuyCashIn'), '<Cost' + '>', modules[i, 1], '<Name' + '>', BonusName(modules[i, 0]));",
                        "        InjectAnswer('BuyMMNoCount', temp_str, i);",
                        "        j = 1;",
                        "    }",
                        "    else",
                        "    {",
                        "        //Если в \"наличке\" у игрока не пусто",
                        "        if(temp_int_1)",
                        "        {",
                        "            //Если нод-счёт игрока не пуст",
                        "            if(temp_int_2)",
                        "            {",
                        "                //Пересчитываем возможность приобретения ММ за \"наличку\" + за ноды со счёта",
                        "                temp_int = modules[i, 1] - temp_int_1;",
                        "                temp_int = round(1.5 * temp_int);",
                        "                //Если игрок может купить ММ за \"наличку\" + за ноды со счёта, добавляем соответствующий вариант",
                        "                if(temp_int_2 >= temp_int)",
                        "                {",
                        "                    modules[0, i] = temp_int;",
                        "                    temp_str = Format(CT('FormRuins.CB.TakeNod.BuyCashInPlusCount'), '<Cost1' + '>', temp_int_1, '<Cost2' + '>', temp_int, '<Name' + '>', BonusName(modules[i, 0]));",
                        "                    InjectAnswer('BuyMMPartCount', temp_str, i);",
                        "",
                        "                    j = 1;",
                        "                }",
                        "            }",
                        "        }",
                        "        //Если \"наличка\" игрока пуста",
                        "        else",
                        "        {",
                        "            //Если игрок может купить ММ чисто за ноды со счёта, добавляем соответствующий вариант",
                        "            if(temp_int_2 >= modules[i, 2])",
                        "            {",
                        "                temp_str = Format(CT('FormRuins.CB.TakeNod.BuyCount'), '<Cost' + '>', modules[i, 2], '<Name' + '>', BonusName(modules[i, 0]));",
                        "                InjectAnswer('BuyMMFullCount', temp_str, i);",
                        "",
                        "                j = 1;",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Если покупка ММ для игрока в принципе невозможна, добавляем заблокированный вариант",
                        "    if(!j)",
                        "    {",
                        "        temp_str = Format(CT('FormRuins.CB.TakeNod.BuyCashIn'), '<Cost' + '>', modules[i, 1], '<Name' + '>', BonusName(modules[i, 0]), '');",
                        "        AddDialogBlock(temp_str, 1);",
                        "        InjectAnswer('Blocked', temp_str, i);",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 70,
                    "Parent": 42,
                    "#": 43,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ThanksForMoney = '';",
                        "",
                        "ArrayClear(temp_array);",
                        "ArrayClear(temp_array_2);",
                        "ArrayClear(temp_array_3);",
                        "ArrayClear(temp_array_4);",
                        "temp_str = '';",
                        "//Задаём длину разделительной \"дефисной линии\" в зависимости от установленного в игре шрифта",
                        "if(GetGameOptions('FontDialog') == '0') DefSplt = '-------------------------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '1') DefSplt =  '------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '2') DefSplt = '-----------------------------------------';",
                        "else DefSplt = '-------------------------------------';",
                        "",
                        "//Высчитываем цену запроса разведсводки (250 и 150 здесь эмулируют 2.5% и 1.5%)",
                        "temp_int_2 = ((ShipMoney(Player()) * (250 - ((ShipStatus(Player(), 1) * 150) / 100))) / 100) / 100;",
                        "",
                        "//Разброс минимальной цены в зависимости от пиратского рейтинга",
                        "if(temp_int_2 < 500 && ShipStatus(Player(), 1) >= 66) temp_int_2 = 500;",
                        "if(temp_int_2 < 750 && (ShipStatus(Player(), 1) < 66 && ShipStatus(Player(), 1) >= 33)) temp_int_2 = 750;",
                        "if(temp_int_2 < 1000 && ShipStatus(Player(), 1) < 33) temp_int_2 = 1000;",
                        "//Проверяем, не барон ли в данный момент игрок",
                        "if(GetShipPirateRank(Player()) >= 7) temp_int_2 = 0;",
                        "",
                        "//Циклы поиска информации о числе и типах военных кораблей",
                        "for(i = 0; i < GalaxyStars(); i = i + 1)",
                        "{",
                        "    temp_dword = GalaxyStar(i);",
                        "    if(StarOwner(temp_dword) != 0) continue;",
                        "    ArrayClear(NShipInSys);",
                        "",
                        "    for(j = 1; j <= 18; j = j + 1) ArrayAdd(NShipInSys, 0);",
                        "    temp_int_1 = 0;",
                        "    WarsOnWing = 0;",
                        "    ShipsInSys = 0;",
                        "    temp_str = \"</color>Система: <StarName(temp_dword)><br>Сектор: <ConName(StarToCon(temp_dword))><br><br><br>\";",
                        "    //Вычисляем номер последней обитаемой планеты системы",
                        "    for(j = 0; j < StarPlanets(temp_dword); j = j + 1)",
                        "    {",
                        "        if(PlanetOwner(StarPlanets(temp_dword, j)) == 6) continue;",
                        "        LastPlanet = j;",
                        "    }",
                        "    //Перебираем все планеты в системе, составляем список",
                        "    for(j = 0; j < StarPlanets(temp_dword); j = j + 1)",
                        "    {",
                        "        temp_dword_2 = StarPlanets(temp_dword, j);",
                        "        if(PlanetOwner(temp_dword_2) == 6) continue;",
                        "        temp_str = temp_str + DefSplt + \"<br>\" + \"Планета: <PlanetName(temp_dword_2)>\" + \"<br>\" + DefSplt;",
                        "        //Проверяем наличие на планете военных кораблей",
                        "        if(PlanetWarriors(temp_dword_2) >= 1)",
                        "        {",
                        "            temp_int_1 = temp_int_1 + PlanetWarriors(temp_dword_2);",
                        "            //Формируем строчку подробной информации о кораблях на планете",
                        "            for(k = 0; k <= (PlanetWarriors(temp_dword_2) - 1); k = k + 1)",
                        "            {",
                        "                temp_dword_3=PlanetWarriors(temp_dword_2,k);",
                        "                temp_str2=ShipType(temp_dword_3);",
                        "                //Считаем \"истребители\"",
                        "                //Я пытался подставить функцию проверки статуса в иниткод, но в ней не сработала подстановка аргументов",
                        "                //В итоге забил и просто продублировал её шесть раз",
                        "                if(temp_str2 == 'Warrior')",
                        "                {",
                        "                    if(!ShipSubType(temp_dword_3))",
                        "                    {",
                        "                        TypeName = \"Военный\";",
                        "                        //Здесь начинается та самая функция",
                        "                        if(ShipInPlanet(temp_dword_3, temp_dword_2))",
                        "                        {",
                        "                            EndLine=\"В ангаре\"+'</color>';",
                        "                            NShipInSys[1]=NShipInSys[1]+1;",
                        "                            //Заполняем строку с Id всех кораблей на планетах",
                        "                            //Позже она понадобиться для перепроверки работы кривой функции StarShips",
                        "                            if(CheckById=='') CheckById=CheckById+'$'+Id(temp_dword_3)+'$';",
                        "                            else CheckById=CheckById+',$'+Id(temp_dword_3)+'$';",
                        "                        }",
                        "                        else",
                        "                        {",
                        "                            //Если корабль не на планете, то проверяем в какой он системе",
                        "                            if(ShipInStar(temp_dword_3, temp_dword))",
                        "                            {",
                        "                                EndLine=\"На вылете\"+'</color>';",
                        "                                NShipInSys[1]=NShipInSys[1]+1;",
                        "                                NShipInSys[2]=NShipInSys[2]+1;",
                        "                                WarsOnWing=WarsOnWing+1;",
                        "                            }",
                        "                            else",
                        "                            {",
                        "                                EndLine = \"В системе\" + ' ' + StarName(ShipStar(temp_dword_3)) + '</color>';",
                        "                                temp_int_1 = temp_int_1 - 1;",
                        "                            }",
                        "                        }",
                        "                        //А это её конец",
                        "                    }",
                        "                    if(ShipSubType(temp_dword_3) == 1)",
                        "                    {",
                        "                        TypeName = \"Линкор\";",
                        "                        if(ShipInPlanet(temp_dword_3,temp_dword_2))",
                        "                        {",
                        "                            EndLine=\"В ангаре\"+'</color>';",
                        "                            NShipInSys[4]=NShipInSys[4]+1;",
                        "                            if(CheckById=='') CheckById=CheckById+'$'+Id(temp_dword_3)+'$';",
                        "                            else CheckById=CheckById+',$'+Id(temp_dword_3)+'$';",
                        "                        }",
                        "                        else",
                        "                        {",
                        "                            //Если корабль не на планете, то проверяем в какой он системе",
                        "                            if(ShipInStar(temp_dword_3, temp_dword))",
                        "                            {",
                        "                                EndLine=\"На вылете\"+'</color>';",
                        "                                NShipInSys[4]=NShipInSys[4]+1;",
                        "                                NShipInSys[5]=NShipInSys[5]+1;",
                        "                                WarsOnWing=WarsOnWing+1;",
                        "                            }",
                        "                            else",
                        "                            {",
                        "                                EndLine=\"В системе\"+' '+StarName(ShipStar(temp_dword_3))+'</color>';",
                        "                                temp_int_1=temp_int_1-1;",
                        "                            }",
                        "                        }",
                        "                    }",
                        "                }",
                        "                else if(temp_str2 == 'Militiaman1' || temp_str2 == 'Militiaman2' || temp_str2 == 'Militiaman3')",
                        "                {",
                        "                    TypeName = \"Ополченец\";",
                        "                    if(ShipInPlanet(temp_dword_3,temp_dword_2))",
                        "                    {",
                        "                        EndLine=\"В ангаре\"+'</color>';",
                        "                        NShipInSys[7]=NShipInSys[7]+1;",
                        "                        if(CheckById=='') CheckById=CheckById+'$'+Id(temp_dword_3)+'$';",
                        "                        else CheckById=CheckById+',$'+Id(temp_dword_3)+'$';",
                        "                    }",
                        "                    else",
                        "                    {",
                        "                        //Если корабль не на планете, то проверяем в какой он системе",
                        "                        if(ShipInStar(temp_dword_3,temp_dword)==1)",
                        "                        {",
                        "                            EndLine=\"На вылете\"+'</color>';",
                        "                            NShipInSys[7]=NShipInSys[7]+1;",
                        "                            NShipInSys[8]=NShipInSys[8]+1;",
                        "                            WarsOnWing=WarsOnWing+1;",
                        "                        }",
                        "                        else",
                        "                        {",
                        "                            EndLine=\"В системе\"+' '+StarName(ShipStar(temp_dword_3))+'</color>';",
                        "                            temp_int_1=temp_int_1-1;",
                        "                        }",
                        "                    }",
                        "                }",
                        "                else if(temp_str2 == 'EliteWarrior')",
                        "                {",
                        "                    TypeName=\"Элитный военный\";",
                        "                    if(ShipInPlanet(temp_dword_3,temp_dword_2))",
                        "                    {",
                        "                        EndLine=\"В ангаре\"+'</color>';",
                        "                        NShipInSys[10]=NShipInSys[10]+1;",
                        "                        if(CheckById=='') CheckById=CheckById+'$'+Id(temp_dword_3)+'$';",
                        "                        else CheckById=CheckById+',$'+Id(temp_dword_3)+'$';",
                        "                    }",
                        "                    else",
                        "                    {",
                        "                        //Если корабль не на планете, то проверяем в какой он системе",
                        "                        if(ShipInStar(temp_dword_3,temp_dword))",
                        "                        {",
                        "                            EndLine=\"На вылете\"+'</color>';",
                        "                            NShipInSys[10]=NShipInSys[10]+1;",
                        "                            NShipInSys[11]=NShipInSys[11]+1;",
                        "                            WarsOnWing=WarsOnWing+1;",
                        "                        }",
                        "                        else",
                        "                        {",
                        "                            EndLine=\"В системе\"+' '+StarName(ShipStar(temp_dword_3))+'</color>';",
                        "                            temp_int_1=temp_int_1-1;",
                        "                        }",
                        "                    }",
                        "                }",
                        "                else if(temp_str2 == 'Dreadnought')",
                        "                {",
                        "                    TypeName=\"Дредноут\";",
                        "                    if(ShipInPlanet(temp_dword_3,temp_dword_2))",
                        "                    {",
                        "                        EndLine=\"В ангаре\"+'</color>';",
                        "                        NShipInSys[16]=NShipInSys[16]+1;",
                        "                        if(CheckById=='') CheckById=CheckById+'$'+Id(temp_dword_3)+'$';",
                        "                        else CheckById=CheckById+',$'+Id(temp_dword_3)+'$';",
                        "                    }",
                        "                    else",
                        "                    {",
                        "                        //Если корабль не на планете, то проверяем в какой он системе",
                        "                        if(ShipInStar(temp_dword_3,temp_dword))",
                        "                        {",
                        "                            EndLine=\"На вылете\"+'</color>';",
                        "                            NShipInSys[16]=NShipInSys[16]+1;",
                        "                            NShipInSys[17]=NShipInSys[17]+1;",
                        "                            WarsOnWing=WarsOnWing+1;",
                        "                        }",
                        "                        else",
                        "                        {",
                        "                            EndLine=\"В системе\"+' '+StarName(ShipStar(temp_dword_3))+'</color>';",
                        "                            temp_int_1=temp_int_1-1;",
                        "                        }",
                        "                    }",
                        "                }",
                        "                temp_str=temp_str+\"<br>\"+(k+1)+'. '+Name(temp_dword_3)+\"<br>\"+\"Тип: <TypeName>\"+\"<br>\"+\"Статус:\"+' <EndLine>';",
                        "                if(k+1!=PlanetWarriors(temp_dword_2))temp_str=temp_str+\"<br>\";",
                        "            }",
                        "        }",
                        "",
                        "        //Если боевых кораблей на планете нет, то маркируем её как \"беззащитную\"",
                        "        if(PlanetWarriors(temp_dword_2) <= 0) temp_str = temp_str + \"<br>- <color=255,0,0>Беззащитна</color> -\";",
                        "        //Добавляем разделитель, если текущая планета не последняя в системе",
                        "        //temp_str = temp_str + \"<br>\" + DefSplt;",
                        "        if(j != LastPlanet) temp_str = temp_str + \"<br>\" + \"<br>\";",
                        "    }",
                        "    //Сравниваем количество военных кораблей в системе и на планетах, вычисляем точное количество военных кораблей в системе",
                        "    for(j = 0; j < StarShips(temp_dword); j = j + 1)",
                        "    {",
                        "        temp_dword_3 = StarShips(temp_dword, j);",
                        "",
                        "        //Считаем количество враждебных станций в системе",
                        "        if(ObjectType(temp_dword_3) == 4)",
                        "        {",
                        "            if(ShipStanding(temp_dword_3) > 1 && ShipStanding(temp_dword_3) < 5)",
                        "            {",
                        "                if(!ShipInHyperSpace(temp_dword_3)) NShipInSys[15] = NShipInSys[15] + 1;",
                        "            }",
                        "",
                        "            continue;",
                        "        }",
                        "        ",
                        "        //Считаем все корабли в космическом пространстве системы",
                        "        //По Id сверяем корабли на планете и в системе, дабы не произошёл двойной зачёт одного и того же корабля",
                        "        //Да, именно так работает функция StarShips - может учесть корабль на планете, а может не учесть",
                        "        temp_str2 = ShipType(temp_dword_3);",
                        "        if(temp_str2 == 'Warrior')",
                        "        {",
                        "            if(!ShipSubType(temp_dword_3))",
                        "            {",
                        "                if(findsubstr(CheckById, '$' + Id(temp_dword_3) + '$') == -1)",
                        "                {",
                        "                    ShipsInSys = ShipsInSys + 1;",
                        "                    NShipInSys[3] = NShipInSys[3] + 1;",
                        "                }",
                        "            }",
                        "            else if(ShipSubType(temp_dword_3) == 1)",
                        "            {",
                        "                if(findsubstr(CheckById, '$' + Id(temp_dword_3) + '$') == -1)",
                        "                {",
                        "                    ShipsInSys = ShipsInSys + 1;",
                        "                    NShipInSys[6] = NShipInSys[6] + 1;",
                        "                }",
                        "            }",
                        "        }",
                        "        else if(temp_str2 == 'Militiaman1' || temp_str2 == 'Militiaman2' || temp_str2 == 'Militiaman3')",
                        "        {",
                        "            if(findsubstr(CheckById, '$' + Id(temp_dword_3) + '$') == -1)",
                        "            {",
                        "                ShipsInSys = ShipsInSys + 1;",
                        "                NShipInSys[9] = NShipInSys[9] + 1;",
                        "            }",
                        "        }",
                        "        else if(temp_str2 == 'EliteWarrior')",
                        "        {",
                        "            if(findsubstr(CheckById,'$' + Id(temp_dword_3) + '$') == -1)",
                        "            {",
                        "                ShipsInSys = ShipsInSys + 1;",
                        "                NShipInSys[12] = NShipInSys[12] + 1;",
                        "            }",
                        "        }",
                        "        else if(temp_str2 == 'Dreadnought')",
                        "        {",
                        "            if(findsubstr(CheckById, '$' + Id(temp_dword_3) + '$') == -1)",
                        "            {",
                        "                ShipsInSys = ShipsInSys + 1;",
                        "                NShipInSys[18] = NShipInSys[18] + 1;",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    //Общее число военных объектов в системе (военные корабли + враждебные станции)",
                        "    temp_int_1 = temp_int_1 + (ShipsInSys - WarsOnWing);",
                        "    //Общее число обычных военных в системе",
                        "    NShipInSys[1] = NShipInSys[1] + (NShipInSys[3] - NShipInSys[2]);",
                        "    //Общее число линкоров (флагманов) в системе",
                        "    NShipInSys[4] = NShipInSys[4] + (NShipInSys[6] - NShipInSys[5]);",
                        "    //Общее число ополченцев в системе",
                        "    NShipInSys[7] = NShipInSys[7] + (NShipInSys[9] - NShipInSys[8]);",
                        "    //Общее число элитных военных в системе",
                        "    NShipInSys[10] = NShipInSys[10] + (NShipInSys[12] - NShipInSys[11]);",
                        "    //Общее число враждебных станций в системе",
                        "    //NShipInSys[15] = NShipInSys[15]; //NShipInSys[13] и NShipInSys[14] свободны",
                        "    //Общее число дредноутов в системе",
                        "    NShipInSys[16] = NShipInSys[16] + (NShipInSys[18] - NShipInSys[17]);",
                        "",
                        "    //Дописываем строке \"подвал\", содержащий общее число всех кораблей в системе",
                        "    if(temp_int_1)",
                        "    {",
                        "        temp_str = temp_str + \"<br>\" + \"<br>\" + DefSplt + \"<br>\" + \"<color=0,50,200>Всего в системе</color>\" + \"<br>\" + DefSplt;",
                        "        if(NShipInSys[7]) temp_str = temp_str + \"<br>Ополченцев: <NShipInSys[7]>\";",
                        "        if(NShipInSys[1]) temp_str = temp_str + \"<br>Военных: <NShipInSys[1]>\";",
                        "        if(NShipInSys[10]) temp_str = temp_str + \"<br>Элитных военных: <NShipInSys[10]>\";",
                        "        if(NShipInSys[4]) temp_str = temp_str + \"<br>Линкоров: <NShipInSys[4]>\";",
                        "        if(NShipInSys[16]) temp_str = temp_str + \"<br>Дредноутов: <NShipInSys[16]>\";",
                        "        if(NShipInSys[15]) temp_str = temp_str + Format(CT('Script.Mod_ExpCB.HostileStations'), '<Count'+'>', NShipInSys[15]);",
                        "    }",
                        "    else temp_str = temp_str + \"</color><br><br><br><color=255,0,0>Система беззащитна!</color>\";",
                        "",
                        "    //Заполняем основной массив temp_array с подробной информацией о системах",
                        "    ArrayAdd(temp_array, temp_str);",
                        "    //Составляем и добавляем в массив temp_array_2 строчки краткого обзора списка систем",
                        "    if(temp_int_1) temp_str = \"</color><clrEnd>Система: <StarName(temp_dword)><br>Сектор: <ConName(StarToCon(temp_dword))><br>Военных объектов: <temp_int_1>\";",
                        "    else temp_str = \"</color><clrEnd>Система: <StarName(temp_dword)><br>Cектор: <ConName(StarToCon(temp_dword))><br>Военных объектов: <color=255,0,0>0</color>\";",
                        "    ArrayAdd(temp_array_2, temp_str);",
                        "    //Добавляем в массив temp_array_3 список систем для подстановки в ответы",
                        "    //Сраная \"трёхметровая\" Витта Прайонис удостоилась отдельной проверки",
                        "    if(StarName(temp_dword) == \"Витта Прайонис\") ArrayAdd(temp_array_3, \"Подробнее о системе <color=0,50,200>Витта Прай.</color>\");",
                        "    else ArrayAdd(temp_array_3, \"Подробнее о системе\" + ' <StarName(temp_dword)>');",
                        "    //Добавляем вспомогательный массив с числом кораблей в системах",
                        "    ArrayAdd(temp_array_4, temp_int_1);",
                        "    temp_str = '';",
                        "    CheckById = '';",
                        "    temp_int_1 = 0;",
                        "    WarsOnWing = 0;",
                        "    ShipsInSys = 0;",
                        "    LastPlanet = 0;",
                        "    ArrayClear(NShipInSys);",
                        "}",
                        "",
                        "temp_str = '';",
                        "",
                        "//Расставляем разделители в списке систем",
                        "for(i = 1; i < ArrayDim(temp_array_2); i = i + 1)",
                        "{",
                        "    temp_str = temp_str + '<temp_array_2[i]>';",
                        "    if((i + 2) <= ArrayDim(temp_array_2))",
                        "    {",
                        "        if(GetGameOptions('FontDialog') == '0') temp_str = temp_str + \"<br>\" + '------------------------------' + \"<br>\";",
                        "        else if(GetGameOptions('FontDialog') == '1') temp_str = temp_str + \"<br>\" + '--------------------------' + \"<br>\";",
                        "        else if(GetGameOptions('FontDialog') == '2') temp_str = temp_str + \"<br>\" + '---------------------------' + \"<br>\";",
                        "        else temp_str = temp_str + \"<br>\" + '--------------------------' + \"<br>\";",
                        "    }",
                        "}",
                        "//Вычисляем количество всех военных кораблей в галактике",
                        "ArrayAdd(temp_array_4, 0);",
                        "for(i = 1; i < ArrayDim(temp_array_4); i = i + 1)",
                        "{",
                        "    if((i - 1) != temp_array_4[ArrayDim(temp_array_4) - 1]) temp_array_4[ArrayDim(temp_array_4) - 1] = temp_array_4[ArrayDim(temp_array_4) - 1] + temp_array_4[i - 1];",
                        "}",
                        "",
                        "//Выставляем реплику в зависимости от того барон или не барон игрок",
                        "//А также в зависимости от того, производилась ли сегодня оплата разведданных",
                        "if(!temp_int_2)",
                        "{",
                        "    SpeechRec = '</color>' + \"Разумеется, ваше пиратейшество, вот полная сводка всех боеспособных военных кораблей Коалиции за сегодняшний день:<br> <br><temp_str><br> <br>Всего в Галактике: <temp_array_4[ArrayDim(temp_array_4) - 1]>\";",
                        "}",
                        "if(PayCheck) temp_int_2 = -1;",
                        "if(temp_int_2 == -1)",
                        "{",
                        "    SpeechRec = '</color>' + \"Вот полная сводка всех боеспособных военных кораблей Коалиции за сегодняшний день:<br> <br><temp_str><br> <br>Всего в Галактике: <temp_array_4[ArrayDim(temp_array_4) - 1]>\";",
                        "}",
                        "if(temp_int_2 > 0)",
                        "{",
                        "    SpeechRec = \"</color>Узнать число военных кораблей, говоришь? Это можно.<br>Осведомителей у нас хватает на каждой подконтрольной Коалиции планете, так что о присутствии её вооружённых сил нам ежедневно докладывают, можно сказать, из первых уст.<br>Однако, сам понимаешь, бесплатно такую информацию предоставлять невыгодно.<br>С учётом твоего авторитета в нашем движении, скажем... <temp_int_2> cr. за сегодняшнюю сводку. Число просмотров до конца дня неограничено.\";",
                        "    AnswerRec = \"</color>Купить свежую разведсводку\";",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 450,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 61,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//В конце дня обнуляем переменную \"оплаты\" разведсводки",
                        "if(PayCheck) PayCheck = 0;",
                        "",
                        "//Перебираем все последние галактические эвенты, ловим события уничтожения/постройки баз",
                        "for(i = GalaxyEvents() - 1; i >= 0; i = i - 1)",
                        "{",
                        "    if(GalaxyEventDate(i) < CurTurn()) break;",
                        "    temp_str = GalaxyEventType(i);",
                        "",
                        "    //Была построена/уничтожена ВБ, либо доминион, либо НБ - обновляем счётчики",
                        "    //На ПБ вешаем инфошку для фикса",
                        "    if(temp_str == 'RuinsCreated')",
                        "    {",
                        "        if(GalaxyEventData(i, 0) == t_SB)",
                        "        {",
                        "            if(GalaxyEventsTextData(i, 1) == '') TotalSBCount = TotalSBCount + 1;",
                        "        }",
                        "        else if(GalaxyEventData(i, 0) == t_WB)",
                        "        {",
                        "            if(GalaxyEventsTextData(i, 1) == '') TotalWBCount = TotalWBCount + 1;",
                        "        }",
                        "        else if(GalaxyEventData(i, 0) == t_CB)",
                        "        {",
                        "            if(GalaxyEventsTextData(i, 1) == '') TotalCBCount = TotalCBCount + 1;",
                        "            /*ShipType(StarShips(cur_star,j),'CB_licensed');*/",
                        "        }",
                        "        /*else if(GalaxyEventData(i, 0) == t_PB)",
                        "        {",
                        "            //SFT('ExpCB logging: name is '+GalaxyEventsTextData(i,0));",
                        "            //SFT('ExpCB logging: id is '+GalaxyEventData(i,1));",
                        "            if(ShipFindCustomShipInfoByType(IdToShip(GalaxyEventData(i,1)),'PBRaiseRank') == -1) ShipAddCustomShipInfo(IdToShip(GalaxyEventData(i,1)),'PBRaiseRank','NoShow');",
                        "        }*/",
                        "    }",
                        "    else if(temp_str == 'RuinsDestroyed')",
                        "    {",
                        "        if(GalaxyEventData(i, 0) == t_SB)",
                        "        {",
                        "            if(GalaxyEventsTextData(i, 1) == '') TotalSBCount = max(TotalSBCount - 1, 0);",
                        "        }",
                        "        else if(GalaxyEventData(i, 0) == t_WB)",
                        "        {",
                        "            if(GalaxyEventsTextData(i, 1) == '') TotalWBCount = max(TotalWBCount - 1, 0);",
                        "        }",
                        "        else if(GalaxyEventData(i, 0) == t_CB)",
                        "        {",
                        "            if(GalaxyEventsTextData(i, 1) == '') TotalCBCount = max(TotalCBCount - 1, 0);",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "//Блок действий доминионов",
                        "//Здесь умения доминионов, а то чё только игрок умеет пользоваться",
                        "//Чтобы игрок не охреневал, одновременно бывает только одна операция",
                        "if(TotalCBCount && ControlledSystems(2) > 5 && ControlledSystems(2) != GalaxyStars()) {",
                        "    if(!OperationsCD) {",
                        "        int y = 0;",
                        "            while(!OperationStage) {",
                        "                if(OperationStage) break;",
                        "                y = y + 1;",
                        "                if(y > 99) break;",
                        "",
                        "                i = Rnd(0,1);",
                        "                if(TotalCBCount < 2) i = 0;",
                        "",
                        "                if(i) {",
                        "                    if(!CBAttackCD) {",
                        "                        for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                            cur_star = GalaxyStar(i);",
                        "                            if(!StarRuins(cur_star,'CB')) continue;",
                        "                            if(StarBattle(cur_star)) continue;",
                        "                            else {",
                        "                                cur_ship = StarRuins(cur_star,'CB');",
                        "                                temp_int = Rnd(20,35);",
                        "",
                        "                                for(j=1;GalaxyStars()>j;j=j+1) {",
                        "                                    ruin = StarNearbyStars(cur_star,j);",
                        "                                    if(ruin < 1) continue;",
                        "                                    if(StarOwner(ruin) == 2) continue;",
                        "                                    //else if(StarCustomFaction(ruin) != '') continue;",
                        "                                    else {",
                        "                                        //SFT('ExpCB logging: 1');",
                        "                                        break;",
                        "                                    }",
                        "                                }",
                        "                                //SFT('ExpCB logging: 2');",
                        "                                ShipJoin(GroupNew,cur_ship,'',1,temp_int,Id(ruin));",
                        "                                OperationStage = 1;",
                        "                                if(!CoalitionDefeated()) tstr2 = '</color>' + Format(CT('FormRuins.CB.CBAttackCoalition'),'star',Name(ruin),'days',temp_int);",
                        "                                else tstr2 = '</color>' + Format(CT('FormRuins.CB.CBAttackNoCoalition'),'star',Name(ruin),'days',temp_int);",
                        "                                Sound('Sound.NewMsg');",
                        "                                NewsAdd(tstr2);",
                        "                                AddPlanetNews(tstr2,101);",
                        "                            }",
                        "                        }",
                        "                        break;",
                        "                    }",
                        "                }",
                        "                else {",
                        "                    if(!LongAttackCD) {",
                        "                        for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                            cur_star = GalaxyStar(i);",
                        "                            if(!StarRuins(cur_star,'CB')) continue;",
                        "                            if(StarBattle(cur_star)) continue;",
                        "                            else {",
                        "                                cur_ship = StarRuins(cur_star,'CB');",
                        "                                temp_int = Rnd(50,70);",
                        "",
                        "                                for(j=GalaxyStars();j>0;j=j-1) {",
                        "                                    ruin = StarNearbyStars(cur_star,j);",
                        "                                    if(ruin < 1) continue;",
                        "                                    if(StarOwner(ruin) == 2) continue;",
                        "                                    //else if(StarCustomFaction(ruin) != '') continue;",
                        "                                    else {",
                        "                                        //SFT('ExpCB logging: 3');",
                        "                                        break;",
                        "                                    }",
                        "                                }",
                        "                                //SFT('ExpCB logging: 4');",
                        "                                ShipJoin(GroupNew,cur_ship,'',2,temp_int,Id(ruin));",
                        "                                OperationStage = 1;",
                        "                                if(!CoalitionDefeated()) tstr2 = '</color>' + Format(CT('FormRuins.CB.LongAttackCoalition'),'star',Name(ruin),'days',temp_int);",
                        "                                else tstr2 = '</color>' + Format(CT('FormRuins.CB.LongAttackNoCoalition'),'star',Name(ruin),'days',temp_int);",
                        "                                Sound('Sound.NewMsg');",
                        "                                NewsAdd(tstr2);",
                        "                                AddPlanetNews(tstr2,101);",
                        "                            }",
                        "                        }",
                        "                        break;",
                        "                    }",
                        "                }",
                        "            }",
                        "    }",
                        "    else OperationsCD = OperationsCD - 1;",
                        "",
                        "    //Тикает счётчик",
                        "    if(CBAttackCD) CBAttackCD = CBAttackCD - 1;",
                        "    if(LongAttackCD) LongAttackCD = LongAttackCD - 1;",
                        "}",
                        "",
                        "//Если игрок в системе с доминионом, то ему крутят пропаганду",
                        "if(ShipInNormalSpace(Player())) {",
                        "    if(StarRuins(ShipStar(Player()),'CB')) {",
                        "        //Если в системе бой, то пропаганду крутят чаще",
                        "        if(StarBattle(ShipStar(Player()))) {",
                        "            if(CurTurn() % 10 == 0) {",
                        "                CustomEther('Pirate_Propaganda',10,'',CT('FormRuins.CB.Propaganda.News'+Rnd(1,CT('FormRuins.CB.Propaganda.Count'))));",
                        "            }",
                        "        }",
                        "        else {",
                        "            if(CurTurn() % 25 == 0) {",
                        "                CustomEther('Pirate_Propaganda',10,'',CT('FormRuins.CB.Propaganda.News'+Rnd(1,CT('FormRuins.CB.Propaganda.Count'))));",
                        "            }",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 20,
                    "Pos.y": -50,
                    "Parent": 43,
                    "#": 62,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipMoney(Player(), ShipMoney(Player()) - temp_int_2);",
                        "Sound('Sound.Buy');",
                        "ThanksForMoney = \"</color>От души! Ты только не переживай, деньги эти пойдут ну обеспечение работы агентурной сети. С коррупцией у нас строго.<br>\";",
                        "PayCheck = 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 30,
                    "Pos.y": 0,
                    "Parent": 59,
                    "#": 74,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(i = 1; i < ArrayDim(temp_array_3); i = i + 1) InjectAnswer('AddSysInfo', temp_array_3[i], i);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 730,
                    "Pos.y": 670,
                    "Parent": -1,
                    "#": 89,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Игрок приобрёл ММ за \"наличные\" ноды (трюм + склад) + за ноды со счёта",
                        "i = GAnswerData;",
                        "GetNodesFromShip(Player(), GetNodesFromShip(Player()));",
                        "GetNodesFromStorage(cur_ruin, GetNodesFromStorage(cur_ruin));",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) - modules[0, i]);",
                        "",
                        "//Запоминаем, какой номер ММ из цепочки был продан игроку",
                        "temp_int = ShipCustomShipInfoData(cur_ruin, 'CBSoldMMChainInfos', i) + 1;",
                        "if(temp_int > 50) temp_int = 0;",
                        "ShipCustomShipInfoData(cur_ruin, 'CBSoldMMChainInfos', i, temp_int);",
                        "",
                        "AddItemToShip(Player(), CreateMM(modules[i, 0]));",
                        "Sound('Sound.Sell');",
                        "",
                        "temp_str = '</color>' + Format(CT('FormRuins.CB.TakeNod.CBAfterBuy'), '<Name' + '>', BonusName(modules[i, 0]));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 760,
                    "Pos.y": 690,
                    "Parent": -1,
                    "#": 90,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Игрок приобрёл ММ только за ноды со счёта",
                        "i = GAnswerData;",
                        "RangerBaseNodes(Player(), RangerBaseNodes(Player()) - modules[i, 2]);",
                        "",
                        "//Запоминаем, какой номер ММ из цепочки был продан игроку",
                        "temp_int = ShipCustomShipInfoData(cur_ruin, 'CBSoldMMChainInfos', i) + 1;",
                        "if(temp_int > 50) temp_int = 0;",
                        "ShipCustomShipInfoData(cur_ruin, 'CBSoldMMChainInfos', i, temp_int);",
                        "",
                        "AddItemToShip(Player(), CreateMM(modules[i, 0]));",
                        "Sound('Sound.Sell');",
                        "",
                        "temp_str = '</color>' + Format(CT('FormRuins.CB.TakeNod.CBAfterBuy'), '<Name' + '>', BonusName(modules[i, 0]));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 760,
                    "Pos.y": 600,
                    "Parent": -1,
                    "#": 94,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "temp_str = '</color>' + CT('FormRuins.CB.TakeNod.CBAfterPlayerNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 570,
                    "Parent": -1,
                    "#": 98,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "cost = PortionInDiapason(GalaxyTechLevel(), 4, 8, 10, 50);",
                        "tstr1 = '</color>' + Format(CT('Script.Mod_ExpCB.DDoS_Info'), '<Cost'+'>', cost, '<NodeAccount'+'>', RangerBaseNodes(Player()));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1160,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 102,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayClear(tarr1);",
                        "ArrayDelete(tarr1, 0);",
                        "",
                        "if(GetGameOptions('FontDialog') == '0') DefSplt = '-------------------------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '1') DefSplt = '------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '2') DefSplt = '-----------------------------------------';",
                        "else /*if(GetGameOptions('FontDialog') == '3')*/ DefSplt = '-------------------------------------';",
                        "",
                        "for(int i = 1; i < ShipItems(Player()); i = i + 1)",
                        "{",
                        "    dword item = ShipItems(Player(), i);",
                        "    if(ItemType(item) != t_MicroModule) continue;",
                        "    int bon_num = EqModule(item);",
                        "    if(CT('MicroModuls.' + BonusNumInCfg(bon_num) + '.NamePrefix') != '') continue; //Пропускаем клисанские споры и прочий \"нестандарт\"",
                        "",
                        "    int cost = round(PortionInDiapason(BonusPriority(bon_num), 100, 0, 100, 2000));",
                        "    cost = Rnd(round(0.8 * cost), round(1.2 * cost), cost + Id(cur_ruin));",
                        "",
                        "    //Модификатор для повышения стоимости сдачи особых ММ",
                        "    int unique = CT('MicroModuls.' + BonusNumInCfg(bon_num) + '.UniqueMM');",
                        "    if(unique == 1) cost = 3.5 * cost; //Цена сдачи уникальных ММ (тех, что могут быть получены лишь раз за игру)",
                        "    else if(unique == 2) cost = 1.5 * cost; //Цена сдачи условно уникальных (редких) ММ",
                        "",
                        "    if(BonusPriority(bon_num) <= 69) cost = RoundTo(1.0 * cost / 1.5, 100, -1);",
                        "    else cost = RoundTo(1.0 * cost / 1.5, 10, -1);",
                        "    cost = max(5, round(0.3 * cost));",
                        "",
                        "    //Коэффициенты Доминиона",
                        "    cost = max(1,cost / 10);",
                        "",
                        "    if(!ArrayDim(tarr1))",
                        "    {",
                        "        ArrayAdd(tarr1, newarray(1), 'Item');",
                        "        ArrayAdd(tarr1, newarray(1), 'Cost');",
                        "        ArrayDelete(tarr1['Item'], 0);",
                        "        ArrayDelete(tarr1['Cost'], 0);",
                        "    }",
                        "",
                        "    ArrayAdd(tarr1['Item'], item);",
                        "    ArrayAdd(tarr1['Cost'], cost);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1160,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 105,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "str MMList = '';",
                        "if(ArrayDim(tarr1))",
                        "{",
                        "    ArraySort(tarr1['Cost'], tarr1['Item']);",
                        "    MMList = DefSplt;",
                        "",
                        "    for(i = 0; i < ArrayDim(tarr1['Item']); i = i + 1)",
                        "    {",
                        "        str name = '<' + GetParFromString(ItemFullName(tarr1['Item', i]), '<', 1, 0) + '</color>';",
                        "        MMList = MMList + Format('<br>') + Format(CT('FormRuins.CB.GiveNod.Nod'), '<Name'+'>', name, '<Count'+'>', '<color=0,50,200>' + tarr1['Cost', i] + '</color>', '');",
                        "    }",
                        "",
                        "    MMList = MMList + Format('<br>') + DefSplt;",
                        "}",
                        "else MMList = DefSplt + Format('<br>') + CT('FormRuins.CB.GiveNod.Nothing');",
                        "",
                        "tstr1 = '</color>' + Format(CT('FormRuins.CB.GiveNod.Answer'), '<MMList'+'>', MMList, '');",
                        "tstr2 = '</color>' + CT('FormRuins.CB.GiveNod.PlayerNo');",
                        "tstr3 = '</color>' + CT('FormRuins.CB.GiveNod.AfterNo');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1190,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 106,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "AddItemToShip(Player(), CreateNodes(tarr1['Cost', GAnswerData],Rnd(0,2)));",
                        "FreeItem(GetItemFromShip(Player(), tarr1['Item', GAnswerData]));",
                        "ArrayDelete(tarr1['Item'], GAnswerData);",
                        "ArrayDelete(tarr1['Cost'], GAnswerData);",
                        "",
                        "Sound('Sound.Sell');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1190,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 113,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//У игрока в трюме нашлись какие-то ММ для сдачи",
                        "if(ArrayDim(tarr1))",
                        "{",
                        "    ArraySort(tarr1['Cost'], tarr1['Item']);",
                        "    for(i = 0; i < ArrayDim(tarr1['Item']); i = i + 1)",
                        "    {",
                        "        str name = '<' + GetParFromString(ItemFullName(tarr1['Item', i]), '<', 1, 0) + '</color>';",
                        "        InjectAnswer('SellMMDone', Format(CT('FormRuins.CB.GiveNod.PlayerOk'), '<Name'+'>', name, '<Count'+'>', '<color=0,50,200>' + tarr1['Cost', i] + '</color>', ''), i);",
                        "    }",
                        "}",
                        "else ArrayAdd(tarr1, 0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 640,
                    "Pos.y": 480,
                    "Parent": -1,
                    "#": 121,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(i=0;GalaxyStars()>i;i=i+1) {",
                        "    for(j=0;StarShips(GalaxyStar(i))>j;j=j+1) {",
                        "        temp_dword = StarShips(GalaxyStar(i),j);",
                        "        if(!ShipOnSidePirateClan(temp_dword)) continue;",
                        "        if(ShipType(temp_dword) != 'FemRanger' && ShipType(temp_dword) != 'Ranger' && ShipType(temp_dword) != 'RangerExplorer') continue;",
                        "        InjectAnswer('Quarrel',Name(temp_dword),temp_dword);",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 700,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 123,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipMoney(Player(),ShipMoney(Player())-GalaxyMoney(3));",
                        "Sound('Sound.Buy');",
                        "",
                        "ChangeGlobalRelationsPlanets(GAnswerData,0,0,0,159);",
                        "ChangeGlobalRelationsShips(GAnswerData,0,0,0,1+2+4+8+16+32,159);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1370,
                    "Pos.y": 600,
                    "Parent": -1,
                    "#": 133,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "InjectAnswer('BuyNewMM', CT('FormRuins.CB.TakeNod.PlayerRequest'), 1);",
                        "InjectAnswer('SellMM', \"Обменять микромодули на ноды\", 1);",
                        "",
                        "//Делаем проверку, остались ли ещё в Галактике ЦР для проведения DDoS атаки",
                        "temp_int = 0;",
                        "for(i = 0; i < GalaxyStars() - 2; i = i + 1)",
                        "{",
                        "    temp_dword = GalaxyStar(i);",
                        "    if(StarOwner(temp_dword) != 0) continue;",
                        "    if(!StarRuins(temp_dword, 'RC')) continue;",
                        "    temp_int = temp_int + 1;",
                        "}",
                        "",
                        "if(temp_int) InjectAnswer('DDoS', \"Хочу заказать DDoS атаку сети центров рейнджеров\", 1);",
                        "",
                        "if(CurrentMods('Expansion\\ExpRC')) {",
                        "    if(GetVariableType(GetValueFromScript('Mod_ExpRC','mm_storage')) == 9) {",
                        "        if(ArrayDim(GetValueFromScript('Mod_ExpRC','mm_storage')) > 1) AddDialogInject('Mod_ExpRC:MM_storage2', '', \"Я хотел бы забрать модули из своего хранилища на Центре Рейнджеров\", 1);",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1370,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 134,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tstr1 = '</color>' + CT('FormRuins.CB.DialogRCAnswer');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1510,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 136,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tstr1 = '</color>' + CT('FormRuins.CB.DialogSBAnswer');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1510,
                    "Pos.y": 600,
                    "Parent": -1,
                    "#": 138,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(CurrentMods('Advanced\\AdvancedArts')) {",
                        "    InjectAnswer('AdvancedArts:ask_for_arts', \"Я хочу улучшить свои артефакты\", 1);",
                        "}",
                        "",
                        "if(ScientistsTalk) {",
                        "    if(CurrentMods('Evolution\\EvoSB')) {",
                        "        InjectAnswer('Mod_EvoSB:HandOverDomiksParts',CT('FormRuins.SB.Scn.PlayerAskHandOver'),1);",
                        "    }",
                        "}",
                        "else {",
                        "    if(CoalitionDefeated()) {",
                        "        InjectAnswer('FirstSB',\"Ба, да ведь... Это всамделишные учёные Коалиции? А что, уже помиловали?\",1);",
                        "    }",
                        "}",
                        "",
                        "InjectAnswer('Upgrade',CT('FormRuins.CB.Improvement.PlayerSendMod'),1);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1160,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 143,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ScientistsTalk = 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1300,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 146,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tstr1 = '</color>' + CT('FormRuins.CB.Improvement.CBAnswer');",
                        "tstr2 = '</color>' + CT('FormRuins.CB.Improvement.PlayerAsk');",
                        "tstr3 = '</color>' + CT('FormRuins.CB.Improvement.PlayerNoAsk');",
                        "tstr4 = '</color>' + CT('FormRuins.CB.Improvement.PlayerNoAskAnswer');",
                        "",
                        "ArrayClear(ship);",
                        "ArrayAdd(ship, Player());",
                        "//Цикл, пока не закончатся все напарники рейнджеры",
                        "for(i = 0; i < ShipPartners(Player()); i = i + 1)",
                        "{",
                        "    cur_ship = ShipPartners(Player(), i);",
                        "    if(GetShipRuins(cur_ship) == GetShipRuins(Player())) ArrayAdd(ship, cur_ship);",
                        "}",
                        "//Цикл, пока не закончатся все напарники пираты",
                        "for(i = 0; i < PlayerPirates(Player()); i = i + 1)",
                        "{",
                        "    cur_ship = PlayerPirates(Player(), i);",
                        "    if(GetShipRuins(cur_ship) == GetShipRuins(Player())) ArrayAdd(ship, cur_ship);",
                        "}",
                        "//Цикл, пока не закончатся все активные транки",
                        "for(i = 0; i < PlayerTranclucators(); i = i + 1)",
                        "{",
                        "    cur_ship = PlayerTranclucators(i);",
                        "    if(GetShipRuins(cur_ship) == GetShipRuins(Player())) ArrayAdd(ship, cur_ship);",
                        "}",
                        "",
                        "//Цикл, пока не закончатся все артефакты в трюме",
                        "for(i = 0; i < ShipArts(Player()); i = i + 1)",
                        "{",
                        "    cur_item = ShipArts(Player(), i);",
                        "    if(ItemType(cur_item) == t_ArtefactTranclucator) ArrayAdd(ship, ArtTranclucatorToShip(cur_item));",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1330,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 150,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "cur_ship = GAnswerData;",
                        "if(GetGameOptions('FontDialog') == '0') DefSplt = '</color>-------------------------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '1') DefSplt = '</color>------------------------------------------';",
                        "else if(GetGameOptions('FontDialog') == '2') DefSplt = '</color>-----------------------------------------';",
                        "else DefSplt = '</color>-------------------------------------';",
                        "",
                        "variable = 0;",
                        "ArrayClear(items);",
                        "input = '';",
                        "for(i = 0; i < ShipItems(cur_ship); i = i + 1)",
                        "{",
                        "    cur_item = ShipItems(cur_ship, i);",
                        "    dword acryn_num = EqSpecial(cur_item);",
                        "",
                        "    //Исключаем уже улучшенное",
                        "    if(ItemImprovement(cur_item)) continue;",
                        "",
                        "    //Исключаем скриптовое",
                        "    if(ItemInScript(cur_item) == 1)",
                        "    {",
                        "        //Но добавляем в список предметы с особым параметром в акрине",
                        "        if(~acryn_num)",
                        "        {",
                        "            if(!CT('MicroModuls.' + BonusNumInCfg(acryn_num) + '.ScriptItemIgnore')) continue;",
                        "        }",
                        "        else continue;",
                        "    }",
                        "",
                        "    //Исключаем высокоуровневое нестандартное",
                        "    if(!ShipCanRepairEq(Player(), cur_item)) continue;",
                        "    if(EqCustomFaction(cur_item) != '' && ItemLevel(cur_item) > GalaxyTechLevel()) continue;",
                        "",
                        "    //Оставляем только стандартное оборудование и пушки",
                        "    if(ItemType(cur_item) < t_Hull || ItemType(cur_item) > t_CustomWeapon) continue;",
                        "    if(~acryn_num)",
                        "    {",
                        "        //Исключаем акриновые предметы с пометкой \"Не улучшаемый\"",
                        "        if(CT('MicroModuls.' + BonusNumInCfg(acryn_num) + '.BlockImp')) continue;",
                        "    }",
                        "",
                        "    //Исключаем корпуса, которым изменили восприимчивость на ТЦ",
                        "    /*if(ItemType(cur_item) == t_Hull)",
                        "    {",
                        "        j = FindBonusByNameInCfg('ExpTC_HullSpraying');",
                        "        if(~j) j = ItemExtraSpecialsCountByType(cur_item, j);",
                        "        if(j > 0) continue;",
                        "    }*/",
                        "",
                        "    ArrayAdd(items, cur_item);",
                        "    variable = variable + 1;",
                        "    input = input + '<clrEnd>' + variable + ') ' + DeleteTags(ItemFullName(cur_item)) + ' ' + \"за\" + ' <clr>' + ItemCost(cur_item) + '<clrEnd> cr.' + \"<br>\";",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1300,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 155,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//На станции находится только один игрок",
                        "if(ArrayDim(ship) <= 2) InjectAnswer('Upgrade2', CT('FormRuins.CB.Improvement.PlayerAsk'), Player());",
                        "//У игрока на станции имеется напарник или транклюкатор",
                        "else",
                        "{",
                        "    for(i = 1; i < ArrayDim(ship); i = i + 1)",
                        "    {",
                        "        cur_ship = ship[i];",
                        "",
                        "        if(ShipTypeN(cur_ship) == t_Tranclucator) InjectAnswer('Upgrade2', \"Улучшить оборудование <ShipName(cur_ship)>\", cur_ship);",
                        "        else if(ShipTypeN(cur_ship) == t_Ranger)",
                        "        {",
                        "            if(ShipType(cur_ship) == 'Merc' || ShipType(cur_ship) == 'PlayerMerc' || ShipType(cur_ship) == 'Freelancer') InjectAnswer('Upgrade2', \"Улучшить оборудование наёмника <ShipName(cur_ship)>\", cur_ship);",
                        "            else if(ShipType(cur_ship) == 'RangerPirate') InjectAnswer('Upgrade2', \"Улучшить оборудование братана <ShipName(cur_ship)>\", cur_ship);",
                        "            else if(ShipType(cur_ship) == 'FemRanger') InjectAnswer('Upgrade2', \"Улучшить оборудование спецагента <ShipName(cur_ship)>\", cur_ship);",
                        "            else InjectAnswer('Upgrade2', \"Улучшить оборудование рейнджера <ShipName(cur_ship)>\", cur_ship);",
                        "        }",
                        "        else if(ShipTypeN(cur_ship) == t_Pirate)",
                        "        {",
                        "            if(ShipType(cur_ship) == 'Rebel') InjectAnswer('Upgrade2', \"Улучшить оборудование повстанца <ShipName(cur_ship)>\", cur_ship);",
                        "            else if(ShipType(cur_ship) == 'Merc' || ShipType(cur_ship) == 'Freelancer') InjectAnswer('Upgrade2', \"Улучшить оборудование наёмника <ShipName(cur_ship)>\", cur_ship);",
                        "            else InjectAnswer('Upgrade2', \"Улучшить оборудование братана <ShipName(cur_ship)>\", cur_ship);",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1300,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 163,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(cur_ship == Player()) tstr1 = '</color>' + \"мы не нашли у тебя на корабле\";",
                        "else if(ShipTypeN(cur_ship) == t_Tranclucator) tstr1 = '</color>' + \"в твоём транклюкаторе мы не нашли\";",
                        "else if(ShipTypeN(cur_ship) == t_Ranger)",
                        "{",
                        "    if(ShipType(cur_ship) == 'Merc' || ShipType(cur_ship) == 'Freelancer') tstr1 = '</color>' + \"на корабле наёмника мы не нашли\";",
                        "    else if(ShipType(cur_ship) == 'RangerPirate') tstr1 = '</color>' + \"на корабле твоего напарника мы не нашли\";",
                        "    else if(ShipType(cur_ship) == 'FemRanger') tstr1 = '</color>' + \"на корабле спецагента мы не нашли\";",
                        "    else tstr1 = '</color>' + \"на корабле твоего напарника мы не нашли\";",
                        "}",
                        "else if(ShipTypeN(cur_ship) == t_Pirate)",
                        "{",
                        "    if(ShipType(cur_ship) == 'Rebel') tstr1 = '</color>' + \"на корабле повстанца мы не нашли\";",
                        "    else if(ShipType(cur_ship) == 'Merc' || ShipType(cur_ship) == 'Freelancer') tstr1 = '</color>' + \"на корабле наёмника мы не нашли\";",
                        "    else tstr1 = '</color>' + \"на корабле твоего напарника мы не нашли\";",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1330,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 169,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Добавляем ответы игрока",
                        "for(i = 1; i < ArrayDim(items); i = i + 1)",
                        "{",
                        "    cur_item = items[i];",
                        "    InjectAnswer('Upgrade3', DeleteTags(ItemFullName(cur_item)), cur_item);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1360,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 170,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "tstr2 = '</color>' + CT('FormRuins.CB.Improvement.PlayerNothing');",
                        "tstr3 = '</color>' + CT('FormRuins.CB.Improvement.CBAnswerNothing');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1450,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 171,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "cur_item = GAnswerData;",
                        "cost = ItemCost(cur_item) * 5 * (100 - min(80,ShipStatus(Player(),1))) / 100;",
                        "//Проверка на доминаторское и клисанское оборудование",
                        "nod_cost = 0;",
                        "if(ItemOwner(cur_item) == Kling)",
                        "{",
                        "    tstr2 = '</color>' + \"К тому же, им потребуются ноды.\";",
                        "    tstr3 = '</color>' + \"нд.\";",
                        "    tstr4 = '</color>' + \"Имейте в виду, что для проведения работ нам необходимы <clr>ноды<clrEnd> прямо здесь. Мы можем взять их из трюма вашего корабля или со склада, но никак не с вашего нод-счёта.\" + \"<br>\";",
                        "    nod_cost = 1;",
                        "}",
                        "if(EqCustomFaction(cur_item) == 'Klissan')",
                        "{",
                        "    tstr2 = '</color>' + \"К тому же, им потребуется <clr>протоплазма<clrEnd>.\";",
                        "    tstr3 = '</color>' + \"пп.\";",
                        "    tstr4 = '';",
                        "    nod_cost = 2;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1480,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 188,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Ищем общее число доступных нодов",
                        "if(nod_cost == 1) nod_sum = GetNodesFromShip(Player());",
                        "//Ищем общее число доступной протоплазмы",
                        "else if(nod_cost == 2)",
                        "{",
                        "    nod_sum = 0;",
                        "    for(i = 0; i < ShipItems(Player()); i = i + 1)",
                        "    {",
                        "        temp_dword = ShipItems(Player(), i);",
                        "        if(ItemType(temp_dword) == t_UselessCountableItem)",
                        "        {",
                        "            if(EquipmentImageName(temp_dword) == 'KlissanProtoplasm') nod_sum = nod_sum + ItemSize(temp_dword);",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1580,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 190,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Применяем улучшение",
                        "ItemImprovement(cur_item, 3);",
                        "",
                        "//Если улучшаемая вещь оказалась доминаторской или клисанской",
                        "if(nod_cost > 0)",
                        "{",
                        "    nod_sum = cost/1000;",
                        "    //Списываем ноды",
                        "    if(nod_cost == 1)",
                        "    {",
                        "        GetNodesFromShip(Player(), nod_sum);",
                        "    }",
                        "    //Списываем протоплазму",
                        "    else if(nod_cost == 2)",
                        "    {",
                        "        for(i = ShipItems(Player()) - 1; i >= 1; i = i - 1)",
                        "        {",
                        "            temp_dword = ShipItems(Player(), i);",
                        "            if(ItemType(temp_dword) == t_UselessCountableItem)",
                        "            {",
                        "                if(EquipmentImageName(temp_dword) == 'KlissanProtoplasm')",
                        "                {",
                        "                    if(ItemSize(temp_dword) > nod_sum)",
                        "                    {",
                        "                        ItemSize(temp_dword, ItemSize(temp_dword) - nod_sum);",
                        "                        nod_sum = 0;",
                        "                    }",
                        "                    else",
                        "                    {",
                        "                        nod_sum = nod_sum - ItemSize(temp_dword);",
                        "                        FreeItem(GetItemFromShip(Player(), temp_dword));",
                        "                    }",
                        "                }",
                        "            }",
                        "",
                        "            if(nod_sum <= 0) break;",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "//Списываем деньги",
                        "ShipMoney(Player(), ShipMoney(Player()) - cost);",
                        "Sound('Sound.Sell');",
                        "",
                        "//Готовим к выводу сообщение",
                        "if(ItemType(cur_item) < t_Weapon1) tstr1 = '</color>' + lowercase(substr(ShortName(cur_item), 0, 1)) + substr(ShortName(cur_item), 1);",
                        "else tstr1 = DeleteTags(ShortName(cur_item));",
                        "input = '</color>';",
                        "",
                        "tstr2 = input + CT('FormRuins.CB.Improvement.CBAfterRepeatNo');",
                        "",
                        "if(ArrayDim(items) > 2) input = input + \"Отлично, наши матерые спецы закончили работу, теперь твое оборудование - <tstr1> - стало еще круче. Может, есть желание еще что-то подкрутить, пока рука легкая?\";",
                        "else input = input + \"Отлично, наши матерые спецы закончили работу, теперь твое оборудование - <tstr1> - стало еще круче.\";"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1320,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 202,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "cur_ruin = GetShipRuins(Player());",
                        "for(i=0;StorageItems() > i; i = i + 1) {",
                        "    cur_item = StorageItems(i);",
                        "    if(StorageItemLocation(i) != cur_ruin) continue;",
                        "",
                        "    tstr1 = '</color>' + CT('FormRuins.CB.ConstructPirate.StatsHull');",
                        "    tstr2 = DeleteTags(ShortName(cur_item));",
                        "    tstr1 = Format(tstr1,'<HitProtect>',GetEquipmentStats(cur_item,0),'<FragilityE>',GetEquipmentStats(cur_item,'<FragilityE>'),'<FragilityM>',GetEquipmentStats(cur_item,'<FragilityM>'),'<FragilityS>',GetEquipmentStats(cur_item,'<FragilityS>'));",
                        "",
                        "    InjectAnswer('DialogBuild',tstr2 +', '+tstr1,cur_item);",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1430,
                    "Pos.y": 760,
                    "Parent": -1,
                    "#": 206,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Я запрещаю покидать правительство",
                        "DuringConstruction = 1;",
                        "GotoGov(2);",
                        "",
                        "//Корпус",
                        "cur_item = GAnswerData;",
                        "tstr2 = DeleteTags(ShortName(cur_item));",
                        "j = ItemSize(cur_item);",
                        "race = ItemOwner(cur_item);",
                        "if(race > 4) race = Rnd(0,4);",
                        "",
                        "tint1 = PlanetRace(NearCivilPlanet(Player()));",
                        "PlanetRace(NearCivilPlanet(Player()),race);",
                        "",
                        "//Чтобы не напрягать булки, создадим военного заранее",
                        "cur_ship = BuyPirate(NearCivilPlanet(Player()));",
                        "WarriorId = Id(cur_ship);",
                        "OrderLock(cur_ship,1);",
                        "//Очистим ему шмот, а то мало ли",
                        "if(ShipEqInSlot(cur_ship,t_Radar)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_Radar);",
                        "    GetItemFromShip(cur_ship,tdwd);",
                        "    FreeItem(tdwd);",
                        "}",
                        "if(ShipEqInSlot(cur_ship,t_Engine)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_Engine);",
                        "    GetItemFromShip(cur_ship,tdwd);",
                        "    FreeItem(tdwd);",
                        "}",
                        "if(ShipEqInSlot(cur_ship,t_FuelTanks)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_FuelTanks);",
                        "    GetItemFromShip(cur_ship,tdwd);",
                        "    FreeItem(tdwd);",
                        "}",
                        "if(ShipEqInSlot(cur_ship,t_Scaner)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_Scaner);",
                        "    GetItemFromShip(cur_ship,tdwd);",
                        "    FreeItem(tdwd);",
                        "}",
                        "if(ShipEqInSlot(cur_ship,t_DefGenerator)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_DefGenerator);",
                        "    GetItemFromShip(cur_ship,tdwd);",
                        "    FreeItem(tdwd);",
                        "}",
                        "if(ShipEqInSlot(cur_ship,t_RepairRobot)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_RepairRobot);",
                        "    GetItemFromShip(cur_ship,tdwd);",
                        "    FreeItem(tdwd);",
                        "}",
                        "if(ShipEqInSlot(cur_ship,t_CargoHook)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_CargoHook);",
                        "    GetItemFromShip(cur_ship,tdwd);",
                        "    FreeItem(tdwd);",
                        "}",
                        "for(i=1;ShipSlots(cur_ship,1)>=i;i=i+1) {",
                        "    if(ShipEqInSlot(cur_ship,t_Weapon1,i)) {",
                        "        tdwd = ShipEqInSlot(cur_ship,t_Weapon1,i);",
                        "        GetItemFromShip(cur_ship,tdwd);",
                        "        FreeItem(tdwd);",
                        "    }",
                        "}",
                        "//Сформируем диалог-шаблон, на основании которого мы потом внаглую будем собирать итоговый, показывающийся игроку",
                        "tstr4 = '</color>' + CT('FormRuins.CB.ConstructPirate.MainDialog');",
                        "if(ShipEqInSlot(cur_ship,t_Radar)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_Radar);",
                        "    tstr4 = Format(tstr4,'radar',Name(tdwd)+' ('+GetEquipmentStats(tdwd,0)+' '+\"млн км)\");",
                        "}",
                        "else tstr4 = Format(tstr4,'engine',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_Engine)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_Engine);",
                        "    tstr4 = Format(tstr4,'engine',Name(tdwd)+' ('+GetEquipmentStats(tdwd,0)+' '+\"млн км)\");",
                        "}",
                        "else tstr4 = Format(tstr4,'tank',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_FuelTanks)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_FuelTanks);",
                        "    tstr4 = Format(tstr4,'tank',Name(tdwd)+' ('+GetEquipmentStats(tdwd,0)+' '+\"ед. топлива)\");",
                        "}",
                        "else tstr4 = Format(tstr4,'scaner',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_Scaner)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_Scaner);",
                        "    tstr4 = Format(tstr4,'scaner',Name(tdwd)+' ('+GetEquipmentStats(tdwd,0)+' '+'%)');",
                        "}",
                        "else tstr4 = Format(tstr4,'def',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_DefGenerator)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_DefGenerator);",
                        "    tstr4 = Format(tstr4,'def',Name(tdwd)+' ('+GetEquipmentStats(tdwd,0)+' '+'%)');",
                        "}",
                        "else tstr4 = Format(tstr4,'droid',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_RepairRobot)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_RepairRobot);",
                        "    tstr4 = Format(tstr4,'droid',Name(tdwd)+' ('+GetEquipmentStats(tdwd,0)+' '+\"ед. урона\");",
                        "}",
                        "else tstr4 = Format(tstr4,'hook',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_CargoHook)) {",
                        "    tdwd = ShipEqInSlot(cur_ship,t_CargoHook);",
                        "    tstr4 = Format(tstr4,'hook',Name(tdwd)+' ('+GetEquipmentStats(tdwd,0)+' '+\"т. на расстоянии\"+GetEquipmentStats(tdwd,1)+' '+\"млн км)\");",
                        "}",
                        "else tstr4 = Format(tstr4,'radar',\"<color=220,20,20>отсутствует</color>\");",
                        "for(i=1;ShipSlots(cur_ship,1)>=i;i=i+1) {",
                        "    if(ShipEqInSlot(cur_ship,t_Weapon1,i)) {",
                        "        tdwd = ShipEqInSlot(cur_ship,t_Weapon1,i);",
                        "        tstr4 = Format(tstr4,'weap'+i,Name(tdwd)+' ('+GetEquipmentStats(tdwd,1)+' - '+GetEquipmentStats(tdwd,0)+' '+\"ед. урона на расстоянии\"+GetEquipmentStats(tdwd,2)+' '+\"млн км)\");",
                        "    }",
                        "    else tstr4 = Format(tstr4,'weap'+i,\"<color=220,20,20>отсутствует</color>\");",
                        "}",
                        "",
                        "HullHP(cur_ship,'To100');",
                        "",
                        "//Возвращаем планете её расу",
                        "PlanetRace(NearCivilPlanet(Player()),tint1);",
                        "costDisc = cost * (100 - (ShipStatus(Player(),2)/4)) / 100;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1460,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 211,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "InjectAnswer('All',\"Перейти к изменению оборудования пилота\",1);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1540,
                    "Pos.y": 760,
                    "Parent": -1,
                    "#": 213,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "Sound('Sound.Scan');",
                        "FormChange('Ship',cur_ship);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1540,
                    "Pos.y": 790,
                    "Parent": -1,
                    "#": 214,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Сформируем диалог-шаблон, на основании которого мы потом внаглую будем собирать итоговый, показывающийся игроку",
                        "tstr4 = '</color>' + CT('FormRuins.WB.PilotConstruction.MainDialog');",
                        "cur_ship = IdToShip(WarriorId);",
                        "",
                        "if(ShipEqInSlot(cur_ship,t_Radar)) {",
                        "    temp_dword = ShipEqInSlot(cur_ship,t_Radar);",
                        "    tstr4 = Format(tstr4,'radar',Name(temp_dword)+' ('+GetEquipmentStats(temp_dword,0)+' '+\"млн км)\");",
                        "}",
                        "else tstr4 = Format(tstr4,'engine',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_Engine)) {",
                        "    temp_dword = ShipEqInSlot(cur_ship,t_Engine);",
                        "    tstr4 = Format(tstr4,'engine',Name(temp_dword)+' ('+GetEquipmentStats(temp_dword,0)+' '+\"млн км)\");",
                        "}",
                        "else tstr4 = Format(tstr4,'tank',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_FuelTanks)) {",
                        "    temp_dword = ShipEqInSlot(cur_ship,t_FuelTanks);",
                        "    tstr4 = Format(tstr4,'tank',Name(temp_dword)+' ('+GetEquipmentStats(temp_dword,0)+' '+\"ед. топлива)\");",
                        "}",
                        "else tstr4 = Format(tstr4,'scaner',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_Scaner)) {",
                        "    temp_dword = ShipEqInSlot(cur_ship,t_Scaner);",
                        "    tstr4 = Format(tstr4,'scaner',Name(temp_dword)+' ('+GetEquipmentStats(temp_dword,0)+' '+'%)');",
                        "}",
                        "else tstr4 = Format(tstr4,'def',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_DefGenerator)) {",
                        "    temp_dword = ShipEqInSlot(cur_ship,t_DefGenerator);",
                        "    tstr4 = Format(tstr4,'def',Name(temp_dword)+' ('+GetEquipmentStats(temp_dword,0)+' '+'%)');",
                        "}",
                        "else tstr4 = Format(tstr4,'droid',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_RepairRobot)) {",
                        "    temp_dword = ShipEqInSlot(cur_ship,t_RepairRobot);",
                        "    tstr4 = Format(tstr4,'droid',Name(temp_dword)+' ('+GetEquipmentStats(temp_dword,0)+' '+\"ед. урона\");",
                        "}",
                        "else tstr4 = Format(tstr4,'hook',\"<color=220,20,20>отсутствует</color>\");",
                        "if(ShipEqInSlot(cur_ship,t_CargoHook)) {",
                        "    temp_dword = ShipEqInSlot(cur_ship,t_CargoHook);",
                        "    tstr4 = Format(tstr4,'hook',Name(temp_dword)+' ('+GetEquipmentStats(temp_dword,0)+' '+\"т. на расстоянии\"+GetEquipmentStats(temp_dword,1)+' '+\"млн км)\");",
                        "}",
                        "else tstr4 = Format(tstr4,'radar',\"<color=220,20,20>отсутствует</color>\");",
                        "for(i=1;ShipSlots(cur_ship,1)>=i;i=i+1) {",
                        "    if(ShipEqInSlot(cur_ship,t_Weapon1,i)) {",
                        "        temp_dword = ShipEqInSlot(cur_ship,t_Weapon1,i);",
                        "        tstr4 = Format(tstr4,'weap'+i,Name(temp_dword)+' ('+GetEquipmentStats(temp_dword,1)+' - '+GetEquipmentStats(temp_dword,0)+' '+\"ед. урона на расстоянии\"+GetEquipmentStats(temp_dword,2)+' '+\"млн км)\");",
                        "    }",
                        "    else tstr4 = Format(tstr4,'weap'+i,\"<color=220,20,20>отсутствует</color>\");",
                        "}",
                        "",
                        "j = ItemSize(ShipEqInSlot(cur_ship,t_Hull));"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1430,
                    "Pos.y": 880,
                    "Parent": -1,
                    "#": 215,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Уничтожаем невезучего военного",
                        "OrderLock(cur_ship);",
                        "ShipDestroy(cur_ship);",
                        "WarriorId = 0;",
                        "",
                        "DuringConstruction = 0;",
                        "GotoGov(0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1490,
                    "Pos.y": 910,
                    "Parent": -1,
                    "#": 220,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "WarriorId = 0;",
                        "OrderLock(cur_ship,0);",
                        "Chameleon(cur_ship);",
                        "HullHP(cur_ship,'To100');",
                        "TransferShip(cur_ship,GetShipRuins(Player()));",
                        "",
                        "DuringConstruction = 0;",
                        "GotoGov(0);"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 280,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 232,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//0",
                        "//  1 -- Полноценная атака Доминиона",
                        "//  2 -- Доминион высылает пиратов",
                        "//1 - Время до начала атаки",
                        "//2 - система для атаки",
                        "",
                        "if(CurTurn() % 3 == 0) {",
                        "    if(GroupCount(GroupForCB) < 30) {",
                        "        for(i=0;GalaxyStars()>i;i=i+1) {",
                        "            cur_star = GalaxyStar(i);",
                        "            if(StarBattle(cur_star)) continue;",
                        "            if(StarOwner(cur_star) == 1) continue;",
                        "            if(StarCustomFaction(cur_star) != '') continue;",
                        "",
                        "            for(j=0;StarShips(cur_star)>j;j=j+1) {",
                        "                dword cur_ship1 = StarShips(cur_star,j);",
                        "                if(ShipTypeN(cur_ship1) != t_Pirate) continue;",
                        "                if(!PirateType(cur_ship1)) continue;",
                        "                if(ShipInScript(cur_ship1)) continue;",
                        "                if(ShipTypeN(cur_ship1) > t_Tranclucator) continue;",
                        "                if(ShipType(cur_ship1) == 'Frigate') continue;",
                        "                if(ShipType(cur_ship1) == 'Galleon') continue;",
                        "",
                        "                //SFT('ExpCB logging: trying to add '+Name(cur_ship));",
                        "                ShipJoin(GroupForCB,cur_ship1,'',Id(CurShip));",
                        "                SFT('ExpCB logging: added '+Name(cur_ship1));",
                        "            }",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "if(ShipStar(CurShip) != GalaxyStar(GetData(2)-1)) {",
                        "    if(GetData(1)) SetData(GetData(1)-1,1);",
                        "    else {",
                        "        if(GetData(0) == 1) {",
                        "            if(GetShipRuins(Player())) {",
                        "                if(GetShipRuins(Player()) == CurShip) {",
                        "                    OrderTakeOff(Player());",
                        "                }",
                        "            }",
                        "            OrderTeleport(CurShip,GalaxyStar(GetData(2)-1),CoordX(CurShip),CoordY(CurShip));",
                        "            CBAttackCD = 100 + Rnd(100,200);",
                        "        }",
                        "        else {",
                        "            for(i=0;GroupCount(GroupForCB)>i;i=i+1) {",
                        "                cur_ship = GroupShip(GroupForCB,i);",
                        "                OrderTakeOff(cur_ship);",
                        "                ShipDestination(cur_ship,GalaxyStar(GetData(2)-1));",
                        "                LongAttackCD = 200 + Rnd(200,250);",
                        "            }",
                        "",
                        "            ShipOut(CurShip);",
                        "        }",
                        "",
                        "        OperationStage = 0;",
                        "        OperationsCD = max(100,Rnd(340,360) - TotalCBCount * 10);",
                        "    }",
                        "}",
                        "else {",
                        "    if(StarBattle(ShipStar(CurShip))) {",
                        "        if(HullDamage(CurShip) > 65) {",
                        "            for(i=1;GalaxyStars()>i;i=i+1) {",
                        "                cur_star = StarNearbyStars(ShipStar(CurShip),i);",
                        "                if(StarOwner(cur_star) != PirateClan || StarCustomFaction(cur_star) != '') continue;",
                        "                else {",
                        "                    OrderNone(CurShip);",
                        "                    if(GetShipRuins(Player())) {",
                        "                        if(GetShipRuins(Player()) == CurShip) {",
                        "                            OrderTakeOff(Player());",
                        "                        }",
                        "                    }",
                        "                    OrderTeleport(CurShip,cur_star);",
                        "                    ShipOut(CurShip);",
                        "                    break;",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "    else {",
                        "        if(StarOwner(ShipStar(CurShip)) == PirateClan || StarCustomFaction(ShipStar(CurShip)) == '') {",
                        "            ShipOut(CurShip);",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 130,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 233,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//0 - Id доминиона",
                        "",
                        "if(GetData(0) < 1) exit;",
                        "",
                        "cur_ship = IdToShip(GetData(0));",
                        "",
                        "if(cur_ship > 0) {",
                        "    if(!ShipInStar(cur_ship,ShipStar(CurShip))) {",
                        "        if(ShipInNormalSpace(CurShip)) {",
                        "            OrderJump(CurShip,ShipStar(cur_ship));",
                        "        }",
                        "        else if(!GetShipRuins(CurShip)) {",
                        "            OrderTakeOff(CurShip);",
                        "        }",
                        "    }",
                        "    else {",
                        "        if(ShipInNormalSpace(CurShip)) {",
                        "            if(ShipInNormalSpace(cur_ship)) {",
                        "                OrderLanding(CurShip,cur_ship);",
                        "            }",
                        "        }",
                        "    }",
                        "}",
                        "else ShipOut(CurShip);"
                    ]
                }
            ],
            "Planets": 
            [
                {
                    "Type": "TPlanet",
                    "Name": "InitPlanet",
                    "Pos.x": 390,
                    "Pos.y": 630,
                    "Parent": -1,
                    "#": 1,
                    "Race": 62,
                    "Owner": 62,
                    "Economy": 14,
                    "Goverment": 62,
                    "RangeMin": 0,
                    "RangeMax": 100,
                    "Dialog": -1
                }
            ],
            "Ships": 
            [
                {
                    "Type": "TStarShip",
                    "Name": "",
                    "Pos.x": 390,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 4,
                    "Count": 1,
                    "Owner": 62,
                    "Ship.Type": 126,
                    "Player": true,
                    "SpeedMin": 0,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                }
            ],
            "Stars": 
            [
                {
                    "Type": "TStar",
                    "Name": "InitStar",
                    "Pos.x": 390,
                    "Pos.y": 610,
                    "Parent": -1,
                    "#": 0,
                    "Constellation": 0,
                    "Priority": 0,
                    "NoKling": false,
                    "NoComeKling": false
                }
            ],
            "Statements": 
            [
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 9,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) && ShipMoney(Player()) >= cost"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 530,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 14,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "get_nods > 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 500,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 47,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "get_nods <= 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 580,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 48,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "RangerBaseNodes(Player()) <= 0 || ShipMoney(Player()) < cost"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 30,
                    "Parent": 59,
                    "#": 58,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "temp_int_2 > 0 && ShipMoney(Player()) >= temp_int_2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 50,
                    "Parent": 74,
                    "#": 73,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "temp_int_2 <= 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": -30,
                    "Parent": 44,
                    "#": 79,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "temp_int_2 > 0 && ShipMoney(Player()) < temp_int_2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 43,
                    "#": 81,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "temp_int_2 <= 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 44,
                    "#": 82,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "temp_int_2 > 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1160,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 111,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 520,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 126,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipMoney(Player()) < GalaxyMoney(3)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 560,
                    "Pos.y": 440,
                    "Parent": -1,
                    "#": 127,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipMoney(Player()) >= GalaxyMoney(3)"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 450,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 129,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!ShipIsTakeoff(Player())"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1300,
                    "Pos.y": 370,
                    "Parent": -1,
                    "#": 161,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayDim(items) <= 1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1330,
                    "Pos.y": 370,
                    "Parent": -1,
                    "#": 162,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayDim(items) > 1"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1450,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 173,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!nod_cost"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1480,
                    "Pos.y": 270,
                    "Parent": -1,
                    "#": 174,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "nod_cost"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1450,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 177,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayDim(items) > 2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1450,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 180,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipMoney(Player()) < cost"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1480,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 181,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipMoney(Player())<cost || nod_sum<cost/1000"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1520,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 186,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipMoney(Player())>=cost"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1520,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 187,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ShipMoney(Player())>=cost && nod_sum<cost/1000"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1640,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 193,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayDim(items) == 2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1640,
                    "Pos.y": 370,
                    "Parent": -1,
                    "#": 194,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ArrayDim(items) > 2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1490,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 218,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ready >=4 && ShipCntWeapon(cur_ship) && ShipEqInSlot(cur_ship,t_Engine) && ShipFreeSpace(cur_ship) > 0 && ShipEqInSlot(cur_ship,t_FuelTanks)"
                    ]
                }
            ],
            "States": 
            [
                {
                    "Type": "TState",
                    "Name": "PlayerState",
                    "Pos.x": 390,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 3,
                    "Move": 0,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "StateNew",
                    "Pos.x": 280,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 228,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                },
                {
                    "Type": "TState",
                    "Name": "StateMain",
                    "Pos.x": 130,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 231,
                    "Move": 5,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                }
            ],
            "Variables": 
            [
                {
                    "Type": "TVar",
                    "Name": "end",
                    "Pos.x": 0,
                    "Pos.y": 240,
                    "Parent": 26,
                    "#": 11,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "get_nods",
                    "Pos.x": 0,
                    "Pos.y": 140,
                    "Parent": 26,
                    "#": 12,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_str",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 68,
                    "#": 13,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_int",
                    "Pos.x": 0,
                    "Pos.y": 40,
                    "Parent": 26,
                    "#": 17,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "modules",
                    "Pos.x": 330,
                    "Pos.y": 0,
                    "Parent": 26,
                    "#": 18,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cost",
                    "Pos.x": 0,
                    "Pos.y": 220,
                    "Parent": 26,
                    "#": 20,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "i",
                    "Pos.x": 500,
                    "Pos.y": 750,
                    "Parent": -1,
                    "#": 26,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "j",
                    "Pos.x": 30,
                    "Pos.y": 0,
                    "Parent": 26,
                    "#": 27,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "k",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 26,
                    "#": 28,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "l",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 27,
                    "#": 29,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ruin",
                    "Pos.x": 600,
                    "Pos.y": 790,
                    "Parent": -1,
                    "#": 30,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_array",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 69,
                    "#": 31,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_dword",
                    "Pos.x": 600,
                    "Pos.y": 810,
                    "Parent": -1,
                    "#": 32,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "discount",
                    "Pos.x": 0,
                    "Pos.y": 120,
                    "Parent": 26,
                    "#": 38,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_int_1",
                    "Pos.x": 0,
                    "Pos.y": 60,
                    "Parent": 26,
                    "#": 40,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_array_2",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 31,
                    "#": 45,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_dword_2",
                    "Pos.x": 600,
                    "Pos.y": 830,
                    "Parent": -1,
                    "#": 46,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_int_2",
                    "Pos.x": 0,
                    "Pos.y": 80,
                    "Parent": 26,
                    "#": 54,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "AnswerRec",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 56,
                    "#": 55,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "SpeechRec",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 78,
                    "#": 56,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "PayCheck",
                    "Pos.x": 0,
                    "Pos.y": 200,
                    "Parent": 26,
                    "#": 60,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_dword_3",
                    "Pos.x": 600,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 63,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WarsOnWing",
                    "Pos.x": 0,
                    "Pos.y": 180,
                    "Parent": 26,
                    "#": 64,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ShipsInSys",
                    "Pos.x": 0,
                    "Pos.y": 160,
                    "Parent": 26,
                    "#": 65,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TypeName",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 55,
                    "#": 66,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "LastPlanet",
                    "Pos.x": 0,
                    "Pos.y": 100,
                    "Parent": 26,
                    "#": 67,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "EndLine",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 86,
                    "#": 68,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "NShipInSys",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 18,
                    "#": 69,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "CheckById",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 92,
                    "#": 70,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_array_3",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 45,
                    "#": 71,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_array_4",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 71,
                    "#": 72,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ThanksForMoney",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 70,
                    "#": 78,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "DefSplt",
                    "Pos.x": 210,
                    "Pos.y": 0,
                    "Parent": 26,
                    "#": 86,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "discount_float",
                    "Pos.x": 0,
                    "Pos.y": 270,
                    "Parent": 26,
                    "#": 91,
                    "Var.Type": "Float",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_str2",
                    "Pos.x": 0,
                    "Pos.y": 20,
                    "Parent": 13,
                    "#": 92,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_ruin",
                    "Pos.x": 600,
                    "Pos.y": 770,
                    "Parent": -1,
                    "#": 93,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TotalCBCount",
                    "Pos.x": 410,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 95,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_star",
                    "Pos.x": 600,
                    "Pos.y": 750,
                    "Parent": -1,
                    "#": 96,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TotalWBCount",
                    "Pos.x": 410,
                    "Pos.y": 520,
                    "Parent": -1,
                    "#": 97,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr1",
                    "Pos.x": 980,
                    "Pos.y": 790,
                    "Parent": -1,
                    "#": 99,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TotalSBCount",
                    "Pos.x": 410,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 100,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tarr1",
                    "Pos.x": 980,
                    "Pos.y": 750,
                    "Parent": -1,
                    "#": 103,
                    "Var.Type": "Array",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "item",
                    "Pos.x": 980,
                    "Pos.y": 770,
                    "Parent": -1,
                    "#": 104,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr2",
                    "Pos.x": 980,
                    "Pos.y": 810,
                    "Parent": -1,
                    "#": 108,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr3",
                    "Pos.x": 980,
                    "Pos.y": 830,
                    "Parent": -1,
                    "#": 109,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ScientistsTalk",
                    "Pos.x": 980,
                    "Pos.y": 1020,
                    "Parent": -1,
                    "#": 140,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr4",
                    "Pos.x": 980,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 149,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ship",
                    "Pos.x": 710,
                    "Pos.y": 960,
                    "Parent": -1,
                    "#": 159,
                    "Var.Type": "Array",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "items",
                    "Pos.x": 710,
                    "Pos.y": 980,
                    "Parent": -1,
                    "#": 160,
                    "Var.Type": "Array",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "input",
                    "Pos.x": 980,
                    "Pos.y": 880,
                    "Parent": -1,
                    "#": 167,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "variable",
                    "Pos.x": 710,
                    "Pos.y": 1000,
                    "Parent": -1,
                    "#": 168,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "nod_cost",
                    "Pos.x": 830,
                    "Pos.y": 960,
                    "Parent": -1,
                    "#": 172,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "nod_sum",
                    "Pos.x": 830,
                    "Pos.y": 940,
                    "Parent": -1,
                    "#": 189,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_item",
                    "Pos.x": 830,
                    "Pos.y": 1000,
                    "Parent": -1,
                    "#": 191,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "DuringConstruction",
                    "Pos.x": 980,
                    "Pos.y": 1000,
                    "Parent": -1,
                    "#": 207,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WarriorId",
                    "Pos.x": 830,
                    "Pos.y": 1020,
                    "Parent": -1,
                    "#": 210,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "OperationsCD",
                    "Pos.x": 1080,
                    "Pos.y": 750,
                    "Parent": -1,
                    "#": 224,
                    "Var.Type": "Int",
                    "Init": "300",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "CBAttackCD",
                    "Pos.x": 1080,
                    "Pos.y": 790,
                    "Parent": -1,
                    "#": 225,
                    "Var.Type": "Int",
                    "Init": "150",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "LongAttackCD",
                    "Pos.x": 1080,
                    "Pos.y": 810,
                    "Parent": -1,
                    "#": 226,
                    "Var.Type": "Int",
                    "Init": "200",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "OperationStage",
                    "Pos.x": 1080,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 229,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_ship",
                    "Pos.x": 830,
                    "Pos.y": 980,
                    "Parent": -1,
                    "#": 234,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                }
            ]
        }
    ],
    "Visual.Links": 
    [
        {
            "Type": "TGraphLink",
            "Begin": 4,
            "End": 0,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 1,
            "End": 0,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 2,
            "End": 1,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 2,
            "End": 3,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 6,
            "End": 9,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 10,
            "End": 7,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 7,
            "End": 14,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 14,
            "End": 15,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 15,
            "End": 16,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 23,
            "End": 25,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 25,
            "End": 24,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 36,
            "End": 35,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 35,
            "End": 34,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 34,
            "End": 33,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 24,
            "End": 37,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 9,
            "End": 10,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 16,
            "End": 39,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 6,
            "End": 8,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 24,
            "End": 41,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 43,
            "End": 44,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 7,
            "End": 47,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 47,
            "End": 6,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 48,
            "End": 49,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 6,
            "End": 48,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 50,
            "End": 51,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 8,
            "End": 52,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 52,
            "End": 53,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 44,
            "End": 58,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 58,
            "End": 59,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 59,
            "End": 62,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 62,
            "End": 43,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 44,
            "End": 73,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 73,
            "End": 74,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 75,
            "End": 76,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 76,
            "End": 77,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 77,
            "End": 44,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 44,
            "End": 79,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 79,
            "End": 80,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 44,
            "End": 81,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 81,
            "End": 57,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 44,
            "End": 82,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 82,
            "End": 84,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 84,
            "End": 83,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 83,
            "End": 85,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 87,
            "End": 89,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 88,
            "End": 90,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 89,
            "End": 34,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 90,
            "End": 34,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 42,
            "End": 43,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 41,
            "End": 94,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 94,
            "End": 50,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 21,
            "End": 98,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 98,
            "End": 6,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 101,
            "End": 102,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 102,
            "End": 105,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 107,
            "End": 106,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 106,
            "End": 105,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 105,
            "End": 110,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 110,
            "End": 113,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 110,
            "End": 111,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 111,
            "End": 112,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 112,
            "End": 114,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 114,
            "End": 115,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 116,
            "End": 117,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 117,
            "End": 118,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 119,
            "End": 120,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 120,
            "End": 118,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 120,
            "End": 121,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 122,
            "End": 123,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 123,
            "End": 124,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 124,
            "End": 125,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 117,
            "End": 127,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 127,
            "End": 119,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 117,
            "End": 126,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 126,
            "End": 128,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 129,
            "End": 61,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 131,
            "End": 132,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 131,
            "End": 133,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 130,
            "End": 134,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 134,
            "End": 131,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 137,
            "End": 132,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 135,
            "End": 136,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 136,
            "End": 137,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 137,
            "End": 138,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 141,
            "End": 142,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 142,
            "End": 143,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 143,
            "End": 144,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 145,
            "End": 146,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 146,
            "End": 147,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 151,
            "End": 152,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 147,
            "End": 155,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 147,
            "End": 156,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 156,
            "End": 157,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 157,
            "End": 158,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 150,
            "End": 161,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 150,
            "End": 162,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 161,
            "End": 163,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 163,
            "End": 164,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 164,
            "End": 165,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 162,
            "End": 166,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 153,
            "End": 150,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 166,
            "End": 169,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 166,
            "End": 170,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 170,
            "End": 148,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 148,
            "End": 151,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 154,
            "End": 171,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 171,
            "End": 174,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 171,
            "End": 173,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 173,
            "End": 175,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 174,
            "End": 176,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 175,
            "End": 177,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 176,
            "End": 177,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 177,
            "End": 178,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 178,
            "End": 150,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 175,
            "End": 179,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 176,
            "End": 179,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 179,
            "End": 151,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 175,
            "End": 180,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 180,
            "End": 182,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 181,
            "End": 183,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 175,
            "End": 186,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 187,
            "End": 185,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 186,
            "End": 184,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 176,
            "End": 188,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 188,
            "End": 187,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 188,
            "End": 181,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 185,
            "End": 190,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 184,
            "End": 190,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 190,
            "End": 192,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 192,
            "End": 194,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 192,
            "End": 193,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 193,
            "End": 195,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 194,
            "End": 197,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 198,
            "End": 152,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 197,
            "End": 198,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 194,
            "End": 196,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 196,
            "End": 150,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 205,
            "End": 206,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 139,
            "End": 199,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 199,
            "End": 201,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 199,
            "End": 200,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 200,
            "End": 203,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 203,
            "End": 204,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 203,
            "End": 202,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 206,
            "End": 208,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 208,
            "End": 209,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 208,
            "End": 211,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 212,
            "End": 213,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 213,
            "End": 214,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 214,
            "End": 208,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 209,
            "End": 215,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 215,
            "End": 216,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 216,
            "End": 217,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 208,
            "End": 218,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 218,
            "End": 219,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 219,
            "End": 220,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 220,
            "End": 221,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 221,
            "End": 223,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 221,
            "End": 222,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 223,
            "End": 203,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 227,
            "End": 228,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 227,
            "End": 1,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 230,
            "End": 1,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 230,
            "End": 231,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 228,
            "End": 232,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 231,
            "End": 233,
            "Nom": 0,
            "Arrow": true
        }
    ],
    "BlockPar.EC.Total.Strings": 105,
    "BlockPar.EC": 
    [
        {
            "#": "103",
            "String": "Я передумал"
        },
        {
            "#": "104",
            "String": "Снять ноды с нод счёта"
        },
        {
            "#": "109",
            "String": "Сколько нодов снять?"
        },
        {
            "#": "128",
            "String": "Операция прошла успешно. Ноды уже погружены в твой трюм."
        },
        {
            "#": "136",
            "String": "Ну, не хочешь как хочешь. Желаю удачи в \"обналичивании\" нодов у доминаторов."
        },
        {
            "#": "141",
            "String": "</color>Узнать число военных кораблей, говоришь? Это можно.<br>Осведомителей у нас хватает на каждой подконтрольной Коалиции планете, так что о присутствии её вооружённых сил нам ежедневно докладывают, можно сказать, из первых уст.<br>Однако, сам понимаешь, бесплатно такую информацию предоставлять невыгодно.<br>С учётом твоего авторитета в нашем движении, скажем... <0> cr. за сегодняшнюю сводку. Число просмотров до конца дня неограничено."
        },
        {
            "#": "143",
            "String": "Хорошо! Теперь осталось совсем немного - оснастить корабль оборудованием.<br>Чтобы у тебя было понимание порядка цифр, выведем тебе сейчас текущую информацию по оснащаемому кораблю:<br>==================<br>Корабль: <0> (<1> ед. структуры)<br>-------Оборудование-------<br><2><br>==================<br>Что будем делать?"
        },
        {
            "#": "144",
            "String": "Назад"
        },
        {
            "#": "149",
            "String": "На вылете"
        },
        {
            "#": "150",
            "String": "В ангаре"
        },
        {
            "#": "151",
            "String": "Статус:"
        },
        {
            "#": "152",
            "String": "Тип: <0>"
        },
        {
            "#": "16",
            "String": "<br>"
        },
        {
            "#": "163",
            "String": "Ополченец"
        },
        {
            "#": "174",
            "String": "<br>Ополченцев: <0>"
        },
        {
            "#": "179",
            "String": "<br>- <color=255,0,0>Беззащитна</color> -"
        },
        {
            "#": "196",
            "String": "<br>Элитных военных: <0>"
        },
        {
            "#": "197",
            "String": "<br>Военных: <0>"
        },
        {
            "#": "198",
            "String": "Элитный военный"
        },
        {
            "#": "199",
            "String": "Военный"
        },
        {
            "#": "200",
            "String": "Планета: <0>"
        },
        {
            "#": "202",
            "String": "В системе"
        },
        {
            "#": "205",
            "String": "<0><1>"
        },
        {
            "#": "207",
            "String": "</color>От души! Ты только не переживай, деньги эти пойдут ну обеспечение работы агентурной сети. С коррупцией у нас строго.<br>"
        },
        {
            "#": "208",
            "String": "Подробнее о системе"
        },
        {
            "#": "209",
            "String": "Подробнее о системе <color=0,50,200>Витта Прай.</color>"
        },
        {
            "#": "210",
            "String": "Витта Прайонис"
        },
        {
            "#": "212",
            "String": "</color>Система: <0><br>Сектор: <1><br><br><br>"
        },
        {
            "#": "213",
            "String": "</color><br><br><br><color=255,0,0>Система беззащитна!</color>"
        },
        {
            "#": "214",
            "String": "Не, ну ты уж совсем не борзей, да?! За эти данные многие наши разведчики отдали свои жизни, между прочим! Наверное..."
        },
        {
            "#": "215",
            "String": "Нет, как-то дороговато"
        },
        {
            "#": "219",
            "String": "</color>Купить свежую разведсводку"
        },
        {
            "#": "222",
            "String": "<color=0,50,200>Всего в системе</color>"
        },
        {
            "#": "238",
            "String": "Вот полная сводка всех боеспособных военных кораблей Коалиции за сегодняшний день:<br> <br><0><br> <br>Всего в Галактике: <1>"
        },
        {
            "#": "239",
            "String": "Разумеется, ваше пиратейшество, вот полная сводка всех боеспособных военных кораблей Коалиции за сегодняшний день:<br> <br><0><br> <br>Всего в Галактике: <1>"
        },
        {
            "#": "243",
            "String": "Предоставьте мне полную информацию о численности коалиционного флота"
        },
        {
            "#": "244",
            "String": "Хочу заказать DDoS атаку сети центров рейнджеров"
        },
        {
            "#": "249",
            "String": "<br>Дредноутов: <0>"
        },
        {
            "#": "251",
            "String": "Дредноут"
        },
        {
            "#": "252",
            "String": "<br>Линкоров: <0>"
        },
        {
            "#": "253",
            "String": "Линкор"
        },
        {
            "#": "254",
            "String": "</color><clrEnd>Система: <0><br>Cектор: <1><br>Военных объектов: <color=255,0,0>0</color>"
        },
        {
            "#": "255",
            "String": "</color><clrEnd>Система: <0><br>Сектор: <1><br>Военных объектов: <2>"
        },
        {
            "#": "256",
            "String": "Обменять микромодули на ноды"
        },
        {
            "#": "259",
            "String": "Я бы хотел подпортить кому-нибудь жизнь..."
        },
        {
            "#": "260",
            "String": "И если кто-то тебе изрядно насолил, то мы можем помочь насолить ему."
        },
        {
            "#": "261",
            "String": "О, что, кто-то насыпал тебе перцу? Ну, ничего, мы тут можем подсобить.<br><br>Итак, наши ребята могут прорваться в базы Коалиции и \"подправить\" информацию касательно некоторых персон в <clr>Рейнджерском Корпусе<clrEnd>.<br><br>Но, конечно, не забывай, что тебе придётся расщедриться на рюмочку втыкиллы парням - примерно так <0> cr."
        },
        {
            "#": "262",
            "String": "Итак, перед тобой - весь список участников Корпуса рейнджеров.<br>Выбирай!"
        },
        {
            "#": "263",
            "String": "Отлично! Наши молодчики в кратчайшие сроки подредактируют информацию об этом индивидууме.<br><br>Ну а пока можешь выпить немного янвелба в нашем баре."
        },
        {
            "#": "264",
            "String": "Не, не сегодня, отбой"
        },
        {
            "#": "265",
            "String": "Ну, давай-ка поищем среди рейнджеров кого-нибудь..."
        },
        {
            "#": "266",
            "String": "на корабле твоего напарника мы не нашли"
        },
        {
            "#": "267",
            "String": "на корабле наёмника мы не нашли"
        },
        {
            "#": "268",
            "String": "на корабле повстанца мы не нашли"
        },
        {
            "#": "269",
            "String": "на корабле спецагента мы не нашли"
        },
        {
            "#": "270",
            "String": "в твоём транклюкаторе мы не нашли"
        },
        {
            "#": "271",
            "String": "мы не нашли у тебя на корабле"
        },
        {
            "#": "272",
            "String": "за"
        },
        {
            "#": "273",
            "String": "пп."
        },
        {
            "#": "274",
            "String": "К тому же, им потребуется <clr>протоплазма<clrEnd>."
        },
        {
            "#": "275",
            "String": "Имейте в виду, что для проведения работ нам необходимы <clr>ноды<clrEnd> прямо здесь. Мы можем взять их из трюма вашего корабля или со склада, но никак не с вашего нод-счёта."
        },
        {
            "#": "276",
            "String": "нд."
        },
        {
            "#": "277",
            "String": "К тому же, им потребуются ноды."
        },
        {
            "#": "278",
            "String": "<color=220,20,20>отсутствует</color>"
        },
        {
            "#": "279",
            "String": "млн км)"
        },
        {
            "#": "280",
            "String": "ед. урона на расстоянии"
        },
        {
            "#": "281",
            "String": "т. на расстоянии"
        },
        {
            "#": "282",
            "String": "ед. урона"
        },
        {
            "#": "283",
            "String": "ед. топлива)"
        },
        {
            "#": "284",
            "String": "<0>"
        },
        {
            "#": "285",
            "String": "Я хотел бы забрать модули из своего хранилища на Центре Рейнджеров"
        },
        {
            "#": "286",
            "String": "Ба, да ведь... Это всамделишные учёные Коалиции? А что, уже помиловали?"
        },
        {
            "#": "287",
            "String": "Помиловали?<br><br>Не сказать, чтобы за ними кто-то гонялся. Умники, они ведь такие: им неважно, кто над душой стоит, лишь бы возиться со своими штуками можно было. А борьбу с доминаторами, да и прочие разные изыскания бывают очень интересны и полезны. Вот и пригрелись у нас.<br><br>Так что, если тебе оно надо, то можешь залетать к нам: эти ребята тебе окажут полное содействие."
        },
        {
            "#": "288",
            "String": "Улучшить оборудование братана <0>"
        },
        {
            "#": "289",
            "String": "Улучшить оборудование наёмника <0>"
        },
        {
            "#": "290",
            "String": "Улучшить оборудование повстанца <0>"
        },
        {
            "#": "291",
            "String": "Улучшить оборудование рейнджера <0>"
        },
        {
            "#": "292",
            "String": "Улучшить оборудование спецагента <0>"
        },
        {
            "#": "293",
            "String": "Улучшить оборудование <0>"
        },
        {
            "#": "294",
            "String": "Сейчас составим списочек оборудования...<br>...<br>Выходит, запросик был, но <0> вещей, подходящих для улучшения. Извиняй."
        },
        {
            "#": "295",
            "String": "Сейчас составим списочек оборудования, подходящего для улучшения:<br><0><br><1><2><br>Ну и что из этого списка будем улучшать?"
        },
        {
            "#": "296",
            "String": "Мы можем задействовать в эксперименте над вашим оборудованием наших лучших специалистов, но их услуги обойдутся недёшево. Если ваши финансы их не потянут, то работать будут обычные специалисты. Ну а за малую сумму возьмутся улучшать только зелёные стажёры.<br>Исходя из стоимости такой вещи как <0> и процентных ставок наших специалистов, получается следующее:<br><1><br>Лучшие специалисты - <2> cr.<br>Обычные специалисты - <3> cr.<br>Стажёры - <4> cr.<br><5><br>Кому доверите работу, <Player>?"
        },
        {
            "#": "297",
            "String": "Мы можем задействовать в эксперименте над вашим оборудованием наших лучших специалистов, но их услуги обойдутся недёшево. <0> Если ваши финансы их не потянут, то работать будут обычные специалисты. Ну а за малую сумму возьмутся улучшать только зелёные стажёры.<br>Исходя из стоимости такой вещи как <1> и процентных ставок наших специалистов, получается следующее:<br><2><br>Лучшие специалисты - <3> cr. и <4> <5><br>Обычные специалисты - <6> cr. и <7> <8><br>Стажёры - <9> cr. и <10> <11><br><12><br><13>Кому доверите работу, <Player>?"
        },
        {
            "#": "298",
            "String": "Ого, похвально! Знаешь, сколько моих корешей слоняется по нашей станции без дела? Дать бы им плазмошашку, да корабль, да на линию огня... Ух! В два счёта бы всех победили.<br><br>Но вот со всем, кроме линии огня, у нас туго. Так что если ты возьмёшь на себя материальную часть, всё остальное мы сами предоставим."
        },
        {
            "#": "299",
            "String": "Итак, первым делом выбери <clr>корпус<clrEnd>, на котором будет летать будущий сокол. Учти - кандидатов у нас масса, и чтобы не создавать неразбериху, мы просто подберём пилота под <clr>производителя<clrEnd> выбранного тобой корпуса, лады?"
        },
        {
            "#": "300",
            "String": "Перейти к изменению оборудования пилота"
        },
        {
            "#": "301",
            "String": "Ну, как знаешь, дружок. Но если надумаешь - заглядывай, наши ребята куда решительнее тебя."
        },
        {
            "#": "302",
            "String": ""
        },
        {
            "#": "303",
            "String": "Нет, пожалуй, в другой раз"
        },
        {
            "#": "304",
            "String": "Ясно..."
        },
        {
            "#": "305",
            "String": "Пожалуй, я выберу что-нибудь ещё"
        },
        {
            "#": "306",
            "String": "Отказываюсь платить по таким грабительским расценкам!"
        },
        {
            "#": "307",
            "String": "Я согласен, валяйте"
        },
        {
            "#": "308",
            "String": "Отлично, наши матерые спецы закончили работу, теперь твое оборудование - <0> - стало еще круче."
        },
        {
            "#": "309",
            "String": "Отлично, наши матерые спецы закончили работу, теперь твое оборудование - <0> - стало еще круче. Может, есть желание еще что-то подкрутить, пока рука легкая?"
        },
        {
            "#": "310",
            "String": "Да, конечно"
        },
        {
            "#": "311",
            "String": "Нет уж, хватит с меня"
        },
        {
            "#": "312",
            "String": "Дело-то хорошее, чего бы и не помочь?"
        },
        {
            "#": "313",
            "String": "В другой раз"
        },
        {
            "#": "314",
            "String": "Давай в другой раз, ладно?"
        },
        {
            "#": "315",
            "String": "Прекращайте сборку!"
        },
        {
            "#": "316",
            "String": "Отлично"
        },
        {
            "#": "317",
            "String": "Я хотел бы подготовить ещё одного пилота"
        },
        {
            "#": "318",
            "String": "Хочу получить улучшенные артефакты"
        },
        {
            "#": "319",
            "String": "Я хочу улучшить свои артефакты"
        }
    ]
}